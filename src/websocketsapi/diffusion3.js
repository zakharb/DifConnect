// v6.9.0
!(function (e) {
    if ("object" == typeof exports && "undefined" != typeof module) module.exports = e();
    else if ("function" == typeof define && define.amd) define([], e);
    else {
        ("undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this).diffusion = e();
    }
})(function () {
    var e = function (e) {
            var t;
            return function (r) {
                return t || e((t = { exports: {}, parent: r }), t.exports), t.exports;
            };
        },
        t = e(function (e, t) {
            "use strict";
            var n =
                    (this && this.__assign) ||
                    function () {
                        return (n =
                            Object.assign ||
                            function (e) {
                                for (var t, r = 1, n = arguments.length; r < n; r++) for (var o in (t = arguments[r])) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);
                                return e;
                            }).apply(this, arguments);
                    },
                o =
                    (this && this.__rest) ||
                    function (e, t) {
                        var r = {};
                        for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && t.indexOf(n) < 0 && (r[n] = e[n]);
                        if (null != e && "function" == typeof Object.getOwnPropertySymbols) {
                            var o = 0;
                            for (n = Object.getOwnPropertySymbols(e); o < n.length; o++) t.indexOf(n[o]) < 0 && Object.prototype.propertyIsEnumerable.call(e, n[o]) && (r[n[o]] = e[n[o]]);
                        }
                        return r;
                    };
            Object.defineProperty(t, "__esModule", { value: !0 }), (t.GatewayControlImpl = t.StatusLevel = void 0);
            var i = r({});
            !(function (e) {
                (e[(e.GREEN = 0)] = "GREEN"), (e[(e.AMBER = 1)] = "AMBER"), (e[(e.RED = 2)] = "RED");
            })(t.StatusLevel || (t.StatusLevel = {}));
            var s = (function () {
                function e(e) {
                    (this.internal = e),
                        (this.clientRequestsService = e.getServiceLocator().obtain(i.GATEWAY_CLIENT_REQUEST)),
                        (this.getClientsService = e.getServiceLocator().obtain(i.GET_GATEWAY_CLIENTS)),
                        (this.registerClientService = e.getServiceLocator().obtain(i.REGISTER_GATEWAY_CLIENT)),
                        (this.removeClientService = e.getServiceLocator().obtain(i.REMOVE_GATEWAY_CLIENT));
                }
                return (
                    (e.prototype.checkSessionId = function (e) {
                        if (e instanceof _h.SessionId) return e;
                        if ("string" == typeof e) return _h.SessionId.fromString(e);
                        if (null === e) throw Error("Session ID must be a string or instance of SessionId, but was null");
                        throw Error("Session ID must be a string or instance of SessionId, but was of type: " + typeof e);
                    }),
                    (e.prototype.checkClientKey = function (e) {
                        if (null == e || "object" != typeof e) throw Error("clientKey must be a non-null object");
                        if (null === e.type || void 0 === e.type) throw Error("clientKey type must not be null or undefined");
                        if (null === e.id || void 0 === e.id) throw Error("clientKey id must not be null or undefined");
                        return e;
                    }),
                    (e.prototype.checkOperationName = function (e) {
                        return this.checkStringArgument(e, "Operation name");
                    }),
                    (e.prototype.checkStringArgument = function (e, t) {
                        if ("string" == typeof e) return e;
                        if (null === e) throw Error(t + " must be a string, but was null");
                        throw Error(t + " must be a string, but was of type: " + typeof e);
                    }),
                    (e.prototype.checkServiceId = function (e) {
                        return { name: this.checkStringArgument(e.name, "Service ID name"), type: this.checkStringArgument(e.type, "Service ID type") };
                    }),
                    (e.prototype.checkServiceHandle = function (e) {
                        return n(n({}, this.checkServiceId(e)), { sessionId: this.checkSessionId(e.sessionId) });
                    }),
                    (e.prototype.sessionContextTransformer = function (e) {
                        return function (t) {
                            return n(n({}, t), { id: n(n({}, t.id), { sessionId: e }) });
                        };
                    }),
                    (e.prototype.getConfiguration = function (e) {
                        var t = this,
                            r = this.checkSessionId(e);
                        return new Promise(function (e, n) {
                            t.internal.checkConnected(n) &&
                                t.clientRequestsService.send(new gE.GatewayClientGetConfigurationRequest(r), function (t, r) {
                                    t ? n(t) : e(r);
                                });
                        });
                    }),
                    (e.prototype.getStatus = function (e) {
                        var t = this,
                            r = this.checkSessionId(e);
                        return new Promise(function (e, n) {
                            t.internal.checkConnected(n) &&
                                t.clientRequestsService.send(new ME.GatewayClientGetStatusRequest(r), function (t, r) {
                                    t ? n(t) : e(r);
                                });
                        });
                    }),
                    (e.prototype.getClients = function () {
                        var e = this;
                        return new Promise(function (t, r) {
                            e.internal.checkConnected(r) &&
                                e.getClientsService.send(null, function (e, n) {
                                    e ? r(e) : t(n);
                                });
                        });
                    }),
                    (e.prototype.registerClient = function (e) {
                        var t = this,
                            r = this.checkClientKey(e);
                        return new Promise(function (e, n) {
                            t.internal.checkConnected(n) &&
                                t.registerClientService.send(r, function (t) {
                                    t ? n(t) : e();
                                });
                        });
                    }),
                    (e.prototype.removeClient = function (e) {
                        var t = this,
                            r = this.checkClientKey(e);
                        return new Promise(function (e, n) {
                            t.internal.checkConnected(n) &&
                                t.removeClientService.send(r, function (t) {
                                    t ? n(t) : e();
                                });
                        });
                    }),
                    (e.prototype.getOperations = function (e) {
                        var t = this,
                            r = this.checkSessionId(e);
                        return new Promise(function (e, n) {
                            t.internal.checkConnected(n) &&
                                t.clientRequestsService.send(new VE.GatewayClientGetOperationsRequest(r), function (t, r) {
                                    t ? n(t) : e(r);
                                });
                        });
                    }),
                    (e.prototype.getOperationDetail = function (e, t) {
                        var r = this,
                            n = this.checkSessionId(e),
                            o = this.checkOperationName(t);
                        return new Promise(function (e, t) {
                            r.internal.checkConnected(t) &&
                                r.clientRequestsService.send(new qE.GatewayClientGetOperationDetailRequest(n, o), function (r, n) {
                                    r ? t(r) : e(n);
                                });
                        });
                    }),
                    (e.prototype.invokeOperation = function (e, t, r) {
                        var n = this,
                            o = this.checkSessionId(e),
                            i = this.checkOperationName(t),
                            s = null === r ? void 0 : r;
                        return new Promise(function (e, t) {
                            n.internal.checkConnected(t) &&
                                n.clientRequestsService.send(new HE.GatewayClientInvokeOperationRequest(o, i, s), function (r, n) {
                                    r ? t(r) : e(n);
                                });
                        });
                    }),
                    (e.prototype.getServiceTypes = function (e) {
                        var t = this,
                            r = this.checkSessionId(e);
                        return new Promise(function (e, n) {
                            t.internal.checkConnected(n) &&
                                t.clientRequestsService.send(new RE.GatewayClientGetServiceTypesRequest(r), function (t, r) {
                                    t ? n(t) : e(r.serviceTypes);
                                });
                        });
                    }),
                    (e.prototype.getServices = function (e) {
                        var t = this,
                            r = this.checkSessionId(e);
                        return new Promise(function (e, n) {
                            t.internal.checkConnected(n) &&
                                t.clientRequestsService.send(new PE.GatewayClientGetServicesRequest(r), function (o, i) {
                                    if (o) n(o);
                                    else {
                                        var s = t.sessionContextTransformer(r);
                                        e(i.services.map(s));
                                    }
                                });
                        });
                    }),
                    (e.prototype.addService = function (e, t, r, n) {
                        var o = this,
                            i = this.checkSessionId(e),
                            s = { id: this.checkServiceId(t), description: this.checkStringArgument(r, "Service description"), configuration: this.checkStringArgument(n, "Service configuration") };
                        return new Promise(function (e, t) {
                            o.internal.checkConnected(t) &&
                                o.clientRequestsService.send(new wE.GatewayClientAddServiceRequest(i, s), function (r, n) {
                                    if (r) t(r);
                                    else {
                                        var s = o.sessionContextTransformer(i);
                                        e(s(n.service));
                                    }
                                });
                        });
                    }),
                    (e.prototype.updateService = function (e, t, r) {
                        var n = this,
                            i = this.checkServiceHandle(e),
                            s = i.sessionId,
                            a = o(i, ["sessionId"]);
                        if (null == t && null == r) return Promise.reject(new Error("Missing parameter: you must provide configuration or description (or both) when calling updateService"));
                        var u = { id: a, description: t, configuration: r };
                        return new Promise(function (e, t) {
                            n.internal.checkConnected(t) &&
                                n.clientRequestsService.send(new DE.GatewayClientUpdateServiceRequest(s, u), function (r, o) {
                                    if (r) t(r);
                                    else {
                                        var i = n.sessionContextTransformer(s);
                                        e(i(o.service));
                                    }
                                });
                        });
                    }),
                    (e.prototype.removeService = function (e) {
                        var t = this,
                            r = this.checkServiceHandle(e),
                            n = r.sessionId,
                            i = o(r, ["sessionId"]);
                        return new Promise(function (e, r) {
                            t.internal.checkConnected(r) &&
                                t.clientRequestsService.send(new JE.GatewayClientRemoveServiceRequest(n, i), function (t, n) {
                                    t ? r(t) : e();
                                });
                        });
                    }),
                    (e.prototype.getServiceStatus = function (e) {
                        var t = this,
                            r = this.checkServiceHandle(e),
                            n = r.sessionId,
                            i = o(r, ["sessionId"]);
                        return new Promise(function (e, r) {
                            t.internal.checkConnected(r) &&
                                t.clientRequestsService.send(new uw.GatewayServiceGetStatusRequest(n, i), function (t, n) {
                                    t ? r(t) : e(n);
                                });
                        });
                    }),
                    (e.prototype.getServiceConfiguration = function (e) {
                        var t = this,
                            r = this.checkServiceHandle(e),
                            n = r.sessionId,
                            i = o(r, ["sessionId"]);
                        return new Promise(function (e, r) {
                            t.internal.checkConnected(r) &&
                                t.clientRequestsService.send(new ZE.GatewayServiceGetConfigurationRequest(n, i), function (t, n) {
                                    t ? r(t) : e(n);
                                });
                        });
                    }),
                    (e.prototype.getServiceOperations = function (e) {
                        var t = this,
                            r = this.checkServiceHandle(e),
                            n = r.sessionId,
                            i = o(r, ["sessionId"]);
                        return new Promise(function (e, r) {
                            t.internal.checkConnected(r) &&
                                t.clientRequestsService.send(new iw.GatewayServiceGetOperationsRequest(n, i), function (t, n) {
                                    t ? r(t) : e(n);
                                });
                        });
                    }),
                    (e.prototype.getServiceOperationDetail = function (e, t) {
                        var r = this,
                            n = this.checkServiceHandle(e),
                            i = n.sessionId,
                            s = o(n, ["sessionId"]),
                            a = this.checkOperationName(t);
                        return new Promise(function (e, t) {
                            r.internal.checkConnected(t) &&
                                r.clientRequestsService.send(new rw.GatewayServiceGetOperationDetailRequest(i, s, a), function (r, n) {
                                    r ? t(r) : e(n);
                                });
                        });
                    }),
                    (e.prototype.invokeServiceOperation = function (e, t, r) {
                        var n = this,
                            i = this.checkServiceHandle(e),
                            s = i.sessionId,
                            a = o(i, ["sessionId"]),
                            u = this.checkOperationName(t),
                            c = null === r ? void 0 : r;
                        return new Promise(function (e, t) {
                            n.internal.checkConnected(t) &&
                                n.clientRequestsService.send(new pw.GatewayServiceInvokeOperationRequest(s, a, u, c), function (r, n) {
                                    r ? t(r) : e(n);
                                });
                        });
                    }),
                    e
                );
            })();
            t.GatewayControlImpl = s;
        }),
        r = e(function (e, t) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 }), (t.GET_GATEWAY_CLIENTS = t.REMOVE_GATEWAY_CLIENT = t.REGISTER_GATEWAY_CLIENT = t.GATEWAY_CLIENT_REQUEST = void 0);
            var r = n({});
            (t.GATEWAY_CLIENT_REQUEST = { id: 170, request: Rw.GatewayClientRequestSerialiser, response: r.GatewayResponseSerialiser }),
                (t.REGISTER_GATEWAY_CLIENT = { id: 173, request: dw.GatewayClientKeySerialiser, response: Md.NullSerialiser }),
                (t.REMOVE_GATEWAY_CLIENT = { id: 174, request: dw.GatewayClientKeySerialiser, response: Md.NullSerialiser }),
                (t.GET_GATEWAY_CLIENTS = { id: 175, request: Md.NullSerialiser, response: Sw.GatewayClientListSerialiser });
        }),
        n = e(function (e, t) {
            "use strict";
            var r,
                n =
                    (this && this.__extends) ||
                    ((r = function (e, t) {
                        return (r =
                            Object.setPrototypeOf ||
                            ({ __proto__: [] } instanceof Array &&
                                function (e, t) {
                                    e.__proto__ = t;
                                }) ||
                            function (e, t) {
                                for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                            })(e, t);
                    }),
                    function (e, t) {
                        if ("function" != typeof t && null !== t) throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
                        function n() {
                            this.constructor = e;
                        }
                        r(e, t), (e.prototype = null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
                    });
            Object.defineProperty(t, "__esModule", { value: !0 }), (t.GatewayResponseSerialiser = void 0);
            var i = o({}),
                s = (function (e) {
                    function t() {
                        return (null !== e && e.apply(this, arguments)) || this;
                    }
                    return (
                        n(t, e),
                        (t.prototype.read = function (e) {
                            var t = Rf.read(e, EE.GatewayRequestType);
                            switch (t) {
                                case EE.GatewayRequestType.GET_CONFIGURATION:
                                case EE.GatewayRequestType.GET_SERVICE_CONFIGURATION:
                                    return new Nw.GetConfigurationResponse(t, tu.readByte(e), tu.readString(e), tu.readString(e));
                                case EE.GatewayRequestType.GET_STATUS:
                                case EE.GatewayRequestType.GET_SERVICE_STATUS:
                                    return new Mw.GetStatusResponse(t, tu.readCollection(e, i.StatusItemSerialiser.read));
                                case EE.GatewayRequestType.GET_OPERATIONS:
                                case EE.GatewayRequestType.GET_SERVICE_OPERATIONS:
                                    return new xw.GetOperationsResponse(t, tu.readCollection(e, kw.GatewayOperationSerialiser.read));
                                case EE.GatewayRequestType.GET_OPERATION_DETAIL:
                                case EE.GatewayRequestType.GET_SERVICE_OPERATION_DETAIL:
                                    return new Lw.GetOperationDetailResponse(t, tu.readString(e), tu.readByte(e) ? tu.readString(e) : void 0, tu.readByte(e) ? tu.readString(e) : void 0);
                                case EE.GatewayRequestType.INVOKE_OPERATION:
                                case EE.GatewayRequestType.INVOKE_SERVICE_OPERATION:
                                    return new qw.InvokeOperationResponse(t, tu.readByte(e) ? tu.readString(e) : void 0);
                                case EE.GatewayRequestType.ADD_SERVICE:
                                case EE.GatewayRequestType.UPDATE_SERVICE:
                                    return new Gw.AddUpdateServiceResponse(t, gw.GatewayServiceSerialiser.read(e));
                                case EE.GatewayRequestType.GET_SERVICES:
                                    return new Qw.GetServicesResponse(tu.readCollection(e, gw.GatewayServiceSerialiser.read));
                                case EE.GatewayRequestType.GET_SERVICE_TYPES:
                                    return new Yw.GetServiceTypesResponse(tu.readCollection(e, Kw.GatewayServiceTypeSerialiser.read));
                                case EE.GatewayRequestType.REMOVE_SERVICE:
                                    return { type: t };
                                default:
                                    throw new Rw.UnknownGatewayRequestTypeError(t);
                            }
                        }),
                        t
                    );
                })(ou.AbstractSerialiser);
            t.GatewayResponseSerialiser = new s();
        }),
        o = e(function (e, r) {
            "use strict";
            var n,
                o =
                    (this && this.__extends) ||
                    ((n = function (e, t) {
                        return (n =
                            Object.setPrototypeOf ||
                            ({ __proto__: [] } instanceof Array &&
                                function (e, t) {
                                    e.__proto__ = t;
                                }) ||
                            function (e, t) {
                                for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                            })(e, t);
                    }),
                    function (e, t) {
                        if ("function" != typeof t && null !== t) throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
                        function r() {
                            this.constructor = e;
                        }
                        n(e, t), (e.prototype = null === t ? Object.create(t) : ((r.prototype = t.prototype), new r()));
                    });
            Object.defineProperty(r, "__esModule", { value: !0 }), (r.StatusItemSerialiser = void 0);
            var i = t({}),
                s = (function (e) {
                    function t() {
                        return (null !== e && e.apply(this, arguments)) || this;
                    }
                    return (
                        o(t, e),
                        (t.prototype.read = function (e) {
                            return { level: Rf.read(e, i.StatusLevel), timestamp: tu.readInt64(e), title: tu.readString(e), description: tu.readString(e) };
                        }),
                        t
                    );
                })(ou.AbstractSerialiser);
            r.StatusItemSerialiser = new s();
        }),
        i = e(function (e, t) {
            (function (e) {
                (function () {
                    "use strict";
                    Object.defineProperty(t, "__esModule", { value: !0 }), (t.DataTypes = void 0);
                    var r = s({}),
                        n = (function () {
                            function t() {
                                (this.recordv2Impl = new Ep.RecordV2DataTypeImpl()),
                                    (this.binaryImpl = new Vc.BinaryDataTypeImpl()),
                                    (this.stringImpl = new jl.StringDataTypeImpl()),
                                    (this.doubleImpl = new Il.DoubleDataTypeImpl()),
                                    (this.int64Impl = new Pl.Int64DataTypeImpl()),
                                    (this.jsonImpl = new ml.JSONDataTypeImpl()),
                                    (this.anyImpl = new Ju.AnyDataTypeImpl());
                            }
                            return (
                                (t.prototype.binary = function () {
                                    return this.binaryImpl;
                                }),
                                (t.prototype.string = function () {
                                    return this.stringImpl;
                                }),
                                (t.prototype.double = function () {
                                    return this.doubleImpl;
                                }),
                                (t.prototype.int64 = function () {
                                    return this.int64Impl;
                                }),
                                (t.prototype.json = function () {
                                    return this.jsonImpl;
                                }),
                                (t.prototype.recordv2 = function () {
                                    return this.recordv2Impl;
                                }),
                                (t.prototype.any = function () {
                                    return this.anyImpl;
                                }),
                                (t.prototype.timeseries = function (e) {
                                    return r.TimeSeriesEventDataType.create(e);
                                }),
                                (t.prototype.getByName = function (e) {
                                    switch (e.toLowerCase()) {
                                        case "json":
                                            return this.json();
                                        case "int64":
                                            return this.int64();
                                        case "binary":
                                            return this.binary();
                                        case "string":
                                            return this.string();
                                        case "double":
                                            return this.double();
                                        case "record_v2":
                                            return this.recordv2();
                                        default:
                                            return;
                                    }
                                }),
                                (t.prototype.getByValue = function (t) {
                                    return t === ku.TopicTypeEnum.BINARY || t instanceof kc.BinaryImpl || e.isBuffer(t)
                                        ? this.binary()
                                        : t === ku.TopicTypeEnum.JSON || t instanceof dl.JSONImpl || t.constructor === Object || "boolean" == typeof t
                                        ? this.json()
                                        : t === ku.TopicTypeEnum.STRING || "string" == typeof t
                                        ? this.string()
                                        : t === ku.TopicTypeEnum.DOUBLE || "number" == typeof t
                                        ? this.double()
                                        : t === ku.TopicTypeEnum.INT64 || t instanceof Xu.Int64Impl
                                        ? this.int64()
                                        : t === ku.TopicTypeEnum.RECORD_V2 || t instanceof np.RecordV2Impl
                                        ? this.recordv2()
                                        : void 0;
                                }),
                                (t.prototype.get = function (e) {
                                    var t;
                                    return "string" == typeof e && (t = this.getByName(e)), t || (t = this.getByValue(e)), t || (t = this.getByClassSafely(e)), t || null;
                                }),
                                (t.prototype.getChecked = function (e) {
                                    if (null == e) throw new Error("No data type for " + e);
                                    if (
                                        e instanceof Ep.RecordV2DataTypeImpl ||
                                        e instanceof Vc.BinaryDataTypeImpl ||
                                        e instanceof jl.StringDataTypeImpl ||
                                        e instanceof Il.DoubleDataTypeImpl ||
                                        e instanceof Pl.Int64DataTypeImpl ||
                                        e instanceof ml.JSONDataTypeImpl
                                    )
                                        return e;
                                    var t = this.get(e);
                                    if (null === t) throw new Error("No data type for " + e);
                                    return t;
                                }),
                                (t.prototype.getValueClassChecked = function (e) {
                                    switch (this.getChecked(e)) {
                                        case this.jsonImpl:
                                            return dl.JSONImpl;
                                        case this.binaryImpl:
                                            return kc.BinaryImpl;
                                        case this.stringImpl:
                                            return String;
                                        case this.doubleImpl:
                                            return Number;
                                        case this.int64Impl:
                                            return Xu.Int64Impl;
                                        case this.recordv2Impl:
                                            return np.RecordV2Impl;
                                        default:
                                            return;
                                    }
                                }),
                                (t.prototype.getByClassSafely = function (e) {
                                    switch (e) {
                                        case dl.JSONImpl:
                                            return this.jsonImpl;
                                        case kc.BinaryImpl:
                                            return this.binaryImpl;
                                        case String:
                                            return this.stringImpl;
                                        case Number:
                                            return this.doubleImpl;
                                        case Xu.Int64Impl:
                                            return this.int64Impl;
                                        case np.RecordV2Impl:
                                            return this.recordv2Impl;
                                        default:
                                            return;
                                    }
                                }),
                                (t.prototype.getByClass = function (e) {
                                    var t = this.getByClassSafely(e);
                                    if (t) return t;
                                    throw new Error("No data type for " + e);
                                }),
                                t
                            );
                        })(),
                        o = new n();
                    t.DataTypes = o;
                }.call(this));
            }.call(this, { isBuffer: ac }));
        }),
        s = e(function (e, t) {
            "use strict";
            var r,
                n =
                    (this && this.__extends) ||
                    ((r = function (e, t) {
                        return (r =
                            Object.setPrototypeOf ||
                            ({ __proto__: [] } instanceof Array &&
                                function (e, t) {
                                    e.__proto__ = t;
                                }) ||
                            function (e, t) {
                                for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                            })(e, t);
                    }),
                    function (e, t) {
                        if ("function" != typeof t && null !== t) throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
                        function n() {
                            this.constructor = e;
                        }
                        r(e, t), (e.prototype = null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
                    });
            Object.defineProperty(t, "__esModule", { value: !0 }), (t.TimeSeriesEventDataType = void 0);
            var o,
                s = i({});
            function a(e, t) {
                var r = new wu.BufferOutputStream();
                t.isEditEvent ? (tu.writeByte(r, o.EDIT_EVENT), bp.EventMetadataImplSerialiser.write(r, t.originalEvent)) : tu.writeByte(r, o.ORIGINAL_EVENT), bp.EventMetadataImplSerialiser.write(r, t);
                var n = e(t.value);
                return tu.writeBytes(r, n.$buffer), r.getBuffer();
            }
            function u(e, t) {
                var r = new _u.BufferInputStream(t.$buffer),
                    n = tu.readByte(r);
                switch (n) {
                    case o.ORIGINAL_EVENT:
                        return (function (e, t) {
                            var r = bp.EventMetadataImplSerialiser.read(t),
                                n = e(tu.readBytes(t));
                            return gp.EventImpl.create(r, r, n);
                        })(e, r);
                    case o.EDIT_EVENT:
                        return (function (e, t) {
                            var r = bp.EventMetadataImplSerialiser.read(t),
                                n = bp.EventMetadataImplSerialiser.read(t),
                                o = e(tu.readBytes(t));
                            return gp.EventImpl.create(n, r, o);
                        })(e, r);
                    default:
                        throw new Error("Unrecognised event type: " + n);
                }
            }
            !(function (e) {
                (e[(e.ORIGINAL_EVENT = 0)] = "ORIGINAL_EVENT"), (e[(e.EDIT_EVENT = 1)] = "EDIT_EVENT");
            })(o || (o = {}));
            var c = (function (e) {
                function t(t, r, n, o) {
                    var i = this,
                        c = s.DataTypes.getByName(r),
                        l =
                            void 0 !== c
                                ? [
                                      {
                                          name: c.valueClass.toString(),
                                          convert: function (e, t, r) {
                                              var o = new jc.BytesImpl(e, t, r);
                                              return u(n, o).value;
                                          },
                                      },
                                  ]
                                : [];
                    return (
                        ((i =
                            e.call(
                                this,
                                t,
                                gp.EventImpl,
                                jc.BytesImpl,
                                function (e) {
                                    return (function (e, t) {
                                        if (!t) throw new Error("Cannot convert null event to Bytes");
                                        return new jc.BytesImpl(a(e, t));
                                    })(o, e);
                                },
                                function (e) {
                                    return u(n, e);
                                },
                                l,
                                !0
                            ) || this).valueToBytes = o),
                        (i.valueTypeName = r),
                        i
                    );
                }
                return (
                    n(t, e),
                    (t.create = function (e) {
                        return new t("timeseriesevent-" + e.name(), e.name(), e.readValue.bind(e), e.toBytes.bind(e));
                    }),
                    (t.prototype.writeValue = function (e) {
                        return a(this.valueToBytes, e);
                    }),
                    (t.prototype.validate = function () {}),
                    (t.prototype.from = function (e) {
                        return e instanceof ic.BufferSlice ? e : this.valueToBytes(e.value);
                    }),
                    t
                );
            })(xc.AbstractDataType);
            t.TimeSeriesEventDataType = c;
        }),
        a = e(function (e, t) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 }), (t.decompressSync = void 0);
            var r = require("zlib");
            t.decompressSync = function (e) {
                return r.inflateSync(e);
            };
        }),
        u = e(function (e, t) {
            (function (e) {
                (function () {
                    "use strict";
                    (t.Buffer = r), (t.INSPECT_MAX_BYTES = 50);
                    function e(e) {
                        if (e > 2147483647) throw new RangeError('The value "' + e + '" is invalid for option "size"');
                        var t = new Uint8Array(e);
                        return (t.__proto__ = r.prototype), t;
                    }
                    function r(e, t, r) {
                        if ("number" == typeof e) {
                            if ("string" == typeof t) throw new TypeError('The "string" argument must be of type string. Received type number');
                            return i(e);
                        }
                        return n(e, t, r);
                    }
                    function n(t, n, o) {
                        if ("string" == typeof t)
                            return (function (t, n) {
                                ("string" == typeof n && "" !== n) || (n = "utf8");
                                if (!r.isEncoding(n)) throw new TypeError("Unknown encoding: " + n);
                                var o = 0 | u(t, n),
                                    i = e(o),
                                    s = i.write(t, n);
                                s !== o && (i = i.slice(0, s));
                                return i;
                            })(t, n);
                        if (ArrayBuffer.isView(t)) return s(t);
                        if (null == t) throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof t);
                        if (D(t, ArrayBuffer) || (t && D(t.buffer, ArrayBuffer)))
                            return (function (e, t, n) {
                                if (t < 0 || e.byteLength < t) throw new RangeError('"offset" is outside of buffer bounds');
                                if (e.byteLength < t + (n || 0)) throw new RangeError('"length" is outside of buffer bounds');
                                var o;
                                o = void 0 === t && void 0 === n ? new Uint8Array(e) : void 0 === n ? new Uint8Array(e, t) : new Uint8Array(e, t, n);
                                return (o.__proto__ = r.prototype), o;
                            })(t, n, o);
                        if ("number" == typeof t) throw new TypeError('The "value" argument must not be of type number. Received type number');
                        var i = t.valueOf && t.valueOf();
                        if (null != i && i !== t) return r.from(i, n, o);
                        var c = (function (t) {
                            if (r.isBuffer(t)) {
                                var n = 0 | a(t.length),
                                    o = e(n);
                                return 0 === o.length || t.copy(o, 0, 0, n), o;
                            }
                            if (void 0 !== t.length) return "number" != typeof t.length || x(t.length) ? e(0) : s(t);
                            if ("Buffer" === t.type && Array.isArray(t.data)) return s(t.data);
                        })(t);
                        if (c) return c;
                        if ("undefined" != typeof Symbol && null != Symbol.toPrimitive && "function" == typeof t[Symbol.toPrimitive]) return r.from(t[Symbol.toPrimitive]("string"), n, o);
                        throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof t);
                    }
                    function o(e) {
                        if ("number" != typeof e) throw new TypeError('"size" argument must be of type number');
                        if (e < 0) throw new RangeError('The value "' + e + '" is invalid for option "size"');
                    }
                    function i(t) {
                        return o(t), e(t < 0 ? 0 : 0 | a(t));
                    }
                    function s(t) {
                        for (var r = t.length < 0 ? 0 : 0 | a(t.length), n = e(r), o = 0; o < r; o += 1) n[o] = 255 & t[o];
                        return n;
                    }
                    function a(e) {
                        if (e >= 2147483647) throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + (2147483647).toString(16) + " bytes");
                        return 0 | e;
                    }
                    function u(e, t) {
                        if (r.isBuffer(e)) return e.length;
                        if (ArrayBuffer.isView(e) || D(e, ArrayBuffer)) return e.byteLength;
                        if ("string" != typeof e) throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type ' + typeof e);
                        var n = e.length,
                            o = arguments.length > 2 && !0 === arguments[2];
                        if (!o && 0 === n) return 0;
                        for (var i = !1; ; )
                            switch (t) {
                                case "ascii":
                                case "latin1":
                                case "binary":
                                    return n;
                                case "utf8":
                                case "utf-8":
                                    return M(e).length;
                                case "ucs2":
                                case "ucs-2":
                                case "utf16le":
                                case "utf-16le":
                                    return 2 * n;
                                case "hex":
                                    return n >>> 1;
                                case "base64":
                                    return j(e).length;
                                default:
                                    if (i) return o ? -1 : M(e).length;
                                    (t = ("" + t).toLowerCase()), (i = !0);
                            }
                    }
                    function c(e, t, r) {
                        var n = !1;
                        if (((void 0 === t || t < 0) && (t = 0), t > this.length)) return "";
                        if (((void 0 === r || r > this.length) && (r = this.length), r <= 0)) return "";
                        if ((r >>>= 0) <= (t >>>= 0)) return "";
                        for (e || (e = "utf8"); ; )
                            switch (e) {
                                case "hex":
                                    return g(this, t, r);
                                case "utf8":
                                case "utf-8":
                                    return w(this, t, r);
                                case "ascii":
                                    return m(this, t, r);
                                case "latin1":
                                case "binary":
                                    return T(this, t, r);
                                case "base64":
                                    return E(this, t, r);
                                case "ucs2":
                                case "ucs-2":
                                case "utf16le":
                                case "utf-16le":
                                    return O(this, t, r);
                                default:
                                    if (n) throw new TypeError("Unknown encoding: " + e);
                                    (e = (e + "").toLowerCase()), (n = !0);
                            }
                    }
                    function l(e, t, r) {
                        var n = e[t];
                        (e[t] = e[r]), (e[r] = n);
                    }
                    function p(e, t, n, o, i) {
                        if (0 === e.length) return -1;
                        if (("string" == typeof n ? ((o = n), (n = 0)) : n > 2147483647 ? (n = 2147483647) : n < -2147483648 && (n = -2147483648), x((n = +n)) && (n = i ? 0 : e.length - 1), n < 0 && (n = e.length + n), n >= e.length)) {
                            if (i) return -1;
                            n = e.length - 1;
                        } else if (n < 0) {
                            if (!i) return -1;
                            n = 0;
                        }
                        if (("string" == typeof t && (t = r.from(t, o)), r.isBuffer(t))) return 0 === t.length ? -1 : f(e, t, n, o, i);
                        if ("number" == typeof t) return (t &= 255), "function" == typeof Uint8Array.prototype.indexOf ? (i ? Uint8Array.prototype.indexOf.call(e, t, n) : Uint8Array.prototype.lastIndexOf.call(e, t, n)) : f(e, [t], n, o, i);
                        throw new TypeError("val must be string, number or Buffer");
                    }
                    function f(e, t, r, n, o) {
                        var i,
                            s = 1,
                            a = e.length,
                            u = t.length;
                        if (void 0 !== n && ("ucs2" === (n = String(n).toLowerCase()) || "ucs-2" === n || "utf16le" === n || "utf-16le" === n)) {
                            if (e.length < 2 || t.length < 2) return -1;
                            (s = 2), (a /= 2), (u /= 2), (r /= 2);
                        }
                        function c(e, t) {
                            return 1 === s ? e[t] : e.readUInt16BE(t * s);
                        }
                        if (o) {
                            var l = -1;
                            for (i = r; i < a; i++)
                                if (c(e, i) === c(t, -1 === l ? 0 : i - l)) {
                                    if ((-1 === l && (l = i), i - l + 1 === u)) return l * s;
                                } else -1 !== l && (i -= i - l), (l = -1);
                        } else
                            for (r + u > a && (r = a - u), i = r; i >= 0; i--) {
                                for (var p = !0, f = 0; f < u; f++)
                                    if (c(e, i + f) !== c(t, f)) {
                                        p = !1;
                                        break;
                                    }
                                if (p) return i;
                            }
                        return -1;
                    }
                    function h(e, t, r, n) {
                        r = Number(r) || 0;
                        var o = e.length - r;
                        n ? (n = Number(n)) > o && (n = o) : (n = o);
                        var i = t.length;
                        n > i / 2 && (n = i / 2);
                        for (var s = 0; s < n; ++s) {
                            var a = parseInt(t.substr(2 * s, 2), 16);
                            if (x(a)) return s;
                            e[r + s] = a;
                        }
                        return s;
                    }
                    function d(e, t, r, n) {
                        return L(M(t, e.length - r), e, r, n);
                    }
                    function y(e, t, r, n) {
                        return L(
                            (function (e) {
                                for (var t = [], r = 0; r < e.length; ++r) t.push(255 & e.charCodeAt(r));
                                return t;
                            })(t),
                            e,
                            r,
                            n
                        );
                    }
                    function v(e, t, r, n) {
                        return y(e, t, r, n);
                    }
                    function S(e, t, r, n) {
                        return L(j(t), e, r, n);
                    }
                    function _(e, t, r, n) {
                        return L(
                            (function (e, t) {
                                for (var r, n, o, i = [], s = 0; s < e.length && !((t -= 2) < 0); ++s) (r = e.charCodeAt(s)), (n = r >> 8), (o = r % 256), i.push(o), i.push(n);
                                return i;
                            })(t, e.length - r),
                            e,
                            r,
                            n
                        );
                    }
                    function E(e, t, r) {
                        return 0 === t && r === e.length ? Ya.fromByteArray(e) : Ya.fromByteArray(e.slice(t, r));
                    }
                    function w(e, t, r) {
                        r = Math.min(e.length, r);
                        for (var n = [], o = t; o < r; ) {
                            var i,
                                s,
                                a,
                                u,
                                c = e[o],
                                l = null,
                                p = c > 239 ? 4 : c > 223 ? 3 : c > 191 ? 2 : 1;
                            if (o + p <= r)
                                switch (p) {
                                    case 1:
                                        c < 128 && (l = c);
                                        break;
                                    case 2:
                                        128 == (192 & (i = e[o + 1])) && (u = ((31 & c) << 6) | (63 & i)) > 127 && (l = u);
                                        break;
                                    case 3:
                                        (i = e[o + 1]), (s = e[o + 2]), 128 == (192 & i) && 128 == (192 & s) && (u = ((15 & c) << 12) | ((63 & i) << 6) | (63 & s)) > 2047 && (u < 55296 || u > 57343) && (l = u);
                                        break;
                                    case 4:
                                        (i = e[o + 1]),
                                            (s = e[o + 2]),
                                            (a = e[o + 3]),
                                            128 == (192 & i) && 128 == (192 & s) && 128 == (192 & a) && (u = ((15 & c) << 18) | ((63 & i) << 12) | ((63 & s) << 6) | (63 & a)) > 65535 && u < 1114112 && (l = u);
                                }
                            null === l ? ((l = 65533), (p = 1)) : l > 65535 && ((l -= 65536), n.push(((l >>> 10) & 1023) | 55296), (l = 56320 | (1023 & l))), n.push(l), (o += p);
                        }
                        return (function (e) {
                            var t = e.length;
                            if (t <= 4096) return String.fromCharCode.apply(String, e);
                            var r = "",
                                n = 0;
                            for (; n < t; ) r += String.fromCharCode.apply(String, e.slice(n, (n += 4096)));
                            return r;
                        })(n);
                    }
                    (r.TYPED_ARRAY_SUPPORT = (function () {
                        try {
                            var e = new Uint8Array(1);
                            return (
                                (e.__proto__ = {
                                    __proto__: Uint8Array.prototype,
                                    foo: function () {
                                        return 42;
                                    },
                                }),
                                42 === e.foo()
                            );
                        } catch (e) {
                            return !1;
                        }
                    })()),
                        r.TYPED_ARRAY_SUPPORT ||
                            "undefined" == typeof console ||
                            "function" != typeof console.error ||
                            console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),
                        Object.defineProperty(r.prototype, "parent", {
                            enumerable: !0,
                            get: function () {
                                if (r.isBuffer(this)) return this.buffer;
                            },
                        }),
                        Object.defineProperty(r.prototype, "offset", {
                            enumerable: !0,
                            get: function () {
                                if (r.isBuffer(this)) return this.byteOffset;
                            },
                        }),
                        "undefined" != typeof Symbol && null != Symbol.species && r[Symbol.species] === r && Object.defineProperty(r, Symbol.species, { value: null, configurable: !0, enumerable: !1, writable: !1 }),
                        (r.poolSize = 8192),
                        (r.from = function (e, t, r) {
                            return n(e, t, r);
                        }),
                        (r.prototype.__proto__ = Uint8Array.prototype),
                        (r.__proto__ = Uint8Array),
                        (r.alloc = function (t, r, n) {
                            return (function (t, r, n) {
                                return o(t), t <= 0 ? e(t) : void 0 !== r ? ("string" == typeof n ? e(t).fill(r, n) : e(t).fill(r)) : e(t);
                            })(t, r, n);
                        }),
                        (r.allocUnsafe = function (e) {
                            return i(e);
                        }),
                        (r.allocUnsafeSlow = function (e) {
                            return i(e);
                        }),
                        (r.isBuffer = function (e) {
                            return null != e && !0 === e._isBuffer && e !== r.prototype;
                        }),
                        (r.compare = function (e, t) {
                            if ((D(e, Uint8Array) && (e = r.from(e, e.offset, e.byteLength)), D(t, Uint8Array) && (t = r.from(t, t.offset, t.byteLength)), !r.isBuffer(e) || !r.isBuffer(t)))
                                throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
                            if (e === t) return 0;
                            for (var n = e.length, o = t.length, i = 0, s = Math.min(n, o); i < s; ++i)
                                if (e[i] !== t[i]) {
                                    (n = e[i]), (o = t[i]);
                                    break;
                                }
                            return n < o ? -1 : o < n ? 1 : 0;
                        }),
                        (r.isEncoding = function (e) {
                            switch (String(e).toLowerCase()) {
                                case "hex":
                                case "utf8":
                                case "utf-8":
                                case "ascii":
                                case "latin1":
                                case "binary":
                                case "base64":
                                case "ucs2":
                                case "ucs-2":
                                case "utf16le":
                                case "utf-16le":
                                    return !0;
                                default:
                                    return !1;
                            }
                        }),
                        (r.concat = function (e, t) {
                            if (!Array.isArray(e)) throw new TypeError('"list" argument must be an Array of Buffers');
                            if (0 === e.length) return r.alloc(0);
                            var n;
                            if (void 0 === t) for (t = 0, n = 0; n < e.length; ++n) t += e[n].length;
                            var o = r.allocUnsafe(t),
                                i = 0;
                            for (n = 0; n < e.length; ++n) {
                                var s = e[n];
                                if ((D(s, Uint8Array) && (s = r.from(s)), !r.isBuffer(s))) throw new TypeError('"list" argument must be an Array of Buffers');
                                s.copy(o, i), (i += s.length);
                            }
                            return o;
                        }),
                        (r.byteLength = u),
                        (r.prototype._isBuffer = !0),
                        (r.prototype.swap16 = function () {
                            var e = this.length;
                            if (e % 2 != 0) throw new RangeError("Buffer size must be a multiple of 16-bits");
                            for (var t = 0; t < e; t += 2) l(this, t, t + 1);
                            return this;
                        }),
                        (r.prototype.swap32 = function () {
                            var e = this.length;
                            if (e % 4 != 0) throw new RangeError("Buffer size must be a multiple of 32-bits");
                            for (var t = 0; t < e; t += 4) l(this, t, t + 3), l(this, t + 1, t + 2);
                            return this;
                        }),
                        (r.prototype.swap64 = function () {
                            var e = this.length;
                            if (e % 8 != 0) throw new RangeError("Buffer size must be a multiple of 64-bits");
                            for (var t = 0; t < e; t += 8) l(this, t, t + 7), l(this, t + 1, t + 6), l(this, t + 2, t + 5), l(this, t + 3, t + 4);
                            return this;
                        }),
                        (r.prototype.toString = function () {
                            var e = this.length;
                            return 0 === e ? "" : 0 === arguments.length ? w(this, 0, e) : c.apply(this, arguments);
                        }),
                        (r.prototype.toLocaleString = r.prototype.toString),
                        (r.prototype.equals = function (e) {
                            if (!r.isBuffer(e)) throw new TypeError("Argument must be a Buffer");
                            return this === e || 0 === r.compare(this, e);
                        }),
                        (r.prototype.inspect = function () {
                            var e = "",
                                r = t.INSPECT_MAX_BYTES;
                            return (
                                (e = this.toString("hex", 0, r)
                                    .replace(/(.{2})/g, "$1 ")
                                    .trim()),
                                this.length > r && (e += " ... "),
                                "<Buffer " + e + ">"
                            );
                        }),
                        (r.prototype.compare = function (e, t, n, o, i) {
                            if ((D(e, Uint8Array) && (e = r.from(e, e.offset, e.byteLength)), !r.isBuffer(e))) throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type ' + typeof e);
                            if ((void 0 === t && (t = 0), void 0 === n && (n = e ? e.length : 0), void 0 === o && (o = 0), void 0 === i && (i = this.length), t < 0 || n > e.length || o < 0 || i > this.length))
                                throw new RangeError("out of range index");
                            if (o >= i && t >= n) return 0;
                            if (o >= i) return -1;
                            if (t >= n) return 1;
                            if (this === e) return 0;
                            for (var s = (i >>>= 0) - (o >>>= 0), a = (n >>>= 0) - (t >>>= 0), u = Math.min(s, a), c = this.slice(o, i), l = e.slice(t, n), p = 0; p < u; ++p)
                                if (c[p] !== l[p]) {
                                    (s = c[p]), (a = l[p]);
                                    break;
                                }
                            return s < a ? -1 : a < s ? 1 : 0;
                        }),
                        (r.prototype.includes = function (e, t, r) {
                            return -1 !== this.indexOf(e, t, r);
                        }),
                        (r.prototype.indexOf = function (e, t, r) {
                            return p(this, e, t, r, !0);
                        }),
                        (r.prototype.lastIndexOf = function (e, t, r) {
                            return p(this, e, t, r, !1);
                        }),
                        (r.prototype.write = function (e, t, r, n) {
                            if (void 0 === t) (n = "utf8"), (r = this.length), (t = 0);
                            else if (void 0 === r && "string" == typeof t) (n = t), (r = this.length), (t = 0);
                            else {
                                if (!isFinite(t)) throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
                                (t >>>= 0), isFinite(r) ? ((r >>>= 0), void 0 === n && (n = "utf8")) : ((n = r), (r = void 0));
                            }
                            var o = this.length - t;
                            if (((void 0 === r || r > o) && (r = o), (e.length > 0 && (r < 0 || t < 0)) || t > this.length)) throw new RangeError("Attempt to write outside buffer bounds");
                            n || (n = "utf8");
                            for (var i = !1; ; )
                                switch (n) {
                                    case "hex":
                                        return h(this, e, t, r);
                                    case "utf8":
                                    case "utf-8":
                                        return d(this, e, t, r);
                                    case "ascii":
                                        return y(this, e, t, r);
                                    case "latin1":
                                    case "binary":
                                        return v(this, e, t, r);
                                    case "base64":
                                        return S(this, e, t, r);
                                    case "ucs2":
                                    case "ucs-2":
                                    case "utf16le":
                                    case "utf-16le":
                                        return _(this, e, t, r);
                                    default:
                                        if (i) throw new TypeError("Unknown encoding: " + n);
                                        (n = ("" + n).toLowerCase()), (i = !0);
                                }
                        }),
                        (r.prototype.toJSON = function () {
                            return { type: "Buffer", data: Array.prototype.slice.call(this._arr || this, 0) };
                        });
                    function m(e, t, r) {
                        var n = "";
                        r = Math.min(e.length, r);
                        for (var o = t; o < r; ++o) n += String.fromCharCode(127 & e[o]);
                        return n;
                    }
                    function T(e, t, r) {
                        var n = "";
                        r = Math.min(e.length, r);
                        for (var o = t; o < r; ++o) n += String.fromCharCode(e[o]);
                        return n;
                    }
                    function g(e, t, r) {
                        var n = e.length;
                        (!t || t < 0) && (t = 0), (!r || r < 0 || r > n) && (r = n);
                        for (var o = "", i = t; i < r; ++i) o += A(e[i]);
                        return o;
                    }
                    function O(e, t, r) {
                        for (var n = e.slice(t, r), o = "", i = 0; i < n.length; i += 2) o += String.fromCharCode(n[i] + 256 * n[i + 1]);
                        return o;
                    }
                    function I(e, t, r) {
                        if (e % 1 != 0 || e < 0) throw new RangeError("offset is not uint");
                        if (e + t > r) throw new RangeError("Trying to access beyond buffer length");
                    }
                    function R(e, t, n, o, i, s) {
                        if (!r.isBuffer(e)) throw new TypeError('"buffer" argument must be a Buffer instance');
                        if (t > i || t < s) throw new RangeError('"value" argument is out of bounds');
                        if (n + o > e.length) throw new RangeError("Index out of range");
                    }
                    function b(e, t, r, n, o, i) {
                        if (r + n > e.length) throw new RangeError("Index out of range");
                        if (r < 0) throw new RangeError("Index out of range");
                    }
                    function C(e, t, r, n, o) {
                        return (t = +t), (r >>>= 0), o || b(e, 0, r, 4), eu.write(e, t, r, n, 23, 4), r + 4;
                    }
                    function P(e, t, r, n, o) {
                        return (t = +t), (r >>>= 0), o || b(e, 0, r, 8), eu.write(e, t, r, n, 52, 8), r + 8;
                    }
                    (r.prototype.slice = function (e, t) {
                        var n = this.length;
                        (e = ~~e) < 0 ? (e += n) < 0 && (e = 0) : e > n && (e = n), (t = void 0 === t ? n : ~~t) < 0 ? (t += n) < 0 && (t = 0) : t > n && (t = n), t < e && (t = e);
                        var o = this.subarray(e, t);
                        return (o.__proto__ = r.prototype), o;
                    }),
                        (r.prototype.readUIntLE = function (e, t, r) {
                            (e >>>= 0), (t >>>= 0), r || I(e, t, this.length);
                            for (var n = this[e], o = 1, i = 0; ++i < t && (o *= 256); ) n += this[e + i] * o;
                            return n;
                        }),
                        (r.prototype.readUIntBE = function (e, t, r) {
                            (e >>>= 0), (t >>>= 0), r || I(e, t, this.length);
                            for (var n = this[e + --t], o = 1; t > 0 && (o *= 256); ) n += this[e + --t] * o;
                            return n;
                        }),
                        (r.prototype.readUInt8 = function (e, t) {
                            return (e >>>= 0), t || I(e, 1, this.length), this[e];
                        }),
                        (r.prototype.readUInt16LE = function (e, t) {
                            return (e >>>= 0), t || I(e, 2, this.length), this[e] | (this[e + 1] << 8);
                        }),
                        (r.prototype.readUInt16BE = function (e, t) {
                            return (e >>>= 0), t || I(e, 2, this.length), (this[e] << 8) | this[e + 1];
                        }),
                        (r.prototype.readUInt32LE = function (e, t) {
                            return (e >>>= 0), t || I(e, 4, this.length), (this[e] | (this[e + 1] << 8) | (this[e + 2] << 16)) + 16777216 * this[e + 3];
                        }),
                        (r.prototype.readUInt32BE = function (e, t) {
                            return (e >>>= 0), t || I(e, 4, this.length), 16777216 * this[e] + ((this[e + 1] << 16) | (this[e + 2] << 8) | this[e + 3]);
                        }),
                        (r.prototype.readIntLE = function (e, t, r) {
                            (e >>>= 0), (t >>>= 0), r || I(e, t, this.length);
                            for (var n = this[e], o = 1, i = 0; ++i < t && (o *= 256); ) n += this[e + i] * o;
                            return n >= (o *= 128) && (n -= Math.pow(2, 8 * t)), n;
                        }),
                        (r.prototype.readIntBE = function (e, t, r) {
                            (e >>>= 0), (t >>>= 0), r || I(e, t, this.length);
                            for (var n = t, o = 1, i = this[e + --n]; n > 0 && (o *= 256); ) i += this[e + --n] * o;
                            return i >= (o *= 128) && (i -= Math.pow(2, 8 * t)), i;
                        }),
                        (r.prototype.readInt8 = function (e, t) {
                            return (e >>>= 0), t || I(e, 1, this.length), 128 & this[e] ? -1 * (255 - this[e] + 1) : this[e];
                        }),
                        (r.prototype.readInt16LE = function (e, t) {
                            (e >>>= 0), t || I(e, 2, this.length);
                            var r = this[e] | (this[e + 1] << 8);
                            return 32768 & r ? 4294901760 | r : r;
                        }),
                        (r.prototype.readInt16BE = function (e, t) {
                            (e >>>= 0), t || I(e, 2, this.length);
                            var r = this[e + 1] | (this[e] << 8);
                            return 32768 & r ? 4294901760 | r : r;
                        }),
                        (r.prototype.readInt32LE = function (e, t) {
                            return (e >>>= 0), t || I(e, 4, this.length), this[e] | (this[e + 1] << 8) | (this[e + 2] << 16) | (this[e + 3] << 24);
                        }),
                        (r.prototype.readInt32BE = function (e, t) {
                            return (e >>>= 0), t || I(e, 4, this.length), (this[e] << 24) | (this[e + 1] << 16) | (this[e + 2] << 8) | this[e + 3];
                        }),
                        (r.prototype.readFloatLE = function (e, t) {
                            return (e >>>= 0), t || I(e, 4, this.length), eu.read(this, e, !0, 23, 4);
                        }),
                        (r.prototype.readFloatBE = function (e, t) {
                            return (e >>>= 0), t || I(e, 4, this.length), eu.read(this, e, !1, 23, 4);
                        }),
                        (r.prototype.readDoubleLE = function (e, t) {
                            return (e >>>= 0), t || I(e, 8, this.length), eu.read(this, e, !0, 52, 8);
                        }),
                        (r.prototype.readDoubleBE = function (e, t) {
                            return (e >>>= 0), t || I(e, 8, this.length), eu.read(this, e, !1, 52, 8);
                        }),
                        (r.prototype.writeUIntLE = function (e, t, r, n) {
                            ((e = +e), (t >>>= 0), (r >>>= 0), n) || R(this, e, t, r, Math.pow(2, 8 * r) - 1, 0);
                            var o = 1,
                                i = 0;
                            for (this[t] = 255 & e; ++i < r && (o *= 256); ) this[t + i] = (e / o) & 255;
                            return t + r;
                        }),
                        (r.prototype.writeUIntBE = function (e, t, r, n) {
                            ((e = +e), (t >>>= 0), (r >>>= 0), n) || R(this, e, t, r, Math.pow(2, 8 * r) - 1, 0);
                            var o = r - 1,
                                i = 1;
                            for (this[t + o] = 255 & e; --o >= 0 && (i *= 256); ) this[t + o] = (e / i) & 255;
                            return t + r;
                        }),
                        (r.prototype.writeUInt8 = function (e, t, r) {
                            return (e = +e), (t >>>= 0), r || R(this, e, t, 1, 255, 0), (this[t] = 255 & e), t + 1;
                        }),
                        (r.prototype.writeUInt16LE = function (e, t, r) {
                            return (e = +e), (t >>>= 0), r || R(this, e, t, 2, 65535, 0), (this[t] = 255 & e), (this[t + 1] = e >>> 8), t + 2;
                        }),
                        (r.prototype.writeUInt16BE = function (e, t, r) {
                            return (e = +e), (t >>>= 0), r || R(this, e, t, 2, 65535, 0), (this[t] = e >>> 8), (this[t + 1] = 255 & e), t + 2;
                        }),
                        (r.prototype.writeUInt32LE = function (e, t, r) {
                            return (e = +e), (t >>>= 0), r || R(this, e, t, 4, 4294967295, 0), (this[t + 3] = e >>> 24), (this[t + 2] = e >>> 16), (this[t + 1] = e >>> 8), (this[t] = 255 & e), t + 4;
                        }),
                        (r.prototype.writeUInt32BE = function (e, t, r) {
                            return (e = +e), (t >>>= 0), r || R(this, e, t, 4, 4294967295, 0), (this[t] = e >>> 24), (this[t + 1] = e >>> 16), (this[t + 2] = e >>> 8), (this[t + 3] = 255 & e), t + 4;
                        }),
                        (r.prototype.writeIntLE = function (e, t, r, n) {
                            if (((e = +e), (t >>>= 0), !n)) {
                                var o = Math.pow(2, 8 * r - 1);
                                R(this, e, t, r, o - 1, -o);
                            }
                            var i = 0,
                                s = 1,
                                a = 0;
                            for (this[t] = 255 & e; ++i < r && (s *= 256); ) e < 0 && 0 === a && 0 !== this[t + i - 1] && (a = 1), (this[t + i] = (((e / s) >> 0) - a) & 255);
                            return t + r;
                        }),
                        (r.prototype.writeIntBE = function (e, t, r, n) {
                            if (((e = +e), (t >>>= 0), !n)) {
                                var o = Math.pow(2, 8 * r - 1);
                                R(this, e, t, r, o - 1, -o);
                            }
                            var i = r - 1,
                                s = 1,
                                a = 0;
                            for (this[t + i] = 255 & e; --i >= 0 && (s *= 256); ) e < 0 && 0 === a && 0 !== this[t + i + 1] && (a = 1), (this[t + i] = (((e / s) >> 0) - a) & 255);
                            return t + r;
                        }),
                        (r.prototype.writeInt8 = function (e, t, r) {
                            return (e = +e), (t >>>= 0), r || R(this, e, t, 1, 127, -128), e < 0 && (e = 255 + e + 1), (this[t] = 255 & e), t + 1;
                        }),
                        (r.prototype.writeInt16LE = function (e, t, r) {
                            return (e = +e), (t >>>= 0), r || R(this, e, t, 2, 32767, -32768), (this[t] = 255 & e), (this[t + 1] = e >>> 8), t + 2;
                        }),
                        (r.prototype.writeInt16BE = function (e, t, r) {
                            return (e = +e), (t >>>= 0), r || R(this, e, t, 2, 32767, -32768), (this[t] = e >>> 8), (this[t + 1] = 255 & e), t + 2;
                        }),
                        (r.prototype.writeInt32LE = function (e, t, r) {
                            return (e = +e), (t >>>= 0), r || R(this, e, t, 4, 2147483647, -2147483648), (this[t] = 255 & e), (this[t + 1] = e >>> 8), (this[t + 2] = e >>> 16), (this[t + 3] = e >>> 24), t + 4;
                        }),
                        (r.prototype.writeInt32BE = function (e, t, r) {
                            return (
                                (e = +e), (t >>>= 0), r || R(this, e, t, 4, 2147483647, -2147483648), e < 0 && (e = 4294967295 + e + 1), (this[t] = e >>> 24), (this[t + 1] = e >>> 16), (this[t + 2] = e >>> 8), (this[t + 3] = 255 & e), t + 4
                            );
                        }),
                        (r.prototype.writeFloatLE = function (e, t, r) {
                            return C(this, e, t, !0, r);
                        }),
                        (r.prototype.writeFloatBE = function (e, t, r) {
                            return C(this, e, t, !1, r);
                        }),
                        (r.prototype.writeDoubleLE = function (e, t, r) {
                            return P(this, e, t, !0, r);
                        }),
                        (r.prototype.writeDoubleBE = function (e, t, r) {
                            return P(this, e, t, !1, r);
                        }),
                        (r.prototype.copy = function (e, t, n, o) {
                            if (!r.isBuffer(e)) throw new TypeError("argument should be a Buffer");
                            if ((n || (n = 0), o || 0 === o || (o = this.length), t >= e.length && (t = e.length), t || (t = 0), o > 0 && o < n && (o = n), o === n)) return 0;
                            if (0 === e.length || 0 === this.length) return 0;
                            if (t < 0) throw new RangeError("targetStart out of bounds");
                            if (n < 0 || n >= this.length) throw new RangeError("Index out of range");
                            if (o < 0) throw new RangeError("sourceEnd out of bounds");
                            o > this.length && (o = this.length), e.length - t < o - n && (o = e.length - t + n);
                            var i = o - n;
                            if (this === e && "function" == typeof Uint8Array.prototype.copyWithin) this.copyWithin(t, n, o);
                            else if (this === e && n < t && t < o) for (var s = i - 1; s >= 0; --s) e[s + t] = this[s + n];
                            else Uint8Array.prototype.set.call(e, this.subarray(n, o), t);
                            return i;
                        }),
                        (r.prototype.fill = function (e, t, n, o) {
                            if ("string" == typeof e) {
                                if (("string" == typeof t ? ((o = t), (t = 0), (n = this.length)) : "string" == typeof n && ((o = n), (n = this.length)), void 0 !== o && "string" != typeof o))
                                    throw new TypeError("encoding must be a string");
                                if ("string" == typeof o && !r.isEncoding(o)) throw new TypeError("Unknown encoding: " + o);
                                if (1 === e.length) {
                                    var i = e.charCodeAt(0);
                                    (("utf8" === o && i < 128) || "latin1" === o) && (e = i);
                                }
                            } else "number" == typeof e && (e &= 255);
                            if (t < 0 || this.length < t || this.length < n) throw new RangeError("Out of range index");
                            if (n <= t) return this;
                            var s;
                            if (((t >>>= 0), (n = void 0 === n ? this.length : n >>> 0), e || (e = 0), "number" == typeof e)) for (s = t; s < n; ++s) this[s] = e;
                            else {
                                var a = r.isBuffer(e) ? e : r.from(e, o),
                                    u = a.length;
                                if (0 === u) throw new TypeError('The value "' + e + '" is invalid for argument "value"');
                                for (s = 0; s < n - t; ++s) this[s + t] = a[s % u];
                            }
                            return this;
                        });
                    var N = /[^+/0-9A-Za-z-_]/g;
                    function A(e) {
                        return e < 16 ? "0" + e.toString(16) : e.toString(16);
                    }
                    function M(e, t) {
                        var r;
                        t = t || 1 / 0;
                        for (var n = e.length, o = null, i = [], s = 0; s < n; ++s) {
                            if ((r = e.charCodeAt(s)) > 55295 && r < 57344) {
                                if (!o) {
                                    if (r > 56319) {
                                        (t -= 3) > -1 && i.push(239, 191, 189);
                                        continue;
                                    }
                                    if (s + 1 === n) {
                                        (t -= 3) > -1 && i.push(239, 191, 189);
                                        continue;
                                    }
                                    o = r;
                                    continue;
                                }
                                if (r < 56320) {
                                    (t -= 3) > -1 && i.push(239, 191, 189), (o = r);
                                    continue;
                                }
                                r = 65536 + (((o - 55296) << 10) | (r - 56320));
                            } else o && (t -= 3) > -1 && i.push(239, 191, 189);
                            if (((o = null), r < 128)) {
                                if ((t -= 1) < 0) break;
                                i.push(r);
                            } else if (r < 2048) {
                                if ((t -= 2) < 0) break;
                                i.push((r >> 6) | 192, (63 & r) | 128);
                            } else if (r < 65536) {
                                if ((t -= 3) < 0) break;
                                i.push((r >> 12) | 224, ((r >> 6) & 63) | 128, (63 & r) | 128);
                            } else {
                                if (!(r < 1114112)) throw new Error("Invalid code point");
                                if ((t -= 4) < 0) break;
                                i.push((r >> 18) | 240, ((r >> 12) & 63) | 128, ((r >> 6) & 63) | 128, (63 & r) | 128);
                            }
                        }
                        return i;
                    }
                    function j(e) {
                        return Ya.toByteArray(
                            (function (e) {
                                if ((e = (e = e.split("=")[0]).trim().replace(N, "")).length < 2) return "";
                                for (; e.length % 4 != 0; ) e += "=";
                                return e;
                            })(e)
                        );
                    }
                    function L(e, t, r, n) {
                        for (var o = 0; o < n && !(o + r >= t.length || o >= e.length); ++o) t[o + r] = e[o];
                        return o;
                    }
                    function D(e, t) {
                        return e instanceof t || (null != e && null != e.constructor && null != e.constructor.name && e.constructor.name === t.name);
                    }
                    function x(e) {
                        return e != e;
                    }
                }.call(this));
            }.call(this, u({}).Buffer));
        }),
        c = {};
    (function (e) {
        (function () {
            var t = function (e) {
                return e && e.Math == Math && e;
            };
            c =
                t("object" == typeof globalThis && globalThis) ||
                t("object" == typeof window && window) ||
                t("object" == typeof self && self) ||
                t("object" == typeof e && e) ||
                (function () {
                    return this;
                })() ||
                Function("return this")();
        }.call(this));
    }.call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}));
    var l = function (e) {
            try {
                return !!e();
            } catch (e) {
                return !0;
            }
        },
        p = !l(function () {
            return (
                7 !=
                Object.defineProperty({}, 1, {
                    get: function () {
                        return 7;
                    },
                })[1]
            );
        }),
        f = {},
        h = {}.propertyIsEnumerable,
        d = Object.getOwnPropertyDescriptor,
        y = d && !h.call({ 1: 2 }, 1);
    f.f = y
        ? function (e) {
              var t = d(this, e);
              return !!t && t.enumerable;
          }
        : h;
    var v,
        S,
        _ = function (e, t) {
            return { enumerable: !(1 & e), configurable: !(2 & e), writable: !(4 & e), value: t };
        },
        E = {}.toString,
        w = function (e) {
            return E.call(e).slice(8, -1);
        },
        m = "".split,
        T = l(function () {
            return !Object("z").propertyIsEnumerable(0);
        })
            ? function (e) {
                  return "String" == w(e) ? m.call(e, "") : Object(e);
              }
            : Object,
        g = function (e) {
            if (null == e) throw TypeError("Can't call method on " + e);
            return e;
        },
        O = function (e) {
            return T(g(e));
        },
        I = function (e) {
            return "object" == typeof e ? null !== e : "function" == typeof e;
        },
        R = function (e) {
            return "function" == typeof e ? e : void 0;
        },
        b = function (e, t) {
            return arguments.length < 2 ? R(c[e]) : c[e] && c[e][t];
        },
        C = b("navigator", "userAgent") || "",
        P = c.process,
        N = c.Deno,
        A = (P && P.versions) || (N && N.version),
        M = A && A.v8;
    M ? (S = (v = M.split("."))[0] < 4 ? 1 : v[0] + v[1]) : C && (!(v = C.match(/Edge\/(\d+)/)) || v[1] >= 74) && (v = C.match(/Chrome\/(\d+)/)) && (S = v[1]);
    var j,
        L = S && +S,
        D =
            !!Object.getOwnPropertySymbols &&
            !l(function () {
                var e = Symbol();
                return !String(e) || !(Object(e) instanceof Symbol) || (!Symbol.sham && L && L < 41);
            }),
        x = D && !Symbol.sham && "symbol" == typeof Symbol.iterator,
        B = x
            ? function (e) {
                  return "symbol" == typeof e;
              }
            : function (e) {
                  var t = b("Symbol");
                  return "function" == typeof t && Object(e) instanceof t;
              },
        q = function (e, t) {
            try {
                Object.defineProperty(c, e, { value: t, configurable: !0, writable: !0 });
            } catch (r) {
                c[e] = t;
            }
            return t;
        },
        U = c["__core-js_shared__"] || q("__core-js_shared__", {});
    (j = function (e, t) {
        return U[e] || (U[e] = void 0 !== t ? t : {});
    })("versions", []).push({ version: "3.16.2", mode: "global", copyright: "© 2021 Denis Pushkarev (zloirock.ru)" });
    var k = function (e) {
            return Object(g(e));
        },
        V = {}.hasOwnProperty,
        F =
            Object.hasOwn ||
            function (e, t) {
                return V.call(k(e), t);
            },
        G = 0,
        H = Math.random(),
        Y = function (e) {
            return "Symbol(" + String(void 0 === e ? "" : e) + ")_" + (++G + H).toString(36);
        },
        W = j("wks"),
        Q = c.Symbol,
        z = x ? Q : (Q && Q.withoutSetter) || Y,
        K = function (e) {
            return (F(W, e) && (D || "string" == typeof W[e])) || (D && F(Q, e) ? (W[e] = Q[e]) : (W[e] = z("Symbol." + e))), W[e];
        },
        J = K("toPrimitive"),
        $ = function (e, t) {
            if (!I(e) || B(e)) return e;
            var r,
                n = e[J];
            if (void 0 !== n) {
                if ((void 0 === t && (t = "default"), (r = n.call(e, t)), !I(r) || B(r))) return r;
                throw TypeError("Can't convert object to primitive value");
            }
            return (
                void 0 === t && (t = "number"),
                (function (e, t) {
                    var r, n;
                    if ("string" === t && "function" == typeof (r = e.toString) && !I((n = r.call(e)))) return n;
                    if ("function" == typeof (r = e.valueOf) && !I((n = r.call(e)))) return n;
                    if ("string" !== t && "function" == typeof (r = e.toString) && !I((n = r.call(e)))) return n;
                    throw TypeError("Can't convert object to primitive value");
                })(e, t)
            );
        },
        X = function (e) {
            var t = $(e, "string");
            return B(t) ? t : String(t);
        },
        Z = c.document,
        ee = I(Z) && I(Z.createElement),
        te = function (e) {
            return ee ? Z.createElement(e) : {};
        },
        re =
            !p &&
            !l(function () {
                return (
                    7 !=
                    Object.defineProperty(te("div"), "a", {
                        get: function () {
                            return 7;
                        },
                    }).a
                );
            }),
        ne = {},
        oe = Object.getOwnPropertyDescriptor;
    ne.f = p
        ? oe
        : function (e, t) {
              if (((e = O(e)), (t = X(t)), re))
                  try {
                      return oe(e, t);
                  } catch (e) {}
              if (F(e, t)) return _(!f.f.call(e, t), e[t]);
          };
    var ie = function (e) {
            if (!I(e)) throw TypeError(String(e) + " is not an object");
            return e;
        },
        se = {},
        ae = Object.defineProperty;
    se.f = p
        ? ae
        : function (e, t, r) {
              if ((ie(e), (t = X(t)), ie(r), re))
                  try {
                      return ae(e, t, r);
                  } catch (e) {}
              if ("get" in r || "set" in r) throw TypeError("Accessors not supported");
              return "value" in r && (e[t] = r.value), e;
          };
    var ue = p
            ? function (e, t, r) {
                  return se.f(e, t, _(1, r));
              }
            : function (e, t, r) {
                  return (e[t] = r), e;
              },
        ce = Function.toString;
    "function" != typeof U.inspectSource &&
        (U.inspectSource = function (e) {
            return ce.call(e);
        });
    var le,
        pe,
        fe,
        he = U.inspectSource,
        de = c.WeakMap,
        ye = "function" == typeof de && /native code/.test(he(de)),
        ve = j("keys"),
        Se = function (e) {
            return ve[e] || (ve[e] = Y(e));
        },
        _e = {},
        Ee = c.WeakMap;
    if (ye || U.state) {
        var we = U.state || (U.state = new Ee()),
            me = we.get,
            Te = we.has,
            ge = we.set;
        (le = function (e, t) {
            if (Te.call(we, e)) throw new TypeError("Object already initialized");
            return (t.facade = e), ge.call(we, e, t), t;
        }),
            (pe = function (e) {
                return me.call(we, e) || {};
            }),
            (fe = function (e) {
                return Te.call(we, e);
            });
    } else {
        var Oe = Se("state");
        (_e[Oe] = !0),
            (le = function (e, t) {
                if (F(e, Oe)) throw new TypeError("Object already initialized");
                return (t.facade = e), ue(e, Oe, t), t;
            }),
            (pe = function (e) {
                return F(e, Oe) ? e[Oe] : {};
            }),
            (fe = function (e) {
                return F(e, Oe);
            });
    }
    var Ie,
        Re = {
            set: le,
            get: pe,
            enforce: function (e) {
                return fe(e) ? pe(e) : le(e, {});
            },
            getterFor: function (e) {
                return function (t) {
                    var r;
                    if (!I(t) || (r = pe(t)).type !== e) throw TypeError("Incompatible receiver, " + e + " required");
                    return r;
                };
            },
        },
        be = Re.get,
        Ce = Re.enforce,
        Pe = String(String).split("String");
    (Ie = function (e, t, r, n) {
        var o,
            i = !!n && !!n.unsafe,
            s = !!n && !!n.enumerable,
            a = !!n && !!n.noTargetGet;
        "function" == typeof r && ("string" != typeof t || F(r, "name") || ue(r, "name", t), (o = Ce(r)).source || (o.source = Pe.join("string" == typeof t ? t : ""))),
            e !== c ? (i ? !a && e[t] && (s = !0) : delete e[t], s ? (e[t] = r) : ue(e, t, r)) : s ? (e[t] = r) : q(t, r);
    })(Function.prototype, "toString", function () {
        return ("function" == typeof this && be(this).source) || he(this);
    });
    var Ne = Math.ceil,
        Ae = Math.floor,
        Me = function (e) {
            return isNaN((e = +e)) ? 0 : (e > 0 ? Ae : Ne)(e);
        },
        je = Math.min,
        Le = function (e) {
            return e > 0 ? je(Me(e), 9007199254740991) : 0;
        },
        De = Math.max,
        xe = Math.min,
        Be = function (e, t) {
            var r = Me(e);
            return r < 0 ? De(r + t, 0) : xe(r, t);
        },
        qe = function (e) {
            return function (t, r, n) {
                var o,
                    i = O(t),
                    s = Le(i.length),
                    a = Be(n, s);
                if (e && r != r) {
                    for (; s > a; ) if ((o = i[a++]) != o) return !0;
                } else for (; s > a; a++) if ((e || a in i) && i[a] === r) return e || a || 0;
                return !e && -1;
            };
        },
        Ue = { includes: qe(!0), indexOf: qe(!1) },
        ke = Ue.indexOf,
        Ve = function (e, t) {
            var r,
                n = O(e),
                o = 0,
                i = [];
            for (r in n) !F(_e, r) && F(n, r) && i.push(r);
            for (; t.length > o; ) F(n, (r = t[o++])) && (~ke(i, r) || i.push(r));
            return i;
        },
        Fe = ["constructor", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "toLocaleString", "toString", "valueOf"],
        Ge = {},
        He = Fe.concat("length", "prototype");
    Ge.f =
        Object.getOwnPropertyNames ||
        function (e) {
            return Ve(e, He);
        };
    var Ye = {};
    Ye.f = Object.getOwnPropertySymbols;
    var We =
            b("Reflect", "ownKeys") ||
            function (e) {
                var t = Ge.f(ie(e)),
                    r = Ye.f;
                return r ? t.concat(r(e)) : t;
            },
        Qe = function (e, t) {
            for (var r = We(t), n = se.f, o = ne.f, i = 0; i < r.length; i++) {
                var s = r[i];
                F(e, s) || n(e, s, o(t, s));
            }
        },
        ze = /#|\.prototype\./,
        Ke = function (e, t) {
            var r = $e[Je(e)];
            return r == Ze || (r != Xe && ("function" == typeof t ? l(t) : !!t));
        },
        Je = (Ke.normalize = function (e) {
            return String(e).replace(ze, ".").toLowerCase();
        }),
        $e = (Ke.data = {}),
        Xe = (Ke.NATIVE = "N"),
        Ze = (Ke.POLYFILL = "P"),
        et = Ke,
        tt = ne.f,
        rt = function (e, t) {
            var r,
                n,
                o,
                i,
                s,
                a = e.target,
                u = e.global,
                l = e.stat;
            if ((r = u ? c : l ? c[a] || q(a, {}) : (c[a] || {}).prototype))
                for (n in t) {
                    if (((i = t[n]), (o = e.noTargetGet ? (s = tt(r, n)) && s.value : r[n]), !et(u ? n : a + (l ? "." : "#") + n, e.forced) && void 0 !== o)) {
                        if (typeof i == typeof o) continue;
                        Qe(i, o);
                    }
                    (e.sham || (o && o.sham)) && ue(i, "sham", !0), Ie(r, n, i, e);
                }
        },
        nt = function (e) {
            if ("function" != typeof e) throw TypeError(String(e) + " is not a function");
            return e;
        },
        ot = function (e, t, r) {
            if ((nt(e), void 0 === t)) return e;
            switch (r) {
                case 0:
                    return function () {
                        return e.call(t);
                    };
                case 1:
                    return function (r) {
                        return e.call(t, r);
                    };
                case 2:
                    return function (r, n) {
                        return e.call(t, r, n);
                    };
                case 3:
                    return function (r, n, o) {
                        return e.call(t, r, n, o);
                    };
            }
            return function () {
                return e.apply(t, arguments);
            };
        },
        it = function (e) {
            var t = e.return;
            if (void 0 !== t) return ie(t.call(e)).value;
        },
        st = function (e, t, r, n) {
            try {
                return n ? t(ie(r)[0], r[1]) : t(r);
            } catch (t) {
                throw (it(e), t);
            }
        },
        at = {},
        ut = K("iterator"),
        ct = Array.prototype,
        lt = function (e) {
            return void 0 !== e && (at.Array === e || ct[ut] === e);
        },
        pt = function (e, t, r) {
            var n = X(t);
            n in e ? se.f(e, n, _(0, r)) : (e[n] = r);
        },
        ft = {};
    ft[K("toStringTag")] = "z";
    var ht = "[object z]" === String(ft),
        dt = K("toStringTag"),
        yt =
            "Arguments" ==
            w(
                (function () {
                    return arguments;
                })()
            ),
        vt = ht
            ? w
            : function (e) {
                  var t, r, n;
                  return void 0 === e
                      ? "Undefined"
                      : null === e
                      ? "Null"
                      : "string" ==
                        typeof (r = (function (e, t) {
                            try {
                                return e[t];
                            } catch (e) {}
                        })((t = Object(e)), dt))
                      ? r
                      : yt
                      ? w(t)
                      : "Object" == (n = w(t)) && "function" == typeof t.callee
                      ? "Arguments"
                      : n;
              },
        St = K("iterator"),
        _t = function (e) {
            if (null != e) return e[St] || e["@@iterator"] || at[vt(e)];
        },
        Et = K("iterator"),
        wt = !1;
    try {
        var mt = 0,
            Tt = {
                next: function () {
                    return { done: !!mt++ };
                },
                return: function () {
                    wt = !0;
                },
            };
        (Tt[Et] = function () {
            return this;
        }),
            Array.from(Tt, function () {
                throw 2;
            });
    } catch (e) {}
    var gt = function (e, t) {
            if (!t && !wt) return !1;
            var r = !1;
            try {
                var n = {};
                (n[Et] = function () {
                    return {
                        next: function () {
                            return { done: (r = !0) };
                        },
                    };
                }),
                    e(n);
            } catch (e) {}
            return r;
        },
        Ot = !gt(function (e) {
            Array.from(e);
        });
    rt(
        { target: "Array", stat: !0, forced: Ot },
        {
            from: function (e) {
                var t,
                    r,
                    n,
                    o,
                    i,
                    s,
                    a = k(e),
                    u = "function" == typeof this ? this : Array,
                    c = arguments.length,
                    l = c > 1 ? arguments[1] : void 0,
                    p = void 0 !== l,
                    f = _t(a),
                    h = 0;
                if ((p && (l = ot(l, c > 2 ? arguments[2] : void 0, 2)), null == f || (u == Array && lt(f)))) for (r = new u((t = Le(a.length))); t > h; h++) (s = p ? l(a[h], h) : a[h]), pt(r, h, s);
                else for (i = (o = f.call(a)).next, r = new u(); !(n = i.call(o)).done; h++) (s = p ? st(o, l, [n.value, h], !0) : n.value), pt(r, h, s);
                return (r.length = h), r;
            },
        }
    );
    var It =
        Array.isArray ||
        function (e) {
            return "Array" == w(e);
        };
    rt({ target: "Array", stat: !0 }, { isArray: It });
    var Rt = l(function () {
        function e() {}
        return !(Array.of.call(e) instanceof e);
    });
    rt(
        { target: "Array", stat: !0, forced: Rt },
        {
            of: function () {
                for (var e = 0, t = arguments.length, r = new ("function" == typeof this ? this : Array)(t); t > e; ) pt(r, e, arguments[e++]);
                return (r.length = t), r;
            },
        }
    );
    var bt = K("species"),
        Ct = function (e) {
            var t;
            return It(e) && ("function" != typeof (t = e.constructor) || (t !== Array && !It(t.prototype)) ? I(t) && null === (t = t[bt]) && (t = void 0) : (t = void 0)), void 0 === t ? Array : t;
        },
        Pt = function (e, t) {
            return new (Ct(e))(0 === t ? 0 : t);
        },
        Nt = K("species"),
        At = function (e) {
            return (
                L >= 51 ||
                !l(function () {
                    var t = [];
                    return (
                        ((t.constructor = {})[Nt] = function () {
                            return { foo: 1 };
                        }),
                        1 !== t[e](Boolean).foo
                    );
                })
            );
        },
        Mt = K("isConcatSpreadable"),
        jt =
            L >= 51 ||
            !l(function () {
                var e = [];
                return (e[Mt] = !1), e.concat()[0] !== e;
            }),
        Lt = At("concat"),
        Dt = function (e) {
            if (!I(e)) return !1;
            var t = e[Mt];
            return void 0 !== t ? !!t : It(e);
        };
    rt(
        { target: "Array", proto: !0, forced: !jt || !Lt },
        {
            concat: function (e) {
                var t,
                    r,
                    n,
                    o,
                    i,
                    s = k(this),
                    a = Pt(s, 0),
                    u = 0;
                for (t = -1, n = arguments.length; t < n; t++)
                    if (Dt((i = -1 === t ? s : arguments[t]))) {
                        if (u + (o = Le(i.length)) > 9007199254740991) throw TypeError("Maximum allowed index exceeded");
                        for (r = 0; r < o; r++, u++) r in i && pt(a, u, i[r]);
                    } else {
                        if (u >= 9007199254740991) throw TypeError("Maximum allowed index exceeded");
                        pt(a, u++, i);
                    }
                return (a.length = u), a;
            },
        }
    );
    var xt,
        Bt = Math.min,
        qt =
            [].copyWithin ||
            function (e, t) {
                var r = k(this),
                    n = Le(r.length),
                    o = Be(e, n),
                    i = Be(t, n),
                    s = arguments.length > 2 ? arguments[2] : void 0,
                    a = Bt((void 0 === s ? n : Be(s, n)) - i, n - o),
                    u = 1;
                for (i < o && o < i + a && ((u = -1), (i += a - 1), (o += a - 1)); a-- > 0; ) i in r ? (r[o] = r[i]) : delete r[o], (o += u), (i += u);
                return r;
            },
        Ut =
            Object.keys ||
            function (e) {
                return Ve(e, Fe);
            },
        kt = p
            ? Object.defineProperties
            : function (e, t) {
                  ie(e);
                  for (var r, n = Ut(t), o = n.length, i = 0; o > i; ) se.f(e, (r = n[i++]), t[r]);
                  return e;
              },
        Vt = b("document", "documentElement"),
        Ft = Se("IE_PROTO"),
        Gt = function () {},
        Ht = function (e) {
            return "<script>" + e + "</script>";
        },
        Yt = function (e) {
            e.write(Ht("")), e.close();
            var t = e.parentWindow.Object;
            return (e = null), t;
        },
        Wt = function () {
            try {
                xt = new ActiveXObject("htmlfile");
            } catch (e) {}
            var e, t;
            Wt =
                "undefined" != typeof document
                    ? document.domain && xt
                        ? Yt(xt)
                        : (((t = te("iframe")).style.display = "none"), Vt.appendChild(t), (t.src = String("javascript:")), (e = t.contentWindow.document).open(), e.write(Ht("document.F=Object")), e.close(), e.F)
                    : Yt(xt);
            for (var r = Fe.length; r--; ) delete Wt.prototype[Fe[r]];
            return Wt();
        };
    _e[Ft] = !0;
    var Qt =
            Object.create ||
            function (e, t) {
                var r;
                return null !== e ? ((Gt.prototype = ie(e)), (r = new Gt()), (Gt.prototype = null), (r[Ft] = e)) : (r = Wt()), void 0 === t ? r : kt(r, t);
            },
        zt = K("unscopables"),
        Kt = Array.prototype;
    null == Kt[zt] && se.f(Kt, zt, { configurable: !0, value: Qt(null) });
    var Jt = function (e) {
        Kt[zt][e] = !0;
    };
    rt({ target: "Array", proto: !0 }, { copyWithin: qt }), Jt("copyWithin");
    var $t = [].push,
        Xt = function (e) {
            var t = 1 == e,
                r = 2 == e,
                n = 3 == e,
                o = 4 == e,
                i = 6 == e,
                s = 7 == e,
                a = 5 == e || i;
            return function (u, c, l, p) {
                for (var f, h, d = k(u), y = T(d), v = ot(c, l, 3), S = Le(y.length), _ = 0, E = p || Pt, w = t ? E(u, S) : r || s ? E(u, 0) : void 0; S > _; _++)
                    if ((a || _ in y) && ((h = v((f = y[_]), _, d)), e))
                        if (t) w[_] = h;
                        else if (h)
                            switch (e) {
                                case 3:
                                    return !0;
                                case 5:
                                    return f;
                                case 6:
                                    return _;
                                case 2:
                                    $t.call(w, f);
                            }
                        else
                            switch (e) {
                                case 4:
                                    return !1;
                                case 7:
                                    $t.call(w, f);
                            }
                return i ? -1 : n || o ? o : w;
            };
        },
        Zt = { forEach: Xt(0), map: Xt(1), filter: Xt(2), some: Xt(3), every: Xt(4), find: Xt(5), findIndex: Xt(6), filterReject: Xt(7) },
        er = function (e, t) {
            var r = [][e];
            return (
                !!r &&
                l(function () {
                    r.call(
                        null,
                        t ||
                            function () {
                                throw 1;
                            },
                        1
                    );
                })
            );
        },
        tr = Zt.every,
        rr = er("every");
    rt(
        { target: "Array", proto: !0, forced: !rr },
        {
            every: function (e) {
                return tr(this, e, arguments.length > 1 ? arguments[1] : void 0);
            },
        }
    );
    rt(
        { target: "Array", proto: !0 },
        {
            fill: function (e) {
                for (var t = k(this), r = Le(t.length), n = arguments.length, o = Be(n > 1 ? arguments[1] : void 0, r), i = n > 2 ? arguments[2] : void 0, s = void 0 === i ? r : Be(i, r); s > o; ) t[o++] = e;
                return t;
            },
        }
    ),
        Jt("fill");
    var nr = Zt.filter,
        or = At("filter");
    rt(
        { target: "Array", proto: !0, forced: !or },
        {
            filter: function (e) {
                return nr(this, e, arguments.length > 1 ? arguments[1] : void 0);
            },
        }
    );
    var ir = Zt.find,
        sr = !0;
    "find" in [] &&
        Array(1).find(function () {
            sr = !1;
        }),
        rt(
            { target: "Array", proto: !0, forced: sr },
            {
                find: function (e) {
                    return ir(this, e, arguments.length > 1 ? arguments[1] : void 0);
                },
            }
        ),
        Jt("find");
    var ar = Zt.findIndex,
        ur = !0;
    "findIndex" in [] &&
        Array(1).findIndex(function () {
            ur = !1;
        }),
        rt(
            { target: "Array", proto: !0, forced: ur },
            {
                findIndex: function (e) {
                    return ar(this, e, arguments.length > 1 ? arguments[1] : void 0);
                },
            }
        ),
        Jt("findIndex");
    var cr = function (e, t, r, n, o, i, s, a) {
            for (var u, c = o, l = 0, p = !!s && ot(s, a, 3); l < n; ) {
                if (l in r) {
                    if (((u = p ? p(r[l], l, t) : r[l]), i > 0 && It(u))) c = cr(e, t, u, Le(u.length), c, i - 1) - 1;
                    else {
                        if (c >= 9007199254740991) throw TypeError("Exceed the acceptable array length");
                        e[c] = u;
                    }
                    c++;
                }
                l++;
            }
            return c;
        },
        lr = cr;
    rt(
        { target: "Array", proto: !0 },
        {
            flat: function () {
                var e = arguments.length ? arguments[0] : void 0,
                    t = k(this),
                    r = Le(t.length),
                    n = Pt(t, 0);
                return (n.length = lr(n, t, t, r, 0, void 0 === e ? 1 : Me(e))), n;
            },
        }
    );
    rt(
        { target: "Array", proto: !0 },
        {
            flatMap: function (e) {
                var t,
                    r = k(this),
                    n = Le(r.length);
                return nt(e), ((t = Pt(r, 0)).length = lr(t, r, r, n, 0, 1, e, arguments.length > 1 ? arguments[1] : void 0)), t;
            },
        }
    );
    var pr = Zt.forEach,
        fr = er("forEach")
            ? [].forEach
            : function (e) {
                  return pr(this, e, arguments.length > 1 ? arguments[1] : void 0);
              };
    rt({ target: "Array", proto: !0, forced: [].forEach != fr }, { forEach: fr });
    var hr = Ue.includes;
    rt(
        { target: "Array", proto: !0 },
        {
            includes: function (e) {
                return hr(this, e, arguments.length > 1 ? arguments[1] : void 0);
            },
        }
    ),
        Jt("includes");
    var dr = Ue.indexOf,
        yr = [].indexOf,
        vr = !!yr && 1 / [1].indexOf(1, -0) < 0,
        Sr = er("indexOf");
    rt(
        { target: "Array", proto: !0, forced: vr || !Sr },
        {
            indexOf: function (e) {
                return vr ? yr.apply(this, arguments) || 0 : dr(this, e, arguments.length > 1 ? arguments[1] : void 0);
            },
        }
    );
    var _r,
        Er,
        wr,
        mr = !l(function () {
            function e() {}
            return (e.prototype.constructor = null), Object.getPrototypeOf(new e()) !== e.prototype;
        }),
        Tr = Se("IE_PROTO"),
        gr = Object.prototype,
        Or = mr
            ? Object.getPrototypeOf
            : function (e) {
                  return (e = k(e)), F(e, Tr) ? e[Tr] : "function" == typeof e.constructor && e instanceof e.constructor ? e.constructor.prototype : e instanceof Object ? gr : null;
              },
        Ir = K("iterator"),
        Rr = !1;
    [].keys && ("next" in (wr = [].keys()) ? (Er = Or(Or(wr))) !== Object.prototype && (_r = Er) : (Rr = !0));
    var br =
        null == _r ||
        l(function () {
            var e = {};
            return _r[Ir].call(e) !== e;
        });
    br && (_r = {}),
        F(_r, Ir) ||
            ue(_r, Ir, function () {
                return this;
            });
    var Cr = { IteratorPrototype: _r, BUGGY_SAFARI_ITERATORS: Rr },
        Pr = se.f,
        Nr = K("toStringTag"),
        Ar = function (e, t, r) {
            e && !F((e = r ? e : e.prototype), Nr) && Pr(e, Nr, { configurable: !0, value: t });
        },
        Mr = Cr.IteratorPrototype,
        jr = function () {
            return this;
        },
        Lr = function (e, t, r) {
            var n = t + " Iterator";
            return (e.prototype = Qt(Mr, { next: _(1, r) })), Ar(e, n, !1), (at[n] = jr), e;
        },
        Dr =
            Object.setPrototypeOf ||
            ("__proto__" in {}
                ? (function () {
                      var e,
                          t = !1,
                          r = {};
                      try {
                          (e = Object.getOwnPropertyDescriptor(Object.prototype, "__proto__").set).call(r, []), (t = r instanceof Array);
                      } catch (e) {}
                      return function (r, n) {
                          return (
                              ie(r),
                              (function (e) {
                                  if (!I(e) && null !== e) throw TypeError("Can't set " + String(e) + " as a prototype");
                              })(n),
                              t ? e.call(r, n) : (r.__proto__ = n),
                              r
                          );
                      };
                  })()
                : void 0),
        xr = Cr.IteratorPrototype,
        Br = Cr.BUGGY_SAFARI_ITERATORS,
        qr = K("iterator"),
        Ur = function () {
            return this;
        },
        kr = function (e, t, r, n, o, i, s) {
            Lr(r, t, n);
            var a,
                u,
                c,
                l = function (e) {
                    if (e === o && y) return y;
                    if (!Br && e in h) return h[e];
                    switch (e) {
                        case "keys":
                        case "values":
                        case "entries":
                            return function () {
                                return new r(this, e);
                            };
                    }
                    return function () {
                        return new r(this);
                    };
                },
                p = t + " Iterator",
                f = !1,
                h = e.prototype,
                d = h[qr] || h["@@iterator"] || (o && h[o]),
                y = (!Br && d) || l(o),
                v = ("Array" == t && h.entries) || d;
            if (
                (v && ((a = Or(v.call(new e()))), xr !== Object.prototype && a.next && (Or(a) !== xr && (Dr ? Dr(a, xr) : "function" != typeof a[qr] && ue(a, qr, Ur)), Ar(a, p, !0))),
                "values" == o &&
                    d &&
                    "values" !== d.name &&
                    ((f = !0),
                    (y = function () {
                        return d.call(this);
                    })),
                h[qr] !== y && ue(h, qr, y),
                (at[t] = y),
                o)
            )
                if (((u = { values: l("values"), keys: i ? y : l("keys"), entries: l("entries") }), s)) for (c in u) (Br || f || !(c in h)) && Ie(h, c, u[c]);
                else rt({ target: t, proto: !0, forced: Br || f }, u);
            return u;
        },
        Vr = Re.set,
        Fr = Re.getterFor("Array Iterator"),
        Gr = kr(
            Array,
            "Array",
            function (e, t) {
                Vr(this, { type: "Array Iterator", target: O(e), index: 0, kind: t });
            },
            function () {
                var e = Fr(this),
                    t = e.target,
                    r = e.kind,
                    n = e.index++;
                return !t || n >= t.length ? ((e.target = void 0), { value: void 0, done: !0 }) : "keys" == r ? { value: n, done: !1 } : "values" == r ? { value: t[n], done: !1 } : { value: [n, t[n]], done: !1 };
            },
            "values"
        );
    (at.Arguments = at.Array), Jt("keys"), Jt("values"), Jt("entries");
    var Hr = [].join,
        Yr = T != Object,
        Wr = er("join", ",");
    rt(
        { target: "Array", proto: !0, forced: Yr || !Wr },
        {
            join: function (e) {
                return Hr.call(O(this), void 0 === e ? "," : e);
            },
        }
    );
    var Qr = Math.min,
        zr = [].lastIndexOf,
        Kr = !!zr && 1 / [1].lastIndexOf(1, -0) < 0,
        Jr = er("lastIndexOf"),
        $r =
            Kr || !Jr
                ? function (e) {
                      if (Kr) return zr.apply(this, arguments) || 0;
                      var t = O(this),
                          r = Le(t.length),
                          n = r - 1;
                      for (arguments.length > 1 && (n = Qr(n, Me(arguments[1]))), n < 0 && (n = r + n); n >= 0; n--) if (n in t && t[n] === e) return n || 0;
                      return -1;
                  }
                : zr;
    rt({ target: "Array", proto: !0, forced: $r !== [].lastIndexOf }, { lastIndexOf: $r });
    var Xr = Zt.map,
        Zr = At("map");
    rt(
        { target: "Array", proto: !0, forced: !Zr },
        {
            map: function (e) {
                return Xr(this, e, arguments.length > 1 ? arguments[1] : void 0);
            },
        }
    );
    var en = function (e) {
            return function (t, r, n, o) {
                nt(r);
                var i = k(t),
                    s = T(i),
                    a = Le(i.length),
                    u = e ? a - 1 : 0,
                    c = e ? -1 : 1;
                if (n < 2)
                    for (;;) {
                        if (u in s) {
                            (o = s[u]), (u += c);
                            break;
                        }
                        if (((u += c), e ? u < 0 : a <= u)) throw TypeError("Reduce of empty array with no initial value");
                    }
                for (; e ? u >= 0 : a > u; u += c) u in s && (o = r(o, s[u], u, i));
                return o;
            };
        },
        tn = { left: en(!1), right: en(!0) },
        rn = "process" == w(c.process),
        nn = tn.left,
        on = er("reduce");
    rt(
        { target: "Array", proto: !0, forced: !on || (!rn && L > 79 && L < 83) },
        {
            reduce: function (e) {
                return nn(this, e, arguments.length, arguments.length > 1 ? arguments[1] : void 0);
            },
        }
    );
    var sn = tn.right,
        an = er("reduceRight");
    rt(
        { target: "Array", proto: !0, forced: !an || (!rn && L > 79 && L < 83) },
        {
            reduceRight: function (e) {
                return sn(this, e, arguments.length, arguments.length > 1 ? arguments[1] : void 0);
            },
        }
    );
    var un = [].reverse,
        cn = [1, 2];
    rt(
        { target: "Array", proto: !0, forced: String(cn) === String(cn.reverse()) },
        {
            reverse: function () {
                return It(this) && (this.length = this.length), un.call(this);
            },
        }
    );
    var ln = At("slice"),
        pn = K("species"),
        fn = [].slice,
        hn = Math.max;
    rt(
        { target: "Array", proto: !0, forced: !ln },
        {
            slice: function (e, t) {
                var r,
                    n,
                    o,
                    i = O(this),
                    s = Le(i.length),
                    a = Be(e, s),
                    u = Be(void 0 === t ? s : t, s);
                if (It(i) && ("function" != typeof (r = i.constructor) || (r !== Array && !It(r.prototype)) ? I(r) && null === (r = r[pn]) && (r = void 0) : (r = void 0), r === Array || void 0 === r)) return fn.call(i, a, u);
                for (n = new (void 0 === r ? Array : r)(hn(u - a, 0)), o = 0; a < u; a++, o++) a in i && pt(n, o, i[a]);
                return (n.length = o), n;
            },
        }
    );
    var dn = Zt.some,
        yn = er("some");
    rt(
        { target: "Array", proto: !0, forced: !yn },
        {
            some: function (e) {
                return dn(this, e, arguments.length > 1 ? arguments[1] : void 0);
            },
        }
    );
    var vn = function (e) {
            if (B(e)) throw TypeError("Cannot convert a Symbol value to a string");
            return String(e);
        },
        Sn = Math.floor,
        _n = function (e, t) {
            var r = e.length,
                n = Sn(r / 2);
            return r < 8 ? En(e, t) : wn(_n(e.slice(0, n), t), _n(e.slice(n), t), t);
        },
        En = function (e, t) {
            for (var r, n, o = e.length, i = 1; i < o; ) {
                for (n = i, r = e[i]; n && t(e[n - 1], r) > 0; ) e[n] = e[--n];
                n !== i++ && (e[n] = r);
            }
            return e;
        },
        wn = function (e, t, r) {
            for (var n = e.length, o = t.length, i = 0, s = 0, a = []; i < n || s < o; ) i < n && s < o ? a.push(r(e[i], t[s]) <= 0 ? e[i++] : t[s++]) : a.push(i < n ? e[i++] : t[s++]);
            return a;
        },
        mn = _n,
        Tn = C.match(/firefox\/(\d+)/i),
        gn = !!Tn && +Tn[1],
        On = /MSIE|Trident/.test(C),
        In = C.match(/AppleWebKit\/(\d+)\./),
        Rn = !!In && +In[1],
        bn = [],
        Cn = bn.sort,
        Pn = l(function () {
            bn.sort(void 0);
        }),
        Nn = l(function () {
            bn.sort(null);
        }),
        An = er("sort"),
        Mn = !l(function () {
            if (L) return L < 70;
            if (!(gn && gn > 3)) {
                if (On) return !0;
                if (Rn) return Rn < 603;
                var e,
                    t,
                    r,
                    n,
                    o = "";
                for (e = 65; e < 76; e++) {
                    switch (((t = String.fromCharCode(e)), e)) {
                        case 66:
                        case 69:
                        case 70:
                        case 72:
                            r = 3;
                            break;
                        case 68:
                        case 71:
                            r = 4;
                            break;
                        default:
                            r = 2;
                    }
                    for (n = 0; n < 47; n++) bn.push({ k: t + n, v: r });
                }
                for (
                    bn.sort(function (e, t) {
                        return t.v - e.v;
                    }),
                        n = 0;
                    n < bn.length;
                    n++
                )
                    (t = bn[n].k.charAt(0)), o.charAt(o.length - 1) !== t && (o += t);
                return "DGBEFHACIJK" !== o;
            }
        });
    rt(
        { target: "Array", proto: !0, forced: Pn || !Nn || !An || !Mn },
        {
            sort: function (e) {
                void 0 !== e && nt(e);
                var t = k(this);
                if (Mn) return void 0 === e ? Cn.call(t) : Cn.call(t, e);
                var r,
                    n,
                    o = [],
                    i = Le(t.length);
                for (n = 0; n < i; n++) n in t && o.push(t[n]);
                for (
                    r = (o = mn(
                        o,
                        (function (e) {
                            return function (t, r) {
                                return void 0 === r ? -1 : void 0 === t ? 1 : void 0 !== e ? +e(t, r) || 0 : vn(t) > vn(r) ? 1 : -1;
                            };
                        })(e)
                    )).length,
                        n = 0;
                    n < r;

                )
                    t[n] = o[n++];
                for (; n < i; ) delete t[n++];
                return t;
            },
        }
    );
    var jn = K("species"),
        Ln = function (e) {
            var t = b(e),
                r = se.f;
            p &&
                t &&
                !t[jn] &&
                r(t, jn, {
                    configurable: !0,
                    get: function () {
                        return this;
                    },
                });
        };
    Ln("Array");
    var Dn = At("splice"),
        xn = Math.max,
        Bn = Math.min;
    rt(
        { target: "Array", proto: !0, forced: !Dn },
        {
            splice: function (e, t) {
                var r,
                    n,
                    o,
                    i,
                    s,
                    a,
                    u = k(this),
                    c = Le(u.length),
                    l = Be(e, c),
                    p = arguments.length;
                if ((0 === p ? (r = n = 0) : 1 === p ? ((r = 0), (n = c - l)) : ((r = p - 2), (n = Bn(xn(Me(t), 0), c - l))), c + r - n > 9007199254740991)) throw TypeError("Maximum allowed length exceeded");
                for (o = Pt(u, n), i = 0; i < n; i++) (s = l + i) in u && pt(o, i, u[s]);
                if (((o.length = n), r < n)) {
                    for (i = l; i < c - n; i++) (a = i + r), (s = i + n) in u ? (u[a] = u[s]) : delete u[a];
                    for (i = c; i > c - n + r; i--) delete u[i - 1];
                } else if (r > n) for (i = c - n; i > l; i--) (a = i + r - 1), (s = i + n - 1) in u ? (u[a] = u[s]) : delete u[a];
                for (i = 0; i < r; i++) u[i + l] = arguments[i + 2];
                return (u.length = c - n + r), o;
            },
        }
    );
    Jt("flat");
    Jt("flatMap");
    var qn = ht
        ? {}.toString
        : function () {
              return "[object " + vt(this) + "]";
          };
    ht || Ie(Object.prototype, "toString", qn, { unsafe: !0 });
    var Un,
        kn = {
            charAt:
                ((Un = !0),
                function (e, t) {
                    var r,
                        n,
                        o = vn(g(e)),
                        i = Me(t),
                        s = o.length;
                    return i < 0 || i >= s
                        ? Un
                            ? ""
                            : void 0
                        : (r = o.charCodeAt(i)) < 55296 || r > 56319 || i + 1 === s || (n = o.charCodeAt(i + 1)) < 56320 || n > 57343
                        ? Un
                            ? o.charAt(i)
                            : r
                        : Un
                        ? o.slice(i, i + 2)
                        : n - 56320 + ((r - 55296) << 10) + 65536;
                }),
        }.charAt,
        Vn = Re.set,
        Fn = Re.getterFor("String Iterator");
    kr(
        String,
        "String",
        function (e) {
            Vn(this, { type: "String Iterator", string: vn(e), index: 0 });
        },
        function () {
            var e,
                t = Fn(this),
                r = t.string,
                n = t.index;
            return n >= r.length ? { value: void 0, done: !0 } : ((e = kn(r, n)), (t.index += e.length), { value: e, done: !1 });
        }
    );
    var Gn = c,
        Hn = (Gn.Array, {}),
        Yn = Ge.f,
        Wn = {}.toString,
        Qn = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];
    Hn.f = function (e) {
        return Qn && "[object Window]" == Wn.call(e)
            ? (function (e) {
                  try {
                      return Yn(e);
                  } catch (e) {
                      return Qn.slice();
                  }
              })(e)
            : Yn(O(e));
    };
    l(function () {
        return Object.isExtensible(Object.preventExtensions({}));
    });
    var zn,
        Kn = se.f,
        Jn = Y("meta"),
        $n = 0,
        Xn =
            Object.isExtensible ||
            function () {
                return !0;
            },
        Zn = function (e) {
            Kn(e, Jn, { value: { objectID: "O" + $n++, weakData: {} } });
        },
        eo = (zn = {
            enable: function () {
                (eo.enable = function () {}), !0;
                var e = Ge.f,
                    t = [].splice,
                    r = {};
                (r[Jn] = 1),
                    e(r).length &&
                        ((Ge.f = function (r) {
                            for (var n = e(r), o = 0, i = n.length; o < i; o++)
                                if (n[o] === Jn) {
                                    t.call(n, o, 1);
                                    break;
                                }
                            return n;
                        }),
                        rt({ target: "Object", stat: !0, forced: !0 }, { getOwnPropertyNames: Hn.f }));
            },
            fastKey: function (e, t) {
                if (!I(e)) return "symbol" == typeof e ? e : ("string" == typeof e ? "S" : "P") + e;
                if (!F(e, Jn)) {
                    if (!Xn(e)) return "F";
                    if (!t) return "E";
                    Zn(e);
                }
                return e[Jn].objectID;
            },
        });
    _e[Jn] = !0;
    var to = function (e, t) {
            (this.stopped = e), (this.result = t);
        },
        ro = function (e, t, r) {
            var n,
                o,
                i,
                s,
                a,
                u,
                c,
                l = r && r.that,
                p = !(!r || !r.AS_ENTRIES),
                f = !(!r || !r.IS_ITERATOR),
                h = !(!r || !r.INTERRUPTED),
                d = ot(t, l, 1 + p + h),
                y = function (e) {
                    return n && it(n), new to(!0, e);
                },
                v = function (e) {
                    return p ? (ie(e), h ? d(e[0], e[1], y) : d(e[0], e[1])) : h ? d(e, y) : d(e);
                };
            if (f) n = e;
            else {
                if ("function" != typeof (o = _t(e))) throw TypeError("Target is not iterable");
                if (lt(o)) {
                    for (i = 0, s = Le(e.length); s > i; i++) if ((a = v(e[i])) && a instanceof to) return a;
                    return new to(!1);
                }
                n = o.call(e);
            }
            for (u = n.next; !(c = u.call(n)).done; ) {
                try {
                    a = v(c.value);
                } catch (e) {
                    throw (it(n), e);
                }
                if ("object" == typeof a && a && a instanceof to) return a;
            }
            return new to(!1);
        },
        no = function (e, t, r) {
            if (!(e instanceof t)) throw TypeError("Incorrect " + (r ? r + " " : "") + "invocation");
            return e;
        },
        oo = function (e, t, r) {
            var n, o;
            return Dr && "function" == typeof (n = t.constructor) && n !== r && I((o = n.prototype)) && o !== r.prototype && Dr(e, o), e;
        },
        io = function (e, t, r) {
            var n = -1 !== e.indexOf("Map"),
                o = -1 !== e.indexOf("Weak"),
                i = n ? "set" : "add",
                s = c[e],
                a = s && s.prototype,
                u = s,
                p = {},
                f = function (e) {
                    var t = a[e];
                    Ie(
                        a,
                        e,
                        "add" == e
                            ? function (e) {
                                  return t.call(this, 0 === e ? 0 : e), this;
                              }
                            : "delete" == e
                            ? function (e) {
                                  return !(o && !I(e)) && t.call(this, 0 === e ? 0 : e);
                              }
                            : "get" == e
                            ? function (e) {
                                  return o && !I(e) ? void 0 : t.call(this, 0 === e ? 0 : e);
                              }
                            : "has" == e
                            ? function (e) {
                                  return !(o && !I(e)) && t.call(this, 0 === e ? 0 : e);
                              }
                            : function (e, r) {
                                  return t.call(this, 0 === e ? 0 : e, r), this;
                              }
                    );
                };
            if (
                et(
                    e,
                    "function" != typeof s ||
                        !(
                            o ||
                            (a.forEach &&
                                !l(function () {
                                    new s().entries().next();
                                }))
                        )
                )
            )
                (u = r.getConstructor(t, e, n, i)), zn.enable();
            else if (et(e, !0)) {
                var h = new u(),
                    d = h[i](o ? {} : -0, 1) != h,
                    y = l(function () {
                        h.has(1);
                    }),
                    v = gt(function (e) {
                        new s(e);
                    }),
                    S =
                        !o &&
                        l(function () {
                            for (var e = new s(), t = 5; t--; ) e[i](t, t);
                            return !e.has(-0);
                        });
                v ||
                    (((u = t(function (t, r) {
                        no(t, u, e);
                        var o = oo(new s(), t, u);
                        return null != r && ro(r, o[i], { that: o, AS_ENTRIES: n }), o;
                    })).prototype = a),
                    (a.constructor = u)),
                    (y || S) && (f("delete"), f("has"), n && f("get")),
                    (S || d) && f(i),
                    o && a.clear && delete a.clear;
            }
            return (p[e] = u), rt({ global: !0, forced: u != s }, p), Ar(u, e), o || r.setStrong(u, e, n), u;
        },
        so = function (e, t, r) {
            for (var n in t) Ie(e, n, t[n], r);
            return e;
        },
        ao = se.f,
        uo = zn.fastKey,
        co = Re.set,
        lo = Re.getterFor,
        po = {
            getConstructor: function (e, t, r, n) {
                var o = e(function (e, i) {
                        no(e, o, t), co(e, { type: t, index: Qt(null), first: void 0, last: void 0, size: 0 }), p || (e.size = 0), null != i && ro(i, e[n], { that: e, AS_ENTRIES: r });
                    }),
                    i = lo(t),
                    s = function (e, t, r) {
                        var n,
                            o,
                            s = i(e),
                            u = a(e, t);
                        return (
                            u
                                ? (u.value = r)
                                : ((s.last = u = { index: (o = uo(t, !0)), key: t, value: r, previous: (n = s.last), next: void 0, removed: !1 }),
                                  s.first || (s.first = u),
                                  n && (n.next = u),
                                  p ? s.size++ : e.size++,
                                  "F" !== o && (s.index[o] = u)),
                            e
                        );
                    },
                    a = function (e, t) {
                        var r,
                            n = i(e),
                            o = uo(t);
                        if ("F" !== o) return n.index[o];
                        for (r = n.first; r; r = r.next) if (r.key == t) return r;
                    };
                return (
                    so(o.prototype, {
                        clear: function () {
                            for (var e = i(this), t = e.index, r = e.first; r; ) (r.removed = !0), r.previous && (r.previous = r.previous.next = void 0), delete t[r.index], (r = r.next);
                            (e.first = e.last = void 0), p ? (e.size = 0) : (this.size = 0);
                        },
                        delete: function (e) {
                            var t = i(this),
                                r = a(this, e);
                            if (r) {
                                var n = r.next,
                                    o = r.previous;
                                delete t.index[r.index], (r.removed = !0), o && (o.next = n), n && (n.previous = o), t.first == r && (t.first = n), t.last == r && (t.last = o), p ? t.size-- : this.size--;
                            }
                            return !!r;
                        },
                        forEach: function (e) {
                            for (var t, r = i(this), n = ot(e, arguments.length > 1 ? arguments[1] : void 0, 3); (t = t ? t.next : r.first); ) for (n(t.value, t.key, this); t && t.removed; ) t = t.previous;
                        },
                        has: function (e) {
                            return !!a(this, e);
                        },
                    }),
                    so(
                        o.prototype,
                        r
                            ? {
                                  get: function (e) {
                                      var t = a(this, e);
                                      return t && t.value;
                                  },
                                  set: function (e, t) {
                                      return s(this, 0 === e ? 0 : e, t);
                                  },
                              }
                            : {
                                  add: function (e) {
                                      return s(this, (e = 0 === e ? 0 : e), e);
                                  },
                              }
                    ),
                    p &&
                        ao(o.prototype, "size", {
                            get: function () {
                                return i(this).size;
                            },
                        }),
                    o
                );
            },
            setStrong: function (e, t, r) {
                var n = t + " Iterator",
                    o = lo(t),
                    i = lo(n);
                kr(
                    e,
                    t,
                    function (e, t) {
                        co(this, { type: n, target: e, state: o(e), kind: t, last: void 0 });
                    },
                    function () {
                        for (var e = i(this), t = e.kind, r = e.last; r && r.removed; ) r = r.previous;
                        return e.target && (e.last = r = r ? r.next : e.state.first)
                            ? "keys" == t
                                ? { value: r.key, done: !1 }
                                : "values" == t
                                ? { value: r.value, done: !1 }
                                : { value: [r.key, r.value], done: !1 }
                            : ((e.target = void 0), { value: void 0, done: !0 });
                    },
                    r ? "entries" : "values",
                    !r,
                    !0
                ),
                    Ln(t);
            },
        };
    io(
        "Map",
        function (e) {
            return function () {
                return e(this, arguments.length ? arguments[0] : void 0);
            };
        },
        po
    );
    rt(
        { target: "Array", proto: !0 },
        {
            at: function (e) {
                var t = k(this),
                    r = Le(t.length),
                    n = Me(e),
                    o = n >= 0 ? n : r + n;
                return o < 0 || o >= r ? void 0 : t[o];
            },
        }
    ),
        Jt("at");
    var fo = Zt.filterReject;
    rt(
        { target: "Array", proto: !0 },
        {
            filterOut: function (e) {
                return fo(this, e, arguments.length > 1 ? arguments[1] : void 0);
            },
        }
    ),
        Jt("filterOut");
    var ho = Zt.filterReject;
    rt(
        { target: "Array", proto: !0 },
        {
            filterReject: function (e) {
                return ho(this, e, arguments.length > 1 ? arguments[1] : void 0);
            },
        }
    ),
        Jt("filterReject");
    var yo = function (e) {
            var t = 1 == e;
            return function (r, n, o) {
                for (var i, s = k(r), a = T(s), u = ot(n, o, 3), c = Le(a.length); c-- > 0; )
                    if (u((i = a[c]), c, s))
                        switch (e) {
                            case 0:
                                return i;
                            case 1:
                                return c;
                        }
                return t ? -1 : void 0;
            };
        },
        vo = { findLast: yo(0), findLastIndex: yo(1) },
        So = vo.findLast;
    rt(
        { target: "Array", proto: !0 },
        {
            findLast: function (e) {
                return So(this, e, arguments.length > 1 ? arguments[1] : void 0);
            },
        }
    ),
        Jt("findLast");
    var _o = vo.findLastIndex;
    rt(
        { target: "Array", proto: !0 },
        {
            findLastIndex: function (e) {
                return _o(this, e, arguments.length > 1 ? arguments[1] : void 0);
            },
        }
    ),
        Jt("findLastIndex");
    var Eo = function (e, t) {
            for (var r = 0, n = t.length, o = new e(n); n > r; ) o[r] = t[r++];
            return o;
        },
        wo = [].push,
        mo = function (e, t, r, n) {
            for (var o, i, s, a = k(e), u = T(a), c = ot(t, r, 3), l = Qt(null), p = Le(u.length), f = 0; p > f; f++) (s = u[f]), (i = X(c(s, f, a))) in l ? wo.call(l[i], s) : (l[i] = [s]);
            if (n && (o = n(a)) !== Array) for (i in l) l[i] = Eo(o, l[i]);
            return l;
        };
    rt(
        { target: "Array", proto: !0 },
        {
            groupBy: function (e) {
                var t = arguments.length > 1 ? arguments[1] : void 0;
                return mo(this, e, t, Ct);
            },
        }
    ),
        Jt("groupBy");
    var To = Object.isFrozen,
        go = function (e, t) {
            if (!To || !It(e) || !To(e)) return !1;
            for (var r, n = 0, o = e.length; n < o; ) if (!("string" == typeof (r = e[n++]) || (t && void 0 === r))) return !1;
            return 0 !== o;
        };
    rt(
        { target: "Array", stat: !0 },
        {
            isTemplateObject: function (e) {
                if (!go(e, !0)) return !1;
                var t = e.raw;
                return !(t.length !== e.length || !go(t, !1));
            },
        }
    );
    var Oo = se.f;
    p &&
        !("lastItem" in []) &&
        (Oo(Array.prototype, "lastItem", {
            configurable: !0,
            get: function () {
                var e = k(this),
                    t = Le(e.length);
                return 0 == t ? void 0 : e[t - 1];
            },
            set: function (e) {
                var t = k(this),
                    r = Le(t.length);
                return (t[0 == r ? 0 : r - 1] = e);
            },
        }),
        Jt("lastItem"));
    var Io = se.f;
    p &&
        !("lastIndex" in []) &&
        (Io(Array.prototype, "lastIndex", {
            configurable: !0,
            get: function () {
                var e = k(this),
                    t = Le(e.length);
                return 0 == t ? 0 : t - 1;
            },
        }),
        Jt("lastIndex"));
    var Ro = [].push;
    rt(
        { target: "Array", proto: !0 },
        {
            uniqueBy: function (e) {
                var t,
                    r,
                    n,
                    o,
                    i = k(this),
                    s = Le(i.length),
                    a = Pt(i, 0),
                    u = new (b("Map"))();
                if ("function" == typeof e) t = e;
                else {
                    if (null != e) throw new TypeError("Incorrect resolver!");
                    t = function (e) {
                        return e;
                    };
                }
                for (r = 0; r < s; r++) (o = t((n = i[r]))), u.has(o) || u.set(o, n);
                return (
                    u.forEach(function (e) {
                        Ro.call(a, e);
                    }),
                    a
                );
            },
        }
    ),
        Jt("uniqueBy");
    Gn.Map;
    var bo = {
            CSSRuleList: 0,
            CSSStyleDeclaration: 0,
            CSSValueList: 0,
            ClientRectList: 0,
            DOMRectList: 0,
            DOMStringList: 0,
            DOMTokenList: 1,
            DataTransferItemList: 0,
            FileList: 0,
            HTMLAllCollection: 0,
            HTMLCollection: 0,
            HTMLFormElement: 0,
            HTMLSelectElement: 0,
            MediaList: 0,
            MimeTypeArray: 0,
            NamedNodeMap: 0,
            NodeList: 1,
            PaintRequestList: 0,
            Plugin: 0,
            PluginArray: 0,
            SVGLengthList: 0,
            SVGNumberList: 0,
            SVGPathSegList: 0,
            SVGPointList: 0,
            SVGStringList: 0,
            SVGTransformList: 0,
            SourceBufferList: 0,
            StyleSheetList: 0,
            TextTrackCueList: 0,
            TextTrackList: 0,
            TouchList: 0,
        },
        Co = K("iterator"),
        Po = K("toStringTag"),
        No = Gr.values;
    for (var Ao in bo) {
        var Mo = c[Ao],
            jo = Mo && Mo.prototype;
        if (jo) {
            if (jo[Co] !== No)
                try {
                    ue(jo, Co, No);
                } catch (e) {
                    jo[Co] = No;
                }
            if ((jo[Po] || ue(jo, Po, Ao), bo[Ao]))
                for (var Lo in Gr)
                    if (jo[Lo] !== Gr[Lo])
                        try {
                            ue(jo, Lo, Gr[Lo]);
                        } catch (e) {
                            jo[Lo] = Gr[Lo];
                        }
        }
    }
    var Do = function (e) {
        var t,
            r,
            n,
            o,
            i = arguments.length,
            s = i > 1 ? arguments[1] : void 0;
        return (
            nt(this),
            (t = void 0 !== s) && nt(s),
            null == e
                ? new this()
                : ((r = []),
                  t
                      ? ((n = 0),
                        (o = ot(s, i > 2 ? arguments[2] : void 0, 2)),
                        ro(e, function (e) {
                            r.push(o(e, n++));
                        }))
                      : ro(e, r.push, { that: r }),
                  new this(r))
        );
    };
    rt({ target: "Map", stat: !0 }, { from: Do });
    var xo = function () {
        for (var e = arguments.length, t = new Array(e); e--; ) t[e] = arguments[e];
        return new this(t);
    };
    rt({ target: "Map", stat: !0 }, { of: xo });
    var Bo = function () {
        for (var e, t = ie(this), r = nt(t.delete), n = !0, o = 0, i = arguments.length; o < i; o++) (e = r.call(t, arguments[o])), (n = n && e);
        return !!n;
    };
    rt(
        { target: "Map", proto: !0, real: !0, forced: !1 },
        {
            deleteAll: function () {
                return Bo.apply(this, arguments);
            },
        }
    );
    rt(
        { target: "Map", proto: !0, real: !0, forced: !1 },
        {
            emplace: function (e, t) {
                var r = ie(this),
                    n = r.has(e) && "update" in t ? t.update(r.get(e), e, r) : t.insert(e, r);
                return r.set(e, n), n;
            },
        }
    );
    var qo = function (e) {
        return Map.prototype.entries.call(e);
    };
    rt(
        { target: "Map", proto: !0, real: !0, forced: !1 },
        {
            every: function (e) {
                var t = ie(this),
                    r = qo(t),
                    n = ot(e, arguments.length > 1 ? arguments[1] : void 0, 3);
                return !ro(
                    r,
                    function (e, r, o) {
                        if (!n(r, e, t)) return o();
                    },
                    { AS_ENTRIES: !0, IS_ITERATOR: !0, INTERRUPTED: !0 }
                ).stopped;
            },
        }
    );
    var Uo = K("species"),
        ko = function (e, t) {
            var r,
                n = ie(e).constructor;
            return void 0 === n || null == (r = ie(n)[Uo]) ? t : nt(r);
        };
    rt(
        { target: "Map", proto: !0, real: !0, forced: !1 },
        {
            filter: function (e) {
                var t = ie(this),
                    r = qo(t),
                    n = ot(e, arguments.length > 1 ? arguments[1] : void 0, 3),
                    o = new (ko(t, b("Map")))(),
                    i = nt(o.set);
                return (
                    ro(
                        r,
                        function (e, r) {
                            n(r, e, t) && i.call(o, e, r);
                        },
                        { AS_ENTRIES: !0, IS_ITERATOR: !0 }
                    ),
                    o
                );
            },
        }
    );
    rt(
        { target: "Map", proto: !0, real: !0, forced: !1 },
        {
            find: function (e) {
                var t = ie(this),
                    r = qo(t),
                    n = ot(e, arguments.length > 1 ? arguments[1] : void 0, 3);
                return ro(
                    r,
                    function (e, r, o) {
                        if (n(r, e, t)) return o(r);
                    },
                    { AS_ENTRIES: !0, IS_ITERATOR: !0, INTERRUPTED: !0 }
                ).result;
            },
        }
    );
    rt(
        { target: "Map", proto: !0, real: !0, forced: !1 },
        {
            findKey: function (e) {
                var t = ie(this),
                    r = qo(t),
                    n = ot(e, arguments.length > 1 ? arguments[1] : void 0, 3);
                return ro(
                    r,
                    function (e, r, o) {
                        if (n(r, e, t)) return o(e);
                    },
                    { AS_ENTRIES: !0, IS_ITERATOR: !0, INTERRUPTED: !0 }
                ).result;
            },
        }
    );
    rt(
        { target: "Map", stat: !0 },
        {
            groupBy: function (e, t) {
                var r = new this();
                nt(t);
                var n = nt(r.has),
                    o = nt(r.get),
                    i = nt(r.set);
                return (
                    ro(e, function (e) {
                        var s = t(e);
                        n.call(r, s) ? o.call(r, s).push(e) : i.call(r, s, [e]);
                    }),
                    r
                );
            },
        }
    );
    rt(
        { target: "Map", proto: !0, real: !0, forced: !1 },
        {
            includes: function (e) {
                return ro(
                    qo(ie(this)),
                    function (t, r, n) {
                        if ((o = r) === (i = e) || (o != o && i != i)) return n();
                        var o, i;
                    },
                    { AS_ENTRIES: !0, IS_ITERATOR: !0, INTERRUPTED: !0 }
                ).stopped;
            },
        }
    );
    rt(
        { target: "Map", stat: !0 },
        {
            keyBy: function (e, t) {
                var r = new this();
                nt(t);
                var n = nt(r.set);
                return (
                    ro(e, function (e) {
                        n.call(r, t(e), e);
                    }),
                    r
                );
            },
        }
    );
    rt(
        { target: "Map", proto: !0, real: !0, forced: !1 },
        {
            keyOf: function (e) {
                return ro(
                    qo(ie(this)),
                    function (t, r, n) {
                        if (r === e) return n(t);
                    },
                    { AS_ENTRIES: !0, IS_ITERATOR: !0, INTERRUPTED: !0 }
                ).result;
            },
        }
    );
    rt(
        { target: "Map", proto: !0, real: !0, forced: !1 },
        {
            mapKeys: function (e) {
                var t = ie(this),
                    r = qo(t),
                    n = ot(e, arguments.length > 1 ? arguments[1] : void 0, 3),
                    o = new (ko(t, b("Map")))(),
                    i = nt(o.set);
                return (
                    ro(
                        r,
                        function (e, r) {
                            i.call(o, n(r, e, t), r);
                        },
                        { AS_ENTRIES: !0, IS_ITERATOR: !0 }
                    ),
                    o
                );
            },
        }
    );
    rt(
        { target: "Map", proto: !0, real: !0, forced: !1 },
        {
            mapValues: function (e) {
                var t = ie(this),
                    r = qo(t),
                    n = ot(e, arguments.length > 1 ? arguments[1] : void 0, 3),
                    o = new (ko(t, b("Map")))(),
                    i = nt(o.set);
                return (
                    ro(
                        r,
                        function (e, r) {
                            i.call(o, e, n(r, e, t));
                        },
                        { AS_ENTRIES: !0, IS_ITERATOR: !0 }
                    ),
                    o
                );
            },
        }
    );
    rt(
        { target: "Map", proto: !0, real: !0, forced: !1 },
        {
            merge: function (e) {
                for (var t = ie(this), r = nt(t.set), n = arguments.length, o = 0; o < n; ) ro(arguments[o++], r, { that: t, AS_ENTRIES: !0 });
                return t;
            },
        }
    );
    rt(
        { target: "Map", proto: !0, real: !0, forced: !1 },
        {
            reduce: function (e) {
                var t = ie(this),
                    r = qo(t),
                    n = arguments.length < 2,
                    o = n ? void 0 : arguments[1];
                if (
                    (nt(e),
                    ro(
                        r,
                        function (r, i) {
                            n ? ((n = !1), (o = i)) : (o = e(o, i, r, t));
                        },
                        { AS_ENTRIES: !0, IS_ITERATOR: !0 }
                    ),
                    n)
                )
                    throw TypeError("Reduce of empty map with no initial value");
                return o;
            },
        }
    );
    rt(
        { target: "Map", proto: !0, real: !0, forced: !1 },
        {
            some: function (e) {
                var t = ie(this),
                    r = qo(t),
                    n = ot(e, arguments.length > 1 ? arguments[1] : void 0, 3);
                return ro(
                    r,
                    function (e, r, o) {
                        if (n(r, e, t)) return o();
                    },
                    { AS_ENTRIES: !0, IS_ITERATOR: !0, INTERRUPTED: !0 }
                ).stopped;
            },
        }
    );
    rt(
        { target: "Map", proto: !0, real: !0, forced: !1 },
        {
            update: function (e, t) {
                var r = ie(this),
                    n = arguments.length;
                nt(t);
                var o = r.has(e);
                if (!o && n < 3) throw TypeError("Updating absent value");
                var i = o ? r.get(e) : nt(n > 2 ? arguments[2] : void 0)(e, r);
                return r.set(e, t(i, e, r)), r;
            },
        }
    );
    var Vo = function (e, t) {
        var r,
            n = ie(this),
            o = arguments.length > 2 ? arguments[2] : void 0;
        if ("function" != typeof t && "function" != typeof o) throw TypeError("At least one callback required");
        return n.has(e) ? ((r = n.get(e)), "function" == typeof t && ((r = t(r)), n.set(e, r))) : "function" == typeof o && ((r = o()), n.set(e, r)), r;
    };
    rt({ target: "Map", proto: !0, real: !0, forced: !1 }, { upsert: Vo });
    rt({ target: "Map", proto: !0, real: !0, forced: !1 }, { updateOrInsert: Vo });
    var Fo,
        Go = "[\t\n\v\f\r                　\u2028\u2029\ufeff]",
        Ho = RegExp("^" + Go + Go + "*"),
        Yo = RegExp(Go + Go + "*$"),
        Wo = {
            trim:
                ((Fo = 3),
                function (e) {
                    var t = vn(g(e));
                    return 1 & Fo && (t = t.replace(Ho, "")), 2 & Fo && (t = t.replace(Yo, "")), t;
                }),
        },
        Qo = Ge.f,
        zo = ne.f,
        Ko = se.f,
        Jo = Wo.trim,
        $o = c.Number,
        Xo = $o.prototype,
        Zo = "Number" == w(Qt(Xo)),
        ei = function (e) {
            if (B(e)) throw TypeError("Cannot convert a Symbol value to a number");
            var t,
                r,
                n,
                o,
                i,
                s,
                a,
                u,
                c = $(e, "number");
            if ("string" == typeof c && c.length > 2)
                if (43 === (t = (c = Jo(c)).charCodeAt(0)) || 45 === t) {
                    if (88 === (r = c.charCodeAt(2)) || 120 === r) return NaN;
                } else if (48 === t) {
                    switch (c.charCodeAt(1)) {
                        case 66:
                        case 98:
                            (n = 2), (o = 49);
                            break;
                        case 79:
                        case 111:
                            (n = 8), (o = 55);
                            break;
                        default:
                            return +c;
                    }
                    for (s = (i = c.slice(2)).length, a = 0; a < s; a++) if ((u = i.charCodeAt(a)) < 48 || u > o) return NaN;
                    return parseInt(i, n);
                }
            return +c;
        };
    if (et("Number", !$o(" 0o1") || !$o("0b1") || $o("+0x1"))) {
        for (
            var ti,
                ri = function (e) {
                    var t = arguments.length < 1 ? 0 : e,
                        r = this;
                    return r instanceof ri &&
                        (Zo
                            ? l(function () {
                                  Xo.valueOf.call(r);
                              })
                            : "Number" != w(r))
                        ? oo(new $o(ei(t)), r, ri)
                        : ei(t);
                },
                ni = p ? Qo($o) : "MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),
                oi = 0;
            ni.length > oi;
            oi++
        )
            F($o, (ti = ni[oi])) && !F(ri, ti) && Ko(ri, ti, zo($o, ti));
        (ri.prototype = Xo), (Xo.constructor = ri), Ie(c, "Number", ri);
    }
    rt({ target: "Number", stat: !0 }, { EPSILON: Math.pow(2, -52) });
    var ii = c.isFinite,
        si =
            Number.isFinite ||
            function (e) {
                return "number" == typeof e && ii(e);
            };
    rt({ target: "Number", stat: !0 }, { isFinite: si });
    var ai = Math.floor,
        ui = function (e) {
            return !I(e) && isFinite(e) && ai(e) === e;
        };
    rt({ target: "Number", stat: !0 }, { isInteger: ui });
    rt(
        { target: "Number", stat: !0 },
        {
            isNaN: function (e) {
                return e != e;
            },
        }
    );
    var ci = Math.abs;
    rt(
        { target: "Number", stat: !0 },
        {
            isSafeInteger: function (e) {
                return ui(e) && ci(e) <= 9007199254740991;
            },
        }
    );
    rt({ target: "Number", stat: !0 }, { MAX_SAFE_INTEGER: 9007199254740991 });
    rt({ target: "Number", stat: !0 }, { MIN_SAFE_INTEGER: -9007199254740991 });
    var li = Wo.trim,
        pi = c.parseFloat,
        fi =
            1 / pi("\t\n\v\f\r                　\u2028\u2029\ufeff-0") != -1 / 0
                ? function (e) {
                      var t = li(vn(e)),
                          r = pi(t);
                      return 0 === r && "-" == t.charAt(0) ? -0 : r;
                  }
                : pi;
    rt({ target: "Number", stat: !0, forced: Number.parseFloat != fi }, { parseFloat: fi });
    var hi = Wo.trim,
        di = c.parseInt,
        yi = /^[+-]?0[Xx]/,
        vi =
            8 !== di("\t\n\v\f\r                　\u2028\u2029\ufeff08") || 22 !== di("\t\n\v\f\r                　\u2028\u2029\ufeff0x16")
                ? function (e, t) {
                      var r = hi(vn(e));
                      return di(r, t >>> 0 || (yi.test(r) ? 16 : 10));
                  }
                : di;
    rt({ target: "Number", stat: !0, forced: Number.parseInt != vi }, { parseInt: vi });
    var Si = function (e) {
            if ("number" != typeof e && "Number" != w(e)) throw TypeError("Incorrect invocation");
            return +e;
        },
        _i = function (e) {
            var t = vn(g(this)),
                r = "",
                n = Me(e);
            if (n < 0 || n == 1 / 0) throw RangeError("Wrong number of repetitions");
            for (; n > 0; (n >>>= 1) && (t += t)) 1 & n && (r += t);
            return r;
        },
        Ei = (1).toFixed,
        wi = Math.floor,
        mi = function (e, t, r) {
            return 0 === t ? r : t % 2 == 1 ? mi(e, t - 1, r * e) : mi(e * e, t / 2, r);
        },
        Ti = function (e, t, r) {
            for (var n = -1, o = r; ++n < 6; ) (o += t * e[n]), (e[n] = o % 1e7), (o = wi(o / 1e7));
        },
        gi = function (e, t) {
            for (var r = 6, n = 0; --r >= 0; ) (n += e[r]), (e[r] = wi(n / t)), (n = (n % t) * 1e7);
        },
        Oi = function (e) {
            for (var t = 6, r = ""; --t >= 0; )
                if ("" !== r || 0 === t || 0 !== e[t]) {
                    var n = String(e[t]);
                    r = "" === r ? n : r + _i.call("0", 7 - n.length) + n;
                }
            return r;
        },
        Ii =
            (Ei && ("0.000" !== (8e-5).toFixed(3) || "1" !== (0.9).toFixed(0) || "1.25" !== (1.255).toFixed(2) || "1000000000000000128" !== (0xde0b6b3a7640080).toFixed(0))) ||
            !l(function () {
                Ei.call({});
            });
    rt(
        { target: "Number", proto: !0, forced: Ii },
        {
            toFixed: function (e) {
                var t,
                    r,
                    n,
                    o,
                    i = Si(this),
                    s = Me(e),
                    a = [0, 0, 0, 0, 0, 0],
                    u = "",
                    c = "0";
                if (s < 0 || s > 20) throw RangeError("Incorrect fraction digits");
                if (i != i) return "NaN";
                if (i <= -1e21 || i >= 1e21) return String(i);
                if ((i < 0 && ((u = "-"), (i = -i)), i > 1e-21))
                    if (
                        ((r =
                            (t =
                                (function (e) {
                                    for (var t = 0, r = e; r >= 4096; ) (t += 12), (r /= 4096);
                                    for (; r >= 2; ) (t += 1), (r /= 2);
                                    return t;
                                })(i * mi(2, 69, 1)) - 69) < 0
                                ? i * mi(2, -t, 1)
                                : i / mi(2, t, 1)),
                        (r *= 4503599627370496),
                        (t = 52 - t) > 0)
                    ) {
                        for (Ti(a, 0, r), n = s; n >= 7; ) Ti(a, 1e7, 0), (n -= 7);
                        for (Ti(a, mi(10, n, 1), 0), n = t - 1; n >= 23; ) gi(a, 1 << 23), (n -= 23);
                        gi(a, 1 << n), Ti(a, 1, 1), gi(a, 2), (c = Oi(a));
                    } else Ti(a, 0, r), Ti(a, 1 << -t, 0), (c = Oi(a) + _i.call("0", s));
                return (c = s > 0 ? u + ((o = c.length) <= s ? "0." + _i.call("0", s - o) + c : c.slice(0, o - s) + "." + c.slice(o - s)) : u + c);
            },
        }
    );
    var Ri = (1).toPrecision,
        bi =
            l(function () {
                return "1" !== Ri.call(1, void 0);
            }) ||
            !l(function () {
                Ri.call({});
            });
    rt(
        { target: "Number", proto: !0, forced: bi },
        {
            toPrecision: function (e) {
                return void 0 === e ? Ri.call(Si(this)) : Ri.call(Si(this), e);
            },
        }
    );
    Gn.Number;
    var Ci = /^[\da-z]+$/;
    rt(
        { target: "Number", stat: !0 },
        {
            fromString: function (e, t) {
                var r,
                    n,
                    o = 1;
                if ("string" != typeof e) throw TypeError("Invalid number representation");
                if (!e.length) throw SyntaxError("Invalid number representation");
                if ("-" == e.charAt(0) && ((o = -1), !(e = e.slice(1)).length)) throw SyntaxError("Invalid number representation");
                if ((r = void 0 === t ? 10 : Me(t)) < 2 || r > 36) throw RangeError("Invalid radix");
                if (!Ci.test(e) || (n = vi(e, r)).toString(r) !== e) throw SyntaxError("Invalid number representation");
                return o * n;
            },
        }
    );
    var Pi = "Incorrect Number.range arguments",
        Ni = Re.set,
        Ai = Re.getterFor("NumericRangeIterator"),
        Mi = Lr(
            function (e, t, r, n, o, i) {
                if (typeof e != n || (t !== 1 / 0 && t !== -1 / 0 && typeof t != n)) throw new TypeError(Pi);
                if (e === 1 / 0 || e === -1 / 0) throw new RangeError(Pi);
                var s,
                    a = t > e,
                    u = !1;
                if (void 0 === r) s = void 0;
                else if (I(r)) (s = r.step), (u = !!r.inclusive);
                else {
                    if (typeof r != n) throw new TypeError(Pi);
                    s = r;
                }
                if ((null == s && (s = a ? i : -i), typeof s != n)) throw new TypeError(Pi);
                if (s === 1 / 0 || s === -1 / 0 || (s === o && e !== t)) throw new RangeError(Pi);
                Ni(this, { type: "NumericRangeIterator", start: e, end: t, step: s, inclusiveEnd: u, hitsEnd: e != e || t != t || s != s || t > e != s > o, currentCount: o, zero: o }),
                    p || ((this.start = e), (this.end = t), (this.step = s), (this.inclusive = u));
            },
            "NumericRangeIterator",
            function () {
                var e = Ai(this);
                if (e.hitsEnd) return { value: void 0, done: !0 };
                var t = e.start,
                    r = e.end,
                    n = t + e.step * e.currentCount++;
                n === r && (e.hitsEnd = !0);
                var o = e.inclusiveEnd;
                return (r > t ? (o ? n > r : n >= r) : o ? r > n : r >= n) ? { value: void 0, done: (e.hitsEnd = !0) } : { value: n, done: !1 };
            }
        ),
        ji = function (e) {
            return { get: e, set: function () {}, configurable: !0, enumerable: !1 };
        };
    p &&
        kt(Mi.prototype, {
            start: ji(function () {
                return Ai(this).start;
            }),
            end: ji(function () {
                return Ai(this).end;
            }),
            inclusive: ji(function () {
                return Ai(this).inclusiveEnd;
            }),
            step: ji(function () {
                return Ai(this).step;
            }),
        });
    var Li = Mi;
    rt(
        { target: "Number", stat: !0 },
        {
            range: function (e, t, r) {
                return new Li(e, t, r, "number", 0, 1);
            },
        }
    );
    var Di,
        xi = f.f,
        Bi = {
            values:
                ((Di = !1),
                function (e) {
                    for (var t, r = O(e), n = Ut(r), o = n.length, i = 0, s = []; o > i; ) (t = n[i++]), (p && !xi.call(r, t)) || s.push(Di ? [t, r[t]] : r[t]);
                    return s;
                }),
        }.values;
    rt(
        { target: "Object", stat: !0 },
        {
            values: function (e) {
                return Bi(e);
            },
        }
    );
    Gn.Object.values;
    var qi = function (e, t) {
        var r = this;
        if (!(r instanceof qi)) return new qi(e, t);
        Dr && (r = Dr(new Error(void 0), Or(r))), void 0 !== t && ue(r, "message", vn(t));
        var n = [];
        return ro(e, n.push, { that: n }), ue(r, "errors", n), r;
    };
    (qi.prototype = Qt(Error.prototype, { constructor: _(5, qi), message: _(5, ""), name: _(5, "AggregateError") })), rt({ global: !0 }, { AggregateError: qi });
    var Ui,
        ki,
        Vi,
        Fi,
        Gi = c.Promise,
        Hi = /(?:ipad|iphone|ipod).*applewebkit/i.test(C),
        Yi = c.setImmediate,
        Wi = c.clearImmediate,
        Qi = c.process,
        zi = c.MessageChannel,
        Ki = c.Dispatch,
        Ji = 0,
        $i = {};
    try {
        Ui = c.location;
    } catch (e) {}
    var Xi = function (e) {
            if ($i.hasOwnProperty(e)) {
                var t = $i[e];
                delete $i[e], t();
            }
        },
        Zi = function (e) {
            return function () {
                Xi(e);
            };
        },
        es = function (e) {
            Xi(e.data);
        },
        ts = function (e) {
            c.postMessage(String(e), Ui.protocol + "//" + Ui.host);
        };
    (Yi && Wi) ||
        ((Yi = function (e) {
            for (var t = [], r = arguments.length, n = 1; r > n; ) t.push(arguments[n++]);
            return (
                ($i[++Ji] = function () {
                    ("function" == typeof e ? e : Function(e)).apply(void 0, t);
                }),
                ki(Ji),
                Ji
            );
        }),
        (Wi = function (e) {
            delete $i[e];
        }),
        rn
            ? (ki = function (e) {
                  Qi.nextTick(Zi(e));
              })
            : Ki && Ki.now
            ? (ki = function (e) {
                  Ki.now(Zi(e));
              })
            : zi && !Hi
            ? ((Fi = (Vi = new zi()).port2), (Vi.port1.onmessage = es), (ki = ot(Fi.postMessage, Fi, 1)))
            : c.addEventListener && "function" == typeof postMessage && !c.importScripts && Ui && "file:" !== Ui.protocol && !l(ts)
            ? ((ki = ts), c.addEventListener("message", es, !1))
            : (ki =
                  "onreadystatechange" in te("script")
                      ? function (e) {
                            Vt.appendChild(te("script")).onreadystatechange = function () {
                                Vt.removeChild(this), Xi(e);
                            };
                        }
                      : function (e) {
                            setTimeout(Zi(e), 0);
                        }));
    var rs,
        ns,
        os,
        is,
        ss,
        as,
        us,
        cs,
        ls = { set: Yi },
        ps = /ipad|iphone|ipod/i.test(C) && void 0 !== c.Pebble,
        fs = /web0s(?!.*chrome)/i.test(C),
        hs = ne.f,
        ds = ls.set,
        ys = c.MutationObserver || c.WebKitMutationObserver,
        vs = c.document,
        Ss = c.process,
        _s = c.Promise,
        Es = hs(c, "queueMicrotask"),
        ws = Es && Es.value;
    ws ||
        ((rs = function () {
            var e, t;
            for (rn && (e = Ss.domain) && e.exit(); ns; ) {
                (t = ns.fn), (ns = ns.next);
                try {
                    t();
                } catch (e) {
                    throw (ns ? is() : (os = void 0), e);
                }
            }
            (os = void 0), e && e.enter();
        }),
        Hi || rn || fs || !ys || !vs
            ? !ps && _s && _s.resolve
                ? (((us = _s.resolve(void 0)).constructor = _s),
                  (cs = us.then),
                  (is = function () {
                      cs.call(us, rs);
                  }))
                : (is = rn
                      ? function () {
                            Ss.nextTick(rs);
                        }
                      : function () {
                            ds.call(c, rs);
                        })
            : ((ss = !0),
              (as = vs.createTextNode("")),
              new ys(rs).observe(as, { characterData: !0 }),
              (is = function () {
                  as.data = ss = !ss;
              })));
    var ms =
            ws ||
            function (e) {
                var t = { fn: e, next: void 0 };
                os && (os.next = t), ns || ((ns = t), is()), (os = t);
            },
        Ts = {},
        gs = function (e) {
            var t, r;
            (this.promise = new e(function (e, n) {
                if (void 0 !== t || void 0 !== r) throw TypeError("Bad Promise constructor");
                (t = e), (r = n);
            })),
                (this.resolve = nt(t)),
                (this.reject = nt(r));
        };
    Ts.f = function (e) {
        return new gs(e);
    };
    var Os,
        Is,
        Rs,
        bs,
        Cs = function (e, t) {
            if ((ie(e), I(t) && t.constructor === e)) return t;
            var r = Ts.f(e);
            return (0, r.resolve)(t), r.promise;
        },
        Ps = function (e) {
            try {
                return { error: !1, value: e() };
            } catch (e) {
                return { error: !0, value: e };
            }
        },
        Ns = "object" == typeof window,
        As = ls.set,
        Ms = K("species"),
        js = "Promise",
        Ls = Re.get,
        Ds = Re.set,
        xs = Re.getterFor(js),
        Bs = Gi && Gi.prototype,
        qs = Gi,
        Us = Bs,
        ks = c.TypeError,
        Vs = c.document,
        Fs = c.process,
        Gs = Ts.f,
        Hs = Gs,
        Ys = !!(Vs && Vs.createEvent && c.dispatchEvent),
        Ws = "function" == typeof PromiseRejectionEvent,
        Qs = !1,
        zs = et(js, function () {
            var e = he(qs),
                t = e !== String(qs);
            if (!t && 66 === L) return !0;
            if (L >= 51 && /native code/.test(e)) return !1;
            var r = new qs(function (e) {
                    e(1);
                }),
                n = function (e) {
                    e(
                        function () {},
                        function () {}
                    );
                };
            return ((r.constructor = {})[Ms] = n), !(Qs = r.then(function () {}) instanceof n) || (!t && Ns && !Ws);
        }),
        Ks =
            zs ||
            !gt(function (e) {
                qs.all(e).catch(function () {});
            }),
        Js = function (e) {
            var t;
            return !(!I(e) || "function" != typeof (t = e.then)) && t;
        },
        $s = function (e, t) {
            if (!e.notified) {
                e.notified = !0;
                var r = e.reactions;
                ms(function () {
                    for (var n = e.value, o = 1 == e.state, i = 0; r.length > i; ) {
                        var s,
                            a,
                            u,
                            c = r[i++],
                            l = o ? c.ok : c.fail,
                            p = c.resolve,
                            f = c.reject,
                            h = c.domain;
                        try {
                            l
                                ? (o || (2 === e.rejection && ta(e), (e.rejection = 1)),
                                  !0 === l ? (s = n) : (h && h.enter(), (s = l(n)), h && (h.exit(), (u = !0))),
                                  s === c.promise ? f(ks("Promise-chain cycle")) : (a = Js(s)) ? a.call(s, p, f) : p(s))
                                : f(n);
                        } catch (e) {
                            h && !u && h.exit(), f(e);
                        }
                    }
                    (e.reactions = []), (e.notified = !1), t && !e.rejection && Zs(e);
                });
            }
        },
        Xs = function (e, t, r) {
            var n, o;
            Ys ? (((n = Vs.createEvent("Event")).promise = t), (n.reason = r), n.initEvent(e, !1, !0), c.dispatchEvent(n)) : (n = { promise: t, reason: r }),
                !Ws && (o = c["on" + e])
                    ? o(n)
                    : "unhandledrejection" === e &&
                      (function (e, t) {
                          var r = c.console;
                          r && r.error && (1 === arguments.length ? r.error(e) : r.error(e, t));
                      })("Unhandled promise rejection", r);
        },
        Zs = function (e) {
            As.call(c, function () {
                var t,
                    r = e.facade,
                    n = e.value;
                if (
                    ea(e) &&
                    ((t = Ps(function () {
                        rn ? Fs.emit("unhandledRejection", n, r) : Xs("unhandledrejection", r, n);
                    })),
                    (e.rejection = rn || ea(e) ? 2 : 1),
                    t.error)
                )
                    throw t.value;
            });
        },
        ea = function (e) {
            return 1 !== e.rejection && !e.parent;
        },
        ta = function (e) {
            As.call(c, function () {
                var t = e.facade;
                rn ? Fs.emit("rejectionHandled", t) : Xs("rejectionhandled", t, e.value);
            });
        },
        ra = function (e, t, r) {
            return function (n) {
                e(t, n, r);
            };
        },
        na = function (e, t, r) {
            e.done || ((e.done = !0), r && (e = r), (e.value = t), (e.state = 2), $s(e, !0));
        },
        oa = function (e, t, r) {
            if (!e.done) {
                (e.done = !0), r && (e = r);
                try {
                    if (e.facade === t) throw ks("Promise can't be resolved itself");
                    var n = Js(t);
                    n
                        ? ms(function () {
                              var r = { done: !1 };
                              try {
                                  n.call(t, ra(oa, r, e), ra(na, r, e));
                              } catch (t) {
                                  na(r, t, e);
                              }
                          })
                        : ((e.value = t), (e.state = 1), $s(e, !1));
                } catch (t) {
                    na({ done: !1 }, t, e);
                }
            }
        };
    if (
        zs &&
        ((Us = (qs = function (e) {
            no(this, qs, js), nt(e), Os.call(this);
            var t = Ls(this);
            try {
                e(ra(oa, t), ra(na, t));
            } catch (e) {
                na(t, e);
            }
        }).prototype),
        ((Os = function (e) {
            Ds(this, { type: js, done: !1, notified: !1, parent: !1, reactions: [], rejection: !1, state: 0, value: void 0 });
        }).prototype = so(Us, {
            then: function (e, t) {
                var r = xs(this),
                    n = Gs(ko(this, qs));
                return (n.ok = "function" != typeof e || e), (n.fail = "function" == typeof t && t), (n.domain = rn ? Fs.domain : void 0), (r.parent = !0), r.reactions.push(n), 0 != r.state && $s(r, !1), n.promise;
            },
            catch: function (e) {
                return this.then(void 0, e);
            },
        })),
        (Is = function () {
            var e = new Os(),
                t = Ls(e);
            (this.promise = e), (this.resolve = ra(oa, t)), (this.reject = ra(na, t));
        }),
        (Ts.f = Gs = function (e) {
            return e === qs || e === Rs ? new Is(e) : Hs(e);
        }),
        "function" == typeof Gi && Bs !== Object.prototype)
    ) {
        (bs = Bs.then),
            Qs ||
                (Ie(
                    Bs,
                    "then",
                    function (e, t) {
                        var r = this;
                        return new qs(function (e, t) {
                            bs.call(r, e, t);
                        }).then(e, t);
                    },
                    { unsafe: !0 }
                ),
                Ie(Bs, "catch", Us.catch, { unsafe: !0 }));
        try {
            delete Bs.constructor;
        } catch (e) {}
        Dr && Dr(Bs, Us);
    }
    rt({ global: !0, wrap: !0, forced: zs }, { Promise: qs }),
        Ar(qs, js, !1),
        Ln(js),
        (Rs = b(js)),
        rt(
            { target: js, stat: !0, forced: zs },
            {
                reject: function (e) {
                    var t = Gs(this);
                    return t.reject.call(void 0, e), t.promise;
                },
            }
        ),
        rt(
            { target: js, stat: !0, forced: zs },
            {
                resolve: function (e) {
                    return Cs(this, e);
                },
            }
        ),
        rt(
            { target: js, stat: !0, forced: Ks },
            {
                all: function (e) {
                    var t = this,
                        r = Gs(t),
                        n = r.resolve,
                        o = r.reject,
                        i = Ps(function () {
                            var r = nt(t.resolve),
                                i = [],
                                s = 0,
                                a = 1;
                            ro(e, function (e) {
                                var u = s++,
                                    c = !1;
                                i.push(void 0),
                                    a++,
                                    r.call(t, e).then(function (e) {
                                        c || ((c = !0), (i[u] = e), --a || n(i));
                                    }, o);
                            }),
                                --a || n(i);
                        });
                    return i.error && o(i.value), r.promise;
                },
                race: function (e) {
                    var t = this,
                        r = Gs(t),
                        n = r.reject,
                        o = Ps(function () {
                            var o = nt(t.resolve);
                            ro(e, function (e) {
                                o.call(t, e).then(r.resolve, n);
                            });
                        });
                    return o.error && n(o.value), r.promise;
                },
            }
        ),
        rt(
            { target: "Promise", stat: !0 },
            {
                allSettled: function (e) {
                    var t = this,
                        r = Ts.f(t),
                        n = r.resolve,
                        o = r.reject,
                        i = Ps(function () {
                            var r = nt(t.resolve),
                                o = [],
                                i = 0,
                                s = 1;
                            ro(e, function (e) {
                                var a = i++,
                                    u = !1;
                                o.push(void 0),
                                    s++,
                                    r.call(t, e).then(
                                        function (e) {
                                            u || ((u = !0), (o[a] = { status: "fulfilled", value: e }), --s || n(o));
                                        },
                                        function (e) {
                                            u || ((u = !0), (o[a] = { status: "rejected", reason: e }), --s || n(o));
                                        }
                                    );
                            }),
                                --s || n(o);
                        });
                    return i.error && o(i.value), r.promise;
                },
            }
        );
    rt(
        { target: "Promise", stat: !0 },
        {
            any: function (e) {
                var t = this,
                    r = Ts.f(t),
                    n = r.resolve,
                    o = r.reject,
                    i = Ps(function () {
                        var r = nt(t.resolve),
                            i = [],
                            s = 0,
                            a = 1,
                            u = !1;
                        ro(e, function (e) {
                            var c = s++,
                                l = !1;
                            i.push(void 0),
                                a++,
                                r.call(t, e).then(
                                    function (e) {
                                        l || u || ((u = !0), n(e));
                                    },
                                    function (e) {
                                        l || u || ((l = !0), (i[c] = e), --a || o(new (b("AggregateError"))(i, "No one promise resolved")));
                                    }
                                );
                        }),
                            --a || o(new (b("AggregateError"))(i, "No one promise resolved"));
                    });
                return i.error && o(i.value), r.promise;
            },
        }
    );
    var ia =
        !!Gi &&
        l(function () {
            Gi.prototype.finally.call({ then: function () {} }, function () {});
        });
    if (
        (rt(
            { target: "Promise", proto: !0, real: !0, forced: ia },
            {
                finally: function (e) {
                    var t = ko(this, b("Promise")),
                        r = "function" == typeof e;
                    return this.then(
                        r
                            ? function (r) {
                                  return Cs(t, e()).then(function () {
                                      return r;
                                  });
                              }
                            : e,
                        r
                            ? function (r) {
                                  return Cs(t, e()).then(function () {
                                      throw r;
                                  });
                              }
                            : e
                    );
                },
            }
        ),
        "function" == typeof Gi)
    ) {
        var sa = b("Promise").prototype.finally;
        Gi.prototype.finally !== sa && Ie(Gi.prototype, "finally", sa, { unsafe: !0 });
    }
    Gn.Promise;
    rt(
        { target: "Promise", stat: !0 },
        {
            try: function (e) {
                var t = Ts.f(this),
                    r = Ps(e);
                return (r.error ? t.reject : t.resolve)(r.value), t.promise;
            },
        }
    );
    io(
        "Set",
        function (e) {
            return function () {
                return e(this, arguments.length ? arguments[0] : void 0);
            };
        },
        po
    ),
        Gn.Set;
    rt({ target: "Set", stat: !0 }, { from: Do });
    rt({ target: "Set", stat: !0 }, { of: xo });
    var aa = function () {
        for (var e = ie(this), t = nt(e.add), r = 0, n = arguments.length; r < n; r++) t.call(e, arguments[r]);
        return e;
    };
    rt(
        { target: "Set", proto: !0, real: !0, forced: !1 },
        {
            addAll: function () {
                return aa.apply(this, arguments);
            },
        }
    );
    rt(
        { target: "Set", proto: !0, real: !0, forced: !1 },
        {
            deleteAll: function () {
                return Bo.apply(this, arguments);
            },
        }
    );
    var ua = function (e) {
        return Set.prototype.values.call(e);
    };
    rt(
        { target: "Set", proto: !0, real: !0, forced: !1 },
        {
            every: function (e) {
                var t = ie(this),
                    r = ua(t),
                    n = ot(e, arguments.length > 1 ? arguments[1] : void 0, 3);
                return !ro(
                    r,
                    function (e, r) {
                        if (!n(e, e, t)) return r();
                    },
                    { IS_ITERATOR: !0, INTERRUPTED: !0 }
                ).stopped;
            },
        }
    );
    rt(
        { target: "Set", proto: !0, real: !0, forced: !1 },
        {
            difference: function (e) {
                var t = ie(this),
                    r = new (ko(t, b("Set")))(t),
                    n = nt(r.delete);
                return (
                    ro(e, function (e) {
                        n.call(r, e);
                    }),
                    r
                );
            },
        }
    );
    rt(
        { target: "Set", proto: !0, real: !0, forced: !1 },
        {
            filter: function (e) {
                var t = ie(this),
                    r = ua(t),
                    n = ot(e, arguments.length > 1 ? arguments[1] : void 0, 3),
                    o = new (ko(t, b("Set")))(),
                    i = nt(o.add);
                return (
                    ro(
                        r,
                        function (e) {
                            n(e, e, t) && i.call(o, e);
                        },
                        { IS_ITERATOR: !0 }
                    ),
                    o
                );
            },
        }
    );
    rt(
        { target: "Set", proto: !0, real: !0, forced: !1 },
        {
            find: function (e) {
                var t = ie(this),
                    r = ua(t),
                    n = ot(e, arguments.length > 1 ? arguments[1] : void 0, 3);
                return ro(
                    r,
                    function (e, r) {
                        if (n(e, e, t)) return r(e);
                    },
                    { IS_ITERATOR: !0, INTERRUPTED: !0 }
                ).result;
            },
        }
    );
    rt(
        { target: "Set", proto: !0, real: !0, forced: !1 },
        {
            intersection: function (e) {
                var t = ie(this),
                    r = new (ko(t, b("Set")))(),
                    n = nt(t.has),
                    o = nt(r.add);
                return (
                    ro(e, function (e) {
                        n.call(t, e) && o.call(r, e);
                    }),
                    r
                );
            },
        }
    );
    rt(
        { target: "Set", proto: !0, real: !0, forced: !1 },
        {
            isDisjointFrom: function (e) {
                var t = ie(this),
                    r = nt(t.has);
                return !ro(
                    e,
                    function (e, n) {
                        if (!0 === r.call(t, e)) return n();
                    },
                    { INTERRUPTED: !0 }
                ).stopped;
            },
        }
    );
    rt(
        { target: "Set", proto: !0, real: !0, forced: !1 },
        {
            isSubsetOf: function (e) {
                var t = (function (e) {
                        var t = _t(e);
                        if ("function" != typeof t) throw TypeError(String(e) + " is not iterable");
                        return ie(t.call(e));
                    })(this),
                    r = ie(e),
                    n = r.has;
                return (
                    "function" != typeof n && ((r = new (b("Set"))(e)), (n = nt(r.has))),
                    !ro(
                        t,
                        function (e, t) {
                            if (!1 === n.call(r, e)) return t();
                        },
                        { IS_ITERATOR: !0, INTERRUPTED: !0 }
                    ).stopped
                );
            },
        }
    );
    rt(
        { target: "Set", proto: !0, real: !0, forced: !1 },
        {
            isSupersetOf: function (e) {
                var t = ie(this),
                    r = nt(t.has);
                return !ro(
                    e,
                    function (e, n) {
                        if (!1 === r.call(t, e)) return n();
                    },
                    { INTERRUPTED: !0 }
                ).stopped;
            },
        }
    );
    rt(
        { target: "Set", proto: !0, real: !0, forced: !1 },
        {
            join: function (e) {
                var t = ie(this),
                    r = ua(t),
                    n = void 0 === e ? "," : String(e),
                    o = [];
                return ro(r, o.push, { that: o, IS_ITERATOR: !0 }), o.join(n);
            },
        }
    );
    rt(
        { target: "Set", proto: !0, real: !0, forced: !1 },
        {
            map: function (e) {
                var t = ie(this),
                    r = ua(t),
                    n = ot(e, arguments.length > 1 ? arguments[1] : void 0, 3),
                    o = new (ko(t, b("Set")))(),
                    i = nt(o.add);
                return (
                    ro(
                        r,
                        function (e) {
                            i.call(o, n(e, e, t));
                        },
                        { IS_ITERATOR: !0 }
                    ),
                    o
                );
            },
        }
    );
    rt(
        { target: "Set", proto: !0, real: !0, forced: !1 },
        {
            reduce: function (e) {
                var t = ie(this),
                    r = ua(t),
                    n = arguments.length < 2,
                    o = n ? void 0 : arguments[1];
                if (
                    (nt(e),
                    ro(
                        r,
                        function (r) {
                            n ? ((n = !1), (o = r)) : (o = e(o, r, r, t));
                        },
                        { IS_ITERATOR: !0 }
                    ),
                    n)
                )
                    throw TypeError("Reduce of empty set with no initial value");
                return o;
            },
        }
    );
    rt(
        { target: "Set", proto: !0, real: !0, forced: !1 },
        {
            some: function (e) {
                var t = ie(this),
                    r = ua(t),
                    n = ot(e, arguments.length > 1 ? arguments[1] : void 0, 3);
                return ro(
                    r,
                    function (e, r) {
                        if (n(e, e, t)) return r();
                    },
                    { IS_ITERATOR: !0, INTERRUPTED: !0 }
                ).stopped;
            },
        }
    );
    rt(
        { target: "Set", proto: !0, real: !0, forced: !1 },
        {
            symmetricDifference: function (e) {
                var t = ie(this),
                    r = new (ko(t, b("Set")))(t),
                    n = nt(r.delete),
                    o = nt(r.add);
                return (
                    ro(e, function (e) {
                        n.call(r, e) || o.call(r, e);
                    }),
                    r
                );
            },
        }
    );
    rt(
        { target: "Set", proto: !0, real: !0, forced: !1 },
        {
            union: function (e) {
                var t = ie(this),
                    r = new (ko(t, b("Set")))(t);
                return ro(e, nt(r.add), { that: r }), r;
            },
        }
    );
    var ca = {};
    Object.defineProperty(ca, "__esModule", { value: !0 }), (ca.ConnectionActivityMonitorImpl = void 0);
    var la = (function () {
        function e(e, t) {
            (this.currentTimeout = null), (this.pingTimeout = e), (this.connection = t), (this.currentTimeout = setTimeout(t.closeIdleConnection.bind(t), e));
        }
        return (
            (e.prototype.onSystemPing = function () {
                var e = this;
                null !== this.currentTimeout &&
                    (clearTimeout(this.currentTimeout),
                    (this.currentTimeout = setTimeout(function () {
                        e.connection.closeIdleConnection();
                    }, this.pingTimeout)));
            }),
            (e.prototype.shutdown = function () {
                null !== this.currentTimeout && (clearTimeout(this.currentTimeout), (this.currentTimeout = null));
            }),
            e
        );
    })();
    ca.ConnectionActivityMonitorImpl = la;
    var pa = {};
    Object.defineProperty(pa, "__esModule", { value: !0 }), (pa.connectionActivityMonitorFactory = void 0);
    var fa = { onSystemPing: function () {}, shutdown: function () {} };
    pa.connectionActivityMonitorFactory = function (e, t) {
        if (!t.systemPingPeriod) return fa;
        var r = t.systemPingPeriod.toNumber();
        if (r > 0) {
            var n = 2 * r;
            return new ca.ConnectionActivityMonitorImpl(n, e);
        }
        return fa;
    };
    var ha = {};
    Object.defineProperty(ha, "__esModule", { value: !0 }), (ha.sessionActivityMonitorFactory = void 0);
    var da = (function () {
        function e(e) {
            this.factory = e;
        }
        return (
            (e.prototype.onNewConnection = function (e, t) {
                this.currentConnectionMonitor = this.factory(e, t);
            }),
            (e.prototype.onConnectionClosed = function () {
                void 0 !== this.currentConnectionMonitor && (this.currentConnectionMonitor.shutdown(), (this.currentConnectionMonitor = void 0));
            }),
            (e.prototype.onSystemPing = function () {
                void 0 !== this.currentConnectionMonitor && this.currentConnectionMonitor.onSystemPing();
            }),
            e
        );
    })();
    ha.sessionActivityMonitorFactory = {
        NOOP: { onNewConnection: function () {}, onConnectionClosed: function () {}, onSystemPing: function () {} },
        create: function (e) {
            return new da(e);
        },
    };
    var ya = {};
    Object.defineProperty(ya, "__esModule", { value: !0 }),
        (ya.InternalSessionState = void 0),
        (function (e) {
            (e.INITIALISING = "initialising"), (e.CONNECTING = "connecting"), (e.CONNECTED = "connected"), (e.DISCONNECTED = "disconnected"), (e.RECONNECTING = "reconnecting"), (e.CLOSING = "closing"), (e.CLOSED = "closed");
        })(ya.InternalSessionState || (ya.InternalSessionState = {}));
    var va = {};
    Object.defineProperty(va, "__esModule", { value: !0 }), (va.ErrorReason = void 0);
    var Sa = (function () {
        function e(e, t) {
            (this.id = e), (this.reason = t);
        }
        return (
            (e.prototype.toString = function () {
                return this.id + ": " + this.reason;
            }),
            e
        );
    })();
    va.ErrorReason = Sa;
    var _a = wa,
        Ea = null;
    try {
        Ea = new WebAssembly.Instance(
            new WebAssembly.Module(
                new Uint8Array([
                    0,
                    97,
                    115,
                    109,
                    1,
                    0,
                    0,
                    0,
                    1,
                    13,
                    2,
                    96,
                    0,
                    1,
                    127,
                    96,
                    4,
                    127,
                    127,
                    127,
                    127,
                    1,
                    127,
                    3,
                    7,
                    6,
                    0,
                    1,
                    1,
                    1,
                    1,
                    1,
                    6,
                    6,
                    1,
                    127,
                    1,
                    65,
                    0,
                    11,
                    7,
                    50,
                    6,
                    3,
                    109,
                    117,
                    108,
                    0,
                    1,
                    5,
                    100,
                    105,
                    118,
                    95,
                    115,
                    0,
                    2,
                    5,
                    100,
                    105,
                    118,
                    95,
                    117,
                    0,
                    3,
                    5,
                    114,
                    101,
                    109,
                    95,
                    115,
                    0,
                    4,
                    5,
                    114,
                    101,
                    109,
                    95,
                    117,
                    0,
                    5,
                    8,
                    103,
                    101,
                    116,
                    95,
                    104,
                    105,
                    103,
                    104,
                    0,
                    0,
                    10,
                    191,
                    1,
                    6,
                    4,
                    0,
                    35,
                    0,
                    11,
                    36,
                    1,
                    1,
                    126,
                    32,
                    0,
                    173,
                    32,
                    1,
                    173,
                    66,
                    32,
                    134,
                    132,
                    32,
                    2,
                    173,
                    32,
                    3,
                    173,
                    66,
                    32,
                    134,
                    132,
                    126,
                    34,
                    4,
                    66,
                    32,
                    135,
                    167,
                    36,
                    0,
                    32,
                    4,
                    167,
                    11,
                    36,
                    1,
                    1,
                    126,
                    32,
                    0,
                    173,
                    32,
                    1,
                    173,
                    66,
                    32,
                    134,
                    132,
                    32,
                    2,
                    173,
                    32,
                    3,
                    173,
                    66,
                    32,
                    134,
                    132,
                    127,
                    34,
                    4,
                    66,
                    32,
                    135,
                    167,
                    36,
                    0,
                    32,
                    4,
                    167,
                    11,
                    36,
                    1,
                    1,
                    126,
                    32,
                    0,
                    173,
                    32,
                    1,
                    173,
                    66,
                    32,
                    134,
                    132,
                    32,
                    2,
                    173,
                    32,
                    3,
                    173,
                    66,
                    32,
                    134,
                    132,
                    128,
                    34,
                    4,
                    66,
                    32,
                    135,
                    167,
                    36,
                    0,
                    32,
                    4,
                    167,
                    11,
                    36,
                    1,
                    1,
                    126,
                    32,
                    0,
                    173,
                    32,
                    1,
                    173,
                    66,
                    32,
                    134,
                    132,
                    32,
                    2,
                    173,
                    32,
                    3,
                    173,
                    66,
                    32,
                    134,
                    132,
                    129,
                    34,
                    4,
                    66,
                    32,
                    135,
                    167,
                    36,
                    0,
                    32,
                    4,
                    167,
                    11,
                    36,
                    1,
                    1,
                    126,
                    32,
                    0,
                    173,
                    32,
                    1,
                    173,
                    66,
                    32,
                    134,
                    132,
                    32,
                    2,
                    173,
                    32,
                    3,
                    173,
                    66,
                    32,
                    134,
                    132,
                    130,
                    34,
                    4,
                    66,
                    32,
                    135,
                    167,
                    36,
                    0,
                    32,
                    4,
                    167,
                    11,
                ])
            ),
            {}
        ).exports;
    } catch (e) {}
    function wa(e, t, r) {
        (this.low = 0 | e), (this.high = 0 | t), (this.unsigned = !!r);
    }
    function ma(e) {
        return !0 === (e && e.__isLong__);
    }
    wa.prototype.__isLong__, Object.defineProperty(wa.prototype, "__isLong__", { value: !0 }), (wa.isLong = ma);
    var Ta = {},
        ga = {};
    function Oa(e, t) {
        var r, n, o;
        return t
            ? (o = 0 <= (e >>>= 0) && e < 256) && (n = ga[e])
                ? n
                : ((r = Ra(e, (0 | e) < 0 ? -1 : 0, !0)), o && (ga[e] = r), r)
            : (o = -128 <= (e |= 0) && e < 128) && (n = Ta[e])
            ? n
            : ((r = Ra(e, e < 0 ? -1 : 0, !1)), o && (Ta[e] = r), r);
    }
    function Ia(e, t) {
        if (isNaN(e)) return t ? Da : La;
        if (t) {
            if (e < 0) return Da;
            if (e >= Aa) return ka;
        } else {
            if (e <= -Ma) return Va;
            if (e + 1 >= Ma) return Ua;
        }
        return e < 0 ? Ia(-e, t).neg() : Ra(e % Na | 0, (e / Na) | 0, t);
    }
    function Ra(e, t, r) {
        return new wa(e, t, r);
    }
    (wa.fromInt = Oa), (wa.fromNumber = Ia), (wa.fromBits = Ra);
    var ba = Math.pow;
    function Ca(e, t, r) {
        if (0 === e.length) throw Error("empty string");
        if ("NaN" === e || "Infinity" === e || "+Infinity" === e || "-Infinity" === e) return La;
        if (("number" == typeof t ? ((r = t), (t = !1)) : (t = !!t), (r = r || 10) < 2 || 36 < r)) throw RangeError("radix");
        var n;
        if ((n = e.indexOf("-")) > 0) throw Error("interior hyphen");
        if (0 === n) return Ca(e.substring(1), t, r).neg();
        for (var o = Ia(ba(r, 8)), i = La, s = 0; s < e.length; s += 8) {
            var a = Math.min(8, e.length - s),
                u = parseInt(e.substring(s, s + a), r);
            if (a < 8) {
                var c = Ia(ba(r, a));
                i = i.mul(c).add(Ia(u));
            } else i = (i = i.mul(o)).add(Ia(u));
        }
        return (i.unsigned = t), i;
    }
    function Pa(e, t) {
        return "number" == typeof e ? Ia(e, t) : "string" == typeof e ? Ca(e, t) : Ra(e.low, e.high, "boolean" == typeof t ? t : e.unsigned);
    }
    (wa.fromString = Ca), (wa.fromValue = Pa);
    var Na = 4294967296,
        Aa = Na * Na,
        Ma = Aa / 2,
        ja = Oa(1 << 24),
        La = Oa(0);
    wa.ZERO = La;
    var Da = Oa(0, !0);
    wa.UZERO = Da;
    var xa = Oa(1);
    wa.ONE = xa;
    var Ba = Oa(1, !0);
    wa.UONE = Ba;
    var qa = Oa(-1);
    wa.NEG_ONE = qa;
    var Ua = Ra(-1, 2147483647, !1);
    wa.MAX_VALUE = Ua;
    var ka = Ra(-1, -1, !0);
    wa.MAX_UNSIGNED_VALUE = ka;
    var Va = Ra(0, -2147483648, !1);
    wa.MIN_VALUE = Va;
    var Fa = wa.prototype;
    (Fa.toInt = function () {
        return this.unsigned ? this.low >>> 0 : this.low;
    }),
        (Fa.toNumber = function () {
            return this.unsigned ? (this.high >>> 0) * Na + (this.low >>> 0) : this.high * Na + (this.low >>> 0);
        }),
        (Fa.toString = function (e) {
            if ((e = e || 10) < 2 || 36 < e) throw RangeError("radix");
            if (this.isZero()) return "0";
            if (this.isNegative()) {
                if (this.eq(Va)) {
                    var t = Ia(e),
                        r = this.div(t),
                        n = r.mul(t).sub(this);
                    return r.toString(e) + n.toInt().toString(e);
                }
                return "-" + this.neg().toString(e);
            }
            for (var o = Ia(ba(e, 6), this.unsigned), i = this, s = ""; ; ) {
                var a = i.div(o),
                    u = (i.sub(a.mul(o)).toInt() >>> 0).toString(e);
                if ((i = a).isZero()) return u + s;
                for (; u.length < 6; ) u = "0" + u;
                s = "" + u + s;
            }
        }),
        (Fa.getHighBits = function () {
            return this.high;
        }),
        (Fa.getHighBitsUnsigned = function () {
            return this.high >>> 0;
        }),
        (Fa.getLowBits = function () {
            return this.low;
        }),
        (Fa.getLowBitsUnsigned = function () {
            return this.low >>> 0;
        }),
        (Fa.getNumBitsAbs = function () {
            if (this.isNegative()) return this.eq(Va) ? 64 : this.neg().getNumBitsAbs();
            for (var e = 0 != this.high ? this.high : this.low, t = 31; t > 0 && 0 == (e & (1 << t)); t--);
            return 0 != this.high ? t + 33 : t + 1;
        }),
        (Fa.isZero = function () {
            return 0 === this.high && 0 === this.low;
        }),
        (Fa.eqz = Fa.isZero),
        (Fa.isNegative = function () {
            return !this.unsigned && this.high < 0;
        }),
        (Fa.isPositive = function () {
            return this.unsigned || this.high >= 0;
        }),
        (Fa.isOdd = function () {
            return 1 == (1 & this.low);
        }),
        (Fa.isEven = function () {
            return 0 == (1 & this.low);
        }),
        (Fa.equals = function (e) {
            return ma(e) || (e = Pa(e)), (this.unsigned === e.unsigned || this.high >>> 31 != 1 || e.high >>> 31 != 1) && this.high === e.high && this.low === e.low;
        }),
        (Fa.eq = Fa.equals),
        (Fa.notEquals = function (e) {
            return !this.eq(e);
        }),
        (Fa.neq = Fa.notEquals),
        (Fa.ne = Fa.notEquals),
        (Fa.lessThan = function (e) {
            return this.comp(e) < 0;
        }),
        (Fa.lt = Fa.lessThan),
        (Fa.lessThanOrEqual = function (e) {
            return this.comp(e) <= 0;
        }),
        (Fa.lte = Fa.lessThanOrEqual),
        (Fa.le = Fa.lessThanOrEqual),
        (Fa.greaterThan = function (e) {
            return this.comp(e) > 0;
        }),
        (Fa.gt = Fa.greaterThan),
        (Fa.greaterThanOrEqual = function (e) {
            return this.comp(e) >= 0;
        }),
        (Fa.gte = Fa.greaterThanOrEqual),
        (Fa.ge = Fa.greaterThanOrEqual),
        (Fa.compare = function (e) {
            if ((ma(e) || (e = Pa(e)), this.eq(e))) return 0;
            var t = this.isNegative(),
                r = e.isNegative();
            return t && !r ? -1 : !t && r ? 1 : this.unsigned ? (e.high >>> 0 > this.high >>> 0 || (e.high === this.high && e.low >>> 0 > this.low >>> 0) ? -1 : 1) : this.sub(e).isNegative() ? -1 : 1;
        }),
        (Fa.comp = Fa.compare),
        (Fa.negate = function () {
            return !this.unsigned && this.eq(Va) ? Va : this.not().add(xa);
        }),
        (Fa.neg = Fa.negate),
        (Fa.add = function (e) {
            ma(e) || (e = Pa(e));
            var t = this.high >>> 16,
                r = 65535 & this.high,
                n = this.low >>> 16,
                o = 65535 & this.low,
                i = e.high >>> 16,
                s = 65535 & e.high,
                a = e.low >>> 16,
                u = 0,
                c = 0,
                l = 0,
                p = 0;
            return (l += (p += o + (65535 & e.low)) >>> 16), (c += (l += n + a) >>> 16), (u += (c += r + s) >>> 16), (u += t + i), Ra(((l &= 65535) << 16) | (p &= 65535), ((u &= 65535) << 16) | (c &= 65535), this.unsigned);
        }),
        (Fa.subtract = function (e) {
            return ma(e) || (e = Pa(e)), this.add(e.neg());
        }),
        (Fa.sub = Fa.subtract),
        (Fa.multiply = function (e) {
            if (this.isZero()) return La;
            if ((ma(e) || (e = Pa(e)), Ea)) return Ra(Ea.mul(this.low, this.high, e.low, e.high), Ea.get_high(), this.unsigned);
            if (e.isZero()) return La;
            if (this.eq(Va)) return e.isOdd() ? Va : La;
            if (e.eq(Va)) return this.isOdd() ? Va : La;
            if (this.isNegative()) return e.isNegative() ? this.neg().mul(e.neg()) : this.neg().mul(e).neg();
            if (e.isNegative()) return this.mul(e.neg()).neg();
            if (this.lt(ja) && e.lt(ja)) return Ia(this.toNumber() * e.toNumber(), this.unsigned);
            var t = this.high >>> 16,
                r = 65535 & this.high,
                n = this.low >>> 16,
                o = 65535 & this.low,
                i = e.high >>> 16,
                s = 65535 & e.high,
                a = e.low >>> 16,
                u = 65535 & e.low,
                c = 0,
                l = 0,
                p = 0,
                f = 0;
            return (
                (p += (f += o * u) >>> 16),
                (l += (p += n * u) >>> 16),
                (p &= 65535),
                (l += (p += o * a) >>> 16),
                (c += (l += r * u) >>> 16),
                (l &= 65535),
                (c += (l += n * a) >>> 16),
                (l &= 65535),
                (c += (l += o * s) >>> 16),
                (c += t * u + r * a + n * s + o * i),
                Ra(((p &= 65535) << 16) | (f &= 65535), ((c &= 65535) << 16) | (l &= 65535), this.unsigned)
            );
        }),
        (Fa.mul = Fa.multiply),
        (Fa.divide = function (e) {
            if ((ma(e) || (e = Pa(e)), e.isZero())) throw Error("division by zero");
            var t, r, n;
            if (Ea) return this.unsigned || -2147483648 !== this.high || -1 !== e.low || -1 !== e.high ? Ra((this.unsigned ? Ea.div_u : Ea.div_s)(this.low, this.high, e.low, e.high), Ea.get_high(), this.unsigned) : this;
            if (this.isZero()) return this.unsigned ? Da : La;
            if (this.unsigned) {
                if ((e.unsigned || (e = e.toUnsigned()), e.gt(this))) return Da;
                if (e.gt(this.shru(1))) return Ba;
                n = Da;
            } else {
                if (this.eq(Va)) return e.eq(xa) || e.eq(qa) ? Va : e.eq(Va) ? xa : (t = this.shr(1).div(e).shl(1)).eq(La) ? (e.isNegative() ? xa : qa) : ((r = this.sub(e.mul(t))), (n = t.add(r.div(e))));
                if (e.eq(Va)) return this.unsigned ? Da : La;
                if (this.isNegative()) return e.isNegative() ? this.neg().div(e.neg()) : this.neg().div(e).neg();
                if (e.isNegative()) return this.div(e.neg()).neg();
                n = La;
            }
            for (r = this; r.gte(e); ) {
                t = Math.max(1, Math.floor(r.toNumber() / e.toNumber()));
                for (var o = Math.ceil(Math.log(t) / Math.LN2), i = o <= 48 ? 1 : ba(2, o - 48), s = Ia(t), a = s.mul(e); a.isNegative() || a.gt(r); ) a = (s = Ia((t -= i), this.unsigned)).mul(e);
                s.isZero() && (s = xa), (n = n.add(s)), (r = r.sub(a));
            }
            return n;
        }),
        (Fa.div = Fa.divide),
        (Fa.modulo = function (e) {
            return ma(e) || (e = Pa(e)), Ea ? Ra((this.unsigned ? Ea.rem_u : Ea.rem_s)(this.low, this.high, e.low, e.high), Ea.get_high(), this.unsigned) : this.sub(this.div(e).mul(e));
        }),
        (Fa.mod = Fa.modulo),
        (Fa.rem = Fa.modulo),
        (Fa.not = function () {
            return Ra(~this.low, ~this.high, this.unsigned);
        }),
        (Fa.and = function (e) {
            return ma(e) || (e = Pa(e)), Ra(this.low & e.low, this.high & e.high, this.unsigned);
        }),
        (Fa.or = function (e) {
            return ma(e) || (e = Pa(e)), Ra(this.low | e.low, this.high | e.high, this.unsigned);
        }),
        (Fa.xor = function (e) {
            return ma(e) || (e = Pa(e)), Ra(this.low ^ e.low, this.high ^ e.high, this.unsigned);
        }),
        (Fa.shiftLeft = function (e) {
            return ma(e) && (e = e.toInt()), 0 == (e &= 63) ? this : e < 32 ? Ra(this.low << e, (this.high << e) | (this.low >>> (32 - e)), this.unsigned) : Ra(0, this.low << (e - 32), this.unsigned);
        }),
        (Fa.shl = Fa.shiftLeft),
        (Fa.shiftRight = function (e) {
            return ma(e) && (e = e.toInt()), 0 == (e &= 63) ? this : e < 32 ? Ra((this.low >>> e) | (this.high << (32 - e)), this.high >> e, this.unsigned) : Ra(this.high >> (e - 32), this.high >= 0 ? 0 : -1, this.unsigned);
        }),
        (Fa.shr = Fa.shiftRight),
        (Fa.shiftRightUnsigned = function (e) {
            if ((ma(e) && (e = e.toInt()), 0 === (e &= 63))) return this;
            var t = this.high;
            return e < 32 ? Ra((this.low >>> e) | (t << (32 - e)), t >>> e, this.unsigned) : Ra(32 === e ? t : t >>> (e - 32), 0, this.unsigned);
        }),
        (Fa.shru = Fa.shiftRightUnsigned),
        (Fa.shr_u = Fa.shiftRightUnsigned),
        (Fa.toSigned = function () {
            return this.unsigned ? Ra(this.low, this.high, !1) : this;
        }),
        (Fa.toUnsigned = function () {
            return this.unsigned ? this : Ra(this.low, this.high, !0);
        }),
        (Fa.toBytes = function (e) {
            return e ? this.toBytesLE() : this.toBytesBE();
        }),
        (Fa.toBytesLE = function () {
            var e = this.high,
                t = this.low;
            return [255 & t, (t >>> 8) & 255, (t >>> 16) & 255, t >>> 24, 255 & e, (e >>> 8) & 255, (e >>> 16) & 255, e >>> 24];
        }),
        (Fa.toBytesBE = function () {
            var e = this.high,
                t = this.low;
            return [e >>> 24, (e >>> 16) & 255, (e >>> 8) & 255, 255 & e, t >>> 24, (t >>> 16) & 255, (t >>> 8) & 255, 255 & t];
        }),
        (wa.fromBytes = function (e, t, r) {
            return r ? wa.fromBytesLE(e, t) : wa.fromBytesBE(e, t);
        }),
        (wa.fromBytesLE = function (e, t) {
            return new wa(e[0] | (e[1] << 8) | (e[2] << 16) | (e[3] << 24), e[4] | (e[5] << 8) | (e[6] << 16) | (e[7] << 24), t);
        }),
        (wa.fromBytesBE = function (e, t) {
            return new wa((e[4] << 24) | (e[5] << 16) | (e[6] << 8) | e[7], (e[0] << 24) | (e[1] << 16) | (e[2] << 8) | e[3], t);
        });
    var Ga = {};
    Object.defineProperty(Ga, "__esModule", { value: !0 }), (Ga.ONEWAY_CID = Ga.ConversationId = void 0);
    var Ha = (function () {
        function e(e) {
            this.val = e;
        }
        return (
            (e.fromString = function (t) {
                return new e(_a.fromString(t, !1));
            }),
            (e.prototype.toString = function () {
                return this.val.toString(10);
            }),
            (e.prototype.equals = function (e) {
                return e.val && this.val.equals(e.val);
            }),
            e
        );
    })();
    (Ga.ConversationId = Ha), (Ga.ONEWAY_CID = new Ha(_a.fromNumber(0)));
    for (
        var Ya = {
                toByteArray: function (e) {
                    var t,
                        r,
                        n = Xa(e),
                        o = n[0],
                        i = n[1],
                        s = new za(
                            (function (e, t, r) {
                                return (3 * (t + r)) / 4 - r;
                            })(0, o, i)
                        ),
                        a = 0,
                        u = i > 0 ? o - 4 : o;
                    for (r = 0; r < u; r += 4)
                        (t = (Qa[e.charCodeAt(r)] << 18) | (Qa[e.charCodeAt(r + 1)] << 12) | (Qa[e.charCodeAt(r + 2)] << 6) | Qa[e.charCodeAt(r + 3)]), (s[a++] = (t >> 16) & 255), (s[a++] = (t >> 8) & 255), (s[a++] = 255 & t);
                    2 === i && ((t = (Qa[e.charCodeAt(r)] << 2) | (Qa[e.charCodeAt(r + 1)] >> 4)), (s[a++] = 255 & t));
                    1 === i && ((t = (Qa[e.charCodeAt(r)] << 10) | (Qa[e.charCodeAt(r + 1)] << 4) | (Qa[e.charCodeAt(r + 2)] >> 2)), (s[a++] = (t >> 8) & 255), (s[a++] = 255 & t));
                    return s;
                },
                fromByteArray: function (e) {
                    for (var t, r = e.length, n = r % 3, o = [], i = 0, s = r - n; i < s; i += 16383) o.push(Za(e, i, i + 16383 > s ? s : i + 16383));
                    1 === n ? ((t = e[r - 1]), o.push(Wa[t >> 2] + Wa[(t << 4) & 63] + "==")) : 2 === n && ((t = (e[r - 2] << 8) + e[r - 1]), o.push(Wa[t >> 10] + Wa[(t >> 4) & 63] + Wa[(t << 2) & 63] + "="));
                    return o.join("");
                },
            },
            Wa = [],
            Qa = [],
            za = "undefined" != typeof Uint8Array ? Uint8Array : Array,
            Ka = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
            Ja = 0,
            $a = Ka.length;
        Ja < $a;
        ++Ja
    )
        (Wa[Ja] = Ka[Ja]), (Qa[Ka.charCodeAt(Ja)] = Ja);
    function Xa(e) {
        var t = e.length;
        if (t % 4 > 0) throw new Error("Invalid string. Length must be a multiple of 4");
        var r = e.indexOf("=");
        return -1 === r && (r = t), [r, r === t ? 0 : 4 - (r % 4)];
    }
    function Za(e, t, r) {
        for (var n, o, i = [], s = t; s < r; s += 3) (n = ((e[s] << 16) & 16711680) + ((e[s + 1] << 8) & 65280) + (255 & e[s + 2])), i.push(Wa[((o = n) >> 18) & 63] + Wa[(o >> 12) & 63] + Wa[(o >> 6) & 63] + Wa[63 & o]);
        return i.join("");
    }
    (Qa["-".charCodeAt(0)] = 62), (Qa["_".charCodeAt(0)] = 63);
    var eu = {
            /*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
            read: function (e, t, r, n, o) {
                var i,
                    s,
                    a = 8 * o - n - 1,
                    u = (1 << a) - 1,
                    c = u >> 1,
                    l = -7,
                    p = r ? o - 1 : 0,
                    f = r ? -1 : 1,
                    h = e[t + p];
                for (p += f, i = h & ((1 << -l) - 1), h >>= -l, l += a; l > 0; i = 256 * i + e[t + p], p += f, l -= 8);
                for (s = i & ((1 << -l) - 1), i >>= -l, l += n; l > 0; s = 256 * s + e[t + p], p += f, l -= 8);
                if (0 === i) i = 1 - c;
                else {
                    if (i === u) return s ? NaN : (1 / 0) * (h ? -1 : 1);
                    (s += Math.pow(2, n)), (i -= c);
                }
                return (h ? -1 : 1) * s * Math.pow(2, i - n);
            },
            write: function (e, t, r, n, o, i) {
                var s,
                    a,
                    u,
                    c = 8 * i - o - 1,
                    l = (1 << c) - 1,
                    p = l >> 1,
                    f = 23 === o ? Math.pow(2, -24) - Math.pow(2, -77) : 0,
                    h = n ? 0 : i - 1,
                    d = n ? 1 : -1,
                    y = t < 0 || (0 === t && 1 / t < 0) ? 1 : 0;
                for (
                    t = Math.abs(t),
                        isNaN(t) || t === 1 / 0
                            ? ((a = isNaN(t) ? 1 : 0), (s = l))
                            : ((s = Math.floor(Math.log(t) / Math.LN2)),
                              t * (u = Math.pow(2, -s)) < 1 && (s--, (u *= 2)),
                              (t += s + p >= 1 ? f / u : f * Math.pow(2, 1 - p)) * u >= 2 && (s++, (u /= 2)),
                              s + p >= l ? ((a = 0), (s = l)) : s + p >= 1 ? ((a = (t * u - 1) * Math.pow(2, o)), (s += p)) : ((a = t * Math.pow(2, p - 1) * Math.pow(2, o)), (s = 0)));
                    o >= 8;
                    e[r + h] = 255 & a, h += d, a /= 256, o -= 8
                );
                for (s = (s << o) | a, c += o; c > 0; e[r + h] = 255 & s, h += d, s /= 256, c -= 8);
                e[r + h - d] |= 128 * y;
            },
        },
        tu = {};
    (function (e) {
        (function () {
            "use strict";
            var t =
                (this && this.__values) ||
                function (e) {
                    var t = "function" == typeof Symbol && Symbol.iterator,
                        r = t && e[t],
                        n = 0;
                    if (r) return r.call(e);
                    if (e && "number" == typeof e.length)
                        return {
                            next: function () {
                                return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
                            },
                        };
                    throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
                };
            Object.defineProperty(tu, "__esModule", { value: !0 }),
                (tu.writeBoolean = tu.readBoolean = tu.writeMap = tu.readMap = tu.readObject = tu.writeObject = tu.writeDictionary = tu.readDictionary = tu.readCollection = tu.writeCollection = tu.writeString = tu.readString = tu.writeBytes = tu.readBytes = tu.writeByte = tu.writeInt32 = tu.readInt32 = tu.writeInt64 = tu.readInt64 = tu.readByte = void 0);
            var r = _a.fromNumber(128),
                n = _a.fromNumber(127),
                o = n.not();
            function i(e) {
                var t = e.read();
                if (-1 === t) throw new Error("End of stream");
                return t;
            }
            function s(e) {
                for (var t = 0, r = 0; t < 32; ) {
                    var n = i(e);
                    if (((r |= (127 & n) << t), 0 == (128 & n))) return r;
                    t += 7;
                }
                throw new Error("Malformed int32");
            }
            function a(e, t) {
                for (; 0 != (-128 & t); ) e.write((127 & t) | 128), (t >>>= 7);
                e.write(t);
            }
            function u(e) {
                var t = s(e);
                return e.readMany(t);
            }
            function c(e, t) {
                a(e, t.length), e.writeMany(t);
            }
            function l(e) {
                var t = u(e);
                return t ? t.toString("utf8") : "";
            }
            function p(t, r) {
                c(t, e.from(r, "utf8"));
            }
            function f(e, r, n, o) {
                var i, s;
                a(e, Object.keys(r).length);
                try {
                    for (var u = t(Object.getOwnPropertyNames(r)), c = u.next(); !c.done; c = u.next()) {
                        var l = c.value;
                        n(e, l), o(e, r[l]);
                    }
                } catch (e) {
                    i = { error: e };
                } finally {
                    try {
                        c && !c.done && (s = u.return) && s.call(u);
                    } finally {
                        if (i) throw i.error;
                    }
                }
            }
            function h(e, t, r) {
                for (var n = s(e), o = {}, i = 0; i < n; ++i) {
                    o[t(e)] = r(e);
                }
                return o;
            }
            (tu.readByte = i),
                (tu.readInt64 = function (e) {
                    for (var t = _a.fromNumber(0), o = 0; o < 64; ) {
                        var s = i(e),
                            a = _a.fromNumber(s);
                        if (((t = t.or(a.and(n).shiftLeft(o))), a.and(r).equals(0))) return t;
                        o += 7;
                    }
                    throw new Error("Malformed int64");
                }),
                (tu.writeInt64 = function (e, t) {
                    for (var i = t instanceof _a ? t : _a.fromNumber(t, !1); !i.and(o).equals(0); ) e.write(i.and(n).or(r).toInt()), (i = i.shiftRightUnsigned(7));
                    e.write(i.toInt());
                }),
                (tu.readInt32 = s),
                (tu.writeInt32 = a),
                (tu.writeByte = function (e, t) {
                    e.write(t);
                }),
                (tu.readBytes = u),
                (tu.writeBytes = c),
                (tu.readString = l),
                (tu.writeString = p),
                (tu.writeCollection = function (e, r, n) {
                    var o, i;
                    a(e, r.length);
                    try {
                        for (var s = t(r), u = s.next(); !u.done; u = s.next()) {
                            n(e, u.value);
                        }
                    } catch (e) {
                        o = { error: e };
                    } finally {
                        try {
                            u && !u.done && (i = s.return) && i.call(s);
                        } finally {
                            if (o) throw o.error;
                        }
                    }
                }),
                (tu.readCollection = function (e, t) {
                    for (var r = s(e), n = [], o = 0; o < r; ++o) n.push(t(e));
                    return n;
                }),
                (tu.readDictionary = function (e, t) {
                    return h(e, l, t);
                }),
                (tu.writeDictionary = function (e, t, r) {
                    f(e, t, p, r);
                }),
                (tu.writeObject = f),
                (tu.readObject = h),
                (tu.readMap = function (e, t, r) {
                    for (var n = s(e), o = new Map(), i = 0; i < n; ++i) {
                        var a = t(e);
                        o.set(a, r(e));
                    }
                    return o;
                }),
                (tu.writeMap = function (e, t, r, n) {
                    a(e, t.size),
                        t.forEach(function (t, o) {
                            r(e, o), n(e, t);
                        });
                }),
                (tu.readBoolean = function (e) {
                    return 0 !== e.readInt8();
                }),
                (tu.writeBoolean = function (e, t) {
                    e.writeInt8(t ? 1 : 0);
                });
        }.call(this));
    }.call(this, u({}).Buffer));
    var ru = {};
    Object.defineProperty(ru, "__esModule", { value: !0 }), (ru.CIDSerialiser = void 0);
    var nu = (function () {
        function e() {}
        return (
            (e.prototype.read = function (e) {
                return new Ga.ConversationId(tu.readInt64(e));
            }),
            (e.prototype.write = function (e, t) {
                tu.writeInt64(e, t.val);
            }),
            e
        );
    })();
    ru.CIDSerialiser = new nu();
    var ou = {};
    Object.defineProperty(ou, "__esModule", { value: !0 }), (ou.AbstractSerialiser = void 0);
    var iu = (function () {
        function e() {}
        return (
            (e.prototype.read = function (e) {
                throw new Error("AbstractSerialiser#read is not implemented");
            }),
            (e.prototype.write = function (e, t) {
                throw new Error("AbstractSerialiser#write is not implemented");
            }),
            e
        );
    })();
    ou.AbstractSerialiser = iu;
    var su = {};
    Object.defineProperty(su, "__esModule", { value: !0 }), (su.CommandHeader = void 0);
    var au = (function () {
        function e(e, t) {
            (this.service = e), (this.cid = t);
        }
        return (
            (e.createRequestHeader = function (t, r) {
                return new e(t, r);
            }),
            (e.prototype.createResponseHeader = function () {
                return new e(this.service, this.cid);
            }),
            (e.prototype.createErrorHeader = function () {
                return new e(this.service, this.cid);
            }),
            (e.prototype.toString = function () {
                return "<" + this.service + ", " + this.cid.toString() + ">";
            }),
            e
        );
    })();
    su.CommandHeader = au;
    var uu,
        cu = {},
        lu =
            (this && this.__extends) ||
            ((uu = function (e, t) {
                return (uu =
                    Object.setPrototypeOf ||
                    ({ __proto__: [] } instanceof Array &&
                        function (e, t) {
                            e.__proto__ = t;
                        }) ||
                    function (e, t) {
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    })(e, t);
            }),
            function (e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
                function r() {
                    this.constructor = e;
                }
                uu(e, t), (e.prototype = null === t ? Object.create(t) : ((r.prototype = t.prototype), new r()));
            });
    Object.defineProperty(cu, "__esModule", { value: !0 }), (cu.ResponseCommandHeaderSerialiser = cu.CommandHeaderSerialiser = void 0);
    var pu = (function (e) {
            function t() {
                return (null !== e && e.apply(this, arguments)) || this;
            }
            return (
                lu(t, e),
                (t.prototype.read = function (e) {
                    var t = tu.readInt32(e),
                        r = ru.CIDSerialiser.read(e);
                    return new su.CommandHeader(t, r);
                }),
                (t.prototype.write = function (e, t) {
                    tu.writeInt32(e, t.service), ru.CIDSerialiser.write(e, t.cid);
                }),
                t
            );
        })(ou.AbstractSerialiser),
        fu = (function (e) {
            function t() {
                return (null !== e && e.apply(this, arguments)) || this;
            }
            return (
                lu(t, e),
                (t.prototype.write = function (e, t) {
                    ru.CIDSerialiser.write(e, t.cid);
                }),
                (t.prototype.read = function (e) {
                    var t = ru.CIDSerialiser.read(e);
                    return new su.CommandHeader(0, t);
                }),
                t
            );
        })(ou.AbstractSerialiser);
    (cu.CommandHeaderSerialiser = new pu()), (cu.ResponseCommandHeaderSerialiser = new fu());
    var hu = { exports: {} };
    !(function (e, t) {
        "use strict";
        hu.exports ? (hu.exports = t()) : (e.log = t());
    })(this, function () {
        "use strict";
        var e = function () {},
            t = "undefined" != typeof window && void 0 !== window.navigator && /Trident\/|MSIE /.test(window.navigator.userAgent),
            r = ["trace", "debug", "info", "warn", "error"];
        function n(e, t) {
            var r = e[t];
            if ("function" == typeof r.bind) return r.bind(e);
            try {
                return Function.prototype.bind.call(r, e);
            } catch (t) {
                return function () {
                    return Function.prototype.apply.apply(r, [e, arguments]);
                };
            }
        }
        function o() {
            console.log && (console.log.apply ? console.log.apply(console, arguments) : Function.prototype.apply.apply(console.log, [console, arguments])), console.trace && console.trace();
        }
        function i(r) {
            return "debug" === r && (r = "log"), "undefined" != typeof console && ("trace" === r && t ? o : void 0 !== console[r] ? n(console, r) : void 0 !== console.log ? n(console, "log") : e);
        }
        function s(t, n) {
            for (var o = 0; o < r.length; o++) {
                var i = r[o];
                this[i] = o < t ? e : this.methodFactory(i, t, n);
            }
            this.log = this.debug;
        }
        function a(e, t, r) {
            return function () {
                "undefined" != typeof console && (s.call(this, t, r), this[e].apply(this, arguments));
            };
        }
        function u(e, t, r) {
            return i(e) || a.apply(this, arguments);
        }
        function c(e, t, n) {
            var o,
                i = this,
                a = "loglevel";
            function c() {
                var e;
                if ("undefined" != typeof window && a) {
                    try {
                        e = window.localStorage[a];
                    } catch (e) {}
                    if (void 0 === e)
                        try {
                            var t = window.document.cookie,
                                r = t.indexOf(encodeURIComponent(a) + "=");
                            -1 !== r && (e = /^([^;]+)/.exec(t.slice(r))[1]);
                        } catch (e) {}
                    return void 0 === i.levels[e] && (e = void 0), e;
                }
            }
            "string" == typeof e ? (a += ":" + e) : "symbol" == typeof e && (a = void 0),
                (i.name = e),
                (i.levels = { TRACE: 0, DEBUG: 1, INFO: 2, WARN: 3, ERROR: 4, SILENT: 5 }),
                (i.methodFactory = n || u),
                (i.getLevel = function () {
                    return o;
                }),
                (i.setLevel = function (t, n) {
                    if (("string" == typeof t && void 0 !== i.levels[t.toUpperCase()] && (t = i.levels[t.toUpperCase()]), !("number" == typeof t && t >= 0 && t <= i.levels.SILENT))) throw "log.setLevel() called with invalid level: " + t;
                    if (
                        ((o = t),
                        !1 !== n &&
                            (function (e) {
                                var t = (r[e] || "silent").toUpperCase();
                                if ("undefined" != typeof window && a) {
                                    try {
                                        return void (window.localStorage[a] = t);
                                    } catch (e) {}
                                    try {
                                        window.document.cookie = encodeURIComponent(a) + "=" + t + ";";
                                    } catch (e) {}
                                }
                            })(t),
                        s.call(i, t, e),
                        "undefined" == typeof console && t < i.levels.SILENT)
                    )
                        return "No console available for logging";
                }),
                (i.setDefaultLevel = function (e) {
                    c() || i.setLevel(e, !1);
                }),
                (i.enableAll = function (e) {
                    i.setLevel(i.levels.TRACE, e);
                }),
                (i.disableAll = function (e) {
                    i.setLevel(i.levels.SILENT, e);
                });
            var l = c();
            null == l && (l = null == t ? "WARN" : t), i.setLevel(l, !1);
        }
        var l = new c(),
            p = {};
        l.getLogger = function (e) {
            if (("symbol" != typeof e && "string" != typeof e) || "" === e) throw new TypeError("You must supply a name when creating a logger.");
            var t = p[e];
            return t || (t = p[e] = new c(e, l.getLevel(), l.methodFactory)), t;
        };
        var f = "undefined" != typeof window ? window.log : void 0;
        return (
            (l.noConflict = function () {
                return "undefined" != typeof window && window.log === l && (window.log = f), l;
            }),
            (l.getLoggers = function () {
                return p;
            }),
            (l.default = l),
            l
        );
    }),
        (hu = hu.exports);
    var du,
        yu = {},
        vu =
            (this && this.__values) ||
            function (e) {
                var t = "function" == typeof Symbol && Symbol.iterator,
                    r = t && e[t],
                    n = 0;
                if (r) return r.call(e);
                if (e && "number" == typeof e.length)
                    return {
                        next: function () {
                            return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
                        },
                    };
                throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
            };
    function Su(e, t) {
        var r = "|" + e.toUpperCase() + "|" + t + "|",
            n = function () {
                return new Date();
            };
        return function (t, o) {
            o ? hu[e](n() + r + t, o) : hu[e](n() + r + t);
        };
    }
    Object.defineProperty(yu, "__esModule", { value: !0 }),
        (yu.setLevel = yu.create = yu.LoggingLevel = void 0),
        (function (e) {
            (e.trace = "trace"), (e.debug = "debug"), (e.info = "info"), (e.warn = "warn"), (e.error = "error");
        })((du = yu.LoggingLevel || (yu.LoggingLevel = {}))),
        (yu.create = function (e) {
            var t,
                r,
                n = {};
            try {
                for (var o = vu(Object.keys(du)), i = o.next(); !i.done; i = o.next()) {
                    var s = i.value;
                    n[s] = Su(s, e);
                }
            } catch (e) {
                t = { error: e };
            } finally {
                try {
                    i && !i.done && (r = o.return) && r.call(o);
                } finally {
                    if (t) throw t.error;
                }
            }
            return n;
        }),
        (yu.setLevel = hu.setLevel);
    var _u = {};
    Object.defineProperty(_u, "__esModule", { value: !0 }), (_u.BufferInputStream = void 0);
    var Eu = (function () {
        function e(e) {
            (this.buffer = e), (this.count = e.length), (this.pos = 0);
        }
        return (
            (e.prototype.read = function () {
                return this.pos < this.count ? 255 & this.buffer[this.pos++] : -1;
            }),
            (e.prototype.peek = function () {
                return this.pos < this.count ? 255 & this.buffer[this.pos] : -1;
            }),
            (e.prototype.readMany = function (e) {
                var t = Math.min(e, this.count - this.pos);
                if (t < 0) throw new Error("Length out of bounds");
                var r = this.buffer.slice(this.pos, this.pos + t);
                return (this.pos += t), r;
            }),
            (e.prototype.readUntil = function (e) {
                for (var t = this.count, r = this.pos; r < this.count; r++)
                    if (this.buffer[r] === e) {
                        t = r;
                        break;
                    }
                var n = this.buffer.slice(this.pos, t);
                return (this.pos = t === this.count ? t : t + 1), n;
            }),
            (e.prototype.readInt8 = function () {
                return this.buffer.readInt8(this.pos++);
            }),
            (e.prototype.readInt32 = function () {
                var e = this.buffer.readInt32BE(this.pos);
                return (this.pos += 4), e;
            }),
            (e.prototype.readInt64 = function () {
                var e = this.buffer.readInt32BE(this.pos);
                this.pos += 4;
                var t = this.buffer.readInt32BE(this.pos);
                return (this.pos += 4), _a.fromBits(t, e, !1);
            }),
            (e.prototype.readUInt64 = function () {
                var e = this.buffer.readInt32BE(this.pos);
                this.pos += 4;
                var t = this.buffer.readInt32BE(this.pos);
                return (this.pos += 4), _a.fromBits(t, e, !0);
            }),
            (e.prototype.hasRemaining = function () {
                return this.pos < this.buffer.length;
            }),
            e
        );
    })();
    _u.BufferInputStream = Eu;
    var wu = {};
    (function (e) {
        (function () {
            "use strict";
            Object.defineProperty(wu, "__esModule", { value: !0 }), (wu.BufferOutputStream = void 0);
            var t = (function () {
                function t(t) {
                    void 0 === t && (t = 32), "number" == typeof t ? ((this.buffer = e.alloc(t)), (this.count = 0)) : ((this.buffer = t), (this.count = t.length));
                }
                return (
                    (t.prototype.write = function (e) {
                        this.ensureCapacity(this.count + 1), (this.buffer[this.count++] = e);
                    }),
                    (t.prototype.writeMany = function (e, t, r) {
                        void 0 === t && (t = 0), void 0 === r && (r = e.length), 0 !== r && (this.ensureCapacity(this.count + r), e.copy(this.buffer, this.count, t, t + r), (this.count += r));
                    }),
                    (t.prototype.writeString = function (t) {
                        var r = e.byteLength(t);
                        this.ensureCapacity(this.count + r), this.buffer.write(t, this.count, r), (this.count += r);
                    }),
                    (t.prototype.writeInt8 = function (e) {
                        this.ensureCapacity(this.count + 1), this.buffer.writeInt8(e, this.count++);
                    }),
                    (t.prototype.writeInt32 = function (e) {
                        this.ensureCapacity(this.count + 4), this.buffer.writeInt32BE(e, this.count), (this.count += 4);
                    }),
                    (t.prototype.writeInt64 = function (e) {
                        this.ensureCapacity(this.count + 8), this.buffer.writeInt32BE(e.getHighBits(), this.count), this.buffer.writeInt32BE(e.getLowBits(), this.count + 4), (this.count += 8);
                    }),
                    (t.prototype.getBuffer = function () {
                        return this.buffer.slice(0, this.count);
                    }),
                    (t.prototype.getBase64 = function () {
                        return this.getBuffer().toString("base64");
                    }),
                    (t.prototype.ensureCapacity = function (e) {
                        e - this.buffer.length > 0 && this.grow(e);
                    }),
                    (t.prototype.grow = function (t) {
                        var r = this.buffer.length << 1;
                        r - t < 0 && (r = t);
                        try {
                            var n = e.alloc(r);
                            this.buffer.copy(n), (this.buffer = n);
                        } catch (e) {
                            throw new Error("Unable to resize BufferOutputStream to " + r);
                        }
                    }),
                    t
                );
            })();
            wu.BufferOutputStream = t;
        }.call(this));
    }.call(this, u({}).Buffer));
    var mu = {};
    Object.defineProperty(mu, "__esModule", { value: !0 }),
        (mu.PROTOCOL = void 0),
        (mu.PROTOCOL = {
            TYPE: "WB",
            CAPABILITIES: (function () {
                try {
                    if (require("zlib")) return !0;
                } catch (e) {
                    return !1;
                }
                return !1;
            })()
                ? 10
                : 8,
            PROTOCOL_BYTE: 35,
            CURRENT_VERSION: 25,
        });
    var Tu = {};
    Object.defineProperty(Tu, "__esModule", { value: !0 }), (Tu.EncodingType = Tu.MessageEncoding = void 0);
    var gu = (function () {
        function e(e, t) {
            (this.encodingByte = e), (this.messageTypeFlags = t);
        }
        return (
            (e.extractMessageType = function (e) {
                return -11000001 & e;
            }),
            (e.extractMessageEncoding = function (e) {
                return 128 === (11e6 & e) ? Tu.EncodingType.ZLIB : Tu.EncodingType.NO_ENCODING;
            }),
            e
        );
    })();
    (Tu.MessageEncoding = gu), (Tu.EncodingType = { NO_ENCODING: new gu(0, 0), ZLIB: new gu(18, 1) });
    var Ou = {};
    Object.defineProperty(Ou, "__esModule", { value: !0 }),
        (Ou.isObjectAs = void 0),
        (Ou.isObjectAs = function (e) {
            return e instanceof Object;
        });
    var Iu = {};
    (function (e) {
        (function () {
            "use strict";
            var t =
                (this && this.__extends) ||
                (function () {
                    var e = function (t, r) {
                        return (e =
                            Object.setPrototypeOf ||
                            ({ __proto__: [] } instanceof Array &&
                                function (e, t) {
                                    e.__proto__ = t;
                                }) ||
                            function (e, t) {
                                for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                            })(t, r);
                    };
                    return function (t, r) {
                        if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                        function n() {
                            this.constructor = t;
                        }
                        e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                    };
                })();
            Object.defineProperty(Iu, "__esModule", { value: !0 }), (Iu.writeToBuffer = Iu.create = Iu.parse = Iu.encoding = Iu.types = void 0);
            var r,
                n,
                o,
                i = yu.create("Message");
            10 === mu.PROTOCOL.CAPABILITIES ? (r = a({})) : (i.warn("Per message compression is disabled because 'zlib' bundle is not included"), (r = null)),
                (function (e) {
                    (e[(e.SERVICE_REQUEST = 0)] = "SERVICE_REQUEST"),
                        (e[(e.SERVICE_RESPONSE = 6)] = "SERVICE_RESPONSE"),
                        (e[(e.SERVICE_ERROR = 7)] = "SERVICE_ERROR"),
                        (e[(e.TOPIC_VALUE = 4)] = "TOPIC_VALUE"),
                        (e[(e.TOPIC_DELTA = 5)] = "TOPIC_DELTA"),
                        (e[(e.ABORT_NOTIFICATION = 28)] = "ABORT_NOTIFICATION"),
                        (e[(e.CLOSE_REQUEST = 29)] = "CLOSE_REQUEST"),
                        (e[(e.FETCH_REPLY = 34)] = "FETCH_REPLY");
                })((n = Iu.types || (Iu.types = {}))),
                (function (e) {
                    (e[(e.NONE = 0)] = "NONE"),
                        (e[(e.ENCRYPTION_REQUESTED = 1)] = "ENCRYPTION_REQUESTED"),
                        (e[(e.COMPRESSION_REQUESTED = 2)] = "COMPRESSION_REQUESTED"),
                        (e[(e.BASE64_REQUESTED = 3)] = "BASE64_REQUESTED"),
                        (e[(e.ENCRYPTED = 17)] = "ENCRYPTED"),
                        (e[(e.COMPRESSED = 18)] = "COMPRESSED"),
                        (e[(e.BASE64 = 19)] = "BASE64");
                })((o = Iu.encoding || (Iu.encoding = {})));
            var s = (function () {
                    function e(e, t, r, n, o) {
                        (this.type = e), (this.encoding = t), (this.id = r.id), (this.topic = r.topic), (this.data = n), (this.headers = o);
                    }
                    return (
                        (e.prototype.getInputStream = function () {
                            return new _u.BufferInputStream(this.data);
                        }),
                        e
                    );
                })(),
                u = (function (e) {
                    function r(t) {
                        var r = e.call(this, t.type, t.encoding, t, t.buffer, t.headers) || this;
                        return (r.stream = new wu.BufferOutputStream(t.buffer)), r;
                    }
                    return (
                        t(r, e),
                        (r.prototype.getStream = function () {
                            return this.stream;
                        }),
                        (r.prototype.getBuffer = function () {
                            return this.stream.getBuffer();
                        }),
                        r
                    );
                })(s);
            (Iu.parse = function (e, t) {
                var i = new _u.BufferInputStream(e),
                    a = i.read(),
                    u = Tu.MessageEncoding.extractMessageType(a),
                    c = Tu.MessageEncoding.extractMessageEncoding(a);
                if ((void 0 === n[u] && t(new Error("Invalid message type: " + u), null), u === n.SERVICE_REQUEST || u === n.SERVICE_RESPONSE || u === n.SERVICE_ERROR))
                    t(
                        null,
                        (function (e, t) {
                            var r = t.readMany(t.count);
                            return new s(e, o.NONE, {}, r, []);
                        })(u, i)
                    );
                else if (u === n.TOPIC_VALUE || u === n.TOPIC_DELTA)
                    !(function (e, t, n, i) {
                        var a = [],
                            u = { id: n.readInt32() };
                        if (t === Tu.EncodingType.ZLIB && null !== r)
                            try {
                                var c = r.decompressSync(n.readMany(n.count));
                                i(null, new s(e, o.COMPRESSED, u, c, a));
                            } catch (e) {
                                i(e, null);
                            }
                        else i(null, new s(e, o.NONE, u, n.readMany(n.count), a));
                    })(u, c, i, t);
                else {
                    var l = i.readUntil(1).toString().split(""),
                        p = i.readMany(i.count),
                        f = u === n.FETCH_REPLY ? l.shift() : void 0;
                    t(null, new s(u, o.NONE, { topic: f }, p, l));
                }
            }),
                (Iu.create = function (t) {
                    var r;
                    if (void 0 === t || ("number" == typeof t && void 0 === n[t])) throw new Error("Invalid message type: " + t);
                    return ((r = Ou.isObjectAs(t) ? t : { type: t }).encoding = r.encoding || 0), (r.headers = r.headers || []), (r.buffer = r.buffer || e.alloc(0)), new u(r);
                }),
                (Iu.writeToBuffer = function (e, t) {
                    t.write(e.type),
                        t.writeString(
                            (function (e) {
                                return e.type !== n.FETCH_REPLY ? "" : [e.topic].concat(e.headers).join("") + "";
                            })(e)
                        ),
                        t.writeMany(e.getBuffer());
                });
        }.call(this));
    }.call(this, u({}).Buffer));
    var Ru = {};
    Object.defineProperty(Ru, "__esModule", { value: !0 }),
        (Ru.enumerize = void 0),
        (Ru.enumerize = function (e) {
            Object.keys(e).forEach(function (t) {
                var r = e[t].id;
                void 0 !== r && (e[r] = t);
            });
        });
    var bu = {};
    Object.defineProperty(bu, "__esModule", { value: !0 }),
        (bu.ErrorReason = void 0),
        (bu.ErrorReason = {
            COMMUNICATION_FAILURE: new va.ErrorReason(100, "Communication with server failed"),
            SESSION_CLOSED: new va.ErrorReason(101, "Session is closed"),
            REQUEST_TIME_OUT: new va.ErrorReason(102, "Request time out"),
            ACCESS_DENIED: new va.ErrorReason(103, "Access denied"),
            UNSUPPORTED: new va.ErrorReason(104, "Unsupported service"),
            CALLBACK_EXCEPTION: new va.ErrorReason(105, "An application callback threw an exception. Check logs for more information"),
            INVALID_DATA: new va.ErrorReason(106, "Invalid data"),
            NO_SUCH_SESSION: new va.ErrorReason(107, "A requested session could not be found"),
            INCOMPATIBLE_DATATYPE: new va.ErrorReason(108, "Data type is incompatible"),
            UNHANDLED_MESSAGE: new va.ErrorReason(109, "A message was not handled"),
            CLUSTER_REPARTITION: new va.ErrorReason(110, "The cluster was repartitioning and the request could not be routed."),
            INCOMPATIBLE_STATE: new va.ErrorReason(111, "Topic operation not performed because it is managed by a component that prohibits external updates"),
            CLUSTER_ROUTING: new va.ErrorReason(112, "The cluster operation could not be routed."),
            TOPIC_TREE_REGISTRATION_CONFLICT: new va.ErrorReason(200, "A conflicting registration exists on the same branch of the topic tree"),
            HANDLER_CONFLICT: new va.ErrorReason(201, "Conflict with an existing handler"),
            INVALID_PATH: new va.ErrorReason(202, "Invalid path"),
            REJECTED_REQUEST: new va.ErrorReason(9003, "A request has been rejected by the recipient session"),
        }),
        Ru.enumerize(bu.ErrorReason);
    var Cu = {};
    Object.defineProperty(Cu, "__esModule", { value: !0 }), (Cu.ServiceAdapter = void 0);
    var Pu = yu.create("ServiceAdapter"),
        Nu = { respond: function () {}, fail: function () {} },
        Au = (function () {
            function e(e, t) {
                (this.listeners = {}), (this.internalSession = e), (this.sender = t);
            }
            return (
                (e.prototype.sendRequest = function (e, t, r) {
                    var n = Iu.create({ type: Iu.types.SERVICE_REQUEST }),
                        o = n.getStream();
                    cu.CommandHeaderSerialiser.write(o, e), r.write(o, t), Pu.debug("Sending command request: " + e, t), this.sender(n);
                }),
                (e.prototype.sendResponse = function (e, t, r) {
                    var n = Iu.create({ type: Iu.types.SERVICE_RESPONSE }),
                        o = n.getStream();
                    cu.ResponseCommandHeaderSerialiser.write(o, e), r.write(o, t), Pu.debug("Sending command response: " + e, t), this.sender(n);
                }),
                (e.prototype.sendError = function (e, t, r) {
                    var n = Iu.create({ type: Iu.types.SERVICE_ERROR }),
                        o = n.getStream();
                    cu.ResponseCommandHeaderSerialiser.write(o, e), tu.writeString(o, r), tu.writeInt32(o, t.id), Pu.debug("Sending command error: " + t.id, r), this.sender(n);
                }),
                (e.prototype.addService = function (e, t) {
                    var r = this;
                    if (void 0 !== this.listeners[e.id]) throw new Error("Service already exists for service " + e.id);
                    var n = e.request,
                        o = e.response;
                    this.listeners[e.id] = function (i, s) {
                        var a = n.read(s),
                            u = i.cid.equals(Ga.ONEWAY_CID)
                                ? Nu
                                : {
                                      respond: function (e) {
                                          var t = i.createResponseHeader();
                                          r.sendResponse(t, e, o);
                                      },
                                      fail: function (e, t, n) {
                                          void 0 === n && (n = !0);
                                          var o = i.createErrorHeader();
                                          if ((r.sendError(o, e, t), n)) throw e;
                                      },
                                  };
                        try {
                            t.onRequest(r.internalSession, a, u);
                        } catch (t) {
                            throw (Pu.error(t), new Error("Unable to handle request for service " + e.id));
                        }
                    };
                }),
                (e.prototype.isServiceRegistered = function (e) {
                    return void 0 !== this.listeners[e];
                }),
                (e.prototype.onMessage = function (e, t) {
                    switch (e) {
                        case Iu.types.SERVICE_REQUEST:
                            this.handleRequest(cu.CommandHeaderSerialiser.read(t), t);
                            break;
                        case Iu.types.SERVICE_RESPONSE:
                            this.handleResponse(ru.CIDSerialiser.read(t), t);
                            break;
                        case Iu.types.SERVICE_ERROR:
                            this.handleError(ru.CIDSerialiser.read(t), t);
                            break;
                        default:
                            throw new Error("Unknown Command Service message " + e);
                    }
                }),
                (e.prototype.handleRequest = function (e, t) {
                    var r = this.listeners[e.service];
                    r
                        ? (Pu.debug("Received command request for service: " + e), r(e, t))
                        : (Pu.error("Received command request for unknown service: " + e), this.sendError(e.createErrorHeader(), bu.ErrorReason.COMMUNICATION_FAILURE, "Unknown client service: " + e.service));
                }),
                (e.prototype.handleResponse = function (e, t) {
                    Pu.debug("Received command response: " + e), this.internalSession.getConversationSet().respondIfPresent(e, t);
                }),
                (e.prototype.handleError = function (e, t) {
                    var r = tu.readString(t),
                        n = tu.readInt32(t),
                        o = new va.ErrorReason(n, r);
                    Pu.warn("Received command error", o), this.internalSession.getConversationSet().discard(e, o);
                }),
                e
            );
        })();
    Cu.ServiceAdapter = Au;
    var Mu = {},
        ju =
            (this && this.__awaiter) ||
            function (e, t, r, n) {
                return new (r || (r = Promise))(function (o, i) {
                    function s(e) {
                        try {
                            u(n.next(e));
                        } catch (e) {
                            i(e);
                        }
                    }
                    function a(e) {
                        try {
                            u(n.throw(e));
                        } catch (e) {
                            i(e);
                        }
                    }
                    function u(e) {
                        var t;
                        e.done
                            ? o(e.value)
                            : ((t = e.value),
                              t instanceof r
                                  ? t
                                  : new r(function (e) {
                                        e(t);
                                    })).then(s, a);
                    }
                    u((n = n.apply(e, t || [])).next());
                });
            },
        Lu =
            (this && this.__generator) ||
            function (e, t) {
                var r,
                    n,
                    o,
                    i,
                    s = {
                        label: 0,
                        sent: function () {
                            if (1 & o[0]) throw o[1];
                            return o[1];
                        },
                        trys: [],
                        ops: [],
                    };
                return (
                    (i = { next: a(0), throw: a(1), return: a(2) }),
                    "function" == typeof Symbol &&
                        (i[Symbol.iterator] = function () {
                            return this;
                        }),
                    i
                );
                function a(i) {
                    return function (a) {
                        return (function (i) {
                            if (r) throw new TypeError("Generator is already executing.");
                            for (; s; )
                                try {
                                    if (((r = 1), n && (o = 2 & i[0] ? n.return : i[0] ? n.throw || ((o = n.return) && o.call(n), 0) : n.next) && !(o = o.call(n, i[1])).done)) return o;
                                    switch (((n = 0), o && (i = [2 & i[0], o.value]), i[0])) {
                                        case 0:
                                        case 1:
                                            o = i;
                                            break;
                                        case 4:
                                            return s.label++, { value: i[1], done: !1 };
                                        case 5:
                                            s.label++, (n = i[1]), (i = [0]);
                                            continue;
                                        case 7:
                                            (i = s.ops.pop()), s.trys.pop();
                                            continue;
                                        default:
                                            if (!((o = s.trys), (o = o.length > 0 && o[o.length - 1]) || (6 !== i[0] && 2 !== i[0]))) {
                                                s = 0;
                                                continue;
                                            }
                                            if (3 === i[0] && (!o || (i[1] > o[0] && i[1] < o[3]))) {
                                                s.label = i[1];
                                                break;
                                            }
                                            if (6 === i[0] && s.label < o[1]) {
                                                (s.label = o[1]), (o = i);
                                                break;
                                            }
                                            if (o && s.label < o[2]) {
                                                (s.label = o[2]), s.ops.push(i);
                                                break;
                                            }
                                            o[2] && s.ops.pop(), s.trys.pop();
                                            continue;
                                    }
                                    i = t.call(e, s);
                                } catch (e) {
                                    (i = [6, e]), (n = 0);
                                } finally {
                                    r = o = 0;
                                }
                            if (5 & i[0]) throw i[1];
                            return { value: i[0] ? i[1] : void 0, done: !0 };
                        })([i, a]);
                    };
                }
            };
    Object.defineProperty(Mu, "__esModule", { value: !0 }), (Mu.ServiceLocatorImpl = void 0);
    var Du = yu.create("ServiceLocator"),
        xu = (function () {
            function e(e, t) {
                (this.context = e), (this.serviceAdapter = t);
            }
            return (
                (e.prototype.obtain = function (e) {
                    var t = this,
                        r = e.request,
                        n = e.response;
                    return {
                        send: function (o, i) {
                            return (
                                void 0 === i && (i = function () {}),
                                ju(t, void 0, void 0, function () {
                                    var t,
                                        s,
                                        a,
                                        u = this;
                                    return Lu(this, function (c) {
                                        switch (c.label) {
                                            case 0:
                                                return (
                                                    (t = {
                                                        onOpen: function (t) {
                                                            var n = new su.CommandHeader(e.id, t);
                                                            try {
                                                                u.serviceAdapter.sendRequest(n, o, r);
                                                            } catch (e) {
                                                                throw (i(e), e);
                                                            }
                                                        },
                                                        onResponse: function (t, r) {
                                                            var o;
                                                            try {
                                                                o = n.read(r);
                                                            } catch (t) {
                                                                return Du.debug("Failed to deserialise response from service " + e.id, t.stack), i(t), !0;
                                                            }
                                                            try {
                                                                i(null, o);
                                                            } catch (t) {
                                                                Du.debug("Request callback for service '" + e.id + "' threw an error", t.stack);
                                                                try {
                                                                    i(t);
                                                                } catch (t) {
                                                                    Du.debug("Failed to notify callback error for service '" + e.id + "'", t);
                                                                }
                                                            }
                                                            return !0;
                                                        },
                                                        onDiscard: function (e, t) {
                                                            i(t);
                                                        },
                                                    }),
                                                    [4, (s = this.context.getConversationSet()).newConversation(t)]
                                                );
                                            case 1:
                                                return (
                                                    (a = c.sent()),
                                                    [
                                                        2,
                                                        function () {
                                                            s.discard(a, new Error("Cancelled"));
                                                        },
                                                    ]
                                                );
                                        }
                                    });
                                })
                            );
                        },
                    };
                }),
                e
            );
        })();
    Mu.ServiceLocatorImpl = xu;
    var Bu = {};
    Object.defineProperty(Bu, "__esModule", { value: !0 }), (Bu.TopicSpecification = void 0);
    var qu = [
            "PUBLISH_VALUES_ONLY",
            "SCHEMA",
            "VALIDATE_VALUES",
            "TIDY_ON_UNSUBSCRIBE",
            "TIME_SERIES_EVENT_VALUE_TYPE",
            "TIME_SERIES_RETAINED_RANGE",
            "TIME_SERIES_SUBSCRIPTION_RANGE",
            "DONT_RETAIN_VALUE",
            "PERSISTENT",
            "REMOVAL",
            "OWNER",
            "COMPRESSION",
            "CONFLATION",
            "PRIORITY",
        ],
        Uu = (function () {
            function e(e, t) {
                void 0 === t && (t = {}), (this.type = e), (this.properties = t);
            }
            return (
                (e.prototype.withProperty = function (t, r) {
                    if ("string" != typeof t || qu.indexOf(t.toUpperCase()) < 0) throw new Error("Invalid key: " + t);
                    if ("string" != typeof r) throw new Error("Invalid value, must be string: " + r);
                    var n = {};
                    for (var o in ((n[t] = r), this.properties)) o !== t && (n[o] = this.properties[o]);
                    return new e(this.type, n);
                }),
                (e.PUBLISH_VALUES_ONLY = "PUBLISH_VALUES_ONLY"),
                (e.VALIDATE_VALUES = "VALIDATE_VALUES"),
                (e.TIDY_ON_UNSUBSCRIBE = "TIDY_ON_UNSUBSCRIBE"),
                (e.TIME_SERIES_EVENT_VALUE_TYPE = "TIME_SERIES_EVENT_VALUE_TYPE"),
                (e.TIME_SERIES_RETAINED_RANGE = "TIME_SERIES_RETAINED_RANGE"),
                (e.TIME_SERIES_SUBSCRIPTION_RANGE = "TIME_SERIES_SUBSCRIPTION_RANGE"),
                (e.SCHEMA = "SCHEMA"),
                (e.DONT_RETAIN_VALUE = "DONT_RETAIN_VALUE"),
                (e.PERSISTENT = "PERSISTENT"),
                (e.REMOVAL = "REMOVAL"),
                (e.CONFLATION = "CONFLATION"),
                (e.OWNER = "OWNER"),
                (e.COMPRESSION = "COMPRESSION"),
                (e.PRIORITY = "PRIORITY"),
                e
            );
        })();
    Bu.TopicSpecification = Uu;
    var ku = {};
    Object.defineProperty(ku, "__esModule", { value: !0 }), (ku.TopicTypeEnum = void 0);
    var Vu = function (e, t, r) {
        (this.id = e), (this.stateful = t), (this.functional = r);
    };
    (ku.TopicTypeEnum = {
        ROUTING: new Vu(12, !1, !0),
        BINARY: new Vu(14, !0, !1),
        JSON: new Vu(15, !0, !1),
        STRING: new Vu(17, !0, !1),
        INT64: new Vu(18, !0, !1),
        DOUBLE: new Vu(19, !0, !1),
        TIME_SERIES: new Vu(16, !0, !1),
        RECORD_V2: new Vu(20, !0, !1),
        UNKNOWN_TOPIC_TYPE: new Vu(21, !1, !1),
    }),
        Ru.enumerize(ku.TopicTypeEnum);
    var Fu = {};
    Object.defineProperty(Fu, "__esModule", { value: !0 }), (Fu.FetchRequest = void 0);
    var Gu = (function () {
        function e() {}
        return (
            (e.getAllTypes = function () {
                return new Set([ku.TopicTypeEnum.JSON, ku.TopicTypeEnum.BINARY, ku.TopicTypeEnum.RECORD_V2, ku.TopicTypeEnum.DOUBLE, ku.TopicTypeEnum.INT64, ku.TopicTypeEnum.STRING, ku.TopicTypeEnum.TIME_SERIES]);
            }),
            e
        );
    })();
    Fu.FetchRequest = Gu;
    var Hu = {};
    Object.defineProperty(Hu, "__esModule", { value: !0 }), (Hu.topicsNamespace = Hu.TopicAddFailReasonEnum = Hu.UpdateFailReasonEnum = Hu.UnsubscribeReasonEnum = void 0);
    var Yu = function (e, t) {
        (this.id = e), (this.reason = t);
    };
    (Hu.UnsubscribeReasonEnum = {
        SUBSCRIPTION_REFRESH: new Yu(void 0, "The server has re-subscribed this session"),
        STREAM_CHANGE: new Yu(void 0, "A more specific stream has been registered to the same path"),
        REQUESTED: new Yu(0, "The unsubscription was requested by this client"),
        CONTROL: new Yu(1, "The server or another client unsubscribed this client"),
        REMOVED: new Yu(2, "The topic was removed"),
        AUTHORIZATION: new Yu(3, "Not authorized to subscribe to this topic"),
        UNKNOWN_UNSUBSCRIBE_REASON: new Yu(4, "Unknown unsubscribe reason"),
        BACK_PRESSURE: new Yu(5, "The server has unsubscribed due to a backlog of messages"),
        BRANCH_MAPPINGS: new Yu(6, "Branch mapping rules have changed"),
    }),
        Ru.enumerize(Hu.UnsubscribeReasonEnum),
        Object.freeze(Hu.UnsubscribeReasonEnum);
    var Wu = function (e, t) {
        (this.id = e), (this.reason = t);
    };
    (Hu.UpdateFailReasonEnum = {
        INCOMPATIBLE_UPDATE: new Wu(1, "Update type is incompatible with topic type"),
        UPDATE_FAILED: new Wu(2, "Update failed - possible content incompatibility"),
        INVALID_UPDATER: new Wu(3, "Updater is invalid for updating"),
        MISSING_TOPIC: new Wu(4, "Topic does not exist"),
        EXCLUSIVE_UPDATER_CONFLICT: new Wu(7, "An exclusive update source is already registered for the topic branch"),
        DELTA_WITHOUT_VALUE: new Wu(8, "An attempt has been made to apply a delta to a topic that does not yet have a value"),
        CLUSTER_REPARTITION: new Wu(9, "When trying to update the topic the cluster was migrating the partition that owns the topic"),
        INCOMPATIBLE_STATE: new Wu(10, "An update could not be performed because the topic is managed bya component (e.g fan-out) that prohibits updates from the caller"),
        UNSATISFIED_CONSTRAINT: new Wu(-1, "The topic update failed because the constraint was not satisfied"),
        INVALID_UPDATE_STREAM: new Wu(-2, "The topic update failed because the update stream is no longer valid"),
    }),
        Ru.enumerize(Hu.UpdateFailReasonEnum),
        Object.freeze(Hu.UpdateFailReasonEnum);
    var Qu = function (e, t) {
        (this.id = e), (this.reason = t);
    };
    (Hu.TopicAddFailReasonEnum = {
        EXISTS: new Qu(1, "The topic already exists with the same details"),
        EXISTS_MISMATCH: new Qu(2, "The topic already exists, with different details"),
        INVALID_NAME: new Qu(15, "The supplied topic path is invalid."),
        INVALID_PATH: new Qu(3, "The topic path is invalid"),
        INVALID_DETAILS: new Qu(4, "The topic details are invalid"),
        PERMISSIONS_FAILURE: new Qu(7, "Invalid permissions to add a topic at the specified path"),
        UNEXPECTED_ERROR: new Qu(9, "An unexpected error occured while creating the topic"),
        CLUSTER_REPARTITION: new Qu(10, "When trying to create the topic the cluster was migrating the partition that owns the topic"),
        EXCEEDED_LICENSE_LIMIT: new Qu(11, "Adding the topic failed because of a license limit"),
        INCOMPATIBLE_PARENT: new Qu(12, "Adding the topic failed because an incompatible topic is already bound to the parent path"),
        EXISTS_INCOMPATIBLE: new Qu(14, "Adding the topic failed because a topic is already bound to the specifiedpath but the caller does not have the rights to manage it"),
    }),
        Ru.enumerize(Hu.TopicAddFailReasonEnum),
        Object.freeze(Hu.TopicAddFailReasonEnum),
        (Hu.topicsNamespace = {
            FetchRequest: Fu.FetchRequest,
            TopicType: ku.TopicTypeEnum,
            TopicSpecification: Bu.TopicSpecification,
            UnsubscribeReason: Hu.UnsubscribeReasonEnum,
            UpdateFailReason: Hu.UpdateFailReasonEnum,
            TopicAddFailReason: Hu.TopicAddFailReasonEnum,
        });
    var zu = {};
    Object.defineProperty(zu, "__esModule", { value: !0 }), (zu.CloseReasonImpl = void 0);
    var Ku = (function () {
        function e(e, t, r) {
            (this.id = e), (this.message = t), (this.canReconnect = r);
        }
        return (
            (e.prototype.toString = function () {
                return "id: " + this.message;
            }),
            e
        );
    })();
    zu.CloseReasonImpl = Ku;
    var Ju = {};
    Object.defineProperty(Ju, "__esModule", { value: !0 }), (Ju.AnyDataTypeImpl = void 0);
    var $u = (function () {
        function e() {
            this.valueClass = e;
        }
        return (
            (e.prototype.name = function () {
                return "any";
            }),
            e
        );
    })();
    Ju.AnyDataTypeImpl = $u;
    var Xu = {};
    (function (e) {
        (function () {
            "use strict";
            var t =
                (this && this.__values) ||
                function (e) {
                    var t = "function" == typeof Symbol && Symbol.iterator,
                        r = t && e[t],
                        n = 0;
                    if (r) return r.call(e);
                    if (e && "number" == typeof e.length)
                        return {
                            next: function () {
                                return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
                            },
                        };
                    throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
                };
            Object.defineProperty(Xu, "__esModule", { value: !0 }), (Xu.Int64Impl = void 0);
            var r = 4294967296;
            function n(e, t, r) {
                for (var n = r ? 0 : 4, o = 3; o >= 0; --o) (t[n + o] = 255 & e), (e >>= 8);
            }
            function o(e, t) {
                var r = t ? 0 : 4;
                return e[r] * (1 << 24) + (e[r + 1] << 16) + (e[r + 2] << 8) + e[r + 3];
            }
            var i = (function () {
                function i(o, s) {
                    (this.buffer = e.from([0, 0, 0, 0, 0, 0, 0, 0])),
                        e.isBuffer(o) && (this.buffer = o),
                        "string" == typeof o &&
                            (function (e, o, i) {
                                var s,
                                    a,
                                    u = "-" === e[0];
                                u ? (e = e.substring(1)) : "0x" === e.substring(0, 2) && ((e = e.substring(2)), (o = 16));
                                var c = 0,
                                    l = 0;
                                try {
                                    for (var p = t(e), f = p.next(); !f.done; f = p.next()) {
                                        var h = f.value;
                                        (l = l * o + parseInt(h, o)), (c = c * o + Math.floor(l / r)), (l %= r);
                                    }
                                } catch (e) {
                                    s = { error: e };
                                } finally {
                                    try {
                                        f && !f.done && (a = p.return) && a.call(p);
                                    } finally {
                                        if (s) throw s.error;
                                    }
                                }
                                u && ((c = ~c), l ? (l = r - l) : c++), n(c, i, !0), n(l, i, !1);
                            })(o, (s = s || 10), this.buffer),
                        "number" == typeof o &&
                            ("number" == typeof s
                                ? (n(o, this.buffer, !0), n(s, this.buffer, !1))
                                : o >= 0
                                ? (function (e, t) {
                                      for (var r = 7; r >= 0; --r) (t[r] = 255 & e), (e /= 256);
                                  })(o, this.buffer)
                                : (function (e, t) {
                                      e++;
                                      for (var r = 7; r >= 0; --r) (t[r] = (255 & -e) ^ 255), (e /= 256);
                                  })(o, this.buffer)),
                        o instanceof i && (n(o.getHighBits(), this.buffer, !0), n(o.getLowBits(), this.buffer, !1));
                }
                return (
                    (i.toString = function () {
                        return "Int64Impl";
                    }),
                    (i.prototype.getHighBits = function () {
                        return o(this.buffer, !0);
                    }),
                    (i.prototype.getLowBits = function () {
                        return o(this.buffer, !1);
                    }),
                    (i.prototype.toBuffer = function () {
                        return this.buffer;
                    }),
                    (i.prototype.toNumber = function () {
                        var e = 0 | this.getHighBits(),
                            t = this.getLowBits();
                        return e ? e * r + t : t;
                    }),
                    (i.prototype.isNegative = function () {
                        return !!(2147483648 & this.getHighBits());
                    }),
                    (i.prototype.toString = function (e) {
                        void 0 === e && (e = 10);
                        var t = this.getHighBits(),
                            n = this.getLowBits(),
                            o = this.isNegative();
                        if ((o && ((t = ~t), (n = r - n)), 0 === t && 0 === n)) return "0";
                        for (var i = ""; t || n; ) {
                            var s = (t % e) * r + n;
                            (t = Math.floor(t / e)), (n = Math.floor(s / e)), (i = (s % e).toString(e) + i);
                        }
                        return o && (i = "-" + i), i;
                    }),
                    (i.prototype.equals = function (e) {
                        return !!(e && e instanceof i) && this.getHighBits() === e.getHighBits() && this.getLowBits() === e.getLowBits();
                    }),
                    i
                );
            })();
            Xu.Int64Impl = i;
        }.call(this));
    }.call(this, u({}).Buffer));
    var Zu,
        ec = {};
    Object.defineProperty(ec, "__esModule", { value: !0 }),
        (ec.isStructEnd = ec.isStructStart = ec.tokens = ec.BYTE_BREAK = ec.additional = ec.types = void 0),
        (function (e) {
            (e[(e.UINT = 0)] = "UINT"),
                (e[(e.INT = 1)] = "INT"),
                (e[(e.BYTES = 2)] = "BYTES"),
                (e[(e.STRING = 3)] = "STRING"),
                (e[(e.ARRAY = 4)] = "ARRAY"),
                (e[(e.MAP = 5)] = "MAP"),
                (e[(e.SEMANTIC = 6)] = "SEMANTIC"),
                (e[(e.SIMPLE = 7)] = "SIMPLE"),
                (e[(e.FLOAT = 7)] = "FLOAT");
        })(ec.types || (ec.types = {})),
        (function (e) {
            (e[(e.FALSE = 20)] = "FALSE"),
                (e[(e.TRUE = 21)] = "TRUE"),
                (e[(e.NULL = 22)] = "NULL"),
                (e[(e.UNDEFINED = 23)] = "UNDEFINED"),
                (e[(e.SIMPLE = 24)] = "SIMPLE"),
                (e[(e.HALF_PRECISION = 25)] = "HALF_PRECISION"),
                (e[(e.SINGLE_PRECISION = 26)] = "SINGLE_PRECISION"),
                (e[(e.DOUBLE_PRECISION = 27)] = "DOUBLE_PRECISION"),
                (e[(e.BREAK = 31)] = "BREAK");
        })(ec.additional || (ec.additional = {})),
        (ec.BYTE_BREAK = 255),
        (function (e) {
            (e[(e.ARRAY_START = 0)] = "ARRAY_START"),
                (e[(e.ARRAY_END = 1)] = "ARRAY_END"),
                (e[(e.MAP_START = 2)] = "MAP_START"),
                (e[(e.MAP_END = 3)] = "MAP_END"),
                (e[(e.STRING_START = 4)] = "STRING_START"),
                (e[(e.STRING_END = 5)] = "STRING_END"),
                (e[(e.VALUE = 6)] = "VALUE");
        })((Zu = ec.tokens || (ec.tokens = {}))),
        (ec.isStructStart = function (e) {
            switch (e) {
                case Zu.ARRAY_START:
                case Zu.MAP_START:
                case Zu.STRING_START:
                    return !0;
                default:
                    return !1;
            }
        }),
        (ec.isStructEnd = function (e) {
            switch (e) {
                case Zu.ARRAY_END:
                case Zu.MAP_END:
                case Zu.STRING_END:
                    return !0;
                default:
                    return !1;
            }
        });
    var tc,
        rc = {};
    Object.defineProperty(rc, "__esModule", { value: !0 }),
        (rc.Context = rc.TokenContextType = void 0),
        (function (e) {
            (e[(e.root = 0)] = "root"), (e[(e.string = 1)] = "string"), (e[(e.array = 2)] = "array"), (e[(e.object = 3)] = "object");
        })((tc = rc.TokenContextType || (rc.TokenContextType = {})));
    var nc = (function () {
        function e() {
            (this.ROOT = { length: -1, type: tc.root, read: 0 }), (this.stack = []), (this.tail = this.ROOT);
        }
        return (
            (e.prototype.type = function () {
                return this.tail.type;
            }),
            (e.prototype.read = function () {
                return this.tail.read;
            }),
            (e.prototype.expected = function () {
                return this.tail.length;
            }),
            (e.prototype.push = function (e, t) {
                void 0 === t && (t = -1), (this.tail = { length: t, type: e, read: 0 }), this.stack.push(this.tail);
            }),
            (e.prototype.pop = function () {
                var e = this.stack.pop();
                return this.stack.length ? (this.tail = this.stack[this.stack.length - 1]) : (this.tail = this.ROOT), e;
            }),
            (e.prototype.next = function () {
                if (!this.hasRemaining()) throw new Error("Exceeded expected collection limit");
                this.tail.read++;
            }),
            (e.prototype.break = function () {
                this.acceptsBreakMarker() && ((this.tail.length = 0), (this.tail.read = 0));
            }),
            (e.prototype.hasRemaining = function () {
                return -1 === this.tail.length || this.tail.length > this.tail.read;
            }),
            (e.prototype.acceptsBreakMarker = function () {
                return this.tail !== this.ROOT && -1 === this.tail.length;
            }),
            e
        );
    })();
    rc.Context = nc;
    var oc = {};
    (function (e) {
        (function () {
            "use strict";
            Object.defineProperty(oc, "__esModule", { value: !0 }), (oc.Tokeniser = void 0);
            var t = new Error(),
                r = e.alloc(0),
                n = (function () {
                    function n(e, t, r) {
                        void 0 === t && (t = 0), void 0 === r && (r = e.length), (this.bufferOffset = t), (this.length = r), (this.data = e), (this.context = new rc.Context()), (this.pos = this.bufferOffset);
                    }
                    return (
                        (n.prototype.reset = function () {
                            (this.context = new rc.Context()), (this.token = void 0), (this.type = void 0), (this.pos = this.bufferOffset);
                        }),
                        (n.prototype.hasRemaining = function () {
                            var e = this.context.type() === rc.TokenContextType.root ? this.length : this.length + 1;
                            return this.pos < this.bufferOffset + e;
                        }),
                        (n.prototype.offset = function () {
                            return this.pos;
                        }),
                        (n.prototype.getContext = function () {
                            return this.context;
                        }),
                        (n.prototype.getToken = function () {
                            return this.token;
                        }),
                        (n.prototype.nextToken = function () {
                            if (!this.hasRemaining()) return null;
                            var e = this.context.type(),
                                t = this.pos;
                            if (e !== rc.TokenContextType.root && !this.context.hasRemaining()) {
                                switch (e) {
                                    case rc.TokenContextType.object:
                                        this.type = ec.tokens.MAP_END;
                                        break;
                                    case rc.TokenContextType.array:
                                        this.type = ec.tokens.ARRAY_END;
                                        break;
                                    case rc.TokenContextType.string:
                                        this.type = ec.tokens.STRING_END;
                                }
                                return (
                                    this.context.pop(),
                                    {
                                        pos: this.pos,
                                        type: this.type,
                                        getBuffer: function () {
                                            return r;
                                        },
                                    }
                                );
                            }
                            this.context.next();
                            var n,
                                o = this.readHeader();
                            switch (o.type) {
                                case ec.types.INT:
                                case ec.types.UINT:
                                case ec.types.FLOAT:
                                case ec.types.SIMPLE:
                                    (this.type = ec.tokens.VALUE), (n = this.readValue(o));
                                    break;
                                case ec.types.BYTES:
                                case ec.types.STRING:
                                    o.raw === ec.additional.BREAK ? (this.context.push(rc.TokenContextType.string, -1), (this.type = ec.tokens.STRING_START)) : ((this.type = ec.tokens.VALUE), (n = this.readValue(o)));
                                    break;
                                case ec.types.ARRAY:
                                    this.context.push(rc.TokenContextType.array, this.readCollectionLength(o)), (this.type = ec.tokens.ARRAY_START);
                                    break;
                                case ec.types.MAP:
                                    var i = this.readCollectionLength(o);
                                    i >= 0 && (i *= 2), this.context.push(rc.TokenContextType.object, i), (this.type = ec.tokens.MAP_START);
                                    break;
                                case ec.types.SEMANTIC:
                                    return this.nextToken();
                                default:
                                    throw new Error("Unknown CBOR header type: " + o.type);
                            }
                            if (n instanceof Error) {
                                if (this.context.acceptsBreakMarker()) return this.context.break(), this.nextToken();
                                throw new Error("Unexpected break flag outside of indefinite-length context");
                            }
                            var s = this.data;
                            return (
                                (this.token = {
                                    pos: t,
                                    type: this.type,
                                    value: n,
                                    header: o,
                                    length: this.pos,
                                    getBuffer: function () {
                                        return s.slice(this.pos, this.length);
                                    },
                                }),
                                this.token
                            );
                        }),
                        (n.prototype.readValue = function (e) {
                            switch (e.type) {
                                case ec.types.UINT:
                                    return this.readHeaderValue(e);
                                case ec.types.INT:
                                    return this.readHeaderValue(e, !0);
                                case ec.types.BYTES:
                                    return this.readBuffer(this.readHeaderValue(e));
                                case ec.types.STRING:
                                    return this.readBuffer(this.readHeaderValue(e)).toString("utf-8");
                                case ec.types.SIMPLE:
                                    return this.readSimpleValue(e.raw);
                            }
                            throw new Error("Unrecognised value type (" + e.type + ")");
                        }),
                        (n.prototype.readSimpleValue = function (e) {
                            switch (e) {
                                case ec.additional.TRUE:
                                    return !0;
                                case ec.additional.FALSE:
                                    return !1;
                                case ec.additional.NULL:
                                    return null;
                                case ec.additional.BREAK:
                                    return t;
                                case ec.additional.HALF_PRECISION:
                                    return this.readFloat16();
                                case ec.additional.SINGLE_PRECISION:
                                    return this.readFloat32();
                                case ec.additional.DOUBLE_PRECISION:
                                    return this.readFloat64();
                                default:
                                    return;
                            }
                        }),
                        (n.prototype.readByte = function () {
                            if (this.pos < this.data.length) return this.data[this.pos++];
                            throw new Error("Exhausted token stream");
                        }),
                        (n.prototype.readBuffer = function (e) {
                            return this.data.slice(this.pos, (this.pos += e));
                        }),
                        (n.prototype.readUint16 = function () {
                            var e = this.data.readUInt16BE(this.pos);
                            return (this.pos += 2), e;
                        }),
                        (n.prototype.readUint32 = function () {
                            var e = this.data.readUInt32BE(this.pos);
                            return (this.pos += 4), e;
                        }),
                        (n.prototype.readUint64 = function (t) {
                            var r = e.from(this.readBuffer(8));
                            if (t) for (var n = 0; n < 8; ++n) r[n] = ~r[n];
                            var o = new Xu.Int64Impl(r),
                                i = o.toNumber();
                            return i <= 9007199254740991 && i >= -9007199254740991 ? i : o;
                        }),
                        (n.prototype.readFloat16 = function () {
                            var e = this.readUint16(),
                                t = 1023 & e,
                                r = (31744 & e) >> 10,
                                n = (32768 & e) >> 15 ? -1 : 1;
                            return 0 === r ? n * Math.pow(2, -14) * (t / Math.pow(2, 10)) : 31 === r ? (t ? NaN : n * (1 / 0)) : n * Math.pow(2, r - 15) * (1 + t / Math.pow(2, 10));
                        }),
                        (n.prototype.readFloat32 = function () {
                            var e = this.data.readFloatBE(this.pos);
                            return (this.pos += 4), e;
                        }),
                        (n.prototype.readFloat64 = function () {
                            var e = this.data.readDoubleBE(this.pos);
                            return (this.pos += 8), e;
                        }),
                        (n.prototype.readHeader = function () {
                            var e = this.readByte();
                            return { type: e >> 5, raw: 31 & e };
                        }),
                        (n.prototype.readHeaderValue = function (e, r) {
                            void 0 === r && (r = !1);
                            var n = e.raw,
                                o = function (e) {
                                    return r ? -1 - e : e;
                                };
                            if (n < 24) return o(n);
                            switch (n) {
                                case ec.additional.SIMPLE:
                                    return o(this.readByte());
                                case ec.additional.HALF_PRECISION:
                                    return o(this.readUint16());
                                case ec.additional.SINGLE_PRECISION:
                                    return o(this.readUint32());
                                case ec.additional.DOUBLE_PRECISION:
                                    return this.readUint64(r);
                                case ec.additional.BREAK:
                                    return t;
                                default:
                                    throw new Error("Unexpected value " + n);
                            }
                        }),
                        (n.prototype.readCollectionLength = function (e) {
                            var r = this.readHeaderValue(e);
                            return r === t ? -1 : r;
                        }),
                        n
                    );
                })();
            oc.Tokeniser = n;
        }.call(this));
    }.call(this, u({}).Buffer));
    var ic = {};
    Object.defineProperty(ic, "__esModule", { value: !0 }), (ic.BufferSlice = void 0);
    var sc = function (e, t, r) {
        void 0 === t && (t = 0), void 0 === r && (r = e.length), (this.$buffer = e), (this.$offset = t), (this.$length = r);
    };
    ic.BufferSlice = sc;
    /*!
     * Determine if an object is a Buffer
     *
     * @author   Feross Aboukhadijeh <https://feross.org>
     * @license  MIT
     */
    var ac = function (e) {
        return (
            null != e &&
            (uc(e) ||
                (function (e) {
                    return "function" == typeof e.readFloatLE && "function" == typeof e.slice && uc(e.slice(0, 0));
                })(e) ||
                !!e._isBuffer)
        );
    };
    function uc(e) {
        return !!e.constructor && "function" == typeof e.constructor.isBuffer && e.constructor.isBuffer(e);
    }
    var cc = {};
    (function (e) {
        (function () {
            "use strict";
            var t =
                (this && this.__extends) ||
                (function () {
                    var e = function (t, r) {
                        return (e =
                            Object.setPrototypeOf ||
                            ({ __proto__: [] } instanceof Array &&
                                function (e, t) {
                                    e.__proto__ = t;
                                }) ||
                            function (e, t) {
                                for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                            })(t, r);
                    };
                    return function (t, r) {
                        if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                        function n() {
                            this.constructor = t;
                        }
                        e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                    };
                })();
            Object.defineProperty(cc, "__esModule", { value: !0 }), (cc.BinaryDeltaImpl = void 0);
            var r = (function (r) {
                function n(e, t, n) {
                    return void 0 === t && (t = 0), void 0 === n && (n = e.length), r.call(this, e, t, n) || this;
                }
                return (
                    t(n, r),
                    (n.prototype.visit = function (t) {
                        if (this.hasChanges()) {
                            for (var r = new oc.Tokeniser(this.$buffer, this.$offset, this.$length); r.hasRemaining(); ) {
                                var n = r.nextToken(),
                                    o = !1;
                                if (e.isBuffer(n.value)) o = !t.insert(n.value);
                                else {
                                    var i = n.value,
                                        s = r.nextToken().value;
                                    o = !t.match(i, s);
                                }
                                if (o) return void t.end();
                            }
                            t.end();
                        } else t.noChange();
                    }),
                    (n.prototype.hasChanges = function () {
                        return 1 !== this.$length;
                    }),
                    n
                );
            })(ic.BufferSlice);
            cc.BinaryDeltaImpl = r;
        }.call(this));
    }.call(this, { isBuffer: ac }));
    var lc = {};
    (function (e) {
        (function () {
            "use strict";
            Object.defineProperty(lc, "__esModule", { value: !0 }), (lc.isString = lc.isInt64 = lc.isDouble = lc.Decoder = void 0);
            var t = (function () {
                function t(t, r, n) {
                    this.tokeniser = e.isBuffer(t) ? new oc.Tokeniser(t, r, n) : t;
                }
                return (
                    (t.prototype.hasRemaining = function () {
                        return this.tokeniser.hasRemaining();
                    }),
                    (t.prototype.nextValue = function () {
                        return this.nextValueExpecting(r);
                    }),
                    (t.prototype.nextValueExpecting = function (t) {
                        if (!this.tokeniser.hasRemaining()) throw new Error("Token stream exhausted");
                        var r = this.tokeniser.nextToken();
                        if (t(r.header.type))
                            return (function t(r, n) {
                                switch (r.type) {
                                    case ec.tokens.VALUE:
                                        return r.value;
                                    case ec.tokens.MAP_START:
                                        for (var o = {}; ; ) {
                                            var i = n.nextToken();
                                            if (null === i) throw new Error("Unexpected EOF (reading: map key)");
                                            if (i.type === ec.tokens.MAP_END) break;
                                            var s = n.nextToken();
                                            if (null === s || s.type === ec.tokens.MAP_END) throw new Error("Unexpected EOF (reading: map value)");
                                            var a = t(i, n);
                                            if (null == a) throw new Error("Cannot have undefined key (reading: map key)");
                                            o[a.toString()] = t(s, n);
                                        }
                                        return o;
                                    case ec.tokens.ARRAY_START:
                                        for (var u = []; ; ) {
                                            var c = n.nextToken();
                                            if (null === c) throw new Error("Unexpected EOF (reading: array value)");
                                            if (c.type === ec.tokens.ARRAY_END) break;
                                            u.push(t(c, n));
                                        }
                                        return u;
                                    case ec.tokens.STRING_START:
                                        for (var l = []; ; ) {
                                            var p = n.nextToken();
                                            if (null === p) throw new Error("Unexpected EOF (reading: indefinite-length string");
                                            if (p.type === ec.tokens.STRING_END) break;
                                            if (p.header.type !== r.header.type) throw new Error("Unexpected chunk type (" + p.header.type + ") within string");
                                            l.push(p.value);
                                        }
                                        switch (r.header.type) {
                                            case ec.types.BYTES:
                                                return e.concat(l);
                                            case ec.types.STRING:
                                                return l.join("");
                                            default:
                                                throw new Error("Unexpected chunk type (" + r.header.type + ") (reading: string)");
                                        }
                                    default:
                                        throw new Error("Unexpected token: " + JSON.stringify(r));
                                }
                            })(r, this.tokeniser);
                        throw new Error("Unexpected CBOR type");
                    }),
                    t
                );
            })();
            function r() {
                return !0;
            }
            (lc.Decoder = t),
                (lc.isDouble = function (e) {
                    return e === ec.types.FLOAT;
                }),
                (lc.isInt64 = function (e) {
                    return e === ec.types.UINT || e === ec.types.INT;
                }),
                (lc.isString = function (e) {
                    return e === ec.types.STRING;
                });
        }.call(this));
    }.call(this, u({}).Buffer));
    var pc = {};
    (function (e) {
        (function () {
            "use strict";
            var t =
                (this && this.__values) ||
                function (e) {
                    var t = "function" == typeof Symbol && Symbol.iterator,
                        r = t && e[t],
                        n = 0;
                    if (r) return r.call(e);
                    if (e && "number" == typeof e.length)
                        return {
                            next: function () {
                                return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
                            },
                        };
                    throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
                };
            Object.defineProperty(pc, "__esModule", { value: !0 }), (pc.Encoder = void 0);
            var r = (function () {
                function r() {
                    this.bos = new wu.BufferOutputStream();
                }
                return (
                    (r.prototype.writeByte = function (e) {
                        this.bos.write(e);
                    }),
                    (r.prototype.writeBuffer = function (e, t, r) {
                        void 0 === t && (t = 0), void 0 === r && (r = e.length), this.bos.writeMany(e, t, r);
                    }),
                    (r.prototype.writeUint16 = function (e) {
                        this.writeByte((e >> 8) & 255), this.writeByte(255 & e);
                    }),
                    (r.prototype.writeUint32 = function (e) {
                        this.writeUint16((e >> 16) & 65535), this.writeUint16(65535 & e);
                    }),
                    (r.prototype.writeUint64 = function (e) {
                        this.writeUint32(Math.floor(e / 4294967296)), this.writeUint32(e % 4294967296);
                    }),
                    (r.prototype.writeBreakHeader = function (e) {
                        this.writeByte((e << 5) | ec.additional.BREAK);
                    }),
                    (r.prototype.writeToken = function (e, t) {
                        var r = e << 5;
                        t < 24
                            ? this.writeByte(r | t)
                            : t < 256
                            ? (this.writeByte(24 | r), this.writeByte(t))
                            : t < 65536
                            ? (this.writeByte(25 | r), this.writeUint16(t))
                            : t < 4294967296
                            ? (this.writeByte(26 | r), this.writeUint32(t))
                            : (this.writeByte(27 | r), this.writeUint64(t));
                    }),
                    (r.prototype.writeNumber = function (t) {
                        if (t.toString().indexOf(".") > -1) {
                            var r = e.alloc(8);
                            r.writeDoubleBE(t, 0), this.writeByte((ec.types.SIMPLE << 5) | ec.additional.DOUBLE_PRECISION), this.writeBuffer(r);
                        } else t < 0 ? this.writeToken(ec.types.INT, -1 - t) : this.writeToken(ec.types.UINT, t);
                    }),
                    (r.prototype.writeString = function (t) {
                        var r = e.from(t, "utf-8");
                        this.writeToken(ec.types.STRING, r.length), this.writeBuffer(r);
                    }),
                    (r.prototype.writeBinary = function (e, t, r) {
                        void 0 === r && (r = e.length), this.writeToken(ec.types.BYTES, r), this.writeBuffer(e, t, r);
                    }),
                    (r.prototype.writeBoolean = function (e) {
                        this.writeToken(ec.types.SIMPLE, e ? ec.additional.TRUE : ec.additional.FALSE);
                    }),
                    (r.prototype.writeUndefined = function () {
                        this.writeToken(ec.types.SIMPLE, ec.additional.UNDEFINED);
                    }),
                    (r.prototype.writeNull = function () {
                        this.writeToken(ec.types.SIMPLE, ec.additional.NULL);
                    }),
                    (r.prototype.writeObject = function (e) {
                        var r,
                            n,
                            o = Object.getOwnPropertyNames(e);
                        this.startObject();
                        try {
                            for (var i = t(o), s = i.next(); !s.done; s = i.next()) {
                                var a = s.value;
                                this.encode(a), this.encode(e[a]);
                            }
                        } catch (e) {
                            r = { error: e };
                        } finally {
                            try {
                                s && !s.done && (n = i.return) && n.call(i);
                            } finally {
                                if (r) throw r.error;
                            }
                        }
                        this.break();
                    }),
                    (r.prototype.writeArray = function (e) {
                        var r, n;
                        this.startArray();
                        try {
                            for (var o = t(e), i = o.next(); !i.done; i = o.next()) {
                                var s = i.value;
                                this.encode(s);
                            }
                        } catch (e) {
                            r = { error: e };
                        } finally {
                            try {
                                i && !i.done && (n = o.return) && n.call(o);
                            } finally {
                                if (r) throw r.error;
                            }
                        }
                        this.break();
                    }),
                    (r.prototype.break = function () {
                        return this.writeBreakHeader(ec.types.SIMPLE), this;
                    }),
                    (r.prototype.startArray = function (e) {
                        return void 0 === e ? this.writeBreakHeader(ec.types.ARRAY) : this.writeToken(ec.types.ARRAY, e), this;
                    }),
                    (r.prototype.startObject = function (e) {
                        return void 0 === e ? this.writeBreakHeader(ec.types.MAP) : this.writeToken(ec.types.MAP, e), this;
                    }),
                    (r.prototype.writeInt64 = function (t) {
                        var r = 0 | t.getHighBits();
                        if (0 === r || -1 === r) this.writeNumber(t.toNumber());
                        else if (t.isNegative()) {
                            this.writeByte((ec.types.INT << 5) | 27);
                            for (var n = e.from(t.toBuffer()), o = 0; o < 8; ++o) n[o] = ~n[o];
                            this.writeBuffer(n);
                        } else this.writeByte((ec.types.UINT << 5) | 27), this.writeBuffer(t.toBuffer());
                        return this;
                    }),
                    (r.prototype.writeDouble = function (t) {
                        var r = e.alloc(8);
                        return r.writeDoubleBE(t, 0), this.writeByte((ec.types.SIMPLE << 5) | ec.additional.DOUBLE_PRECISION), this.writeBuffer(r), this;
                    }),
                    (r.prototype.encode = function (t, r, n) {
                        if (t instanceof Date) this.writeString(t.toJSON());
                        else if (null === t) this.writeNull();
                        else if (void 0 === t) this.writeUndefined();
                        else if (t instanceof Xu.Int64Impl) this.writeInt64(t);
                        else
                            switch (typeof t) {
                                case "boolean":
                                    this.writeBoolean(t);
                                    break;
                                case "string":
                                    this.writeString(t);
                                    break;
                                case "number":
                                    this.writeNumber(t);
                                    break;
                                case "object":
                                    e.isBuffer(t) ? this.writeBinary(t, r, n) : Array.isArray(t) ? this.writeArray(t) : this.writeObject(t);
                            }
                        return this;
                    }),
                    (r.prototype.flush = function () {
                        var e = this.bos.getBuffer();
                        return (this.bos = new wu.BufferOutputStream()), e;
                    }),
                    r
                );
            })();
            pc.Encoder = r;
        }.call(this));
    }.call(this, u({}).Buffer));
    var fc = {};
    Object.defineProperty(fc, "__esModule", { value: !0 }),
        (fc.MAX_SAFE_INTEGER = fc.MAX_INT32 = fc.findNextPowerOfTwo = fc.approximateSquareRoot = void 0),
        (fc.approximateSquareRoot = function (e) {
            if (e < 0) throw new Error("Value must be great or equal to 0");
            if (0 === e) return 0;
            var t =
                32 -
                (function (e) {
                    if (0 === e) return 32;
                    var t = 1;
                    return e >>> 16 == 0 && ((t += 16), (e <<= 16)), e >>> 24 == 0 && ((t += 8), (e <<= 8)), e >>> 28 == 0 && ((t += 4), (e <<= 4)), e >>> 30 == 0 && ((t += 2), (e <<= 2)), (t -= e >>> 31);
                })(e);
            return 1 << Math.round(t / 2);
        }),
        (fc.findNextPowerOfTwo = function (e) {
            if (e < 0 || e > 1 << 30) throw new Error("Illegal argument: " + e);
            return e--, (e |= e >> 1), (e |= e >> 2), (e |= e >> 4), (e |= e >> 8), (e |= e >> 16), ++e;
        }),
        (fc.MAX_INT32 = 2147483647),
        (fc.MAX_SAFE_INTEGER = 9007199254740991);
    var hc = {},
        dc =
            (this && this.__read) ||
            function (e, t) {
                var r = "function" == typeof Symbol && e[Symbol.iterator];
                if (!r) return e;
                var n,
                    o,
                    i = r.call(e),
                    s = [];
                try {
                    for (; (void 0 === t || t-- > 0) && !(n = i.next()).done; ) s.push(n.value);
                } catch (e) {
                    o = { error: e };
                } finally {
                    try {
                        n && !n.done && (r = i.return) && r.call(i);
                    } finally {
                        if (o) throw o.error;
                    }
                }
                return s;
            };
    Object.defineProperty(hc, "__esModule", { value: !0 }), (hc.MyersBinaryDiff = hc.NO_CHANGE = hc.REPLACE = hc.SUCCESS = void 0);
    (hc.SUCCESS = 0), (hc.REPLACE = 1), (hc.NO_CHANGE = 2);
    var yc = (function () {
        function e(e) {
            (this.maximumD = (e - 3) / 4), (this.vectorLength = 0), (this.vector = []);
        }
        return (
            (e.prototype.fill = function (e) {
                for (var t = e; t < this.vectorLength + 4; t += 4) (this.vector[t + 0] = -1), (this.vector[t + 1] = -1), (this.vector[t + 2] = 2147483647), (this.vector[t + 3] = 2147483647);
            }),
            (e.prototype.ensure = function (e) {
                this.vectorLength = 4 * (e + 1) + 3;
            }),
            (e.prototype.initialise = function (e) {
                return this.ensure(e), this.fill(3), this.vector;
            }),
            (e.prototype.extend = function (e) {
                if (e > this.maximumD) return null;
                var t = this.vectorLength;
                return this.ensure(e), this.fill(t), this.vector;
            }),
            e
        );
    })();
    function vc(e) {
        return e < 0 ? -4 * e - 1 : 4 * e;
    }
    function Sc(e) {
        return vc(e) + 2;
    }
    function _c(e, t) {
        var r = e[vc(t)];
        return void 0 === r ? 0 : r;
    }
    function Ec(e, t) {
        var r = e[Sc(t)];
        return void 0 === r ? 0 : r;
    }
    function wc(e, t, r) {
        e[vc(t)] = r;
    }
    function mc(e, t, r) {
        e[Sc(t)] = r;
    }
    function Tc(e, t) {
        var r = _c(e, t + 1),
            n = _c(e, t - 1);
        return r < n ? n : r + 1;
    }
    function gc(e, t) {
        var r = Ec(e, t + 1),
            n = Ec(e, t - 1);
        return r < n ? r : n - 1;
    }
    function Oc(e, t) {
        return e <= t ? e : 2 * t - e;
    }
    function Ic(e, t, r) {
        if (t < 0) throw new Error("offset " + t + " < 0");
        if (r < 0) throw new Error("length " + r + " < 0");
        if (t + r > e.length || t + r < 0) throw new Error("offset " + t + " + " + r + " > " + e.length);
    }
    var Rc = (function () {
        function e(e, t, r, n, o) {
            (this.storage = e), (this.a = t), (this.b = r), (this.script = n), (this.bailOutFactor = o);
        }
        return (
            (e.prototype.diff = function (e, t, r, n, o) {
                void 0 === o && (o = this.bailOutFactor), Ic(this.a, e, t), Ic(this.b, r, n);
                var i = this.afterCommonPrefix(e, t, r, n),
                    s = this.beforeCommonSuffix(e, t, r, n, i),
                    a = s + n - t;
                return !!this.script.match(e, i) && (i === s ? this.script.insert(r + i, a - i) : i === a ? this.script.delete() : this.middleSnake(e + i, s - i, r + i, a - i, o)) && this.script.match(e + s, t - s);
            }),
            (e.prototype.afterCommonPrefix = function (e, t, r, n) {
                for (var o = Math.min(t, n), i = 0; i < o; ++i) if (this.a[e + i] !== this.b[r + i]) return i;
                return Math.max(0, o);
            }),
            (e.prototype.beforeCommonSuffix = function (e, t, r, n, o) {
                for (var i = Math.max(0, t - n) + o, s = t; s > i; --s) if (this.a[e + s - 1] !== this.b[r + s + n - t - 1]) return s;
                return Math.min(t, i);
            }),
            (e.prototype.diffNoPrefix = function (e, t, r, n, o) {
                void 0 === o && (o = this.bailOutFactor);
                var i = this.beforeCommonSuffix(e, t, r, n, 0),
                    s = i + n - t;
                return (0 === i ? this.script.insert(r, s) : 0 === s ? this.script.delete() : this.middleSnake(e, i, r, s, o)) && this.script.match(e + i, t - i);
            }),
            (e.prototype.diffNoSuffix = function (e, t, r, n, o) {
                void 0 === o && (o = this.bailOutFactor);
                var i = this.afterCommonPrefix(e, t, r, n);
                return !!this.script.match(e, i) && (i === t ? this.script.insert(r + i, n - i) : i === n ? this.script.delete() : this.middleSnake(e + i, t - i, r + i, n - i, o));
            }),
            (e.prototype.middleSnake = function (e, t, r, n, o) {
                var i = t - n,
                    s = 1 & i,
                    a = this.storage.initialise(1);
                wc(a, 0, 0), mc(a, 0, t);
                var u = 1,
                    c = o;
                do {
                    for (var l = Oc(u, t), p = Oc(u, n), f = -l; f <= p; f += 2) {
                        var h = Tc(a, f),
                            d = h + this.afterCommonPrefix(e + h, t - h, r + h + f, n - f - h);
                        if (s && Math.abs(f + i) <= u - 1 && d >= Ec(a, f + i)) return this.recurse(e, t, r, n, h, d, f);
                        wc(a, f, d);
                    }
                    for (var y = -p; y <= l; y += 2) {
                        var v = gc(a, y),
                            S = y - i,
                            _ = this.beforeCommonSuffix(e, v, r, S + v, 0);
                        if (!s && Math.abs(S) <= u && _ <= _c(a, S)) return this.recurse(e, t, r, n, _, v, S);
                        mc(a, y, _);
                    }
                    if (0 == (63 & u) && this.slowProgress(a, t, n, l, p, u)) c -= 48;
                    else if (u > Math.max(4, c)) return this.bail(a, e, t, r, n, l, p, Math.trunc(c / 2));
                    ++u, (a = this.storage.extend(u));
                } while (null !== a);
                return !1;
            }),
            (e.prototype.slowProgress = function (e, t, r, n, o, i) {
                var s = dc(this.bestForward(e, t, r, n, o), 2),
                    a = s[0],
                    u = s[1],
                    c = dc(this.bestReverse(e, t, r, n, o), 2);
                return a + u + (t + r - c[0] - c[1]) < fc.approximateSquareRoot(i) * i;
            }),
            (e.prototype.bestForward = function (e, t, r, n, o) {
                for (var i = 0, s = 0, a = -n; a <= o; a += 2) {
                    var u = Math.min(_c(e, a), t, r - a),
                        c = u + a;
                    u + c > i + s && ((i = u), (s = c));
                }
                return [i, s];
            }),
            (e.prototype.bestReverse = function (e, t, r, n, o) {
                for (var i = t, s = r, a = -o; a <= n; a += 2) {
                    var u = a - (t - r),
                        c = Math.max(Ec(e, a), 0, -u),
                        l = c + u;
                    c + l < i + s && ((i = c), (s = l));
                }
                return [i, s];
            }),
            (e.prototype.recurse = function (e, t, r, n, o, i, s) {
                return this.diffNoPrefix(e, o, r, o + s) && this.script.match(e + o, i - o) && this.diffNoSuffix(e + i, t - i, r + i + s, n - i - s);
            }),
            (e.prototype.bail = function (e, t, r, n, o, i, s, a) {
                var u = dc(this.bestForward(e, r, o, i, s), 2),
                    c = u[0],
                    l = u[1],
                    p = dc(this.bestReverse(e, r, o, i, s), 2),
                    f = p[0],
                    h = p[1];
                return c >= f || l >= h
                    ? r + o - f - h > c + l
                        ? this.splitDiff(t, f, r, n, h, o)
                        : this.splitDiff(t, c, r, n, l, o)
                    : this.diffNoPrefix(t, c, n, l) && this.boundedDiff(t + c, f - c, n + l, h - l, r, o, a) && this.diffNoSuffix(t + f, r - f, n + h, o - h);
            }),
            (e.prototype.boundedDiff = function (e, t, r, n, o, i, s) {
                var a = o * i;
                if (t * n >= Math.floor((1 << 24) + a / 2)) {
                    if (s <= 0) {
                        var u = Math.trunc(t / 4),
                            c = u + Math.trunc(t / 2),
                            l = Math.trunc(n / 4),
                            p = l + Math.trunc(n / 2);
                        return this.noDiff(r, l) && this.diff(e + u, c - u, r + l, p - l, s) && this.noDiff(r + p, n - p);
                    }
                    var f = Math.trunc(t / 2),
                        h = Math.trunc(n / 2);
                    return this.splitDiff(e, f, t, r, h, n, s);
                }
                return this.middleSnake(e, t, r, n, s);
            }),
            (e.prototype.splitDiff = function (e, t, r, n, o, i, s) {
                return this.diffNoPrefix(e, t, n, o, s) && this.diffNoSuffix(e + t, r - t, n + o, i - o, s);
            }),
            (e.prototype.noDiff = function (e, t) {
                return this.script.insert(e, t) && this.script.delete();
            }),
            e
        );
    })();
    function bc(e, t, r) {
        return e.insert(t, r);
    }
    function Cc(e, t, r) {
        return e.match(t, r);
    }
    function Pc() {
        return !0;
    }
    function Nc(e, t, r) {
        var n = !0,
            o = 0,
            i = 0,
            s = Pc;
        function a() {
            return (n = n && s === Pc), s(e, i, o);
        }
        function u(e, t, r) {
            if (r > 0)
                if (s !== e) {
                    if (!a()) return !1;
                    (s = e), (i = t), (o = r);
                } else o += r;
            return !0;
        }
        return {
            insert: function (e, t) {
                return u(bc, e - r, t);
            },
            match: function (e, r) {
                return u(Cc, e - t, r);
            },
            delete: function (e, t) {
                if (s === bc) return !0;
                var r = a();
                return (s = Pc), r;
            },
            close: function (t, r) {
                if (n) {
                    if (s === bc) return hc.REPLACE;
                    if (0 === i && o === t) return hc.NO_CHANGE;
                }
                return a() && e.close() ? hc.SUCCESS : hc.REPLACE;
            },
        };
    }
    var Ac = (function () {
        function e(e, t) {
            void 0 === e && (e = 2147483647), void 0 === t && (t = 1e4), (this.bailOutFactor = t), (this.storage = new yc(e));
        }
        return (
            (e.prototype.diff = function (e, t, r, n, o, i, s) {
                var a = Nc(s, t, o);
                return new Rc(this.storage, e, n, a, this.bailOutFactor).diff(t, r, o, i) ? a.close(r, i) : hc.REPLACE;
            }),
            e
        );
    })();
    hc.MyersBinaryDiff = Ac;
    var Mc = {};
    (function (e) {
        (function () {
            "use strict";
            Object.defineProperty(Mc, "__esModule", { value: !0 }), (Mc.BinaryDeltaTypeImpl = Mc.NO_CHANGE = void 0);
            var t = new pc.Encoder();
            function r(e) {
                return e < 24 ? 1 : e < 255 ? 2 : e <= 65535 ? 3 : 5;
            }
            function n(e, t, n) {
                var o = r(e) + 1;
                return r(t + n) - r(n) + t <= o;
            }
            Mc.NO_CHANGE = new cc.BinaryDeltaImpl(e.from([-10]), 0, 1);
            var o = (function () {
                    function e(e, t, r, n) {
                        (this.insertStart = -1), (this.matchStart = -1), (this.cborEncoder = e), (this.buffer = t), (this.offset = r), (this.blowsBudget = n);
                    }
                    return (
                        (e.prototype.insert = function (e, t) {
                            if (-1 !== this.matchStart) {
                                if (n(this.matchStart, this.matchLength, t))
                                    return (this.matchStart = -1), -1 === this.insertStart ? ((this.insertStart = e - this.matchLength), (this.insertLength = this.matchLength + t)) : (this.insertLength += this.matchLength + t), !0;
                                if (!this.flush()) return !1;
                            }
                            return -1 === this.insertStart ? ((this.insertStart = e), (this.insertLength = t)) : (this.insertLength += t), !0;
                        }),
                        (e.prototype.match = function (e, t) {
                            if (-1 !== this.matchStart) {
                                if (!this.flush()) return !1;
                            } else if (-1 !== this.insertStart && n(e, t, this.insertLength)) return (this.insertLength += t), !0;
                            return (this.matchStart = e), (this.matchLength = t), !0;
                        }),
                        (e.prototype.delete = function (e, t) {
                            return !0;
                        }),
                        (e.prototype.close = function () {
                            return this.flush();
                        }),
                        (e.prototype.flush = function () {
                            return (-1 === this.insertStart || this.writeInsert()) && (-1 === this.matchStart || this.writeMatch());
                        }),
                        (e.prototype.writeInsert = function () {
                            return !this.blowsBudget(this.insertLength + r(this.insertLength)) && (t.encode(this.buffer, this.offset + this.insertStart, this.insertLength), (this.insertStart = -1), !0);
                        }),
                        (e.prototype.writeMatch = function () {
                            return !this.blowsBudget(r(this.matchStart) + r(this.matchLength)) && (this.cborEncoder.encode(this.matchStart), this.cborEncoder.encode(this.matchLength), (this.matchStart = -1), !0);
                        }),
                        e
                    );
                })(),
                i = (function () {
                    function r(e, t, r) {
                        (this.binaryDiff = new hc.MyersBinaryDiff()), (this.implementation = e), (this.cToV = r), (this.vToC = t);
                    }
                    return (
                        (r.prototype.name = function () {
                            return "binary";
                        }),
                        (r.prototype.diff = function (e, r) {
                            var n,
                                i = this.vToC(e),
                                s = this.vToC(r),
                                a = s.$buffer,
                                u = s.$offset,
                                c = s.$length,
                                l = c,
                                p = new o(t, a, u, function (e) {
                                    return (l -= e) <= 0;
                                }),
                                f = this.binaryDiff.diff(i.$buffer, i.$offset, i.$length, a, u, c, p),
                                h = t.flush();
                            switch (f) {
                                case hc.REPLACE:
                                    return (n = s), t.encode(n.$buffer, n.$offset, n.$length), new cc.BinaryDeltaImpl(t.flush());
                                case hc.NO_CHANGE:
                                    return Mc.NO_CHANGE;
                                default:
                                    return this.readDelta(h);
                            }
                        }),
                        (r.prototype.apply = function (e, t) {
                            return this.applyImpl(e, t).value;
                        }),
                        (r.prototype.applyImpl = function (t, r, n) {
                            var o = r,
                                i = n || this.vToC(t);
                            if (!r || !r.hasChanges()) return { value: this.cToV(i), cbor: i };
                            for (var s = new lc.Decoder(o.$buffer), a = new wu.BufferOutputStream(); s.hasRemaining(); ) {
                                var u = s.nextValue();
                                e.isBuffer(u) ? a.writeMany(u) : "number" == typeof u && a.writeMany(i.$buffer, i.$offset + u, s.nextValue());
                            }
                            var c = new this.implementation(a.getBuffer());
                            return { value: this.cToV(c), cbor: c };
                        }),
                        (r.prototype.readDelta = function (e, t, r) {
                            var n = new cc.BinaryDeltaImpl(e, t, r);
                            return 1 === n.$length && e[n.$offset] === Mc.NO_CHANGE.$buffer[0] ? Mc.NO_CHANGE : n;
                        }),
                        (r.prototype.writeDelta = function (e) {
                            var t = e;
                            return t.$buffer.slice(t.$offset, t.$offset + t.$length);
                        }),
                        (r.prototype.noChange = function () {
                            return Mc.NO_CHANGE;
                        }),
                        (r.prototype.isValueCheaper = function (e, t) {
                            return e.$length <= t.$length;
                        }),
                        r
                    );
                })();
            Mc.BinaryDeltaTypeImpl = i;
        }.call(this));
    }.call(this, u({}).Buffer));
    var jc = {},
        Lc =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(jc, "__esModule", { value: !0 }), (jc.BytesImpl = void 0);
    var Dc = (function (e) {
        function t(t, r, n) {
            return void 0 === r && (r = 0), void 0 === n && (n = t.length), e.call(this, t, r, n) || this;
        }
        return (
            Lc(t, e),
            (t.toString = function () {
                return "BytesImpl";
            }),
            (t.prototype.length = function () {
                return this.$length;
            }),
            (t.prototype.asBuffer = function () {
                return this.$buffer.slice(this.$offset, this.$offset + this.$length);
            }),
            (t.prototype.copyTo = function (e, t) {
                void 0 === t && (t = 0), this.$buffer.copy(e, t, this.$offset, this.$offset + this.$length);
            }),
            (t.prototype.equals = function (e) {
                return this.equalBytes(e.$buffer, e.$offset, e.$length);
            }),
            (t.prototype.equalBytes = function (e, t, r) {
                if ((void 0 === t && (t = 0), void 0 === r && (r = e.length), this.$length !== r)) return !1;
                if (this.$buffer === e && this.$offset === t) return !0;
                for (var n = 0; n < r; ++n) if (this.$buffer[this.$offset + n] !== e[t + n]) return !1;
                return !0;
            }),
            t
        );
    })(ic.BufferSlice);
    jc.BytesImpl = Dc;
    var xc = {};
    Object.defineProperty(xc, "__esModule", { value: !0 }), (xc.AbstractDataType = void 0);
    var Bc = (function () {
        function e(e, t, r, n, o, i, s) {
            var a = this;
            (this.valueConverters = {}),
                (this.typeName = e),
                (this.cToV = o),
                (this.vToC = n),
                (this.implementation = r),
                i.forEach(function (e) {
                    a.valueConverters[e.name] = e.convert;
                }),
                (this.valueConverters[jc.BytesImpl.toString()] = function (e, t, r) {
                    return new jc.BytesImpl(e, t, r);
                }),
                (this.valueConverters[t.toString()] = this.readValue.bind(this)),
                (this.valueConverters[Ju.AnyDataTypeImpl.toString()] = this.readValue.bind(this)),
                (this.valueClass = t),
                s && (this.binaryDeltaTypeImpl = new Mc.BinaryDeltaTypeImpl(r, n, o));
        }
        return (
            (e.prototype.name = function () {
                return this.typeName;
            }),
            (e.prototype.toString = function () {
                return this.typeName + " data type";
            }),
            (e.prototype.writeValue = function (e) {
                var t = this.vToC(e);
                if (null === t) throw new Error(this + " cannot write " + e);
                return t.asBuffer();
            }),
            (e.prototype.toBytes = function (e) {
                var t = this.vToC(e);
                if (t) return t;
                throw new Error(this + " cannot convert value to Bytes: " + e);
            }),
            (e.prototype.readValue = function (e, t, r) {
                return e instanceof jc.BytesImpl ? (e instanceof this.implementation ? this.cToV(e) : this.readValue(e.$buffer, e.$offset, e.$length)) : this.cToV(new this.implementation(e, t, r));
            }),
            (e.prototype.canReadAs = function (e) {
                return void 0 !== this.valueConverters[e.toString()];
            }),
            (e.prototype.readAs = function (e, t, r, n) {
                if (t instanceof jc.BytesImpl) return this.readAs(e, t.$buffer, t.$offset, t.$length);
                if (this.valueConverters[e.toString()]) return this.valueConverters[e.toString()](t, r, n);
                throw new Error(this + " is incompatible with values of " + e);
            }),
            (e.prototype.deltaType = function (e) {
                if (!e || "binary" === e || e instanceof cc.BinaryDeltaImpl) return this.binaryDeltaType();
                throw new Error(this + " has no '" + e + "' delta type");
            }),
            (e.prototype.binaryDeltaType = function () {
                if (void 0 === this.binaryDeltaTypeImpl) throw new Error(this + " has no binary delta type");
                return this.binaryDeltaTypeImpl;
            }),
            e
        );
    })();
    xc.AbstractDataType = Bc;
    var qc = {};
    function Uc(e, t) {
        switch (t.length) {
            case 0:
                return e();
            case 1:
                return e(t[0]);
            case 2:
                return e(t[0], t[1]);
            case 3:
                return e(t[0], t[1], t[2]);
            case 4:
                return e(t[0], t[1], t[2], t[3]);
            case 5:
                return e(t[0], t[1], t[2], t[3], t[4]);
            case 6:
                return e(t[0], t[1], t[2], t[3], t[4], t[5]);
            case 7:
                return e(t[0], t[1], t[2], t[3], t[4], t[5], t[6]);
            case 8:
                return e(t[0], t[1], t[2], t[3], t[4], t[5], t[6], t[7]);
        }
        return e.apply(e, t);
    }
    Object.defineProperty(qc, "__esModule", { value: !0 }),
        (qc.identity = qc.callWithArguments = qc.curryR = void 0),
        (qc.curryR = function (e) {
            for (var t = [], r = 1; r < arguments.length; r++) t[r - 1] = arguments[r];
            return function () {
                for (var r = [], n = 0; n < arguments.length; n++) r[n] = arguments[n];
                return Uc(e, r.concat(t));
            };
        }),
        (qc.callWithArguments = Uc),
        (qc.identity = function (e) {
            return e;
        });
    var kc = {};
    (function (e) {
        (function () {
            "use strict";
            var t =
                (this && this.__extends) ||
                (function () {
                    var e = function (t, r) {
                        return (e =
                            Object.setPrototypeOf ||
                            ({ __proto__: [] } instanceof Array &&
                                function (e, t) {
                                    e.__proto__ = t;
                                }) ||
                            function (e, t) {
                                for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                            })(t, r);
                    };
                    return function (t, r) {
                        if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                        function n() {
                            this.constructor = t;
                        }
                        e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                    };
                })();
            function r(t) {
                if (t instanceof n) return t;
                if (e.isBuffer(t)) return new n(t);
                throw new Error("Unable to read Binary value from: " + t);
            }
            Object.defineProperty(kc, "__esModule", { value: !0 }), (kc.BinaryImpl = void 0);
            var n = (function (e) {
                function n(t, r, n) {
                    return void 0 === r && (r = 0), void 0 === n && (n = t.length), e.call(this, t, r, n) || this;
                }
                return (
                    t(n, e),
                    (n.toString = function () {
                        return "BinaryImpl";
                    }),
                    (n.from = function (e) {
                        return r(e);
                    }),
                    (n.prototype.get = function () {
                        return this.asBuffer();
                    }),
                    (n.prototype.diff = function (e, t) {
                        return o.diff(e, this);
                    }),
                    (n.prototype.apply = function (e) {
                        return o.apply(this, e);
                    }),
                    (n.prototype.toString = function () {
                        return "Binary <" + this.$length + " bytes> " + this.get().toString();
                    }),
                    n
                );
            })(jc.BytesImpl);
            kc.BinaryImpl = n;
            var o = new Mc.BinaryDeltaTypeImpl(n, r, qc.identity);
        }.call(this));
    }.call(this, { isBuffer: ac }));
    var Vc = {},
        Fc =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Vc, "__esModule", { value: !0 }), (Vc.BinaryDataTypeImpl = void 0);
    var Gc = (function (e) {
        function t() {
            var t = e.call(this, "binary", kc.BinaryImpl, kc.BinaryImpl, kc.BinaryImpl.from, qc.identity, [], !0) || this;
            return (t.Binary = kc.BinaryImpl), t;
        }
        return (
            Fc(t, e),
            (t.prototype.from = function (e) {
                return kc.BinaryImpl.from(e);
            }),
            (t.prototype.validate = function () {}),
            t
        );
    })(xc.AbstractDataType);
    Vc.BinaryDataTypeImpl = Gc;
    var Hc = {},
        Yc =
            (this && this.__values) ||
            function (e) {
                var t = "function" == typeof Symbol && Symbol.iterator,
                    r = t && e[t],
                    n = 0;
                if (r) return r.call(e);
                if (e && "number" == typeof e.length)
                    return {
                        next: function () {
                            return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
                        },
                    };
                throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
            };
    Object.defineProperty(Hc, "__esModule", { value: !0 }), (Hc.ROOT = Hc.JSONPointer = void 0);
    var Wc = (function () {
            function e(e) {
                this.index = e;
            }
            return (
                (e.prototype.equals = function (t) {
                    return t === this || (!!(t && t instanceof e) && t.index === this.index);
                }),
                (e.prototype.toString = function () {
                    return "/" + this.index;
                }),
                e
            );
        })(),
        Qc = new Wc(0),
        zc = (function () {
            function e(e) {
                this.expression =
                    "/" +
                    (function (e) {
                        for (var t = 0; t < e.length; ++t) {
                            var r = e.charAt(t);
                            if ("/" === r || "~" === r) {
                                var n = e.length,
                                    o = [];
                                o.push(e.substring(0, t));
                                for (var i = t; i < n; ++i) {
                                    var s = e.charAt(i);
                                    "/" === s ? o.push("~1") : "~" === s ? o.push("~0") : o.push(s);
                                }
                                return o.join("");
                            }
                        }
                        return e;
                    })(e);
            }
            return (
                (e.prototype.equals = function (t) {
                    return t === this || (!!(t && t instanceof e) && t.expression === this.expression);
                }),
                (e.prototype.toString = function () {
                    return this.expression;
                }),
                e
            );
        })(),
        Kc = (function () {
            function e(e) {
                if (((this.pos = 0), "" !== e && "/" !== e.charAt(0))) throw new Error("JSON Pointer expression must be empty or start with '/' : " + e);
                this.expression = e;
            }
            return (
                (e.prototype.nextSegmentString = function () {
                    for (var e = this.pos; this.pos < this.expression.length; ++this.pos) {
                        var t = this.expression[this.pos];
                        if ("/" === t) break;
                        if ("~" === t) {
                            for (var r = [this.expression.substring(e, this.pos)], n = this.expression.length; this.pos < n; ++this.pos) {
                                var o = this.expression.charAt(this.pos);
                                if ("/" === o) break;
                                if ("~" === o && this.pos !== n - 1) {
                                    ++this.pos;
                                    var i = this.expression.charAt(this.pos);
                                    "0" === i ? r.push("~") : "1" === i ? r.push("/") : (r.push("~"), r.push(i));
                                } else r.push(o);
                            }
                            return r.join("");
                        }
                    }
                    return this.expression.substring(e, this.pos);
                }),
                (e.prototype.maybeIndex = function (e) {
                    var t = e.length;
                    if (0 === t || t > 10) return null;
                    for (var r = 0; r < t; ++r) {
                        var n = e.charAt(r);
                        if (n < "0" || n > "9") return null;
                        if ("0" === n && 0 === r) return 1 === t ? Qc : null;
                    }
                    var o = parseInt(e, 10);
                    return o > fc.MAX_INT32 ? null : new Wc(o);
                }),
                (e.prototype.next = function () {
                    if (this.pos === this.expression.length) return null;
                    ++this.pos;
                    var e = this.nextSegmentString(),
                        t = this.maybeIndex(e);
                    return null !== t ? t : new zc(e);
                }),
                e
            );
        })(),
        Jc = (function () {
            function e(e) {
                this.segments = e;
            }
            return (
                (e.parse = function (t) {
                    if (t instanceof e) return t;
                    for (var r = Hc.ROOT, n = new Kc(t); ; ) {
                        var o = n.next();
                        if (null === o) return r;
                        r = r.withSegment(o);
                    }
                }),
                (e.prototype.withKey = function (e) {
                    return this.withSegment(new zc(e));
                }),
                (e.prototype.withIndex = function (e) {
                    return this.withSegment(new Wc(e));
                }),
                (e.prototype.withSegment = function (t) {
                    return new e(this.segments.concat(t));
                }),
                (e.prototype.equalIgnoringIndexes = function (e) {
                    if (e === this) return !0;
                    var t = this.segments.length;
                    if (t !== e.segments.length) return !1;
                    for (var r = 0; r < t; ++r) {
                        var n = this.segments[r],
                            o = e.segments[r];
                        if (n instanceof Wc) {
                            if (o instanceof zc) return !1;
                        } else if (!n.equals(o)) return !1;
                    }
                    return !0;
                }),
                (e.prototype.toString = function () {
                    var e,
                        t,
                        r = [];
                    try {
                        for (var n = Yc(this.segments), o = n.next(); !o.done; o = n.next()) {
                            var i = o.value;
                            r.push(i.toString());
                        }
                    } catch (t) {
                        e = { error: t };
                    } finally {
                        try {
                            o && !o.done && (t = n.return) && t.call(n);
                        } finally {
                            if (e) throw e.error;
                        }
                    }
                    return r.join("");
                }),
                (e.prototype.equals = function (t) {
                    if (t === this) return !0;
                    if (!(t && t instanceof e)) return !1;
                    if (this.segments.length !== t.segments.length) return !1;
                    for (var r = this.segments.length, n = 0; n < r; ++n) {
                        var o = this.segments[n],
                            i = t.segments[n];
                        if (!o.equals(i)) return !1;
                    }
                    return !0;
                }),
                e
            );
        })();
    (Hc.JSONPointer = Jc), (Hc.ROOT = new Jc([]));
    var $c = {};
    Object.defineProperty($c, "__esModule", { value: !0 }),
        ($c.requireNonNull = void 0),
        ($c.requireNonNull = function (e, t) {
            if (null == e) throw new Error(t + " is null");
            return e;
        });
    var Xc = {},
        Zc =
            (this && this.__values) ||
            function (e) {
                var t = "function" == typeof Symbol && Symbol.iterator,
                    r = t && e[t],
                    n = 0;
                if (r) return r.call(e);
                if (e && "number" == typeof e.length)
                    return {
                        next: function () {
                            return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
                        },
                    };
                throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
            };
    Object.defineProperty(Xc, "__esModule", { value: !0 }), (Xc.JSONPointerMap = void 0);
    var el = (function () {
            function e(e, t, r) {
                (this.segment = e), (this.pointer = t), (this.children = []), (this.value = null), (this.context = r);
            }
            return (
                (e.prototype.count = function () {
                    var e,
                        t,
                        r = this.value ? 1 : 0;
                    try {
                        for (var n = Zc(this.children), o = n.next(); !o.done; o = n.next()) {
                            r += o.value.count();
                        }
                    } catch (t) {
                        e = { error: t };
                    } finally {
                        try {
                            o && !o.done && (t = n.return) && t.call(n);
                        } finally {
                            if (e) throw e.error;
                        }
                    }
                    return r;
                }),
                (e.prototype.addChild = function (t) {
                    var r = new e(t, this.pointer.withSegment(t), this.context);
                    return this.children.push(r), r;
                }),
                (e.prototype.findChild = function (e) {
                    var t, r;
                    try {
                        for (var n = Zc(this.children), o = n.next(); !o.done; o = n.next()) {
                            var i = o.value;
                            if (e.equals(i.segment)) return i;
                        }
                    } catch (e) {
                        t = { error: e };
                    } finally {
                        try {
                            o && !o.done && (r = n.return) && r.call(n);
                        } finally {
                            if (t) throw t.error;
                        }
                    }
                    return null;
                }),
                (e.prototype.setValue = function (e) {
                    var t = this.value;
                    return null === t && this.context.size++, (this.value = e), t;
                }),
                (e.prototype.removeDescendants = function () {
                    var e,
                        t,
                        r = 0;
                    try {
                        for (var n = Zc(this.children), o = n.next(); !o.done; o = n.next()) {
                            r += o.value.count();
                        }
                    } catch (t) {
                        e = { error: t };
                    } finally {
                        try {
                            o && !o.done && (t = n.return) && t.call(n);
                        } finally {
                            if (e) throw e.error;
                        }
                    }
                    return (this.children = []), (this.context.size -= r), r;
                }),
                (e.prototype.numberOfChildren = function () {
                    var e,
                        t,
                        r = 0;
                    try {
                        for (var n = Zc(this.children), o = n.next(); !o.done; o = n.next()) {
                            r += o.value.value ? 1 : 0;
                        }
                    } catch (t) {
                        e = { error: t };
                    } finally {
                        try {
                            o && !o.done && (t = n.return) && t.call(n);
                        } finally {
                            if (e) throw e.error;
                        }
                    }
                    return r;
                }),
                (e.prototype.toString = function () {
                    return this.pointer + "=" + this.value;
                }),
                e
            );
        })(),
        tl = (function () {
            function e(e) {
                (this.nextChildIndex = 0), (this.node = e);
            }
            return (
                (e.prototype.nextChild = function () {
                    var e = this.node.children;
                    return this.nextChildIndex >= e.length ? null : e[this.nextChildIndex++];
                }),
                e
            );
        })(),
        rl = (function () {
            function e(e) {
                (this.nextEntry = e()), (this.nextWithValue = e);
            }
            return (
                (e.prototype.hasNext = function () {
                    return null !== this.nextEntry;
                }),
                (e.prototype.next = function () {
                    if (null === this.nextEntry) throw new Error("No such element");
                    var e = this.nextEntry;
                    return (this.nextEntry = this.nextWithValue()), e;
                }),
                e
            );
        })(),
        nl = (function () {
            function e() {
                (this.root = new el(null, Hc.ROOT, this)), (this.size = 0);
            }
            return (
                (e.prototype.put = function (e, t) {
                    $c.requireNonNull(t, "value");
                    for (var r = this.root, n = 0; n < e.segments.length; ) {
                        var o = e.segments[n++],
                            i = r.findChild(o);
                        if (null === i) {
                            r = r.addChild(o);
                            break;
                        }
                        r = i;
                    }
                    for (; n < e.segments.length; n++) r = r.addChild(e.segments[n]);
                    return r.setValue(t);
                }),
                (e.prototype.contains = function (e) {
                    return null !== this.get(e);
                }),
                (e.prototype.get = function (e) {
                    var t = this.getEntry(e);
                    return t ? t.value : null;
                }),
                (e.prototype.getEntry = function (e) {
                    var t,
                        r,
                        n = this.root;
                    try {
                        for (var o = Zc(e.segments), i = o.next(); !i.done; i = o.next()) {
                            var s = i.value;
                            if (null === (n = n.findChild(s))) return null;
                        }
                    } catch (e) {
                        t = { error: e };
                    } finally {
                        try {
                            i && !i.done && (r = o.return) && r.call(o);
                        } finally {
                            if (t) throw t.error;
                        }
                    }
                    return n;
                }),
                (e.prototype.descendants = function (t) {
                    var r = new e(),
                        n = this.root,
                        o = r.root,
                        i = t.segments,
                        s = i.length;
                    if (0 === s) return this;
                    for (var a = 0; a < s - 1; ++a) {
                        var u = i[a];
                        if (null === (n = n.findChild(u))) return ol;
                        o = o.addChild(u);
                    }
                    var c = n.findChild(i[s - 1]);
                    return null === c ? ol : (o.children.push(c), (r.size = c.count()), r);
                }),
                (e.prototype.intersection = function (t) {
                    var r = new e(),
                        n = this.root,
                        o = r.root,
                        i = t.segments,
                        s = i.length;
                    if (0 === s) return this;
                    null !== n.value && o.setValue(n.value);
                    for (var a = 0; a < s - 1; ++a) {
                        var u = i[a];
                        if (null === (n = n.findChild(u))) return r;
                        (o = o.addChild(u)), null !== n.value && o.setValue(n.value);
                    }
                    var c = n.findChild(i[s - 1]);
                    return null === c || (o.children.push(c), (r.size += c.count())), r;
                }),
                (e.prototype.iterator = function () {
                    var e = [this.root];
                    return new rl(function () {
                        for (;;) {
                            var t = e.shift();
                            if (void 0 === t) return null;
                            for (var r = t.children.length; r > 0; --r) e.unshift(t.children[r - 1]);
                            if (null !== t.value) return t;
                        }
                    });
                }),
                (e.prototype.postOrder = function () {
                    var e = [new tl(this.root)];
                    return new rl(function () {
                        for (;;) {
                            var t = e[0];
                            if (void 0 === t) return null;
                            var r = t.nextChild();
                            if (null === r) {
                                if ((e.shift(), null !== t.node.value)) return t.node;
                            } else {
                                if (0 === r.children.length) return r;
                                e.unshift(new tl(r));
                            }
                        }
                    });
                }),
                (e.prototype.toString = function () {
                    for (var e = ["{"], t = this.iterator(); t.hasNext(); ) e.length > 1 && e.push(", "), e.push(t.next());
                    return e.push("}"), e.join("");
                }),
                e
            );
        })();
    Xc.JSONPointerMap = nl;
    var ol = new nl(),
        il = {},
        sl =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })(),
        al =
            (this && this.__values) ||
            function (e) {
                var t = "function" == typeof Symbol && Symbol.iterator,
                    r = t && e[t],
                    n = 0;
                if (r) return r.call(e);
                if (e && "number" == typeof e.length)
                    return {
                        next: function () {
                            return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
                        },
                    };
                throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
            };
    Object.defineProperty(il, "__esModule", { value: !0 }), (il.SpanParser = void 0);
    var ul = (function () {
            function e(e, t, r, n) {
                (this.tokenRange = []), (this.accumulatedTokens = 0), (this.totalTokens = 0), (this.tokeniser = e), (this.base = t), (this.startOffset = r), (this.nextOffset = n);
            }
            return (
                (e.prototype.total = function () {
                    return this.totalTokens;
                }),
                (e.prototype.accumulated = function () {
                    return this.accumulatedTokens;
                }),
                (e.prototype.newArray = function (e, t) {
                    return new cl(this.tokeniser, this.currentPointer(this.base, this.totalTokens), e, t);
                }),
                (e.prototype.newObject = function (e, t) {
                    return new ll(this.tokeniser, this.currentPointer(this.base, this.totalTokens), e, t);
                }),
                (e.prototype.notEmptyAndSplitBy = function (e) {
                    return this.startOffset < e && 0 !== this.totalTokens;
                }),
                (e.prototype.add = function (e) {
                    return (this.tokenRange[this.accumulatedTokens] = [this.nextOffset, e]), (this.nextOffset = e), ++this.accumulatedTokens, ++this.totalTokens, !1;
                }),
                (e.prototype.setNextStart = function (e) {
                    this.nextOffset = e;
                }),
                (e.prototype.skip = function () {
                    ++this.totalTokens, (this.accumulatedTokens = 0);
                }),
                (e.prototype.takeAll = function (e) {
                    for (var t = this.totalTokens - this.accumulatedTokens, r = 0; r < this.accumulatedTokens; ++r) {
                        var n = this.tokenRange[r],
                            o = n[0],
                            i = n[1];
                        this.take(e, this.base, t, t + r, o, i - o);
                    }
                    this.accumulatedTokens = 0;
                }),
                (e.prototype.splitStructureEnd = function (e) {
                    e.splitStructureEnd(this.base, this.totalTokens, this.startOffset, this.nextOffset + 1 - this.startOffset);
                }),
                (e.prototype.toString = function () {
                    return this.base.toString();
                }),
                e
            );
        })(),
        cl = (function (e) {
            function t(t, r, n, o) {
                return e.call(this, t, r, n, o) || this;
            }
            return (
                sl(t, e),
                (t.prototype.take = function (e, t, r, n, o, i) {
                    e.accept(t.withIndex(n), o, i);
                }),
                (t.prototype.currentPointer = function (e, t) {
                    return e.withIndex(t);
                }),
                t
            );
        })(ul),
        ll = (function (e) {
            function t(t, r, n, o) {
                var i = e.call(this, t, r, n, o) || this;
                return (i.pendingKeyName = ""), (i.pendingKey = !0), (i.keys = []), i;
            }
            return (
                sl(t, e),
                (t.prototype.add = function (t) {
                    return (
                        this.pendingKey
                            ? (this.setNextStart(t), (this.pendingKeyName = this.tokeniser.getToken().value), (this.pendingKey = !1))
                            : ((this.keys[this.accumulated()] = this.pendingKeyName), (this.pendingKey = !0), e.prototype.add.call(this, t)),
                        !this.pendingKey
                    );
                }),
                (t.prototype.take = function (e, t, r, n, o, i) {
                    e.accept(t.withKey(this.keys[n - r]), o, i);
                }),
                (t.prototype.currentPointer = function (e) {
                    return e.withKey(this.pendingKeyName);
                }),
                t
            );
        })(ul),
        pl = (function (e) {
            function t(t) {
                return e.call(this, t, Hc.ROOT, -1, 0) || this;
            }
            return (
                sl(t, e),
                (t.prototype.take = function (e, t, r, n, o, i) {
                    if (this.total() > 1) throw new Error("Invalid JSON: multiple values found");
                    e.accept(t, o, i);
                }),
                (t.prototype.currentPointer = function (e) {
                    return e;
                }),
                t
            );
        })(ul),
        fl = (function () {
            function e(e) {
                (this.parentStack = []), (this.tokeniser = new oc.Tokeniser(e.$buffer, e.$offset, e.$length)), (this.structure = new pl(this.tokeniser)), (this.startOffset = this.tokeniser.offset()), (this.json = e);
            }
            return (
                (e.prototype.spanToNext = function (e, t) {
                    return this.spanTo(e, t, !0);
                }),
                (e.prototype.spanTo = function (e, t, r) {
                    var n, o;
                    void 0 === r && (r = !1);
                    var i = this.nextByte();
                    if (i >= e) return 0;
                    var s,
                        a = this.parentStack.length,
                        u = r,
                        c = i;
                    do {
                        s = this.tokeniser.nextToken();
                        var l = c;
                        if (((c = this.nextByte()), null === s)) {
                            if (0 !== this.parentStack.length) throw new Error("Invalid structure");
                            break;
                        }
                        if (s.type === ec.tokens.VALUE) u = this.structure.add(c);
                        else if (s.type === ec.tokens.ARRAY_START) this.parentStack.push(this.structure), (this.structure = this.structure.newArray(l, c));
                        else if (s.type === ec.tokens.MAP_START) this.parentStack.push(this.structure), (this.structure = this.structure.newObject(l, c));
                        else if (ec.isStructEnd(s.type)) {
                            var p = this.parentStack.pop();
                            this.structure.notEmptyAndSplitBy(i) ? (this.structure.takeAll(t), this.structure.splitStructureEnd(t), p.skip(), p.setNextStart(c)) : p.add(c), (this.structure = p), (u = !1);
                        }
                    } while (u || c < e || this.nextTokenIsStructEnd(s, c));
                    try {
                        for (var f = al(this.parentStack), h = f.next(); !h.done; h = f.next()) {
                            h.value.takeAll(t);
                        }
                    } catch (e) {
                        n = { error: e };
                    } finally {
                        try {
                            h && !h.done && (o = f.return) && o.call(f);
                        } finally {
                            if (n) throw n.error;
                        }
                    }
                    return this.structure.takeAll(t), this.parentStack.length - a;
                }),
                (e.prototype.nextTokenIsStructEnd = function (e, t) {
                    var r = this.tokeniser.getContext();
                    return ec.isStructStart(e.type) ? 0 === r.expected() : (r.acceptsBreakMarker() && t < this.json.$length && this.json.$buffer[this.json.$offset + t] === ec.BYTE_BREAK) || !r.hasRemaining();
                }),
                (e.prototype.nextByte = function () {
                    return this.tokeniser.offset() - this.startOffset;
                }),
                (e.prototype.toString = function () {
                    var e = ["SpanParser", " next=", this.nextByte().toString(), " ["];
                    return (
                        this.parentStack.forEach(function (t) {
                            e.push(t.toString()), e.push(", ");
                        }),
                        e.push(this.structure.toString()),
                        e.push("]"),
                        e.join("")
                    );
                }),
                e
            );
        })();
    il.SpanParser = fl;
    var hl = {};
    (function (e) {
        (function () {
            "use strict";
            Object.defineProperty(hl, "__esModule", { value: !0 }), (hl.JSONDeltaImpl = void 0);
            var t = (function () {
                function e(e) {
                    this.splitStructures = e;
                }
                return (
                    (e.prototype.accept = function (e, t, r) {
                        (this.last = e), (this.lastStart = t), (this.lastLength = r);
                    }),
                    (e.prototype.foundLast = function () {
                        return void 0 !== this.last;
                    }),
                    (e.prototype.consumeLast = function (e) {
                        e.accept(this.last, this.lastStart, this.lastLength);
                    }),
                    (e.prototype.splitStructureEnd = function (e, t, r, n) {
                        this.splitStructures.put(e, { start: r, length: n, elements: t });
                    }),
                    e
                );
            })();
            function r(e, t, r, n) {
                return e.equalBytes(t.$buffer, t.$offset + r, n);
            }
            var n = (function () {
                    function e(e, t, n, o, i, s) {
                        var a = this;
                        (this.removedSplitStructures = new Xc.JSONPointerMap()),
                            (this.insertedSplitStructures = new Xc.JSONPointerMap()),
                            (this.oldOffset = 0),
                            (this.newOffset = 0),
                            (this.pendingRemove = null),
                            (this.pendingInsert = null),
                            (this.inserter = {
                                accept: function (e, t, n) {
                                    null !== a.pendingRemove && a.pendingRemove.equalIgnoringIndexes(e) && r(a.pendingRemoveValue, a.newValue, t, n)
                                        ? ((a.pendingRemove = null), (a.pendingRemoveValue = null))
                                        : (a.addInsert(e, a.partOf(a.newValue, t, n)), a.addRemove(null, null));
                                },
                                splitStructureEnd: function (e, t, r, n) {
                                    a.insertedSplitStructures.put(e, { start: r, length: n, elements: t });
                                },
                            }),
                            (this.remover = {
                                accept: function (e, t, n) {
                                    null !== a.pendingInsert && a.pendingInsert.equalIgnoringIndexes(e) && r(a.pendingInsertValue, a.oldValue, t, n)
                                        ? ((a.pendingInsert = null), (a.pendingInsertValue = null))
                                        : (a.addRemove(e, a.copyPartOf(a.oldValue, t, n)), a.addInsert(null, null));
                                },
                                splitStructureEnd: function (e, t, r, n) {
                                    a.removedSplitStructures.put(e, { start: r, length: n, elements: t });
                                },
                            }),
                            (this.oldParser = new il.SpanParser(e)),
                            (this.newParser = new il.SpanParser(t)),
                            (this.oldValue = e),
                            (this.newValue = t),
                            (this.inserted = n),
                            (this.removed = o),
                            (this.partOf = i),
                            (this.copyPartOf = s);
                    }
                    return (
                        (e.prototype.match = function (e, t) {
                            return this.handleDelete(this.oldOffset, e - this.oldOffset), this.handleMatch(e, t), !0;
                        }),
                        (e.prototype.handleDelete = function (e, t) {
                            this.checkInvariants();
                            var r = e + t;
                            this.oldParser.nextByte() < r && (0 !== this.oldParser.spanTo(r, this.remover) || this.oldParser.nextByte() > r) && this.newParser.spanToNext(this.newOffset + 1, this.inserter);
                        }),
                        (e.prototype.handleMatch = function (e, r) {
                            this.checkInvariants();
                            var n = this.newOffset,
                                o = e + r;
                            (this.newOffset += r), (this.oldOffset = o);
                            var i = this.oldParser.nextByte(),
                                s = this.newParser.nextByte();
                            s > n && i === e ? this.oldParser.spanToNext(e + 1, this.remover) : i > e && s === n && this.newParser.spanToNext(n + 1, this.inserter);
                            var a = new t(this.removedSplitStructures),
                                u = new t(this.insertedSplitStructures);
                            this.oldParser.spanTo(o, a), this.newParser.spanTo(this.newOffset, u);
                            var c = a.foundLast() && this.oldParser.nextByte() > o,
                                l = u.foundLast() && this.newParser.nextByte() > this.newOffset;
                            c && l && (a.consumeLast(this.remover), u.consumeLast(this.inserter));
                        }),
                        (e.prototype.insert = function (e) {
                            return (
                                this.checkInvariants(),
                                (this.newOffset += e.length),
                                this.newParser.nextByte() < this.newOffset &&
                                    (0 !== this.newParser.spanTo(this.newOffset, this.inserter) || this.newParser.nextByte() > this.newOffset) &&
                                    this.oldParser.spanToNext(this.oldOffset + 1, this.remover),
                                !0
                            );
                        }),
                        (e.prototype.end = function () {
                            this.handleDelete(this.oldOffset, this.oldValue.$length - this.oldOffset), this.addInsert(null, null), this.addRemove(null, null), this.replaceFullRemovedStructures(), this.replaceFullInsertedStructures();
                        }),
                        (e.prototype.addInsert = function (e, t) {
                            null !== this.pendingInsert && this.inserted.put(this.pendingInsert, this.pendingInsertValue), (this.pendingInsert = e), (this.pendingInsertValue = t);
                        }),
                        (e.prototype.addRemove = function (e, t) {
                            null !== this.pendingRemove && this.removed.put(this.pendingRemove, this.pendingRemoveValue), (this.pendingRemove = e), (this.pendingRemoveValue = t);
                        }),
                        (e.prototype.noChange = function () {}),
                        (e.prototype.checkInvariants = function () {
                            if (this.oldParser.nextByte() < this.oldOffset || this.newParser.nextByte() < this.newOffset) throw new Error("Invalid binary delta");
                        }),
                        (e.prototype.replaceFullRemovedStructures = function () {
                            for (var e = this.removedSplitStructures.postOrder(); e.hasNext(); ) {
                                var t = e.next(),
                                    r = t.value,
                                    n = this.removed.getEntry(t.pointer);
                                null !== n && n.numberOfChildren() === r.elements && (n.setValue(this.copyPartOf(this.oldValue, r.start, r.length)), n.removeDescendants());
                            }
                        }),
                        (e.prototype.replaceFullInsertedStructures = function () {
                            for (var e = this.insertedSplitStructures.postOrder(); e.hasNext(); ) {
                                var t = e.next(),
                                    r = t.value,
                                    n = this.inserted.getEntry(t.pointer);
                                null !== n && n.numberOfChildren() === r.elements && (n.setValue(this.partOf(this.newValue, r.start, r.length)), n.removeDescendants());
                            }
                        }),
                        e
                    );
                })(),
                o = (function () {
                    function e(e) {
                        (this.entries = []), (this.parts = e);
                        for (var t = e.iterator(); t.hasNext(); ) {
                            var r = t.next();
                            this.entries.push({ key: r.pointer.toString(), value: r.value.get() });
                        }
                        this.length = this.entries.length;
                    }
                    return (
                        (e.prototype.get = function (e) {
                            return this.parts.get(Hc.JSONPointer.parse(e)).get();
                        }),
                        (e.prototype.entrySet = function () {
                            return this.entries;
                        }),
                        (e.prototype.containsKey = function (e) {
                            return this.parts.contains(Hc.JSONPointer.parse(e));
                        }),
                        (e.prototype.descendants = function (t) {
                            return new e(this.parts.descendants(Hc.JSONPointer.parse(t)));
                        }),
                        (e.prototype.intersection = function (t) {
                            return new e(this.parts.intersection(Hc.JSONPointer.parse(t)));
                        }),
                        e
                    );
                })(),
                i = (function () {
                    function t(e, t, r, o) {
                        (this.insertedMap = new Xc.JSONPointerMap()),
                            (this.removedMap = new Xc.JSONPointerMap()),
                            (this.factory = e),
                            void 0 !== o ? o.visit(new n(t, r, this.insertedMap, this.removedMap, this.partOf.bind(this), this.copyPartOf.bind(this))) : (this.insertedMap.put(Hc.ROOT, t), this.removedMap.put(Hc.ROOT, r));
                    }
                    return (
                        (t.prototype.partOf = function (e, t, r) {
                            return new this.factory(e.$buffer, e.$offset + t, r);
                        }),
                        (t.prototype.copyPartOf = function (t, r, n) {
                            var o = t.$offset + r,
                                i = e.alloc(n);
                            return t.$buffer.copy(i, 0, o, o + n), new this.factory(i, 0, n);
                        }),
                        (t.prototype.removed = function () {
                            return new o(this.removedMap);
                        }),
                        (t.prototype.inserted = function () {
                            return new o(this.insertedMap);
                        }),
                        (t.prototype.hasChanges = function () {
                            return 0 !== this.removedMap.size || 0 !== this.insertedMap.size;
                        }),
                        (t.prototype.toString = function () {
                            return ["REMOVE ", this.removedMap, " INSERT ", this.insertedMap].join("");
                        }),
                        t
                    );
                })();
            hl.JSONDeltaImpl = i;
        }.call(this));
    }.call(this, u({}).Buffer));
    var dl = {},
        yl =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(dl, "__esModule", { value: !0 }), (dl.JSONImpl = void 0);
    var vl = new pc.Encoder();
    function Sl(e) {
        return e instanceof El ? e : new El(vl.encode(e).flush());
    }
    function _l(e, t) {
        return t instanceof Xu.Int64Impl ? t.toString() : t;
    }
    var El = (function (e) {
        function t(t, r, n) {
            return void 0 === r && (r = 0), void 0 === n && (n = t.length), e.call(this, t, r, n) || this;
        }
        return (
            yl(t, e),
            (t.toString = function () {
                return "JSONImpl";
            }),
            (t.from = function (e) {
                return Sl(e);
            }),
            (t.prototype.get = function () {
                return new lc.Decoder(this.$buffer, this.$offset, this.$length).nextValue();
            }),
            (t.prototype.diff = function (e, r) {
                var n = Sl(e),
                    o = this.binaryDiff(n);
                return "json" === r ? new hl.JSONDeltaImpl(t, n, this, o) : o;
            }),
            (t.prototype.binaryDiff = function (e) {
                return wl.diff(e, this);
            }),
            (t.prototype.jsonDiff = function (e) {
                return this.diff(e, "json");
            }),
            (t.prototype.apply = function (e) {
                return wl.apply(this, e);
            }),
            (t.prototype.toString = function () {
                return JSON.stringify(this.get());
            }),
            (t.prototype.toJsonString = function () {
                return JSON.stringify(this.get(), _l);
            }),
            t
        );
    })(jc.BytesImpl);
    dl.JSONImpl = El;
    var wl = new Mc.BinaryDeltaTypeImpl(El, Sl, qc.identity),
        ml = {},
        Tl =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(ml, "__esModule", { value: !0 }), (ml.JSONDataTypeImpl = void 0);
    var gl = (function (e) {
        function t() {
            var t = e.call(this, "json", dl.JSONImpl, dl.JSONImpl, dl.JSONImpl.from, qc.identity, [], !0) || this;
            return (t.JSON = dl.JSONImpl), t;
        }
        return (
            Tl(t, e),
            (t.prototype.fromJsonString = function (e) {
                return dl.JSONImpl.from(JSON.parse(e));
            }),
            (t.prototype.from = function (e) {
                return dl.JSONImpl.from(e);
            }),
            (t.prototype.validate = function () {}),
            t
        );
    })(xc.AbstractDataType);
    ml.JSONDataTypeImpl = gl;
    var Ol = {};
    (function (e) {
        (function () {
            "use strict";
            var t =
                (this && this.__extends) ||
                (function () {
                    var e = function (t, r) {
                        return (e =
                            Object.setPrototypeOf ||
                            ({ __proto__: [] } instanceof Array &&
                                function (e, t) {
                                    e.__proto__ = t;
                                }) ||
                            function (e, t) {
                                for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                            })(t, r);
                    };
                    return function (t, r) {
                        if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                        function n() {
                            this.constructor = t;
                        }
                        e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                    };
                })();
            Object.defineProperty(Ol, "__esModule", { value: !0 }), (Ol.PrimitiveDataType = void 0);
            var r = new pc.Encoder(),
                n = new jc.BytesImpl(e.from([246])),
                o = (function (e) {
                    function o(t, o, i, s, a) {
                        var u = this,
                            c = function (e) {
                                return i(e, r), new jc.BytesImpl(r.flush());
                            },
                            l = {
                                name: dl.JSONImpl.toString(),
                                convert: function (e, t, r) {
                                    return new dl.JSONImpl(e, t, r);
                                },
                            };
                        return (
                            ((u =
                                e.call(
                                    this,
                                    t,
                                    o,
                                    jc.BytesImpl,
                                    c,
                                    function (e) {
                                        return n.equals(e) ? null : new lc.Decoder(e.$buffer, e.$offset, e.$length).nextValueExpecting(s);
                                    },
                                    [l],
                                    a
                                ) || this).serialise = i),
                            (u.fromValue = c),
                            u
                        );
                    }
                    return (
                        t(o, e),
                        (o.prototype.writeValue = function (e) {
                            return null == e ? n.asBuffer() : (this.serialise(e, r), r.flush());
                        }),
                        (o.prototype.validate = function () {}),
                        (o.prototype.from = function (e) {
                            return e.$buffer ? e : this.fromValue(e);
                        }),
                        o
                    );
                })(xc.AbstractDataType);
            Ol.PrimitiveDataType = o;
        }.call(this));
    }.call(this, u({}).Buffer));
    var Il = {},
        Rl =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    function bl(e, t) {
        null == e ? t.encode(null) : t.writeDouble(e);
    }
    Object.defineProperty(Il, "__esModule", { value: !0 }), (Il.DoubleDataTypeImpl = void 0);
    var Cl = (function (e) {
        function t() {
            return e.call(this, "double", Number, bl, lc.isDouble, !1) || this;
        }
        return Rl(t, e), t;
    })(Ol.PrimitiveDataType);
    Il.DoubleDataTypeImpl = Cl;
    var Pl = {},
        Nl =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    function Al(e, t) {
        null == e ? t.encode(null) : t.writeInt64(new Xu.Int64Impl(e));
    }
    Object.defineProperty(Pl, "__esModule", { value: !0 }), (Pl.Int64DataTypeImpl = void 0);
    var Ml = (function (e) {
        function t() {
            var t = e.call(this, "int64", Xu.Int64Impl, Al, lc.isInt64, !1) || this;
            return (t.Int64 = Xu.Int64Impl), t;
        }
        return Nl(t, e), t;
    })(Ol.PrimitiveDataType);
    Pl.Int64DataTypeImpl = Ml;
    var jl = {},
        Ll =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    function Dl(e, t) {
        null == e ? t.encode(null) : t.encode(e.toString());
    }
    Object.defineProperty(jl, "__esModule", { value: !0 }), (jl.StringDataTypeImpl = void 0);
    var xl = (function (e) {
        function t() {
            return e.call(this, "string", String, Dl, lc.isString, !0) || this;
        }
        return Ll(t, e), t;
    })(Ol.PrimitiveDataType);
    jl.StringDataTypeImpl = xl;
    var Bl = {};
    function ql(e, t, r, n, o) {
        if (0 === r) return 0;
        if (e[0] === n) return 1;
        for (var i = 1, s = t; s < t + r; s++) e[s] === o && i++;
        return i;
    }
    Object.defineProperty(Bl, "__esModule", { value: !0 }),
        (Bl.recordIsSingleEmptyField = Bl.isSingleEmptyRecord = Bl.findDelimiter = Bl.fieldCount = Bl.recordCount = Bl.bytesToString = Bl.FIELD_MU = Bl.RECORD_MU = Bl.EMPTY_FIELD = Bl.FIELD_DELIMITER = Bl.RECORD_DELIMITER = void 0),
        (Bl.RECORD_DELIMITER = 1),
        (Bl.FIELD_DELIMITER = 2),
        (Bl.EMPTY_FIELD = 3),
        (Bl.RECORD_MU = 4),
        (Bl.FIELD_MU = 5),
        String.fromCharCode(Bl.RECORD_DELIMITER),
        String.fromCharCode(Bl.FIELD_DELIMITER),
        String.fromCharCode(Bl.EMPTY_FIELD),
        String.fromCharCode(Bl.RECORD_MU),
        String.fromCharCode(Bl.FIELD_MU),
        (Bl.bytesToString = function (e, t, r) {
            for (var n = "", o = t; o < t + r; ++o)
                switch (e[o]) {
                    case Bl.FIELD_DELIMITER:
                        n += "<FD>";
                        break;
                    case Bl.RECORD_DELIMITER:
                        n += "<RD>";
                        break;
                    case Bl.EMPTY_FIELD:
                        n += "<EF>";
                        break;
                    case Bl.FIELD_MU:
                        n += "<FM>";
                        break;
                    case Bl.RECORD_MU:
                        n += "<RM>";
                        break;
                    default:
                        n += String.fromCharCode(e[o]);
                }
            return n;
        }),
        (Bl.recordCount = function (e, t, r) {
            return ql(e, t, r, Bl.RECORD_MU, Bl.RECORD_DELIMITER);
        }),
        (Bl.fieldCount = function (e, t, r) {
            return ql(e, t, r, Bl.FIELD_MU, Bl.FIELD_DELIMITER);
        }),
        (Bl.findDelimiter = function (e, t, r, n) {
            for (var o = t; o < r; o++) if (e[o] === n) return o;
            return r;
        }),
        (Bl.isSingleEmptyRecord = function (e, t, r) {
            return 1 === r && e[t] === Bl.RECORD_MU;
        }),
        (Bl.recordIsSingleEmptyField = function (e, t, r) {
            return 1 === r && (e[t] === Bl.FIELD_MU || e[t] === Bl.EMPTY_FIELD);
        });
    var Ul = {};
    (function (e) {
        (function () {
            "use strict";
            function t(t, r) {
                if (0 !== t.length)
                    if (1 !== t.length || 0 !== t[0].length) {
                        var n = !1;
                        t.forEach(function (t) {
                            if ((n ? r.write(Bl.RECORD_DELIMITER) : (n = !0), 1 === t.length && "" === t[0])) r.write(Bl.FIELD_MU);
                            else {
                                var o = !1;
                                t.forEach(function (t) {
                                    o ? r.write(Bl.FIELD_DELIMITER) : (o = !0), null != t && r.writeMany(e.from(t));
                                });
                            }
                        });
                    } else r.write(Bl.RECORD_MU);
            }
            Object.defineProperty(Ul, "__esModule", { value: !0 }),
                (Ul.toBuffer = void 0),
                (Ul.toBuffer = function (e) {
                    var r = new wu.BufferOutputStream();
                    return t(e, r), r.getBuffer();
                });
        }.call(this));
    }.call(this, u({}).Buffer));
    var kl = {};
    function Vl(e, t, r) {
        var n = e.getAbsoluteIndex(r);
        if (n > t.length - 1) throw new Error("Index '" + r + "' does not have a matching entry for variable occurrence record: '" + e.name + "'");
        return n;
    }
    function Fl(e, t, r) {
        var n = e.getAbsoluteIndex(r);
        if (n > t.length - 1) throw new Error("Index '" + r + "' does not have a matching entry for variable occurrence field: '" + e.name + "'");
        return n;
    }
    Object.defineProperty(kl, "__esModule", { value: !0 }), (kl.AbstractRecordModel = kl.resolveFieldIndex = kl.resolveRecordIndex = void 0), (kl.resolveRecordIndex = Vl), (kl.resolveFieldIndex = Fl);
    var Gl = (function () {
        function e(e, t) {
            (this.recordV2Constructor = e), (this.modelSchema = t);
        }
        return (
            (e.prototype.schema = function () {
                return this.modelSchema;
            }),
            (e.prototype.asValue = function () {
                return new this.recordV2Constructor(Ul.toBuffer(this.model()));
            }),
            (e.prototype.get = function (e, t, r, n) {
                var o, i;
                switch ((void 0 === t && (t = 0), void 0 === n && (n = 0), arguments.length)) {
                    case 1:
                        var s = this.parseKey(e);
                        (e = s.recordName), (i = s.recordIndex), (o = s.fieldName), (n = s.fieldIndex);
                        break;
                    case 2:
                        (o = t), (i = 0);
                        break;
                    default:
                        (o = r), (i = t);
                }
                var a = this.modelSchema.getRecord(e),
                    u = a.getField(o),
                    c = this.getRecord(a, i);
                return c[Fl(u, c, n)];
            }),
            (e.prototype.recordCount = function (e) {
                var t = this.modelSchema.getRecord(e);
                return t.isVariable ? this.model().length - t.getIndex() : t.min;
            }),
            (e.prototype.fieldCount = function (e, t, r) {
                var n = this.modelSchema.getRecord(e),
                    o = n.getField(r);
                return o.isVariable ? this.getRecord(n, t).length - o.getIndex() : o.min;
            }),
            (e.prototype.getRecord = function (e, t) {
                var r = this.model();
                return r[Vl(e, r, t)];
            }),
            (e.prototype.parseKey = function (e) {
                var t,
                    r,
                    n,
                    o = e.split(".", 2);
                if (1 === o.length) (t = this.modelSchema.firstRecord().name), (r = 0), (n = o[0]);
                else {
                    var i = this.parseKeyPart(o[0].trim());
                    (t = i[0]), (r = i[1]), (n = o[1]);
                }
                var s = this.parseKeyPart(n);
                return { recordName: t, recordIndex: r, fieldName: s[0], fieldIndex: s[1] };
            }),
            (e.prototype.parseKeyPart = function (e) {
                if (0 === e.length) throw new Error("No name specified");
                var t = e.indexOf("(");
                if (-1 === t) return [e, 0];
                if (0 === t) throw new Error("No name specified");
                var r = e.indexOf(")");
                if (-1 === r || r < t) throw new Error("'(' found without closing ')");
                if (r < e.length - 1) throw new Error("Characters found after closing ')");
                return [e.substring(0, t), parseInt(e.substring(t + 1, r), 10)];
            }),
            e
        );
    })();
    kl.AbstractRecordModel = Gl;
    var Hl,
        Yl = {};
    Object.defineProperty(Yl, "__esModule", { value: !0 }),
        (Yl.normalise = Yl.FieldImpl = Yl.Type = void 0),
        (function (e) {
            (e.DECIMAL = "DECIMAL"), (e.INTEGER = "INTEGER"), (e.STRING = "STRING");
        })((Hl = Yl.Type || (Yl.Type = {})));
    var Wl = (function () {
        function e(e, t, r, n, o, i) {
            (this.name = e), (this.type = t), (this.min = r), (this.max = n), (this.scale = i), (this.index = o), (this.isVariable = r !== n);
        }
        return (
            (e.prototype.getAbsoluteIndex = function (e) {
                if (e < 0 || (-1 !== this.max && e > this.max - 1)) throw new Error("Invalid index '" + e + "' for field '" + this.name + "'");
                return this.index + e;
            }),
            (e.prototype.toString = function () {
                var e = "Name=" + this.name + ", Type=" + this.type;
                return (
                    this.min === this.max ? (e += ", Occurs=" + this.min) : ((e += ", Min=" + this.min + ", Max="), -1 === this.max ? (e += "Unlimited") : (e += this.max)),
                    this.type === Hl.DECIMAL && (e += ", Scale=" + this.scale),
                    "Field [" + e + "]"
                );
            }),
            (e.prototype.modelValue = function () {
                switch (this.type) {
                    case Hl.DECIMAL:
                        return (function (e) {
                            switch (e.scale) {
                                case void 0:
                                case 1:
                                    return "0.0";
                                case 2:
                                    return "0.00";
                                case 3:
                                    return "0.000";
                                default:
                                    for (var t = "0.", r = 0; r < e.scale; ++r) t += "0";
                                    return t;
                            }
                        })(this);
                    case Hl.INTEGER:
                        return "0";
                    case Hl.STRING:
                    default:
                        return "";
                }
            }),
            (e.prototype.toJSON = function () {
                var e = { name: this.name, type: this.type, min: this.min, max: this.max };
                return this.type === Hl.DECIMAL && (e.scale = this.scale), e;
            }),
            e
        );
    })();
    (Yl.FieldImpl = Wl),
        (Yl.normalise = function (e, t) {
            switch (e.type) {
                case Hl.DECIMAL:
                    var r = parseFloat(t);
                    if (Number.isNaN(r)) throw new Error("Invalid decimal value: '" + t + "'");
                    return r.toFixed(e.scale);
                case Hl.INTEGER:
                    var n = parseInt(t, 10),
                        o = n.toString();
                    if (Number.isNaN(n) || o.indexOf(".") > -1) throw new Error("Invalid integer value: '" + t + "'");
                    return o;
                case Hl.STRING:
                    return t;
                default:
                    return "";
            }
        });
    var Ql = {},
        zl =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })(),
        Kl =
            (this && this.__values) ||
            function (e) {
                var t = "function" == typeof Symbol && Symbol.iterator,
                    r = t && e[t],
                    n = 0;
                if (r) return r.call(e);
                if (e && "number" == typeof e.length)
                    return {
                        next: function () {
                            return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
                        },
                    };
                throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
            };
    function Jl(e, t, r) {
        var n,
            o,
            i = r.length,
            s = e.lastField(),
            a = s.max,
            u = s.index;
        if (-1 !== a && i > u + a) throw new Error("Too many occurrences of field '" + e.name + "(" + t + ")." + s.name + "'");
        if (i < u + s.min) throw new Error("Too few field occurrences in record '" + e.name + "(" + t + ")'");
        try {
            for (var c = Kl(e.fields), l = c.next(); !l.done; l = c.next()) {
                for (var p = l.value, f = p.index, h = p.min, d = f; d < f + h; ++d) $l(e, t, p, d - f, r[d]);
                if (p.isVariable)
                    for (d = f + h; d < i; d++) {
                        $l(e, t, p, d - f, r[d]);
                    }
            }
        } catch (e) {
            n = { error: e };
        } finally {
            try {
                l && !l.done && (o = c.return) && o.call(c);
            } finally {
                if (n) throw n.error;
            }
        }
    }
    function $l(e, t, r, n, o) {
        try {
            Yl.normalise(r, $c.requireNonNull(o, "FieldData"));
        } catch (o) {
            throw new Error("Invalid value for field '" + e.name + "(" + t + ")." + r.name + "(" + n + ")");
        }
    }
    Object.defineProperty(Ql, "__esModule", { value: !0 }), (Ql.RecordModelImpl = void 0);
    var Xl = (function (e) {
        function t(t, r, n, o) {
            var i = e.call(this, t, r) || this;
            return (
                o &&
                    (function (e, t) {
                        var r,
                            n,
                            o = t.length,
                            i = e.lastRecord(),
                            s = i.index,
                            a = i.max;
                        if (-1 !== a && o > s + a) throw new Error("Too many occurrences of record '" + i.name + "'");
                        if (o < s + i.min) throw new Error("Too few record occurrences");
                        var u = e.records();
                        try {
                            for (var c = Kl(u), l = c.next(); !l.done; l = c.next()) {
                                for (var p = l.value, f = p.index, h = p.min, d = f; d < f + h; ++d) Jl(p, d - f, t[d]);
                                if (p.isVariable)
                                    for (d = f + h; d < o; ++d) {
                                        Jl(p, d - f, t[d]);
                                    }
                            }
                        } catch (e) {
                            r = { error: e };
                        } finally {
                            try {
                                l && !l.done && (n = c.return) && n.call(c);
                            } finally {
                                if (r) throw r.error;
                            }
                        }
                    })(r, n),
                (i.recordData = n),
                i
            );
        }
        return (
            zl(t, e),
            (t.prototype.model = function () {
                return Array.from(this.recordData);
            }),
            t
        );
    })(kl.AbstractRecordModel);
    Ql.RecordModelImpl = Xl;
    var Zl = {};
    function ep(e, t, r, n, o) {
        var i = !1;
        r < n ? (i = tp(e, t, r, n, o)) : r > 0 && e[r - 1] === Bl.FIELD_DELIMITER && o.push(""), i || t.push(Array.from(o)), (o.length = 0);
    }
    function tp(e, t, r, n, o) {
        var i = n - r;
        return 0 === o.length && 1 === i && e[r] === Bl.FIELD_MU ? (t.push([""]), !0) : (o.push(e.toString("utf8", r, n)), !1);
    }
    Object.defineProperty(Zl, "__esModule", { value: !0 }),
        (Zl.parse = void 0),
        (Zl.parse = function (e, t, r) {
            if ((void 0 === t && (t = 0), void 0 === r && (r = e.length), 0 === r)) return [];
            if (1 === r && e[t] === Bl.RECORD_MU) return [[]];
            for (var n = [], o = [], i = t, s = t; s < r; ++s) e[s] === Bl.RECORD_DELIMITER ? (ep(e, n, i, s, o), (i = s + 1)) : e[s] === Bl.FIELD_DELIMITER && (tp(e, n, i, s, o), (i = s + 1));
            return (
                (function (e, t, r, n, o) {
                    if (n > r) tp(e, t, r, n, o);
                    else {
                        var i = e[n - 1];
                        i === Bl.RECORD_DELIMITER ? t.push([]) : i === Bl.FIELD_DELIMITER && o.push("");
                    }
                    o.length && t.push(Array.from(o));
                })(e, n, i, r, o),
                n
            );
        });
    var rp = {};
    (function (e) {
        (function () {
            "use strict";
            var t =
                (this && this.__extends) ||
                (function () {
                    var e = function (t, r) {
                        return (e =
                            Object.setPrototypeOf ||
                            ({ __proto__: [] } instanceof Array &&
                                function (e, t) {
                                    e.__proto__ = t;
                                }) ||
                            function (e, t) {
                                for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                            })(t, r);
                    };
                    return function (t, r) {
                        if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                        function n() {
                            this.constructor = t;
                        }
                        e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                    };
                })();
            Object.defineProperty(rp, "__esModule", { value: !0 }), (rp.RecordV2DeltaImpl = rp.Type = rp.NO_CHANGE = void 0);
            var r,
                n = (function (r) {
                    function n() {
                        return r.call(this, e.from([])) || this;
                    }
                    return (
                        t(n, r),
                        (n.prototype.changes = function () {
                            return [];
                        }),
                        n
                    );
                })(jc.BytesImpl);
            (rp.NO_CHANGE = new n()),
                (function (e) {
                    (e.FIELD_CHANGED = "FIELD_CHANGED"), (e.FIELDS_ADDED = "FIELDS_ADDED"), (e.FIELDS_REMOVED = "FIELDS_REMOVED"), (e.RECORDS_ADDED = "RECORDS_ADDED"), (e.RECORDS_REMOVED = "RECORDS_REMOVED");
                })((r = rp.Type || (rp.Type = {})));
            var o = (function () {
                    function e(e, t, n, o, i) {
                        (this.type = e), (this.recordName = t), (this.recordIndex = n), (this.fieldName = o), (this.fieldIndex = i);
                        var s = t + "(" + n + ")";
                        e !== r.RECORDS_REMOVED && e !== r.RECORDS_ADDED && (s += "." + o + "(" + i + ")"), (this.key = s);
                    }
                    return (
                        (e.prototype.toString = function () {
                            return this.type + " " + this.key;
                        }),
                        e
                    );
                })(),
                i = (function (e) {
                    function n(t, r, n, o, i) {
                        void 0 === r && (r = 0), void 0 === n && (n = t.length);
                        var s = e.call(this, t, r, n) || this;
                        return (s.recordChanges = o), (s.fieldChanges = i), s;
                    }
                    return (
                        t(n, e),
                        (n.prototype.changes = function (e) {
                            var t = this,
                                r = Zl.parse(this.$buffer, this.$offset, this.$length),
                                n = 0,
                                o = [];
                            return (
                                e.records().forEach(function (e) {
                                    if (r.length < n + e.min) throw new Error("Insufficient records of type " + e.name + " in delta for schema");
                                    n = e.isVariable ? t.processVariableRecordChanges(e, n, r, o) : t.processFixedRecordChanges(e, n, r, o);
                                }),
                                o
                            );
                        }),
                        (n.prototype.processFixedRecordChanges = function (e, t, r, n) {
                            for (var o = t, i = 0; i < e.min; ++i) this.processRecordChanges(o, e, i, r[o], n), o++;
                            return o;
                        }),
                        (n.prototype.processVariableRecordChanges = function (e, t, n, i) {
                            var s = n.length,
                                a = e.max;
                            if (-1 !== a && s > t + a) throw new Error("Too many records of type " + e.name + " in delta for schema");
                            for (var u = t, c = this.recordChanges && this.recordChanges[0] ? this.recordChanges[1] : s, l = 0; u < c; u++, l++) this.processRecordChanges(u, e, l, n[u], i);
                            return this.recordChanges && i.push(new o(this.recordChanges[0] ? r.RECORDS_ADDED : r.RECORDS_REMOVED, e.name, this.recordChanges[1] - t, "", 0)), u;
                        }),
                        (n.prototype.processRecordChanges = function (e, t, r, n, o) {
                            var i = this,
                                s = 0;
                            t.fields.forEach(function (a) {
                                s = a.isVariable ? i.processVariableFieldChanges(t, r, e, a, s, n, o) : i.processFixedFieldChanges(t, r, a, s, n, o);
                            });
                        }),
                        (n.prototype.processFixedFieldChanges = function (e, t, n, i, s, a) {
                            for (var u = s.length, c = i, l = 0; l < n.min; ++l) {
                                if (c >= u) throw new Error("Insufficient fields of type " + n.name + " in delta for schema record " + e.name);
                                "" !== s[c] && a.push(new o(r.FIELD_CHANGED, e.name, t, n.name, l)), c++;
                            }
                            return c;
                        }),
                        (n.prototype.processVariableFieldChanges = function (e, t, n, i, s, a, u) {
                            var c = a.length,
                                l = s;
                            if (c < l + i.min) throw new Error("Insufficient fields of type " + i.name + " in delta for schema record " + e.name);
                            for (var p = this.fieldChanges[n], f = p ? p[1] : c, h = 0; l < f; l++, h++) "" !== a[l] && u.push(new o(r.FIELD_CHANGED, e.name, t, i.name, h));
                            return p && u.push(new o(p[0] ? r.FIELDS_ADDED : r.FIELDS_REMOVED, e.name, t, i.name, p[1])), l;
                        }),
                        (n.prototype.toString = function () {
                            return Bl.bytesToString(this.$buffer, this.$offset, this.$length);
                        }),
                        n
                    );
                })(jc.BytesImpl);
            rp.RecordV2DeltaImpl = i;
        }.call(this));
    }.call(this, u({}).Buffer));
    var np = {};
    (function (e) {
        (function () {
            "use strict";
            var t =
                (this && this.__extends) ||
                (function () {
                    var e = function (t, r) {
                        return (e =
                            Object.setPrototypeOf ||
                            ({ __proto__: [] } instanceof Array &&
                                function (e, t) {
                                    e.__proto__ = t;
                                }) ||
                            function (e, t) {
                                for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                            })(t, r);
                    };
                    return function (t, r) {
                        if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                        function n() {
                            this.constructor = t;
                        }
                        e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                    };
                })();
            Object.defineProperty(np, "__esModule", { value: !0 }), (np.RecordV2Impl = void 0);
            var r = (function () {
                function e() {
                    (this.delta = new wu.BufferOutputStream()), (this.changed = !1), (this.recordChanges = null), (this.fieldChanges = {});
                }
                return (
                    (e.prototype.write = function (e, t, r) {
                        void 0 !== t && void 0 !== r ? this.delta.writeMany(e, t, r) : this.delta.write(e);
                    }),
                    (e.prototype.getDelta = function () {
                        return this.delta.getBuffer();
                    }),
                    (e.prototype.size = function () {
                        return this.delta.count;
                    }),
                    (e.prototype.hasChanges = function () {
                        return this.changed;
                    }),
                    (e.prototype.setChanged = function () {
                        this.changed = !0;
                    }),
                    (e.prototype.setRecordsChanged = function (e, t) {
                        (this.recordChanges = [e, t]), (this.changed = !0);
                    }),
                    (e.prototype.getRecordChanges = function () {
                        return this.recordChanges;
                    }),
                    (e.prototype.setFieldsAdded = function (e, t) {
                        (this.fieldChanges[e] = [!0, t]), (this.changed = !0);
                    }),
                    (e.prototype.setFieldsRemoved = function (e, t) {
                        (this.fieldChanges[e] = [!1, t]), (this.changed = !0);
                    }),
                    (e.prototype.getFieldChanges = function () {
                        return this.fieldChanges;
                    }),
                    e
                );
            })();
            function n(e, t, r, n, i, s, a, u) {
                if (0 !== a) {
                    if (!Bl.recordIsSingleEmptyField(i, s, a))
                        return 0 === n
                            ? (u.write(i, s, a), void u.setFieldsAdded(e, 0))
                            : void (Bl.recordIsSingleEmptyField(t, r, n)
                                  ? (function (e, t, r, n, o) {
                                        var i = t[r];
                                        i === Bl.EMPTY_FIELD ? o.write(t, r + 1, n - 1) : (o.write(t, r, n), i !== Bl.FIELD_DELIMITER && o.setChanged());
                                        Bl.fieldCount(t, r, n) > 1 && o.setFieldsAdded(e, 1);
                                    })(e, i, s, a, u)
                                  : (function (e, t, r, n, i, s, a, u) {
                                        for (var c = Bl.fieldCount(t, r, n), l = Bl.fieldCount(i, s, a), p = Math.min(c, l), f = r, h = r, d = s, y = s, v = u.size(), S = 0; S < p; ++S)
                                            (h = Bl.findDelimiter(t, h, r + n, Bl.FIELD_DELIMITER)),
                                                (y = Bl.findDelimiter(i, y, s + a, Bl.FIELD_DELIMITER)),
                                                S > 0 && u.write(Bl.FIELD_DELIMITER),
                                                o(t, f, h - f, i, d, y - d, u),
                                                (f = ++h),
                                                (d = ++y);
                                        l !== c && (l > c ? (u.write(i, d - 1, s + a - d + 1), u.setFieldsAdded(e, p)) : u.setFieldsRemoved(e, p));
                                        1 === l && v === u.size() && u.write(Bl.FIELD_MU);
                                    })(e, t, r, n, i, s, a, u));
                    !(function (e, t, r, n, o) {
                        if (Bl.recordIsSingleEmptyField(t, r, n)) o.write(Bl.FIELD_MU);
                        else {
                            Bl.fieldCount(t, r, n) > 1 && o.setFieldsRemoved(e, 1), o.write(Bl.EMPTY_FIELD), o.setChanged();
                        }
                    })(e, t, r, n, u);
                } else 0 !== n && u.setFieldsRemoved(e, 0);
            }
            function o(e, t, r, n, o, i, s) {
                (function (e, t, r, n, o, i) {
                    if (r === i) {
                        if (
                            0 === r ||
                            (function (e, t, r, n, o) {
                                for (var i = 0; i < o; ++i) if (e[t + i] !== r[n + i]) return !1;
                                return !0;
                            })(e, t, n, o, r)
                        )
                            return !0;
                    } else {
                        if (1 === r && e[t] === Bl.EMPTY_FIELD && 0 === i) return !0;
                        if (1 === i && n[o] === Bl.EMPTY_FIELD && 0 === r) return !0;
                    }
                    return !1;
                })(e, t, r, n, o, i) || (0 === i ? s.write(Bl.EMPTY_FIELD) : s.write(n, o, i), s.setChanged());
            }
            function i(t) {
                if (t instanceof s) return t;
                if (e.isBuffer(t)) return new s(t);
                throw new Error("Unable to read RecordV2 value from: " + t);
            }
            var s = (function (o) {
                function s(e, t, r) {
                    return void 0 === t && (t = 0), void 0 === r && (r = e.length), o.call(this, e, t, r) || this;
                }
                return (
                    t(s, o),
                    (s.toString = function () {
                        return "RecordV2Impl";
                    }),
                    (s.from = function (e) {
                        return i(e);
                    }),
                    (s.prototype.apply = function (e) {
                        return a.apply(this, e);
                    }),
                    (s.prototype.toString = function () {
                        return JSON.stringify(this.asRecords());
                    }),
                    (s.prototype.asRecords = function () {
                        return Zl.parse(this.$buffer, this.$offset, this.$length);
                    }),
                    (s.prototype.asFields = function () {
                        return this.asRecords().reduce(function (e, t) {
                            return e.concat(t);
                        }, []);
                    }),
                    (s.prototype.asModel = function (e) {
                        return new Ql.RecordModelImpl(s, e, this.asRecords(), !1);
                    }),
                    (s.prototype.asValidatedModel = function (e) {
                        return new Ql.RecordModelImpl(s, e, this.asRecords(), !0);
                    }),
                    (s.prototype.binaryDiff = function (e) {
                        return a.diff(e, this);
                    }),
                    (s.prototype.diff = function (t) {
                        var o = t.$buffer,
                            i = t.$offset,
                            s = t.$length,
                            a = this.$buffer,
                            u = this.$offset,
                            c = this.$length;
                        if (0 === c) return 0 === s ? rp.NO_CHANGE : new rp.RecordV2DeltaImpl(e.from([]), 0, 0, [!1, 0], {});
                        if (Bl.isSingleEmptyRecord(a, u, c))
                            return Bl.isSingleEmptyRecord(o, i, s)
                                ? rp.NO_CHANGE
                                : (function (t) {
                                      switch (t) {
                                          case 0:
                                              return new rp.RecordV2DeltaImpl(e.from([Bl.RECORD_MU]), 0, 1, [!0, 0], {});
                                          case 1:
                                              return new rp.RecordV2DeltaImpl(e.from([Bl.RECORD_MU]), 0, 1, null, { 0: [!1, 0] });
                                          default:
                                              return new rp.RecordV2DeltaImpl(e.from([Bl.RECORD_MU]), 0, 1, [!1, 1], { 0: [!1, 0] });
                                      }
                                  })(Bl.recordCount(o, i, s));
                        if (0 === s)
                            return (function (e, t, r) {
                                return new rp.RecordV2DeltaImpl(e, t, r, [!0, 0], {});
                            })(a, u, c);
                        if (Bl.isSingleEmptyRecord(o, i, s))
                            return (function (e, t, r) {
                                return 1 === Bl.recordCount(e, t, r) ? new rp.RecordV2DeltaImpl(e, t, r, null, { 0: [!0, 0] }) : new rp.RecordV2DeltaImpl(e, t, r, [!0, 1], e[0] === Bl.RECORD_DELIMITER ? {} : { 0: [!0, 0] });
                            })(a, u, c);
                        var l = (function (e, t, o, i, s, a) {
                            for (var u = new r(), c = Bl.recordCount(e, t, o), l = Bl.recordCount(i, s, a), p = Math.min(c, l), f = t, h = t, d = s, y = s, v = 0; v < p; ++v)
                                (h = Bl.findDelimiter(e, h, t + o, Bl.RECORD_DELIMITER)),
                                    (y = Bl.findDelimiter(i, y, s + a, Bl.RECORD_DELIMITER)),
                                    v > 0 && u.write(Bl.RECORD_DELIMITER),
                                    n(v, e, f, h - f, i, d, y - d, u),
                                    (f = ++h),
                                    (d = ++y);
                            return l !== c && (l > c && u.write(i, d - 1, s + a - d + 1), u.setRecordsChanged(l > c, p)), u;
                        })(o, i, s, a, u, c);
                        if (l.hasChanges()) {
                            var p = l.getDelta();
                            return new rp.RecordV2DeltaImpl(p, 0, p.length, l.getRecordChanges(), l.getFieldChanges());
                        }
                        return rp.NO_CHANGE;
                    }),
                    s
                );
            })(jc.BytesImpl);
            np.RecordV2Impl = s;
            var a = new Mc.BinaryDeltaTypeImpl(s, i, qc.identity);
        }.call(this));
    }.call(this, u({}).Buffer));
    var op = {};
    Object.defineProperty(op, "__esModule", { value: !0 }), (op.RecordV2BuilderImpl = void 0);
    var ip = (function () {
        function e() {
            this.records = [];
        }
        return (
            (e.prototype.addFields = function (e) {
                for (var t = [], r = 1; r < arguments.length; r++) t[r - 1] = arguments[r];
                if ((arguments.length > 1 ? t.unshift(e) : (t = e), t)) {
                    var n = this.records.length ? this.records[this.records.length - 1] : [];
                    this.records[Math.max(this.records.length - 1, 0)] = n.concat(t);
                }
                return this;
            }),
            (e.prototype.addRecord = function (e) {
                for (var t = [], r = 1; r < arguments.length; r++) t[r - 1] = arguments[r];
                return arguments.length > 1 ? t.unshift(e) : (t = e), t ? this.records.push([].concat(t)) : this.records.push([]), this;
            }),
            (e.prototype.clear = function () {
                return (this.records = []), this;
            }),
            (e.prototype.build = function () {
                return new np.RecordV2Impl(Ul.toBuffer(this.records));
            }),
            e
        );
    })();
    op.RecordV2BuilderImpl = ip;
    var sp = {};
    Object.defineProperty(sp, "__esModule", { value: !0 }), (sp.toJSON = sp.RecordImpl = void 0);
    var ap = (function () {
        function e(e, t, r, n, o) {
            var i = this;
            (this.name = e),
                (this.min = t),
                (this.max = r),
                (this.index = n),
                (this.isVariable = t !== r),
                (this.fields = o),
                (this.fieldsMap = {}),
                o.forEach(function (e) {
                    i.fieldsMap[e.name] = e;
                });
        }
        return (
            (e.prototype.getFields = function () {
                return [].concat(this.fields);
            }),
            (e.prototype.getField = function (e) {
                var t = this.fieldsMap[e];
                if (t) return t;
                throw new Error("Record '" + this.name + "' has no field named '" + e + "'");
            }),
            (e.prototype.lastField = function () {
                return this.fields[this.fields.length - 1];
            }),
            (e.prototype.createModel = function () {
                var e = [];
                return (
                    this.fields.forEach(function (t) {
                        for (var r = 0; r < t.min; ++r) e.push(t.modelValue());
                    }),
                    e
                );
            }),
            (e.prototype.getAbsoluteIndex = function (e) {
                if (e < 0 || (-1 !== this.max && e > this.max - 1)) throw new Error("Invalid index '" + e + "' for record '" + this.name + "'");
                return this.index + e;
            }),
            (e.prototype.toString = function () {
                var e = "Name=" + this.name;
                return this.min === this.max ? (e += ", Occurs=" + this.min) : ((e += ", Min=" + this.min + ", Max="), -1 === this.max ? (e += "Unlimited") : (e += this.max)), "Record [" + (e += ", Fields=" + this.fields) + "]";
            }),
            e
        );
    })();
    (sp.RecordImpl = ap),
        (sp.toJSON = function (e) {
            return {
                fields: e.fields.map(function (e) {
                    return e.toJSON();
                }),
                name: e.name,
                min: e.min,
                max: e.max,
            };
        });
    var up = {},
        cp =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(up, "__esModule", { value: !0 }), (up.MutableRecordModelImpl = void 0);
    var lp = (function (e) {
        function t(t, r) {
            var n = e.call(this, t, r) || this;
            return (n.recordData = r.createModel()), n;
        }
        return (
            cp(t, e),
            (t.prototype.model = function () {
                return this.recordData;
            }),
            (t.prototype.set = function (e, t, r, n, o) {
                var i, s;
                switch ((void 0 === n && (n = 0), arguments.length)) {
                    case 2:
                        o = t;
                        var a = this.parseKey(e);
                        (e = a.recordName), (i = a.recordIndex), (s = a.fieldName), (n = a.fieldIndex);
                        break;
                    case 3:
                        (o = r), (s = t), (i = 0);
                        break;
                    case 5:
                        (i = t), (s = r);
                        break;
                    default:
                        (i = 0), (s = "");
                }
                var u = this.schema().getRecord(e),
                    c = this.getRecord(u, i),
                    l = u.getField(s);
                return (c[kl.resolveFieldIndex(l, c, n)] = Yl.normalise(l, o)), this;
            }),
            (t.prototype.add = function (e, t) {
                for (var r, n, o, i = [], s = 2; s < arguments.length; s++) i[s - 2] = arguments[s];
                if (arguments.length > 2 && "number" == typeof t) (o = t), (i = i.slice(2)), (r = this.schema().getRecord(e)), (n = this.getRecord(r, o));
                else {
                    if (((r = this.schema().lastRecord()), !(this.recordData.length > r.index))) throw new Error("Variable record '" + r.name + "' has no occurrences to add a field to");
                    n = this.recordData[this.recordData.length - 1];
                }
                return this.addValuesToRecord(r, n, i), this;
            }),
            (t.prototype.addRecord = function () {
                var e = this.schema().lastRecord();
                if (!e.isVariable) throw new Error("Record '" + e.name + "' is not variable");
                var t = e.max;
                if (-1 !== t && this.recordData.length - e.index >= t) throw new Error("Record '" + e.name + "' already has maximum number of occurrences");
                return this.recordData.push(e.createModel()), this;
            }),
            (t.prototype.removeRecord = function (e) {
                var t = this.schema().lastRecord();
                if (!t.isVariable) throw new Error("Record '" + t.name + "' is not variable");
                var r = kl.resolveRecordIndex(t, this.recordData, e);
                if (this.recordData.length - t.index - 1 < t.min) throw new Error("Removing an occurrence of record '" + t.name + "' would violate the minimum number of occurrences");
                return this.recordData.splice(r, 1), this;
            }),
            (t.prototype.removeField = function (e, t, r) {
                var n = this.schema().getRecord(e),
                    o = this.getRecord(n, t),
                    i = n.lastField();
                if (!i.isVariable) throw new Error("Field '" + i.name + "' is not a variable field");
                var s = kl.resolveFieldIndex(i, o, r);
                if (o.length - i.index - 1 < i.min) throw new Error("Removing an occurrence of field '" + i.name + "' would violate the minimum number of occurrences");
                return o.splice(s, 1), this;
            }),
            (t.prototype.addValuesToRecord = function (e, t, r) {
                var n = e.lastField();
                if (!n.isVariable) throw new Error("Final field of record '" + e.name + "' is not variable");
                var o = n.max;
                if (-1 !== o && t.length - n.index + r.length > o) throw new Error("Adding values would exceed maximum number of field occurrences");
                r.forEach(function (e) {
                    t.push(Yl.normalise(n, e));
                });
            }),
            t
        );
    })(kl.AbstractRecordModel);
    up.MutableRecordModelImpl = lp;
    var pp = {};
    Object.defineProperty(pp, "__esModule", { value: !0 }), (pp.SchemaImpl = void 0);
    var fp = (function () {
        function e(e, t) {
            var r = this;
            (this.recordsMap = {}),
                (this.recordV2Constructor = e),
                (this.recordsArray = t),
                t.forEach(function (e) {
                    r.recordsMap[e.name] = e;
                });
        }
        return (
            (e.prototype.getRecord = function (e) {
                var t = this.recordsMap[e];
                if (t) return t;
                throw new Error("Record '" + e + "' is not known");
            }),
            (e.prototype.getRecords = function () {
                return [].concat(this.recordsArray);
            }),
            (e.prototype.records = function () {
                return this.recordsArray;
            }),
            (e.prototype.firstRecord = function () {
                return this.recordsArray[0];
            }),
            (e.prototype.lastRecord = function () {
                return this.recordsArray[this.recordsArray.length - 1];
            }),
            (e.prototype.createMutableModel = function () {
                return new up.MutableRecordModelImpl(this.recordV2Constructor, this);
            }),
            (e.prototype.createModel = function () {
                var e = [];
                return (
                    this.recordsArray.forEach(function (t) {
                        var r = t.createModel();
                        if (t.min > 0) for (var n = 0; n < t.min; ++n) e.push([].concat(r));
                    }),
                    e
                );
            }),
            (e.prototype.asJSON = function () {
                return JSON.stringify({ records: this.recordsArray.map(sp.toJSON) });
            }),
            (e.prototype.toString = function () {
                return "Schema [Records=" + this.recordsArray + "]";
            }),
            e
        );
    })();
    pp.SchemaImpl = fp;
    var hp = {},
        dp =
            (this && this.__values) ||
            function (e) {
                var t = "function" == typeof Symbol && Symbol.iterator,
                    r = t && e[t],
                    n = 0;
                if (r) return r.call(e);
                if (e && "number" == typeof e.length)
                    return {
                        next: function () {
                            return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
                        },
                    };
                throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
            };
    function yp(e, t, r) {
        if (t < 0) throw new Error("'" + e + "' has invalid 'min' value '" + t + "'");
        if (-1 !== r && (r < 1 || r < t)) throw new Error("'" + e + "' has invalid 'max' value '" + r + "'");
    }
    Object.defineProperty(hp, "__esModule", { value: !0 }), (hp.SchemaBuilderImpl = void 0);
    var vp = (function () {
        function e(e) {
            (this.records = []), (this.recordV2Constructor = e);
        }
        return (
            (e.prototype.record = function (e, t, r) {
                return (
                    void 0 === t && (t = 1),
                    void 0 === r && (r = t),
                    yp(e, t, r),
                    this.checkRecord(e),
                    void 0 !== this.currentFields && this.addRecord(),
                    (this.currentName = e),
                    (this.currentMin = t),
                    (this.currentMax = r),
                    (this.currentFields = []),
                    this
                );
            }),
            (e.prototype.string = function (e, t, r) {
                return void 0 === t && (t = 1), void 0 === r && (r = t), yp(e, t, r), this.checkField(e), this.currentFields.push(new Yl.FieldImpl(e, Yl.Type.STRING, t, r, this.fieldIndex())), this;
            }),
            (e.prototype.integer = function (e, t, r) {
                return void 0 === t && (t = 1), void 0 === r && (r = t), yp(e, t, r), this.checkField(e), this.currentFields.push(new Yl.FieldImpl(e, Yl.Type.INTEGER, t, r, this.fieldIndex())), this;
            }),
            (e.prototype.decimal = function (e, t, r, n) {
                return (
                    void 0 === r && (r = 1),
                    void 0 === n && (n = r),
                    yp(e, r, n),
                    (function (e, t) {
                        if (t < 1) throw new Error("'" + e + "' has invalid 'scale' value '" + t + "'");
                    })(e, t),
                    this.checkField(e),
                    this.currentFields.push(new Yl.FieldImpl(e, Yl.Type.DECIMAL, r, n, this.fieldIndex(), t)),
                    this
                );
            }),
            (e.prototype.build = function () {
                if ((void 0 !== this.currentFields && this.addRecord(), 0 === this.records.length)) throw new Error("Schema has no records");
                return new pp.SchemaImpl(this.recordV2Constructor, this.records);
            }),
            (e.prototype.fieldIndex = function () {
                var e = this.currentFields;
                if (0 === e.length) return 0;
                var t = e[e.length - 1];
                return t.index + t.max;
            }),
            (e.prototype.addRecord = function () {
                var e,
                    t = this.currentFields;
                if (0 === t.length) throw new Error("No fields specified for record: '" + this.currentName + "'");
                if (0 === this.records.length) e = 0;
                else {
                    var r = this.records[this.records.length - 1];
                    e = r.index + r.max;
                }
                this.records.push(new sp.RecordImpl(this.currentName, this.currentMin, this.currentMax, e, t));
            }),
            (e.prototype.checkRecord = function (e) {
                var t, r;
                if (($c.requireNonNull(e, "name"), e === this.currentName)) throw new Error("Duplicate record name: '" + e + "'");
                if (this.records.length)
                    try {
                        for (var n = dp(this.records), o = n.next(); !o.done; o = n.next()) {
                            if (e === o.value.name) throw new Error("Duplicate record name: '" + e + "'");
                        }
                    } catch (e) {
                        t = { error: e };
                    } finally {
                        try {
                            o && !o.done && (r = n.return) && r.call(n);
                        } finally {
                            if (t) throw t.error;
                        }
                    }
                if (void 0 !== this.currentFields && this.currentMin !== this.currentMax) throw new Error("Record '" + e + "' not allowed after variable multiplicity record: '" + this.currentName + "'");
            }),
            (e.prototype.checkField = function (e) {
                var t, r;
                if (($c.requireNonNull(e, "name"), void 0 === this.currentFields)) throw new Error("Cannot add field '" + e + "' as there is no current record");
                if (this.currentFields.length) {
                    try {
                        for (var n = dp(this.currentFields), o = n.next(); !o.done; o = n.next()) {
                            if (e === o.value.name) throw new Error("Duplicate field name: '" + e + "'");
                        }
                    } catch (e) {
                        t = { error: e };
                    } finally {
                        try {
                            o && !o.done && (r = n.return) && r.call(n);
                        } finally {
                            if (t) throw t.error;
                        }
                    }
                    var i = this.currentFields[this.currentFields.length - 1];
                    if (i.isVariable) throw new Error("Field '" + e + "' is not allowed after variable multiplicity field '" + i.name + "'");
                }
            }),
            e
        );
    })();
    hp.SchemaBuilderImpl = vp;
    var Sp = {};
    Object.defineProperty(Sp, "__esModule", { value: !0 }), (Sp.SchemaParser = void 0);
    var _p = (function () {
        function e(e) {
            this.recordV2Constructor = e;
        }
        return (
            (e.prototype.parse = function (e) {
                var t,
                    r = new hp.SchemaBuilderImpl(this.recordV2Constructor);
                try {
                    t = JSON.parse(e);
                } catch (e) {
                    throw new Error("Invalid Schema JSON string");
                }
                if (void 0 === t.records) throw new Error("Schema has no records");
                return (
                    t.records.forEach(function (e) {
                        void 0 !== e.occurs ? r.record(e.name, e.occurs) : r.record(e.name, e.min, e.max),
                            e.fields &&
                                e.fields.forEach(function (e) {
                                    var t, n;
                                    void 0 !== e.occurs ? ((t = e.occurs), (n = e.occurs)) : ((t = e.min), (n = e.max));
                                    var o = e.type || "STRING";
                                    switch (o.toUpperCase()) {
                                        case "STRING":
                                            r.string(e.name, t, n);
                                            break;
                                        case "INTEGER":
                                            r.integer(e.name, t, n);
                                            break;
                                        case "DECIMAL":
                                            var i = e.scale || 2;
                                            r.decimal(e.name, i, t, n);
                                            break;
                                        default:
                                            throw new Error("Invalid field type value '" + o + "'");
                                    }
                                });
                    }),
                    r.build()
                );
            }),
            e
        );
    })();
    Sp.SchemaParser = _p;
    var Ep = {},
        wp =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    function mp() {}
    Object.defineProperty(Ep, "__esModule", { value: !0 }), (Ep.RecordV2DataTypeImpl = void 0);
    var Tp = (function (e) {
        function t(t) {
            void 0 === t && (t = mp);
            var r = e.call(this, "record_v2", np.RecordV2Impl, np.RecordV2Impl, np.RecordV2Impl.from, qc.identity, [], !0) || this;
            return (r.RecordV2 = np.RecordV2Impl), (r.validator = t), r;
        }
        return (
            wp(t, e),
            (t.prototype.from = function (e) {
                return np.RecordV2Impl.from(e);
            }),
            (t.prototype.validate = function (e) {
                this.validator($c.requireNonNull(e, "RecordV2 instance"));
            }),
            (t.prototype.parseSchema = function (e) {
                return new Sp.SchemaParser(np.RecordV2Impl).parse(e);
            }),
            (t.prototype.schemaBuilder = function () {
                return new hp.SchemaBuilderImpl(np.RecordV2Impl);
            }),
            (t.prototype.valueBuilder = function () {
                return new op.RecordV2BuilderImpl();
            }),
            (t.prototype.withSchema = function (e) {
                return new t(function (t) {
                    return t.asValidatedModel(e);
                });
            }),
            t
        );
    })(xc.AbstractDataType);
    Ep.RecordV2DataTypeImpl = Tp;
    var gp = {};
    Object.defineProperty(gp, "__esModule", { value: !0 }), (gp.EventImpl = void 0);
    var Op = (function () {
        function e(e, t, r) {
            (this.metadata = e),
                (this.originalEvent = t),
                (this.value = r),
                (this.sequence = e.sequence),
                (this.timestamp = e.timestamp),
                (this.author = e.author),
                (this.isEditEvent = !e.equals(t)),
                (this.isOriginalEvent = !this.isEditEvent);
        }
        return (
            (e.create = function (t, r, n) {
                return new e(t, r, n);
            }),
            (e.prototype.withValue = function (t) {
                return new e(this.metadata, this.originalEvent, t);
            }),
            (e.prototype.equals = function (t) {
                return !!(t && t instanceof e) && this.metadata.equals(t.metadata) && this.originalEvent.equals(t.originalEvent) && this.value === t.value;
            }),
            (e.prototype.toString = function () {
                return (this.isEditEvent ? "Edit of [" + this.originalEvent + "]" : "") + "[" + this.metadata + "] " + this.value;
            }),
            e
        );
    })();
    gp.EventImpl = Op;
    var Ip = {};
    Object.defineProperty(Ip, "__esModule", { value: !0 }), (Ip.EventMetadataImpl = void 0);
    var Rp = (function () {
        function e(e, t, r) {
            (this.sequence = e), (this.timestamp = t), (this.author = r);
        }
        return (
            (e.prototype.equals = function (t) {
                return !!(t && t instanceof e) && this.sequence === t.sequence && this.timestamp === t.timestamp && this.author === t.author;
            }),
            e
        );
    })();
    Ip.EventMetadataImpl = Rp;
    var bp = {},
        Cp =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(bp, "__esModule", { value: !0 }), (bp.EventMetadataImplSerialiser = void 0);
    var Pp = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            Cp(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readInt64(e),
                    r = tu.readInt64(e),
                    n = tu.readString(e);
                return new Ip.EventMetadataImpl(t.toNumber(), r.toNumber(), n);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeInt64(e, t.sequence), tu.writeInt64(e, t.timestamp), tu.writeString(e, t.author);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    bp.EventMetadataImplSerialiser = new Pp();
    var Np = {};
    Object.defineProperty(Np, "__esModule", { value: !0 }),
        (Np.DescendantQualifier = Np.canonicalise = Np.split = Np.PATH_SEPARATOR = void 0),
        (Np.PATH_SEPARATOR = "/"),
        (Np.split = function (e) {
            return e.split(Np.PATH_SEPARATOR);
        }),
        (Np.canonicalise = function (e) {
            if (!e) return "";
            var t = e.length,
                r = t > 0 && e.charAt(0) === Np.PATH_SEPARATOR ? 1 : 0,
                n = t > 1 && e.charAt(t - 1) === Np.PATH_SEPARATOR ? 1 : 0;
            return e.substring(r, t - n);
        });
    var Ap = function (e) {
        this.includesDescendants = e;
    };
    Np.DescendantQualifier = Object.freeze({ MATCH: new Ap(!1), DESCENDANTS_OF_MATCH: new Ap(!0), MATCH_AND_DESCENDANTS: new Ap(!0) });
    var Mp = {};
    Object.defineProperty(Mp, "__esModule", { value: !0 }), (Mp.AbstractTopicSelector = void 0);
    var jp = (function () {
        function e(e, t, r) {
            (this.type = e), (this.prefix = t), (this.expression = r);
        }
        return (
            (e.prototype.selects = function (e) {
                var t = Np.canonicalise(e);
                return 0 === t.indexOf(this.prefix) && this.doSelects(t);
            }),
            (e.prototype.toString = function () {
                return this.expression;
            }),
            e
        );
    })();
    Mp.AbstractTopicSelector = jp;
    var Lp = {};
    Object.defineProperty(Lp, "__esModule", { value: !0 }),
        (Lp.regex = void 0),
        (Lp.regex = function (e, t) {
            if ((void 0 === t && (t = ""), "" === e)) throw new Error("Empty regular expression [" + t + "]");
            try {
                var r = new RegExp(e);
                return function (e) {
                    var t = r.exec(e);
                    return t && t[0] === e;
                };
            } catch (e) {
                throw new Error("Bad regular expression [" + e.message + ", " + t + "]");
            }
        });
    var Dp = {},
        xp =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Dp, "__esModule", { value: !0 }), (Dp.FullPathSelector = void 0);
    var Bp = (function (e) {
        function t(t) {
            var r = e.call(this, t.type, t.prefix, t.expression) || this;
            if (((r.pattern = void 0), (r.qualifier = t.qualifier), !t.base)) throw new Error("Invalid full-path selector");
            return (r.base = t.base), r;
        }
        return (
            xp(t, e),
            (t.prototype.doSelects = function (e) {
                if (!this.pattern)
                    switch (this.qualifier) {
                        case Np.DescendantQualifier.DESCENDANTS_OF_MATCH:
                            this.pattern = Lp.regex(this.base + "/.+");
                            break;
                        case Np.DescendantQualifier.MATCH_AND_DESCENDANTS:
                            this.pattern = Lp.regex(this.base + "(?:$|/.+)");
                            break;
                        default:
                        case Np.DescendantQualifier.MATCH:
                            this.pattern = Lp.regex(this.base);
                    }
                return !0 === this.pattern(e);
            }),
            t
        );
    })(Mp.AbstractTopicSelector);
    Dp.FullPathSelector = Bp;
    var qp = {};
    Object.defineProperty(qp, "__esModule", { value: !0 }),
        (qp.Type = qp.Prefix = void 0),
        (function (e) {
            (e.PATH = ">"), (e.SPLIT_PATH_PATTERN = "?"), (e.FULL_PATH_PATTERN = "*"), (e.SELECTOR_SET = "#");
        })(qp.Prefix || (qp.Prefix = {})),
        (function (e) {
            (e.PATH = ">"), (e.SPLIT_PATH_PATTERN = "?"), (e.FULL_PATH_PATTERN = "*"), (e.SELECTOR_SET = "#");
        })(qp.Type || (qp.Type = {}));
    var Up = {},
        kp =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Up, "__esModule", { value: !0 }), (Up.PathSelector = void 0);
    var Vp = (function (e) {
        function t(t) {
            var r = this,
                n = t.remainder;
            if (t.type === qp.Type.PATH) {
                if ("" === t.prefix) throw new Error("Topic path must have at least one part: " + n);
                if (t.prefix.indexOf("//") > -1) throw new Error("Topic path contains empty part: " + n);
            }
            return ((r = e.call(this, t.type, t.prefix, t.expression) || this).qualifier = t.qualifier), (r.path = t.prefix), r;
        }
        return (
            kp(t, e),
            (t.prototype.doSelects = function (e) {
                var t = this.path === e,
                    r = 0 === e.indexOf(this.path + "/");
                switch (this.qualifier) {
                    case Np.DescendantQualifier.MATCH:
                        return t;
                    case Np.DescendantQualifier.DESCENDANTS_OF_MATCH:
                        return r;
                    case Np.DescendantQualifier.MATCH_AND_DESCENDANTS:
                        return t || r;
                    default:
                        return !1;
                }
            }),
            t
        );
    })(Mp.AbstractTopicSelector);
    Up.PathSelector = Vp;
    var Fp = {},
        Gp =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })(),
        Hp =
            (this && this.__values) ||
            function (e) {
                var t = "function" == typeof Symbol && Symbol.iterator,
                    r = t && e[t],
                    n = 0;
                if (r) return r.call(e);
                if (e && "number" == typeof e.length)
                    return {
                        next: function () {
                            return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
                        },
                    };
                throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
            };
    Object.defineProperty(Fp, "__esModule", { value: !0 }), (Fp.SelectorSet = Fp.DELIMITER = void 0), (Fp.DELIMITER = "////");
    var Yp = (function (e) {
        function t(r) {
            var n = this,
                o = [];
            r.forEach(function (e) {
                e instanceof t
                    ? e.selectors.forEach(function (e) {
                          o.push(e);
                      })
                    : o.push(e);
            });
            var i = o.join(Fp.DELIMITER),
                s = (function (e) {
                    var t, r;
                    if (0 === e.length) return "";
                    var n = fc.MAX_INT32,
                        o = [];
                    e.forEach(function (e, t) {
                        var r = Np.split(e.prefix);
                        (n = Math.min(n, r.length)), (o[t] = r);
                    });
                    var i = [];
                    e: for (var s = 0; s < n; ++s) {
                        var a = o[0][s];
                        try {
                            for (var u = ((t = void 0), Hp(o)), c = u.next(); !c.done; c = u.next()) {
                                if (a !== c.value[s]) break e;
                            }
                        } catch (e) {
                            t = { error: e };
                        } finally {
                            try {
                                c && !c.done && (r = u.return) && r.call(u);
                            } finally {
                                if (t) throw t.error;
                            }
                        }
                        i.push(a), i.push(Np.PATH_SEPARATOR);
                    }
                    return Np.canonicalise(i.join(""));
                })(o);
            return ((n = e.call(this, qp.Type.SELECTOR_SET, s, qp.Prefix.SELECTOR_SET + i) || this).selectors = o), n;
        }
        return (
            Gp(t, e),
            (t.prototype.selects = function (e) {
                var t, r;
                try {
                    for (var n = Hp(this.selectors), o = n.next(); !o.done; o = n.next()) {
                        if (o.value.selects(e)) return !0;
                    }
                } catch (e) {
                    t = { error: e };
                } finally {
                    try {
                        o && !o.done && (r = n.return) && r.call(n);
                    } finally {
                        if (t) throw t.error;
                    }
                }
                return !1;
            }),
            (t.prototype.doSelects = function (e) {
                return this.selects(e);
            }),
            t
        );
    })(Mp.AbstractTopicSelector);
    Fp.SelectorSet = Yp;
    var Wp = {},
        Qp =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Wp, "__esModule", { value: !0 }), (Wp.SplitPathSelector = void 0);
    var zp = (function (e) {
        function t(t) {
            var r = e.call(this, t.type, t.prefix, t.expression) || this;
            return (
                (r.patterns = void 0),
                (r.qualifier = t.qualifier),
                (r.parts = Np.split(t.base)),
                r.parts.forEach(function (e) {
                    if (!e) throw new Error("Invalid split-path selector");
                }),
                r
            );
        }
        return (
            Qp(t, e),
            (t.prototype.doSelects = function (e) {
                this.patterns ||
                    (this.patterns = this.parts.map(function (e) {
                        return Lp.regex(e);
                    }));
                var t = this.patterns.length,
                    r = e.split(Np.PATH_SEPARATOR);
                switch (this.qualifier) {
                    case Np.DescendantQualifier.MATCH:
                        if (r.length !== t) return !1;
                        break;
                    case Np.DescendantQualifier.DESCENDANTS_OF_MATCH:
                        if (r.length <= t) return !1;
                        break;
                    case Np.DescendantQualifier.MATCH_AND_DESCENDANTS:
                        if (r.length < t) return !1;
                }
                for (var n = 0; n < t; ++n) if (!this.patterns[n](r[n])) return !1;
                return !0;
            }),
            t
        );
    })(Mp.AbstractTopicSelector);
    Wp.SplitPathSelector = zp;
    var Kp = {};
    Object.defineProperty(Kp, "__esModule", { value: !0 }),
        (Kp.memoize = void 0),
        (Kp.memoize = function (e, t, r) {
            void 0 === t && (t = {}), void 0 === r && (r = qc.identity);
            var n = function () {
                for (var n = [], o = 0; o < arguments.length; o++) n[o] = arguments[o];
                var i = r(n),
                    s = t[i];
                return s || ((s = e.apply(e, n)), (t[i] = s), s);
            };
            return (n._uncached = e), n;
        });
    var Jp = {};
    function $p(e) {
        return "'" === e || '"' === e;
    }
    function Xp(e) {
        var t = [],
            r = "",
            n = 0,
            o = !1;
        e: for (; n < e.length; n++) {
            var i = e[n];
            if ($p(i)) {
                for (n++, r = "", o = !1; n < e.length; n++) {
                    var s = e[n];
                    if (o) (r += s), (o = !1);
                    else if ("\\" === s) o = !0;
                    else {
                        if (s === i) {
                            t.push(r);
                            continue e;
                        }
                        r += s;
                    }
                }
                throw new Error("Mis-quoted input");
            }
        }
        return t;
    }
    function Zp(e) {
        for (var t = 0; t < e.length; t++) {
            var r = e.charAt(t);
            if ('"' === r || "\\" === r || "'" === r) {
                for (var n = "", o = 0; o < e.length; o++) {
                    var i = e.charAt(o);
                    switch (i) {
                        case "\\":
                            n += "\\\\";
                            break;
                        case '"':
                            n += '\\"';
                            break;
                        case "'":
                            n += "\\'";
                            break;
                        default:
                            n += i;
                    }
                }
                return n;
            }
        }
        return e;
    }
    Object.defineProperty(Jp, "__esModule", { value: !0 }),
        (Jp.collectionToString = Jp.stringToSet = Jp.escape = Jp.split = void 0),
        (Jp.split = function (e, t) {
            if ("" === e) return [];
            for (var r = [], n = t.length, o = e.lastIndexOf(t); o > -1; ) r.push(e.substring(o + n, e.length)), (o = (e = e.substring(0, o)).lastIndexOf(t));
            return r.push(e), r.reverse();
        }),
        (Jp.escape = Zp),
        (Jp.stringToSet = function (e) {
            return new Set(Xp(e));
        }),
        (Jp.collectionToString = function (e) {
            var t = [];
            return (
                e.forEach(function (e) {
                    t.push('"' + Zp(e) + '"');
                }),
                t.join(",")
            );
        });
    var ef,
        tf,
        rf,
        nf = (ef = {});
    function of() {
        throw new Error("setTimeout has not been defined");
    }
    function sf() {
        throw new Error("clearTimeout has not been defined");
    }
    function af(e) {
        if (tf === setTimeout) return setTimeout(e, 0);
        if ((tf === of || !tf) && setTimeout) return (tf = setTimeout), setTimeout(e, 0);
        try {
            return tf(e, 0);
        } catch (t) {
            try {
                return tf.call(null, e, 0);
            } catch (t) {
                return tf.call(this, e, 0);
            }
        }
    }
    !(function () {
        try {
            tf = "function" == typeof setTimeout ? setTimeout : of;
        } catch (e) {
            tf = of;
        }
        try {
            rf = "function" == typeof clearTimeout ? clearTimeout : sf;
        } catch (e) {
            rf = sf;
        }
    })();
    var uf,
        cf = [],
        lf = !1,
        pf = -1;
    function ff() {
        lf && uf && ((lf = !1), uf.length ? (cf = uf.concat(cf)) : (pf = -1), cf.length && hf());
    }
    function hf() {
        if (!lf) {
            var e = af(ff);
            lf = !0;
            for (var t = cf.length; t; ) {
                for (uf = cf, cf = []; ++pf < t; ) uf && uf[pf].run();
                (pf = -1), (t = cf.length);
            }
            (uf = null),
                (lf = !1),
                (function (e) {
                    if (rf === clearTimeout) return clearTimeout(e);
                    if ((rf === sf || !rf) && clearTimeout) return (rf = clearTimeout), clearTimeout(e);
                    try {
                        rf(e);
                    } catch (t) {
                        try {
                            return rf.call(null, e);
                        } catch (t) {
                            return rf.call(this, e);
                        }
                    }
                })(e);
        }
    }
    function df(e, t) {
        (this.fun = e), (this.array = t);
    }
    function yf() {}
    (nf.nextTick = function (e) {
        var t = new Array(arguments.length - 1);
        if (arguments.length > 1) for (var r = 1; r < arguments.length; r++) t[r - 1] = arguments[r];
        cf.push(new df(e, t)), 1 !== cf.length || lf || af(hf);
    }),
        (df.prototype.run = function () {
            this.fun.apply(null, this.array);
        }),
        (nf.title = "browser"),
        (nf.browser = !0),
        (nf.env = {}),
        (nf.argv = []),
        (nf.version = ""),
        (nf.versions = {}),
        (nf.on = yf),
        (nf.addListener = yf),
        (nf.once = yf),
        (nf.off = yf),
        (nf.removeListener = yf),
        (nf.removeAllListeners = yf),
        (nf.emit = yf),
        (nf.prependListener = yf),
        (nf.prependOnceListener = yf),
        (nf.listeners = function (e) {
            return [];
        }),
        (nf.binding = function (e) {
            throw new Error("process.binding is not supported");
        }),
        (nf.cwd = function () {
            return "/";
        }),
        (nf.chdir = function (e) {
            throw new Error("process.chdir is not supported");
        }),
        (nf.umask = function () {
            return 0;
        });
    var vf = {};
    (function (e) {
        (function () {
            "use strict";
            Object.defineProperty(vf, "__esModule", { value: !0 }), (vf.parseSelector = void 0);
            var t = Np.DescendantQualifier;
            function r(e) {
                for (var t = [], i = 1; i < arguments.length; i++) t[i - 1] = arguments[i];
                if (!e) throw new Error("Empty topic selector expression");
                if ((t.length > 0 && (e = [e].concat(t)), e instanceof Array)) {
                    var s = e.map(function (e) {
                        return e instanceof Mp.AbstractTopicSelector ? e : r(e);
                    });
                    return new Fp.SelectorSet(s);
                }
                if ("string" == typeof e) {
                    var a = n(e);
                    if (o(a)) return new Up.PathSelector(a);
                    switch (a.type) {
                        case qp.Type.SPLIT_PATH_PATTERN:
                            return new Wp.SplitPathSelector(a);
                        case qp.Type.FULL_PATH_PATTERN:
                            return new Dp.FullPathSelector(a);
                        case qp.Type.SELECTOR_SET:
                            var u = Jp.split(a.remainder, Fp.DELIMITER),
                                c = u.map(function (e) {
                                    return r(e);
                                });
                            return new Fp.SelectorSet(c);
                    }
                }
                if (e instanceof Mp.AbstractTopicSelector) return e;
                throw new Error("Topic selector expression must be a string or array");
            }
            function n(e) {
                var r = (function (e) {
                    switch (e[0]) {
                        case qp.Prefix.PATH:
                            return qp.Type.PATH;
                        case qp.Prefix.SPLIT_PATH_PATTERN:
                            return qp.Type.SPLIT_PATH_PATTERN;
                        case qp.Prefix.FULL_PATH_PATTERN:
                            return qp.Type.FULL_PATH_PATTERN;
                        case qp.Prefix.SELECTOR_SET:
                            return qp.Type.SELECTOR_SET;
                        case "$":
                        case "%":
                        case "&":
                        case "<":
                            throw new Error("Invalid expression type: " + e);
                        default:
                            return null;
                    }
                })(e);
                null === r && ((e = qp.Prefix.PATH + e), (r = qp.Type.PATH));
                var n,
                    o,
                    i = e.substring(1);
                return (
                    r === qp.Type.PATH
                        ? ((o = i), (n = t.MATCH))
                        : "/" === i[i.length - 1]
                        ? "/" === i[i.length - 2]
                            ? ((n = t.MATCH_AND_DESCENDANTS), (o = Np.canonicalise(i.substring(0, i.length - 2))))
                            : ((n = t.DESCENDANTS_OF_MATCH), (o = Np.canonicalise(i.substring(0, i.length - 1))))
                        : ((o = Np.canonicalise(i)), (n = t.MATCH)),
                    {
                        type: r,
                        base: o,
                        prefix:
                            r === qp.Type.PATH
                                ? Np.canonicalise(i)
                                : (function (e) {
                                      for (var t = [], r = [], n = s, o = 0, i = e.length; o < i; ++o) {
                                          var u = e[o];
                                          if ("\\" === u && o < i - 1) {
                                              var c = e[o + 1];
                                              if (n === s)
                                                  if ((o++, "Q" === c)) n = a;
                                                  else {
                                                      if (!(c < "a" || c > "z") || !(c < "A" || c > "Z")) {
                                                          t.length = 0;
                                                          break;
                                                      }
                                                      t.push(c);
                                                  }
                                              else "E" === c ? (o++, (n = s)) : t.push(u);
                                          } else if (u === Np.PATH_SEPARATOR) r.push(t.join("")), (t.length = 0), t.push(u);
                                          else {
                                              if (!n(u)) {
                                                  t.length = 0;
                                                  break;
                                              }
                                              t.push(u);
                                          }
                                      }
                                      return r.push(t.join("")), Np.canonicalise(r.join(""));
                                  })(o),
                        remainder: i,
                        qualifier: n,
                        expression: r + i,
                    }
                );
            }
            function o(e) {
                return e.type === qp.Type.PATH || (e.type !== qp.Type.SELECTOR_SET && "" !== e.prefix && e.prefix === e.base);
            }
            var i = ["*", ".", "+", "?", "^", "$", "{", "}", "(", ")", "[", "]", "\\", "|"];
            function s(e) {
                return -1 === i.indexOf(e);
            }
            function a() {
                return !0;
            }
            var u =
                e && e.env && "true" === e.env.DISABLE_TOPIC_CACHE
                    ? r
                    : Kp.memoize(r, {}, function (e) {
                          return JSON.stringify(e);
                      });
            vf.parseSelector = u;
        }.call(this));
    }.call(this, ef));
    var Sf = {};
    Object.defineProperty(Sf, "__esModule", { value: !0 }), (Sf.sessionContext = void 0);
    var _f = i({}),
        Ef = s({});
    Sf.sessionContext = {
        ErrorReason: bu.ErrorReason,
        TopicTypeEnum: ku.TopicTypeEnum,
        TopicAddFailReasonEnum: Hu.TopicAddFailReasonEnum,
        TopicSpecification: Bu.TopicSpecification,
        TimeSeriesEventDataType: Ef.TimeSeriesEventDataType,
        DataTypes: _f.DataTypes,
        AbstractDataType: xc.AbstractDataType,
        parseSelector: vf.parseSelector,
        CloseReason: zu.CloseReasonImpl,
    };
    var wf = {},
        mf =
            (this && this.__values) ||
            function (e) {
                var t = "function" == typeof Symbol && Symbol.iterator,
                    r = t && e[t],
                    n = 0;
                if (r) return r.call(e);
                if (e && "number" == typeof e.length)
                    return {
                        next: function () {
                            return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
                        },
                    };
                throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
            };
    Object.defineProperty(wf, "__esModule", { value: !0 }), (wf.StreamImpl = void 0);
    var Tf = (function () {
        function e(e) {
            (this.listeners = e.getListeners()), (this.errorCallback = e.getErrorCallback()), (this.closeCallback = e.getCloseCallback());
        }
        return (
            (e.prototype.on = function (e, t) {
                return this.attach(e, t), this;
            }),
            (e.prototype.off = function (e, t) {
                return this.remove(e, t), this;
            }),
            (e.prototype.close = function (e) {
                return this.closeCallback(e), this;
            }),
            (e.prototype.error = function (e) {
                return this.errorCallback(e), this;
            }),
            (e.prototype.attach = function (e, t) {
                var r, n;
                if ("object" == typeof e)
                    try {
                        for (var o = mf(Object.keys(e)), i = o.next(); !i.done; i = o.next()) {
                            var s = i.value;
                            this.attach(s, e[s]);
                        }
                    } catch (e) {
                        r = { error: e };
                    } finally {
                        try {
                            i && !i.done && (n = o.return) && n.call(o);
                        } finally {
                            if (r) throw r.error;
                        }
                    }
                else t && (this.listeners.hasOwnProperty(e) || (this.listeners[e] = []), this.listeners[e].push(t));
            }),
            (e.prototype.remove = function (e, t) {
                var r, n;
                if ("object" == typeof e)
                    try {
                        for (var o = mf(Object.keys(e)), i = o.next(); !i.done; i = o.next()) {
                            var s = i.value;
                            this.remove(s, e[s]);
                        }
                    } catch (e) {
                        r = { error: e };
                    } finally {
                        try {
                            i && !i.done && (n = o.return) && n.call(o);
                        } finally {
                            if (r) throw r.error;
                        }
                    }
                else
                    this.listeners.hasOwnProperty(e) &&
                        (this.listeners[e] = t
                            ? this.listeners[e].filter(function (e) {
                                  return e !== t;
                              })
                            : []);
            }),
            e
        );
    })();
    wf.StreamImpl = Tf;
    var gf = {};
    (function (e) {
        (function () {
            "use strict";
            var t =
                (this && this.__values) ||
                function (e) {
                    var t = "function" == typeof Symbol && Symbol.iterator,
                        r = t && e[t],
                        n = 0;
                    if (r) return r.call(e);
                    if (e && "number" == typeof e.length)
                        return {
                            next: function () {
                                return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
                            },
                        };
                    throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
                };
            Object.defineProperty(gf, "__esModule", { value: !0 }), (gf.Emitter = void 0);
            var r = new ((function () {
                    function r() {
                        (this.pendingEvents = []), (this.events = []), (this.busy = !1);
                    }
                    return (
                        (r.prototype.addEmitterEvent = function (t) {
                            var r = this;
                            this.pendingEvents.push(t),
                                this.busy ||
                                    ((this.busy = !0),
                                    e.nextTick(function () {
                                        r.drainEmitterQueue();
                                    }));
                        }),
                        (r.prototype.drainEmitterQueue = function () {
                            var r,
                                n,
                                o = this;
                            (this.events = this.pendingEvents), (this.pendingEvents = []);
                            try {
                                for (var i = t(this.events), s = i.next(); !s.done; s = i.next()) {
                                    var a = s.value;
                                    try {
                                        a();
                                    } catch (e) {}
                                }
                            } catch (e) {
                                r = { error: e };
                            } finally {
                                try {
                                    s && !s.done && (n = i.return) && n.call(i);
                                } finally {
                                    if (r) throw r.error;
                                }
                            }
                            this.pendingEvents.length > 0
                                ? e.nextTick(function () {
                                      o.drainEmitterQueue();
                                  })
                                : (this.busy = !1);
                        }),
                        r
                    );
                })())(),
                n = (function () {
                    function e(e) {
                        var t = this;
                        if (((this.listeners = {}), (this.closed = !1), (this.listener = function () {}), void 0 === e || void 0 === e.stream)) {
                            var r = {
                                getListeners: function () {
                                    return t.listeners;
                                },
                                getErrorCallback: function () {
                                    return t.error.bind(t);
                                },
                                getCloseCallback: function () {
                                    return t.close.bind(t);
                                },
                            };
                            this.stream = new wf.StreamImpl(r);
                        } else {
                            if (((this.stream = e.stream), void 0 === e.listeners)) throw new Error("Listeners must be defined when supplying a stream");
                            this.listeners = e.listeners;
                        }
                        void 0 !== e && void 0 !== e.event && this.stream.on(e.event, e.callback);
                    }
                    return (
                        (e.create = function () {
                            var t = {},
                                r = function () {},
                                n = function () {};
                            return {
                                getListeners: function () {
                                    return t;
                                },
                                getErrorCallback: function () {
                                    return function (e) {
                                        r(e);
                                    };
                                },
                                getCloseCallback: function () {
                                    return function (e) {
                                        n(e);
                                    };
                                },
                                emitter: function (o) {
                                    var i = new e({ stream: o, listeners: t });
                                    return (r = i.error.bind(i)), (n = i.close.bind(i)), i;
                                },
                            };
                        }),
                        (e.prototype.emitUnsafe = function (e, t) {
                            var n = this,
                                o = function (e) {
                                    qc.callWithArguments(e, t || []);
                                };
                            r.addEmitterEvent(function () {
                                n.listeners.hasOwnProperty(e) && n.listeners[e].forEach(o);
                            }),
                                this.listener(e, t);
                        }),
                        (e.prototype.emit = function (e) {
                            for (var t = [], r = 1; r < arguments.length; r++) t[r - 1] = arguments[r];
                            !this.closed && e && this.emitUnsafe(e, t);
                        }),
                        (e.prototype.immediate = function (e) {
                            for (var t = [], r = 1; r < arguments.length; r++) t[r - 1] = arguments[r];
                            if (!this.closed && e) {
                                var n = function (e) {
                                    try {
                                        qc.callWithArguments(e, t || []);
                                    } catch (e) {}
                                };
                                this.listeners.hasOwnProperty(e) && this.listeners[e].forEach(n);
                            }
                        }),
                        (e.prototype.error = function (e) {
                            this.closed || (this.emitUnsafe("error", [e]), this.close(e ? e.message : void 0));
                        }),
                        (e.prototype.close = function (e) {
                            this.closed || ((this.closed = !0), this.emitUnsafe("close", [e]));
                        }),
                        (e.prototype.listen = function (e) {
                            this.listener = e;
                        }),
                        (e.prototype.get = function () {
                            return this.stream;
                        }),
                        e
                    );
                })();
            gf.Emitter = n;
        }.call(this));
    }.call(this, ef));
    var Of = {};
    Object.defineProperty(Of, "__esModule", { value: !0 }), (Of.BooleanSerialiser = void 0);
    var If = (function () {
        function e() {}
        return (
            (e.prototype.read = function (e) {
                return tu.readBoolean(e);
            }),
            (e.prototype.write = function (e, t) {
                tu.writeBoolean(e, t);
            }),
            e
        );
    })();
    Of.BooleanSerialiser = new If();
    var Rf = {};
    Object.defineProperty(Rf, "__esModule", { value: !0 }),
        (Rf.write = Rf.read = void 0),
        (Rf.read = function (e, t) {
            var r = tu.readByte(e);
            if (void 0 === t[r]) throw new Error("Unable to decode enum value " + r);
            return t[t[r]];
        }),
        (Rf.write = function (e, t) {
            "number" == typeof t ? tu.writeByte(e, t) : tu.writeByte(e, t.id);
        });
    var bf,
        Cf = {};
    Object.defineProperty(Cf, "__esModule", { value: !0 }),
        (Cf.SessionLockOptions = Cf.SessionLockScope = void 0),
        (function (e) {
            (e[(e.UNLOCK_ON_SESSION_LOSS = 0)] = "UNLOCK_ON_SESSION_LOSS"), (e[(e.UNLOCK_ON_CONNECTION_LOSS = 1)] = "UNLOCK_ON_CONNECTION_LOSS");
        })((bf = Cf.SessionLockScope || (Cf.SessionLockScope = {}))),
        (Cf.SessionLockOptions = { SessionLockScope: bf });
    var Pf = {};
    Object.defineProperty(Pf, "__esModule", { value: !0 }), (Pf.SessionLockAcquisition = void 0);
    var Nf = function (e, t, r) {
        (this.lockName = e), (this.sequence = t), (this.scope = r);
    };
    Pf.SessionLockAcquisition = Nf;
    var Af = {},
        Mf =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Af, "__esModule", { value: !0 }), (Af.SessionLockAcquisitionSerialiser = void 0);
    var jf = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            Mf(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readString(e),
                    r = tu.readInt64(e),
                    n = Rf.read(e, Cf.SessionLockScope);
                return new Pf.SessionLockAcquisition(t, r, n);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.lockName), tu.writeInt64(e, t.sequence), Rf.write(e, t.scope);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    Af.SessionLockAcquisitionSerialiser = new jf();
    var Lf = {},
        Df =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Lf, "__esModule", { value: !0 }), (Lf.SessionLockRequestSerialiser = void 0);
    var xf = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            Df(t, e),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.lockName), tu.writeInt64(e, t.requestId), Rf.write(e, t.scope);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    Lf.SessionLockRequestSerialiser = new xf();
    var Bf = {};
    Object.defineProperty(Bf, "__esModule", { value: !0 }),
        (Bf.RELEASE_SESSION_LOCK = Bf.ACQUIRE_SESSION_LOCK = void 0),
        (Bf.ACQUIRE_SESSION_LOCK = { id: 114, request: Lf.SessionLockRequestSerialiser, response: Af.SessionLockAcquisitionSerialiser }),
        (Bf.RELEASE_SESSION_LOCK = { id: 116, request: Af.SessionLockAcquisitionSerialiser, response: Of.BooleanSerialiser });
    var qf = {};
    Object.defineProperty(qf, "__esModule", { value: !0 }),
        (qf.responseSuccess = void 0),
        (qf.responseSuccess = function (e, t) {
            return !e;
        });
    var Uf = {},
        kf =
            (this && this.__awaiter) ||
            function (e, t, r, n) {
                return new (r || (r = Promise))(function (o, i) {
                    function s(e) {
                        try {
                            u(n.next(e));
                        } catch (e) {
                            i(e);
                        }
                    }
                    function a(e) {
                        try {
                            u(n.throw(e));
                        } catch (e) {
                            i(e);
                        }
                    }
                    function u(e) {
                        var t;
                        e.done
                            ? o(e.value)
                            : ((t = e.value),
                              t instanceof r
                                  ? t
                                  : new r(function (e) {
                                        e(t);
                                    })).then(s, a);
                    }
                    u((n = n.apply(e, t || [])).next());
                });
            },
        Vf =
            (this && this.__generator) ||
            function (e, t) {
                var r,
                    n,
                    o,
                    i,
                    s = {
                        label: 0,
                        sent: function () {
                            if (1 & o[0]) throw o[1];
                            return o[1];
                        },
                        trys: [],
                        ops: [],
                    };
                return (
                    (i = { next: a(0), throw: a(1), return: a(2) }),
                    "function" == typeof Symbol &&
                        (i[Symbol.iterator] = function () {
                            return this;
                        }),
                    i
                );
                function a(i) {
                    return function (a) {
                        return (function (i) {
                            if (r) throw new TypeError("Generator is already executing.");
                            for (; s; )
                                try {
                                    if (((r = 1), n && (o = 2 & i[0] ? n.return : i[0] ? n.throw || ((o = n.return) && o.call(n), 0) : n.next) && !(o = o.call(n, i[1])).done)) return o;
                                    switch (((n = 0), o && (i = [2 & i[0], o.value]), i[0])) {
                                        case 0:
                                        case 1:
                                            o = i;
                                            break;
                                        case 4:
                                            return s.label++, { value: i[1], done: !1 };
                                        case 5:
                                            s.label++, (n = i[1]), (i = [0]);
                                            continue;
                                        case 7:
                                            (i = s.ops.pop()), s.trys.pop();
                                            continue;
                                        default:
                                            if (!((o = s.trys), (o = o.length > 0 && o[o.length - 1]) || (6 !== i[0] && 2 !== i[0]))) {
                                                s = 0;
                                                continue;
                                            }
                                            if (3 === i[0] && (!o || (i[1] > o[0] && i[1] < o[3]))) {
                                                s.label = i[1];
                                                break;
                                            }
                                            if (6 === i[0] && s.label < o[1]) {
                                                (s.label = o[1]), (o = i);
                                                break;
                                            }
                                            if (o && s.label < o[2]) {
                                                (s.label = o[2]), s.ops.push(i);
                                                break;
                                            }
                                            o[2] && s.ops.pop(), s.trys.pop();
                                            continue;
                                    }
                                    i = t.call(e, s);
                                } catch (e) {
                                    (i = [6, e]), (n = 0);
                                } finally {
                                    r = o = 0;
                                }
                            if (5 & i[0]) throw i[1];
                            return { value: i[0] ? i[1] : void 0, done: !0 };
                        })([i, a]);
                    };
                }
            };
    Object.defineProperty(Uf, "__esModule", { value: !0 }), (Uf.InternalSessionLocks = void 0);
    var Ff = yu.create("diffusion.locks.SessionLocks"),
        Gf = (function () {
            function e(e, t, r) {
                var n = this;
                (this.owned = !0),
                    (this.acquisition = e),
                    (this.unlockSessionLock = r),
                    (t.setOwned = function (e) {
                        n.owned = e;
                    });
            }
            return (
                (e.prototype.toString = function () {
                    return "SessionLock [name=" + this.acquisition.lockName + ", sequence=" + this.acquisition.sequence + ", scope=" + this.acquisition.scope + ", owned=" + this.owned + "]";
                }),
                (e.prototype.getName = function () {
                    return this.acquisition.lockName;
                }),
                (e.prototype.getSequence = function () {
                    return this.acquisition.sequence;
                }),
                (e.prototype.isOwned = function () {
                    return this.owned;
                }),
                (e.prototype.getScope = function () {
                    return this.acquisition.scope;
                }),
                (e.prototype.unlock = function () {
                    return this.owned ? ((this.owned = !1), this.unlockSessionLock(this.acquisition)) : Promise.resolve(!1);
                }),
                e
            );
        })(),
        Hf = (function () {
            function e(e, t) {
                var r = this;
                (this.locks = {}),
                    (this.nextRequestId = 0),
                    (this.serviceLocator = e.getServiceLocator()),
                    (this.ACQUIRE_SESSION_LOCK = this.serviceLocator.obtain(Bf.ACQUIRE_SESSION_LOCK)),
                    (this.RELEASE_SESSION_LOCK = this.serviceLocator.obtain(Bf.RELEASE_SESSION_LOCK)),
                    t.on("change", function (t, n) {
                        return kf(r, void 0, void 0, function () {
                            var t,
                                r,
                                o = this;
                            return Vf(this, function (i) {
                                switch (i.label) {
                                    case 0:
                                        return (
                                            (t = null),
                                            (r = function (e) {
                                                e.ownedSetter.setOwned(!1), e.onRemoveLock();
                                            }),
                                            n !== ya.InternalSessionState.DISCONNECTED
                                                ? [3, 2]
                                                : (Object.values(this.locks)
                                                      .filter(function (e) {
                                                          return e.lock.getScope() === Cf.SessionLockScope.UNLOCK_ON_CONNECTION_LOSS;
                                                      })
                                                      .forEach(r),
                                                  [
                                                      4,
                                                      e.getConversationSet().newConversation({
                                                          onOpen: function () {},
                                                          onResponse: function () {
                                                              return !0;
                                                          },
                                                          onDiscard: function () {
                                                              Object.values(o.locks).forEach(r), (o.locks = {});
                                                          },
                                                      }),
                                                  ])
                                        );
                                    case 1:
                                        return (t = i.sent()), [3, 3];
                                    case 2:
                                        n === ya.InternalSessionState.CONNECTED
                                            ? null !== t && (e.getConversationSet().respondIfPresent(t, null), (t = null))
                                            : n === ya.InternalSessionState.CLOSED && (Object.values(this.locks).forEach(r), (this.locks = {})),
                                            (i.label = 3);
                                    case 3:
                                        return [2];
                                }
                            });
                        });
                    });
            }
            return (
                (e.prototype.handleAcquisistion = function (e, t, r) {
                    var n,
                        o = this.locks[e];
                    return void 0 !== o ? (o.lock.getSequence().equals(t.sequence) ? (n = o.lock) : (o.ownedSetter.setOwned(!1), (n = this.createLock(e, t, r)))) : (n = this.createLock(e, t, r)), n;
                }),
                (e.prototype.createLock = function (e, t, r) {
                    var n = {
                            setOwned: function () {
                                throw Error("Session lock ownedSetter must be implemented");
                            },
                        },
                        o = new Gf(t, n, this.unlock.bind(this)),
                        i = r
                            ? {
                                  lock: o,
                                  ownedSetter: {
                                      setOwned: function (e) {
                                          n.setOwned(e), r.onOwned(e);
                                      },
                                  },
                                  onRemoveLock: function () {
                                      r.onRemoveLock();
                                  },
                              }
                            : { lock: o, ownedSetter: n, onRemoveLock: function () {} };
                    return (this.locks[e] = i), o;
                }),
                (e.prototype.unlock = function (e) {
                    var t = this;
                    return new Promise(function (r, n) {
                        t.RELEASE_SESSION_LOCK.send(e, function (o, i) {
                            o ? (Ff.debug("Release session lock failed"), n(o)) : (void 0 !== t.locks[e.lockName] && t.locks[e.lockName].lock.getSequence().toString(10) === e.sequence.toString(10) && delete t.locks[e.lockName], r(i));
                        });
                    });
                }),
                (e.prototype.lock = function (e, t, r) {
                    var n = this;
                    return (
                        void 0 === t && (t = Cf.SessionLockScope.UNLOCK_ON_SESSION_LOSS),
                        new Promise(function (o, i) {
                            if (void 0 !== n.locks[e] && n.locks[e].lock.isOwned()) r ? i(new Error("Cannot register the same lock in different shared sessions")) : o(n.locks[e].lock);
                            else {
                                var s = n.nextRequestId++;
                                n.ACQUIRE_SESSION_LOCK.send({ lockName: e, requestId: s, scope: t }, function (t, s) {
                                    if (qf.responseSuccess(t, s)) {
                                        var a = n.handleAcquisistion(e, s, r);
                                        o(a);
                                    } else Ff.debug("Acquire session lock failed"), i(t);
                                });
                            }
                        })
                    );
                }),
                e
            );
        })();
    Uf.InternalSessionLocks = Hf;
    var Yf = {};
    function Wf() {
        return { type: mu.PROTOCOL.TYPE, version: mu.PROTOCOL.CURRENT_VERSION, capabilities: mu.PROTOCOL.CAPABILITIES };
    }
    Object.defineProperty(Yf, "__esModule", { value: !0 }),
        (Yf.reconnect = Yf.connect = void 0),
        (Yf.connect = Wf),
        (Yf.reconnect = function (e, t, r) {
            return Object.assign(Wf(), { token: e, availableClientSequence: t, lastServerSequence: r });
        });
    var Qf = {};
    function zf(e, t) {
        return { id: e, message: t };
    }
    Object.defineProperty(Qf, "__esModule", { value: !0 }),
        (Qf.isSuccess = Qf.responseCodes = void 0),
        (Qf.responseCodes = {
            OK: zf(100, "Connected successfully"),
            DOWNGRADE: zf(102, "Server does not support the requested protocol level"),
            RECONNECTED: zf(105, "Reconnected successfully"),
            RECONNECTED_WITH_MESSAGE_LOSS: zf(106, "Reconnected with message loss"),
            LICENSE_EXCEEDED: zf(113, "Connection rejected due to license limit"),
            RECONNECTION_UNSUPPORTED: zf(114, "Reconnection not supported by connector"),
            CONNECTION_PROTOCOL_ERROR: zf(115, "Connection failed - protocol error"),
            AUTHENTICATION_FAILED: zf(116, "Connection failed - authentication failed"),
            UNKNOWN_SESSION: zf(117, "Reconnection failed - the session is unknown"),
            RECONNECTION_FAILED_MESSAGE_LOSS: zf(118, "Reconnection failed due to message loss"),
            REJECTED_SERVER_INITIALISING: zf(119, "Connection rejected because the server is not ready"),
        }),
        Ru.enumerize(Qf.responseCodes),
        (Qf.isSuccess = function (e) {
            switch (e) {
                case Qf.responseCodes.OK:
                case Qf.responseCodes.RECONNECTED:
                case Qf.responseCodes.RECONNECTED_WITH_MESSAGE_LOSS:
                    return !0;
                default:
                    return !1;
            }
        });
    var Kf = {};
    function Jf(e, t, r, n) {
        void 0 === r && (r = 0), void 0 === n && (n = e.length);
        for (var o = r; o < n; ++o) e[o] = t;
    }
    Object.defineProperty(Kf, "__esModule", { value: !0 }),
        (Kf.ofSize = Kf.fill = Kf.remove = void 0),
        (Kf.remove = function (e, t) {
            var r = e.indexOf(t);
            return r > -1 && (e.splice(r, 1), !0);
        }),
        (Kf.fill = Jf),
        (Kf.ofSize = function (e, t) {
            var r = [];
            return (r.length = e), void 0 !== t && Jf(r, t), r;
        });
    var $f = {};
    Object.defineProperty($f, "__esModule", { value: !0 }), ($f.StreamRegistryImpl = void 0);
    var Xf = (function () {
        function e(e) {
            (this.streams = new Map()), (this.fallbacks = []), (this.topicCache = e);
        }
        return (
            (e.prototype.add = function (e, t) {
                var r = this.streams.get(e);
                r ? r.push(t) : this.streams.set(e, [t]), this.topicCache.newStream(e, t, this), t.onOpen();
            }),
            (e.prototype.addFallback = function (e) {
                this.fallbacks.push(e);
            }),
            (e.prototype.getFallbacks = function (e) {
                return this.fallbacks.filter(function (t) {
                    return t.selects(e);
                });
            }),
            (e.prototype.remove = function (e) {
                var t = this;
                Kf.remove(this.fallbacks, e),
                    this.streams.forEach(function (r, n) {
                        Kf.remove(r, e) && t.topicCache.removeStream(e, t), 0 === r.length && t.streams.delete(n);
                    });
            }),
            (e.prototype.streamsFor = function (e, t) {
                var r = [];
                return (
                    this.streams.forEach(function (n, o) {
                        o.selects(e) &&
                            (r = r.concat(
                                n
                                    .filter(function (e) {
                                        return e.selects(t);
                                    })
                                    .map(function (e) {
                                        return e.adapter ? e.adapter(t) : e;
                                    })
                            ));
                    }),
                    r
                );
            }),
            (e.prototype.close = function () {
                this.topicCache.clear(),
                    this.streams.forEach(function (e) {
                        e.forEach(function (e) {
                            e.onSubscriptionError(bu.ErrorReason.SESSION_CLOSED);
                        });
                    }),
                    this.fallbacks.forEach(function (e) {
                        e.onSubscriptionError(bu.ErrorReason.SESSION_CLOSED);
                    });
            }),
            e
        );
    })();
    $f.StreamRegistryImpl = Xf;
    var Zf = {};
    Object.defineProperty(Zf, "__esModule", { value: !0 }), (Zf.TopicCacheEntry = void 0);
    var eh = (function () {
        function e(e, t, r) {
            (this.streams = e), (this.path = t), (this.specification = r);
        }
        return (
            (e.prototype.proxies = function (e, t) {
                return 0 === this.streams.length
                    ? t.getFallbacks(e).map(function (t) {
                          return t.adapter ? t.adapter(e) : t;
                      })
                    : this.streams;
            }),
            (e.prototype.getTopicPath = function () {
                return this.path;
            }),
            (e.prototype.getTopicSpecification = function () {
                return this.specification;
            }),
            (e.prototype.notifyInitialSubscription = function (e) {
                var t = this;
                this.proxies(this.specification, e).forEach(function (e) {
                    e.onSubscription(t.path, t.specification);
                });
            }),
            (e.prototype.notifySubscription = function (e) {
                e.onSubscription(this.path, this.specification), this.notifyValueToNewStream(this.path, this.specification, e);
            }),
            (e.prototype.notifyUnsubscription = function (e, t) {
                var r = this;
                this.proxies(this.specification, t).forEach(function (t) {
                    t.onUnsubscription(r.path, r.specification, e);
                });
            }),
            (e.prototype.notifyValue = function (e, t, r, n, o) {
                var i = this;
                this.proxies(this.specification, o).forEach(function (o) {
                    o.onValue(i.path, i.specification, e, t, r, n);
                });
            }),
            (e.prototype.notifyDelta = function (e, t, r, n, o, i) {
                var s = this;
                this.proxies(this.specification, i).forEach(function (i) {
                    i.onDelta(s.path, s.specification, e, t, r, n, o);
                });
            }),
            (e.prototype.addStream = function (e, t) {
                var r = this;
                0 === this.streams.length &&
                    t.getFallbacks(this.specification).forEach(function (e) {
                        e.onUnsubscription(r.path, r.specification, Hu.UnsubscribeReasonEnum.STREAM_CHANGE);
                    }),
                    this.streams.indexOf(e) < 0 && (this.streams.push(e), this.notifySubscription(e));
            }),
            (e.prototype.removeStream = function (e, t) {
                var r = this;
                Kf.remove(this.streams, e),
                    0 === this.streams.length &&
                        t.getFallbacks(this.specification).forEach(function (e) {
                            r.notifySubscription(e);
                        });
            }),
            (e.prototype.removeAllStreams = function () {
                this.streams.length = 0;
            }),
            e
        );
    })();
    Zf.TopicCacheEntry = eh;
    var th = {},
        rh =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(th, "__esModule", { value: !0 }), (th.DatatypeCacheEntry = void 0);
    var nh = (function (e) {
        function t(t, r, n, o) {
            var i = e.call(this, t, r, n) || this;
            return (i.datatype = o), n.properties && n.properties.DONT_RETAIN_VALUE && (i.dontRetainValue = JSON.parse(n.properties.DONT_RETAIN_VALUE)), i;
        }
        return (
            rh(t, e),
            (t.prototype.handleValue = function (e, t, r) {
                var n = this.value,
                    o = this.buffer || null;
                try {
                    var i = this.datatype.readValue(e);
                    this.notifyValue(o, e, n, i, t), this.dontRetainValue || ((this.value = i), (this.buffer = e));
                } catch (e) {
                    r(e);
                }
            }),
            (t.prototype.handleDelta = function (e, t, r) {
                var n = this.value,
                    o = this.buffer || null;
                try {
                    var i = this.datatype.deltaType("binary"),
                        s = i.readDelta(e),
                        a = i.applyImpl(n, s, this.buffer ? new ic.BufferSlice(this.buffer) : void 0),
                        u = a.value,
                        c = a.cbor;
                    (this.value = u), (this.buffer = c.$buffer), this.notifyDelta(o, c.$buffer, s, n, this.value, t);
                } catch (e) {
                    r(e);
                }
            }),
            (t.prototype.notifyValueToNewStream = function (e, t, r) {
                this.buffer && r.onValue(e, t, null, this.buffer, null, this.value);
            }),
            t
        );
    })(Zf.TopicCacheEntry);
    th.DatatypeCacheEntry = nh;
    var oh = {},
        ih =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(oh, "__esModule", { value: !0 }), (oh.NoValueEntry = void 0);
    var sh = (function (e) {
        function t(t, r, n) {
            return e.call(this, t, r, n) || this;
        }
        return (
            ih(t, e),
            (t.prototype.handleValue = function (e, t) {
                this.notifyValue(null, e, null, e, t);
            }),
            (t.prototype.handleDelta = function (e, t) {
                this.notifyDelta(null, e, null, null, e, t);
            }),
            (t.prototype.notifyValueToNewStream = function () {}),
            t
        );
    })(Zf.TopicCacheEntry);
    oh.NoValueEntry = sh;
    var ah = {},
        uh =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(ah, "__esModule", { value: !0 }), (ah.TimeSeriesCacheEntry = void 0);
    var ch = s({}),
        lh = (function (e) {
            function t(t, r, n, o) {
                return e.call(this, t, r, n, ch.TimeSeriesEventDataType.create(o)) || this;
            }
            return uh(t, e), t;
        })(th.DatatypeCacheEntry);
    ah.TimeSeriesCacheEntry = lh;
    var ph = {},
        fh =
            (this && this.__values) ||
            function (e) {
                var t = "function" == typeof Symbol && Symbol.iterator,
                    r = t && e[t],
                    n = 0;
                if (r) return r.call(e);
                if (e && "number" == typeof e.length)
                    return {
                        next: function () {
                            return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
                        },
                    };
                throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
            };
    Object.defineProperty(ph, "__esModule", { value: !0 }), (ph.TopicCache = void 0);
    var hh = (function () {
        function e(e) {
            (this.byPath = {}), (this.byId = {}), (this.datatypes = e);
        }
        return (
            (e.prototype.handleSubscription = function (e, t) {
                var r,
                    n = e.path,
                    o = t.streamsFor(n, e.specification);
                switch (e.specification.type) {
                    case ku.TopicTypeEnum.JSON:
                    case ku.TopicTypeEnum.BINARY:
                    case ku.TopicTypeEnum.STRING:
                    case ku.TopicTypeEnum.DOUBLE:
                    case ku.TopicTypeEnum.INT64:
                    case ku.TopicTypeEnum.RECORD_V2:
                        var i = this.datatypes.get(e.specification.type);
                        if (null === i) throw new Error("Invalid topic type");
                        r = new th.DatatypeCacheEntry(o, n, e.specification, i);
                        break;
                    case ku.TopicTypeEnum.TIME_SERIES:
                        var s = this.datatypes.get(e.specification.properties.TIME_SERIES_EVENT_VALUE_TYPE);
                        if (null === s) throw new Error("Invalid timeseries event type");
                        r = new ah.TimeSeriesCacheEntry(o, n, e.specification, s);
                        break;
                    default:
                        r = new oh.NoValueEntry(o, n, e.specification);
                }
                var a = this.byPath[n];
                if (((this.byPath[n] = r), a)) throw new Error("Existing cache entry for " + n);
                var u = this.byId[e.id];
                if (((this.byId[e.id] = r), u)) throw new Error("Existing cache entry for " + e.id);
                r.notifyInitialSubscription(t);
            }),
            (e.prototype.notifyUnsubscriptionOfAllTopics = function (e) {
                for (var t in this.byId) this.byId[t].notifyUnsubscription(Hu.UnsubscribeReasonEnum.SUBSCRIPTION_REFRESH, e);
                (this.byPath = {}), (this.byId = {});
            }),
            (e.prototype.handleValue = function (e, t, r, n) {
                var o = n.getErrorHandler(),
                    i = this.byId[e];
                i ? i.handleValue(t, r, o) : o(new Error("Data loss on topic with ID: " + e + " - possibly due to reconnection"));
            }),
            (e.prototype.handleDelta = function (e, t, r, n) {
                var o = n.getErrorHandler(),
                    i = this.byId[e];
                i ? i.handleDelta(t, r, o) : o(new Error("Data loss on topic with ID: " + e + " - possibly due to reconnection"));
            }),
            (e.prototype.handleUnsubscription = function (e, t, r) {
                var n = this.byId[e];
                if ((delete this.byId[e], n)) {
                    var o = n.getTopicPath();
                    delete this.byPath[o], n.notifyUnsubscription(t, r);
                }
            }),
            (e.prototype.newStream = function (e, t, r) {
                for (var n in this.byPath)
                    if (this.byPath.hasOwnProperty(n)) {
                        var o = this.byPath[n],
                            i = o.getTopicSpecification();
                        e.selects(n) && t.selects(i) && o.addStream(t.adapter ? t.adapter(i) : t, r);
                    }
            }),
            (e.prototype.removeStream = function (e, t) {
                for (var r in this.byPath) this.byPath.hasOwnProperty(r) && this.byPath[r].removeStream(e, t);
            }),
            (e.prototype.removeAllStreams = function () {
                var e, t;
                try {
                    for (var r = fh(Object.getOwnPropertyNames(this.byPath)), n = r.next(); !n.done; n = r.next()) {
                        var o = n.value;
                        this.byPath[o].removeAllStreams();
                    }
                } catch (t) {
                    e = { error: t };
                } finally {
                    try {
                        n && !n.done && (t = r.return) && t.call(r);
                    } finally {
                        if (e) throw e.error;
                    }
                }
            }),
            (e.prototype.clear = function () {
                (this.byPath = {}), (this.byId = {});
            }),
            e
        );
    })();
    ph.TopicCache = hh;
    var dh = {};
    Object.defineProperty(dh, "__esModule", { value: !0 }),
        (dh.cidFromHeaders = void 0),
        (dh.cidFromHeaders = function (e) {
            if (!e || 0 === e.length) throw new Error("Empty headers, expected at least 1");
            return Ga.ConversationId.fromString(e[e.length - 1]);
        });
    var yh = {};
    Object.defineProperty(yh, "__esModule", { value: !0 }), (yh.TopicRouting = void 0);
    var vh = yu.create("V4 Client Routing"),
        Sh = (function () {
            function e(e, t, r, n, o) {
                (this.errorHandler = e), (this.serviceAdapter = t), (this.conversationSet = r), (this.cache = n), (this.registry = o);
            }
            return (
                (e.prototype.route = function (e) {
                    switch (e.type) {
                        case Iu.types.FETCH_REPLY:
                            var t = dh.cidFromHeaders(e.headers);
                            this.conversationSet.respondIfPresent(t, e);
                            break;
                        case Iu.types.SERVICE_REQUEST:
                        case Iu.types.SERVICE_RESPONSE:
                        case Iu.types.SERVICE_ERROR:
                            this.serviceAdapter.onMessage(e.type, e.getInputStream());
                            break;
                        case Iu.types.TOPIC_VALUE:
                            this.cache.handleValue(e.id, e.data, this.registry, this.errorHandler);
                            break;
                        case Iu.types.TOPIC_DELTA:
                            this.cache.handleDelta(e.id, e.data, this.registry, this.errorHandler);
                            break;
                        default:
                            vh.debug("Unhandled V4 message: " + e.type, e);
                    }
                }),
                (e.prototype.subscribe = function (e) {
                    this.cache.handleSubscription(e, this.registry);
                }),
                (e.prototype.unsubscribe = function (e, t) {
                    this.cache.handleUnsubscription(e, t, this.registry);
                }),
                e
            );
        })();
    yh.TopicRouting = Sh;
    var _h = {};
    Object.defineProperty(_h, "__esModule", { value: !0 }), (_h.SessionId = void 0);
    var Eh = (function () {
        function e(e, t) {
            (this.server = e), (this.value = t);
        }
        return (
            (e.fromString = function (t) {
                var r,
                    n = t.split("-");
                if (2 !== n.length) throw new Error("SessionId must consist of two hexadecimal parts, joined with a '-'");
                try {
                    r = new e(_a.fromString(n[0], !1, 16), _a.fromString(n[1], !1, 16));
                } catch (e) {
                    throw new Error("SessionId must consist of two hexadecimal parts, joined with a '-'");
                }
                return r;
            }),
            (e.validate = function (t) {
                if (t instanceof e) return t;
                if (0 === t.length || t.indexOf("-") < 0 || t.indexOf(" ") >= 0) return !1;
                try {
                    return e.fromString(t);
                } catch (e) {
                    return !1;
                }
            }),
            (e.prototype.toString = function () {
                var e = "0000000000000000" + this.server.toUnsigned().toString(16),
                    t = "0000000000000000" + this.value.toUnsigned().toString(16);
                return (e.substr(e.length - 16) + "-" + t.substr(t.length - 16)).toLowerCase();
            }),
            e
        );
    })();
    _h.SessionId = Eh;
    var wh = {};
    Object.defineProperty(wh, "__esModule", { value: !0 }), (wh.SessionToken = wh.TOKEN_LENGTH = void 0), (wh.TOKEN_LENGTH = 24);
    var mh = (function () {
        function e(e) {
            this.external = e;
        }
        return (
            (e.prototype.toString = function () {
                return this.external.toString("ascii");
            }),
            e
        );
    })();
    wh.SessionToken = mh;
    var Th = {};
    Object.defineProperty(Th, "__esModule", { value: !0 }),
        (Th.readSessionToken = void 0),
        (Th.readSessionToken = function (e) {
            return new wh.SessionToken(e.readMany(wh.TOKEN_LENGTH));
        });
    var gh = {},
        Oh =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(gh, "__esModule", { value: !0 }), (gh.deserialise = gh.DeserialisationErrorReason = void 0);
    var Ih,
        Rh = yu.create("Cascading");
    !(function (e) {
        (e[(e.UNRECOGNISED_PROTOCOL_BYTE = 0)] = "UNRECOGNISED_PROTOCOL_BYTE"), (e[(e.PROTOCOL_VERSION_MISMATCH = 1)] = "PROTOCOL_VERSION_MISMATCH");
    })((Ih = gh.DeserialisationErrorReason || (gh.DeserialisationErrorReason = {})));
    var bh = (function (e) {
        function t(t, r) {
            var n = e.call(this, t) || this;
            return (n.reason = r), n;
        }
        return Oh(t, e), t;
    })(Error);
    gh.deserialise = function (e) {
        var t = new _u.BufferInputStream(e),
            r = t.read();
        if (r !== mu.PROTOCOL.PROTOCOL_BYTE) throw new bh("Unrecognised protocol byte: " + r, Ih.UNRECOGNISED_PROTOCOL_BYTE);
        var n = t.read();
        if (n !== mu.PROTOCOL.CURRENT_VERSION) {
            if ((Rh.debug("Server responded with protocol version " + n + ". Client version is " + mu.PROTOCOL.CURRENT_VERSION + "."), n < mu.PROTOCOL.CURRENT_VERSION))
                throw new bh("Unrecognised protocol version: " + n, Ih.PROTOCOL_VERSION_MISMATCH);
            if (n > mu.PROTOCOL.CURRENT_VERSION) throw new bh("Unsupported protocol version: " + n, Ih.PROTOCOL_VERSION_MISMATCH);
        }
        var o = Rf.read(t, Qf.responseCodes);
        if (Qf.isSuccess(o)) {
            var i = new _h.SessionId(t.readUInt64(), t.readUInt64()),
                s = Th.readSessionToken(t),
                a = t.readInt64(),
                u = 0,
                c = -1;
            return o === Qf.responseCodes.RECONNECTED ? (u = t.readInt32()) : (c = t.readInt32()), { response: o, identity: i, token: s, systemPingPeriod: a, version: n, success: !0, sequence: u, maximumMessageSize: c };
        }
        return { response: o, version: n, identity: null, token: null, systemPingPeriod: null, success: !1, sequence: 0, maximumMessageSize: -1 };
    };
    var Ch = {};
    Object.defineProperty(Ch, "__esModule", { value: !0 }), (Ch.connectionResponse = void 0);
    var Ph = yu.create("Parsing");
    Ch.connectionResponse = function (e, t, r) {
        Ph.trace("Received connection handshake response");
        try {
            return e(gh.deserialise(r));
        } catch (e) {
            return t(e), null;
        }
    };
    var Nh = {},
        Ah = {};
    Object.defineProperty(Ah, "__esModule", { value: !0 }), (Ah.Subtransports = void 0);
    var Mh = yu.create("Transports");
    function jh() {
        return "function" == typeof WebSocket
            ? (Mh.debug("Using native websocket"), { factory: WebSocket, enabled: !0, allowsOptions: !1 })
            : "function" == typeof Nh
            ? (Mh.debug("Using Node WS library"), { factory: Nh, enabled: !0, allowsOptions: !0 })
            : (Mh.debug("Websocket transport not available"), { enabled: !1, allowsOptions: !1 });
    }
    function Lh() {
        return "function" == typeof XMLHttpRequest ? (Mh.debug("Using native XHR"), { factory: XMLHttpRequest, enabled: !0, allowsOptions: !1 }) : (Mh.debug("XHR transport not available"), { enabled: !1, allowsOptions: !1 });
    }
    Ah.Subtransports = Object.freeze({ WS: jh(), XHR: Lh(), WEBSOCKET: jh(), HTTP_POLLING: Lh() });
    var Dh,
        xh = {};
    Object.defineProperty(xh, "__esModule", { value: !0 }),
        (xh.write = xh.read = void 0),
        (function (e) {
            (e[(e.NONE = 0)] = "NONE"), (e[(e.PLAIN = 1)] = "PLAIN"), (e[(e.CUSTOM = 2)] = "CUSTOM");
        })(Dh || (Dh = {})),
        (xh.read = function (e) {
            switch (Rf.read(e, Dh)) {
                case Dh.PLAIN:
                    return tu.readString(e) || null;
                case Dh.CUSTOM:
                    return tu.readBytes(e);
                case Dh.NONE:
                default:
                    return tu.readBytes(e), null;
            }
        }),
        (xh.write = function (e, t) {
            null != t ? ("string" == typeof t ? (Rf.write(e, Dh.PLAIN), tu.writeString(e, t)) : (Rf.write(e, Dh.CUSTOM), tu.writeBytes(e, t))) : (Rf.write(e, Dh.NONE), tu.writeInt32(e, 0));
        });
    var Bh = {};
    (function (e) {
        (function () {
            "use strict";
            Object.defineProperty(Bh, "__esModule", { value: !0 }),
                (Bh.encodeAsString = void 0),
                (Bh.encodeAsString = function (e) {
                    var t = new wu.BufferOutputStream();
                    return xh.write(t, e), t.getBase64();
                });
        }.call(this));
    }.call(this, u({}).Buffer));
    var qh = {};
    (function (e) {
        (function () {
            "use strict";
            var t =
                (this && this.__extends) ||
                (function () {
                    var e = function (t, r) {
                        return (e =
                            Object.setPrototypeOf ||
                            ({ __proto__: [] } instanceof Array &&
                                function (e, t) {
                                    e.__proto__ = t;
                                }) ||
                            function (e, t) {
                                for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                            })(t, r);
                    };
                    return function (t, r) {
                        if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                        function n() {
                            this.constructor = t;
                        }
                        e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                    };
                })();
            Object.defineProperty(qh, "__esModule", { value: !0 }), (qh.WSTransport = void 0);
            var r = yu.create("Websocket transport");
            var n = (function (n) {
                function o(e, t, r) {
                    var o = this,
                        i = gf.Emitter.create();
                    return ((o = n.call(this, i) || this).emitter = i.emitter(o)), (o.opts = e), (o.ws = t), (o.allowsOptions = r), o;
                }
                return (
                    t(o, n),
                    (o.prototype.handler = function (t) {
                        t.data.length > this.opts.maxMessageSize
                            ? this.emitter.error(new Error("Received message of size: " + t.data.length + ", exceeding max message size: " + this.opts.maxMessageSize))
                            : this.emitter.immediate("data", e.from(t.data));
                    }),
                    (o.prototype.connect = function (t, n) {
                        var o = this;
                        if (void 0 !== this.opts.httpProxyAgent && !this.allowsOptions) throw new Error("httpProxyAgent option is not allowed");
                        try {
                            var i = (function (e, t) {
                                var r = (t.secure ? "wss" : "ws") + "://" + t.host + ":" + t.port + t.path;
                                return (
                                    (r += "?ty=" + e.type),
                                    (r += "&v=" + e.version),
                                    (r += "&ca=" + e.capabilities),
                                    (r += "&r=" + t.reconnect.timeout),
                                    e.token && ((r += "&c=" + encodeURIComponent(e.token)), (r += "&cs=" + e.availableClientSequence), (r += "&ss=" + e.lastServerSequence)),
                                    t.properties && (r += "&sp=" + encodeURIComponent(JSON.stringify(t.properties))),
                                    void 0 !== t.principal && ((r += "&username=" + encodeURIComponent(t.principal)), (r += "&password=" + encodeURIComponent(Bh.encodeAsString(t.credentials)))),
                                    r
                                );
                            })(t, this.opts);
                            (this.socket = void 0 === this.opts.httpProxyAgent ? new this.ws(i) : new this.ws(i, { agent: this.opts.httpProxyAgent })), r.debug("Created websocket", i);
                        } catch (e) {
                            throw new Error("Unable to construct WebSocket " + e);
                        }
                        (this.socket.binaryType = "arraybuffer"),
                            (this.socket.onmessage = function (t) {
                                (o.socket.onmessage = o.handler.bind(o)),
                                    (o.socket.onerror = function (e) {
                                        o.emitter.error(e);
                                    }),
                                    n(e.from(t.data));
                            }),
                            (this.socket.onclose = function (e) {
                                o.emitter.close(e);
                            }),
                            (this.socket.onerror = function (e) {
                                o.emitter.close(e);
                            });
                    }),
                    (o.prototype.dispatch = function (e) {
                        r.debug("Sending websocket message", e);
                        try {
                            return this.socket.send(e), !0;
                        } catch (e) {
                            return r.error("Websocket send error", e), !1;
                        }
                    }),
                    (o.prototype.close = function () {
                        return r.debug("Closing websocket"), void 0 !== this.socket && this.socket.close(1e3), this;
                    }),
                    o
                );
            })(wf.StreamImpl);
            qh.WSTransport = n;
        }.call(this));
    }.call(this, u({}).Buffer));
    var Uh = {};
    Object.defineProperty(Uh, "__esModule", { value: !0 }), (Uh.Queue = void 0);
    var kh = (function () {
        function e() {
            this.messages = [];
        }
        return (
            (e.prototype.length = function () {
                return this.messages.length;
            }),
            (e.prototype.add = function (e) {
                this.messages.push(e);
            }),
            (e.prototype.drain = function () {
                return this.messages.splice(0, this.messages.length);
            }),
            (e.prototype.isEmpty = function () {
                return 0 === this.messages.length;
            }),
            e
        );
    })();
    Uh.Queue = kh;
    var Vh = {};
    (function (e) {
        (function () {
            "use strict";
            var t =
                    (this && this.__extends) ||
                    (function () {
                        var e = function (t, r) {
                            return (e =
                                Object.setPrototypeOf ||
                                ({ __proto__: [] } instanceof Array &&
                                    function (e, t) {
                                        e.__proto__ = t;
                                    }) ||
                                function (e, t) {
                                    for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                                })(t, r);
                        };
                        return function (t, r) {
                            if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                            function n() {
                                this.constructor = t;
                            }
                            e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                        };
                    })(),
                r =
                    (this && this.__values) ||
                    function (e) {
                        var t = "function" == typeof Symbol && Symbol.iterator,
                            r = t && e[t],
                            n = 0;
                        if (r) return r.call(e);
                        if (e && "number" == typeof e.length)
                            return {
                                next: function () {
                                    return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
                                },
                            };
                        throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
                    };
            Object.defineProperty(Vh, "__esModule", { value: !0 }), (Vh.XHRTransport = void 0);
            var n = yu.create("XHR transport");
            var o = (function (o) {
                function i(e, t) {
                    var r = this,
                        n = gf.Emitter.create();
                    return (
                        ((r = o.call(this, n) || this).emitter = n.emitter(r)),
                        (r.opts = e),
                        (r.protocolVersion = null),
                        (r.pollSequence = 0),
                        (r.pingSequence = 0),
                        (r.pollRequest = null),
                        (r.aborted = !1),
                        (r.isSending = !1),
                        (r.queue = new Uh.Queue()),
                        (r.xhr = t),
                        r
                    );
                }
                return (
                    t(i, o),
                    (i.prototype.connect = function (t, r) {
                        var o = this;
                        try {
                            var i = (function (e, t) {
                                var r = (t.secure ? "https" : "http") + "://" + t.host + ":" + t.port + t.path,
                                    n = { m: "0", ty: "B", ca: e.capabilities, r: t.reconnect.timeout, v: e.version };
                                return (
                                    void 0 !== e.token && ((n.c = e.token), (n.cs = e.availableClientSequence), (n.ss = e.lastServerSequence)),
                                    t.properties && (n.sp = encodeURIComponent(JSON.stringify(t.properties))),
                                    void 0 !== t.principal && ((n.username = encodeURIComponent(t.principal)), (n.password = Bh.encodeAsString(t.credentials))),
                                    { uri: r, headers: n }
                                );
                            })(t, this.opts);
                            (this.protocolVersion = i.headers.v), (this.URI = i.uri);
                            var s = this.createRequest(i.headers, i.uri);
                            n.debug("Created XHR", i.uri),
                                (s.onreadystatechange = function () {
                                    if (4 === s.readyState)
                                        if (200 === s.status) {
                                            var t = s.responseText,
                                                i = r(e.from(t, "binary"));
                                            if (!i) return;
                                            o.token = i.token;
                                            var a = i.response;
                                            Qf.isSuccess(a) ? o.poll() : (n.debug(a.id + " - " + a.message), o.emitter.close());
                                        } else o.emitter.close();
                                }),
                                s.send(null);
                        } catch (e) {
                            throw new Error("Unable to create polling transport " + e);
                        }
                    }),
                    (i.prototype.close = function () {
                        return n.trace("Closing XHR transport"), this.pollRequest && ((this.aborted = !0), this.pollRequest.abort()), (this.queue = new Uh.Queue()), this.emitter.close(), this;
                    }),
                    (i.prototype.createRequest = function (e, t) {
                        var o,
                            i,
                            s = new this.xhr();
                        s.open("POST", t, !0), s.overrideMimeType("text/plain; charset=x-user-defined");
                        try {
                            for (var a = r(Object.getOwnPropertyNames(e)), u = a.next(); !u.done; u = a.next()) {
                                var c = u.value;
                                try {
                                    s.setRequestHeader(c, e[c]);
                                } catch (t) {
                                    n.warn("Can't set header " + c + ":" + e.join(":"));
                                }
                            }
                        } catch (e) {
                            o = { error: e };
                        } finally {
                            try {
                                u && !u.done && (i = a.return) && i.call(a);
                            } finally {
                                if (o) throw o.error;
                            }
                        }
                        return s;
                    }),
                    (i.prototype.poll = function () {
                        var t = this,
                            r = this.createRequest({ m: "1", c: this.token, s: this.pollSequence++, v: this.protocolVersion }, this.URI);
                        (r.onreadystatechange = function () {
                            if (4 === r.readyState)
                                if ("reconnect" === r.getResponseHeader("diffusion-connection")) t.emitter.close();
                                else if (200 === r.status) {
                                    t.aborted || t.poll();
                                    for (var n = r.responseText, o = new _u.BufferInputStream(e.from(n, "base64")); o.pos !== o.count; ) {
                                        var i = o.readInt32();
                                        if (i > t.opts.maxMessageSize) return void t.emitter.error(new Error("Received message of size: " + i + ", exceeding max message size: " + t.opts.maxMessageSize));
                                        var s = o.read(),
                                            a = o.readMany(i),
                                            u = e.alloc(a.length + 1);
                                        u.writeUInt8(s, 0), a.copy(u, 1), t.emitter.emit("data", u);
                                    }
                                } else t.emitter.close();
                        }),
                            (this.pollRequest = r),
                            r.send(null);
                    }),
                    (i.prototype.dispatch = function (e) {
                        return !this.aborted && (this.queue.add(e), !!this.isSending || void this.flush());
                    }),
                    (i.prototype.flush = function () {
                        var e = this;
                        if (!this.queue.isEmpty()) {
                            var t = (function (e) {
                                    var t,
                                        n,
                                        o = new wu.BufferOutputStream();
                                    try {
                                        for (var i = r(e), s = i.next(); !s.done; s = i.next()) {
                                            var a = s.value;
                                            o.writeInt32(a.length - 1), o.writeMany(a, 0, a.length);
                                        }
                                    } catch (e) {
                                        t = { error: e };
                                    } finally {
                                        try {
                                            s && !s.done && (n = i.return) && n.call(i);
                                        } finally {
                                            if (t) throw t.error;
                                        }
                                    }
                                    return o.getBuffer();
                                })(this.queue.drain()),
                                n = this.createRequest({ m: "2", c: this.token, s: this.pingSequence++, v: this.protocolVersion }, this.URI);
                            (n.onreadystatechange = function () {
                                4 === n.readyState && ("reconnect" === n.getResponseHeader("diffusion-connection") ? e.emitter.close() : 200 === n.status ? ((e.isSending = !1), e.flush()) : e.emitter.close());
                            }),
                                (this.isSending = !0),
                                n.send(t.toString("base64"));
                        }
                    }),
                    i
                );
            })(wf.StreamImpl);
            Vh.XHRTransport = o;
        }.call(this));
    }.call(this, u({}).Buffer));
    var Fh = {},
        Gh =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })(),
        Hh =
            (this && this.__assign) ||
            function () {
                return (Hh =
                    Object.assign ||
                    function (e) {
                        for (var t, r = 1, n = arguments.length; r < n; r++) for (var o in (t = arguments[r])) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);
                        return e;
                    }).apply(this, arguments);
            },
        Yh =
            (this && this.__read) ||
            function (e, t) {
                var r = "function" == typeof Symbol && e[Symbol.iterator];
                if (!r) return e;
                var n,
                    o,
                    i = r.call(e),
                    s = [];
                try {
                    for (; (void 0 === t || t-- > 0) && !(n = i.next()).done; ) s.push(n.value);
                } catch (e) {
                    o = { error: e };
                } finally {
                    try {
                        n && !n.done && (r = i.return) && r.call(i);
                    } finally {
                        if (o) throw o.error;
                    }
                }
                return s;
            },
        Wh =
            (this && this.__spreadArray) ||
            function (e, t) {
                for (var r = 0, n = t.length, o = e.length; r < n; r++, o++) e[o] = t[r];
                return e;
            };
    Object.defineProperty(Fh, "__esModule", { value: !0 }), (Fh.Transports = void 0);
    var Qh = yu.create("Cascading"),
        zh = Object.freeze({ WS: qh.WSTransport, XHR: Vh.XHRTransport, WEBSOCKET: qh.WSTransport, HTTP_POLLING: Vh.XHRTransport });
    function Kh(e, t, r) {
        var n = zh[r],
            o = e[r];
        if (n && o && o.enabled) return new n(t, o.factory, o.allowsOptions);
        throw new Error("Unknown transport name: " + r);
    }
    var Jh = (function (e) {
            function t(t, r, n, o) {
                var i = this,
                    s = gf.Emitter.create();
                return (
                    ((i = e.call(this, s) || this).emitter = s.emitter(i)),
                    (i.transports = n),
                    (i.remainingTransports = Wh([], Yh(n))),
                    (i.cascadeNotifications = o),
                    (i.name = null),
                    (i.req = null),
                    (i.responseReceived = !1),
                    (i.transportFactory = Kh.bind(null, t, r)),
                    (i.transport = i.selectTransport()),
                    (i.onData = i.onData.bind(i)),
                    (i.onClose = i.onClose.bind(i)),
                    (i.onError = i.onError.bind(i)),
                    (i.onConnectionResponse = i.onConnectionResponse.bind(i)),
                    (i.onParsingError = i.onParsingError.bind(i)),
                    (i.retryStrategy = Hh({}, r.retry)),
                    i
                );
            }
            return (
                Gh(t, e),
                (t.prototype.onData = function (e) {
                    this.emitter.immediate("data", e);
                }),
                (t.prototype.onClose = function (e) {
                    (!this.responseReceived && this.cascade(!0)) || this.emitter.emit("close", e);
                }),
                (t.prototype.onError = function (e) {
                    this.emitter.emit("error", e);
                }),
                (t.prototype.onConnectionResponse = function (e) {
                    return (
                        (this.responseReceived = !0),
                        (function (e) {
                            return e === Qf.responseCodes.ERROR;
                        })(e.response) && this.cascade()
                            ? null
                            : this.onHandshakeSuccess(e)
                    );
                }),
                (t.prototype.onParsingError = function (e) {
                    (this.responseReceived = !0), this.cascade() || this.onHandshakeError(e);
                }),
                (t.prototype.closeQuietly = function () {
                    this.transport && (this.transport.off("data", this.onData), this.transport.off("close", this.onClose), this.transport.off("error", this.onError), this.transport.close(), (this.transport = null));
                }),
                (t.prototype.selectTransport = function (e) {
                    return (
                        void 0 === e && (e = !1),
                        0 === this.remainingTransports.length
                            ? ((this.name = null),
                              (this.transport = null),
                              Qh.debug("Transports exhausted"),
                              this.retryStrategy.attempts <= 0 && (this.cascadeNotifications.emit("transports-exhausted"), e || this.emitter.emit("close")),
                              null)
                            : ((this.name = this.remainingTransports.shift()),
                              (this.transport = this.transportFactory(this.name)),
                              Qh.debug("Selecting transport", this.name),
                              this.cascadeNotifications.emit("transport-selected", this.name),
                              this.transport)
                    );
                }),
                (t.prototype.internalConnect = function () {
                    if (null === this.transport) throw new Error("Unable to connect when no transport is set");
                    (this.responseReceived = !1),
                        Qh.debug("Attempting to connect"),
                        this.cascadeNotifications.emit("cascading-connect"),
                        this.transport.on("data", this.onData),
                        this.transport.on("close", this.onClose),
                        this.transport.on("error", this.onError);
                    try {
                        this.transport.connect(this.req, Ch.connectionResponse.bind(null, this.onConnectionResponse, this.onParsingError));
                    } catch (e) {
                        if (!this.cascade()) throw e;
                    }
                    return !0;
                }),
                (t.prototype.cascade = function (e) {
                    var t = this;
                    return (
                        this.closeQuietly(),
                        this.selectTransport(e)
                            ? (this.cascadeNotifications.emit("cascade"), this.internalConnect())
                            : !(--this.retryStrategy.attempts < 0) &&
                              ((this.remainingTransports = Wh([], Yh(this.transports))),
                              !!this.selectTransport(e) &&
                                  (setTimeout(function () {
                                      t.cascadeNotifications.emit("cascade"), t.internalConnect();
                                  }, this.retryStrategy.interval),
                                  !0))
                    );
                }),
                (t.prototype.connect = function (e, t, r) {
                    (this.req = e), (this.onHandshakeSuccess = t), (this.onHandshakeError = r), this.internalConnect();
                }),
                (t.prototype.dispatch = function (e) {
                    if (null === this.transport) throw new Error("Unable to send message when no transport is set");
                    this.transport.dispatch(e);
                }),
                (t.prototype.close = function () {
                    return null !== this.transport && ((this.responseReceived = !0), this.transport.close(), (this.transport = null)), this;
                }),
                t
            );
        })(wf.StreamImpl),
        $h = (function (e) {
            function t(t) {
                var r = this,
                    n = gf.Emitter.create();
                return ((r = e.call(this, n) || this).emitter = n.emitter(r)), (r.subtransports = t), r;
            }
            return (
                Gh(t, e),
                (t.create = function (e) {
                    return new t(e || Ah.Subtransports);
                }),
                (t.prototype.get = function (e) {
                    var t,
                        r,
                        n =
                            ((t = e.transports),
                            (r = this.subtransports),
                            t.filter(function (e) {
                                return e && zh.hasOwnProperty(e) && r[e].enabled;
                            }));
                    return 0 === n.length ? (Qh.warn("No valid transports found"), null) : new Jh(this.subtransports, e, n, this.emitter);
                }),
                t
            );
        })(wf.StreamImpl);
    Fh.Transports = $h;
    var Xh = {},
        Zh =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Xh, "__esModule", { value: !0 }), (Xh.FSM = void 0);
    var ed = (function (e) {
        function t(t, r) {
            var n = this,
                o = gf.Emitter.create();
            return ((n = e.call(this, o) || this).emitter = o.emitter(n)), (n.states = r), (n.current = r[t]), (n.state = t), n;
        }
        return (
            Zh(t, e),
            (t.prototype.change = function (e) {
                return this.state === e || (!(!this.states[e] || !("*" === this.current || this.current.indexOf(e) > -1)) && (this.emitter.emit("change", this.state, e), (this.current = this.states[e]), (this.state = e), !0));
            }),
            t
        );
    })(wf.StreamImpl);
    Xh.FSM = ed;
    var td = {};
    Object.defineProperty(td, "__esModule", { value: !0 }), (td.version = void 0), (td.version = "6.9.0");
    var rd = {};
    Object.defineProperty(rd, "__esModule", { value: !0 }),
        (rd.CloseReasonEnum = void 0),
        (rd.CloseReasonEnum = {
            CLOSED_BY_CLIENT: new zu.CloseReasonImpl(0, "The session was closed by the client", !1),
            CLOSED_BY_SERVER: new zu.CloseReasonImpl(1, "The session was closed by the server", !1),
            RECONNECT_ABORTED: new zu.CloseReasonImpl(2, "Client aborted a reconnect attempt", !1),
            CONNECTION_TIMEOUT: new zu.CloseReasonImpl(3, "The connection attempt timed out", !1),
            HANDSHAKE_REJECTED: new zu.CloseReasonImpl(4, "The connection handshake was rejected by the server", !1),
            HANDSHAKE_ERROR: new zu.CloseReasonImpl(5, "There was an error parsing the handshake response", !1),
            TRANSPORT_ERROR: new zu.CloseReasonImpl(6, "There was an unexpected error with the connection", !0),
            CONNECTION_ERROR: new zu.CloseReasonImpl(7, "The client could not establish a connection to the server", !0),
            IDLE_CONNECTION: new zu.CloseReasonImpl(8, "The activity monitor detected the connection was idle", !0),
            LOST_MESSAGES: new zu.CloseReasonImpl(16, "Loss of messages has been detected", !1),
            PROTOCOL_VERSION_MISMATCH: new zu.CloseReasonImpl(17, "There was a mismatch in the protocol versions", !1),
            LICENSE_EXCEEDED: new zu.CloseReasonImpl(18, "The license limit was exceeded", !1),
            ACCESS_DENIED: new zu.CloseReasonImpl(99, "The connection attempt was rejected by the server because authentication failed", !1),
        }),
        Ru.enumerize(rd.CloseReasonEnum);
    var nd = {},
        od =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(nd, "__esModule", { value: !0 }), (nd.InternalSessionImpl = void 0);
    var id = i({}),
        sd = ya.InternalSessionState.INITIALISING,
        ad = ya.InternalSessionState.CONNECTING,
        ud = ya.InternalSessionState.CONNECTED,
        cd = ya.InternalSessionState.DISCONNECTED,
        ld = ya.InternalSessionState.RECONNECTING,
        pd = ya.InternalSessionState.CLOSING,
        fd = ya.InternalSessionState.CLOSED,
        hd = yu.create("Internal Session"),
        dd = (function (e) {
            function t(t, r, n, o, i) {
                var s;
                void 0 === i && (i = ha.sessionActivityMonitorFactory);
                var a = this,
                    u = gf.Emitter.create();
                return (
                    ((a = e.call(this, u) || this).emitter = u.emitter(a)),
                    (a.version = td.version),
                    (a.principal = ""),
                    (a.conversationSetFactory = t),
                    (a.conversationSet = t()),
                    (a.serviceRegistry = r),
                    (a.opts = o),
                    (a.sessionActivityMonitorFactory = i),
                    (a.fsm = new Xh.FSM(sd, (((s = {})[sd] = [ad]), (s[ad] = [ud, pd]), (s[ud] = [cd, pd, fd]), (s[cd] = [ld, pd]), (s[ld] = [ud, pd]), (s[pd] = [fd]), (s[fd] = []), s))),
                    a.fsm.on("change", function (e, t) {
                        hd.debug("State changed: " + e + " -> " + t);
                    }),
                    (a.transports = Fh.Transports.create()),
                    a.transports.on({
                        "transport-selected": function (e) {
                            a.emitter.emit("transport-selected", e);
                        },
                        cascade: function () {
                            a.emitter.emit("cascade");
                        },
                    }),
                    (a.connection = n(a.transports, a.opts.reconnect.timeout, 256)),
                    (a.serviceAdapter = new Cu.ServiceAdapter(a, function (e) {
                        a.connection.send(e);
                    })),
                    (a.serviceLocator = new Mu.ServiceLocatorImpl(a, a.serviceAdapter)),
                    (a.topicCache = new ph.TopicCache(id.DataTypes)),
                    (a.topicStreamRegistry = new $f.StreamRegistryImpl(a.topicCache)),
                    (a.topicRouting = new yh.TopicRouting(a, a.serviceAdapter, a.conversationSet, a.topicCache, a.topicStreamRegistry)),
                    a.serviceRegistry.addListener(a.serviceAdapter.addService.bind(a.serviceAdapter)),
                    void 0 !== Uf.InternalSessionLocks && (a.sessionLocksFeature = new Uf.InternalSessionLocks(a, a.fsm)),
                    (a.attempts = 0),
                    a
                );
            }
            return (
                od(t, e),
                Object.defineProperty(t.prototype, "sessionLocks", {
                    get: function () {
                        if (void 0 === this.sessionLocksFeature) {
                            if (void 0 === Uf.InternalSessionLocks) throw new Error("Session Locks feature has not been loaded");
                            this.sessionLocksFeature = new Uf.InternalSessionLocks(this, this.fsm);
                        }
                        return this.sessionLocksFeature;
                    },
                    enumerable: !1,
                    configurable: !0,
                }),
                (t.prototype.getOptions = function () {
                    return this.opts;
                }),
                (t.prototype.getState = function () {
                    return this.fsm.state;
                }),
                (t.prototype.onStateChange = function (e) {
                    this.fsm.on("change", e);
                }),
                (t.prototype.getConversationSet = function () {
                    return this.conversationSet;
                }),
                (t.prototype.isConnected = function () {
                    return this.fsm.state === ud;
                }),
                (t.prototype.getServiceRegistry = function () {
                    return this.serviceRegistry;
                }),
                (t.prototype.getSessionId = function () {
                    return this.sessionID;
                }),
                (t.prototype.getServerMaximumMessageSize = function () {
                    return this.serverMaximumMessageSize;
                }),
                (t.prototype.checkConnected = function (e) {
                    return !!this.isConnected() || (e(new Error("The session is not connected. Operations are not possible at this time.")), !1);
                }),
                (t.prototype.internalClose = function (e) {
                    this.fsm.change(fd) ? (this.topicStreamRegistry.close(), this.conversationSet.discardAll(e), this.emitter.close(e)) : hd.debug("Unable to handle session close, session state: ", this.fsm.state);
                }),
                (t.prototype.reconnect = function (e, t) {
                    if (this.fsm.change(ld)) {
                        hd.info("Reconnect attempt (" + ++this.attempts + ")");
                        var r = Yf.reconnect(t, this.connection.getAvailableSequence(), this.connection.lastReceivedSequence);
                        this.connection.connect(r, e, e.reconnect.timeout);
                    } else hd.debug("Unable to attempt reconnect, session state: ", this.fsm.state);
                }),
                (t.prototype.abort = function (e) {
                    void 0 === e && (e = rd.CloseReasonEnum.RECONNECT_ABORTED), this.fsm.change(pd) ? (hd.debug("Aborting reconnect"), this.internalClose(e)) : hd.debug("Unable to abort reconnect, session state: ", this.fsm.state);
                }),
                (t.prototype.replaceConversationSet = function (e) {
                    var t = this.conversationSet;
                    (this.conversationSet = this.conversationSetFactory()), t.discardAll(e), hd.debug("Replaced conversation set", e);
                }),
                (t.prototype.connect = function () {
                    var e = this;
                    if (this.fsm.change(ad)) {
                        var t,
                            r = Yf.connect();
                        this.connection.on("data", this.topicRouting.route.bind(this.topicRouting)),
                            this.connection.on("close", this.internalClose.bind(this)),
                            (this.sessionActivityMonitor = this.opts.activityMonitor ? this.sessionActivityMonitorFactory.create(pa.connectionActivityMonitorFactory) : this.sessionActivityMonitorFactory.NOOP),
                            this.connection.on("disconnect", function (r) {
                                hd.debug("Connection disconnected, reason: ", r),
                                    e.fsm.change(cd) || e.fsm.state === ld
                                        ? (e.sessionActivityMonitor.onConnectionClosed(),
                                          e.opts.reconnect.timeout > 0 && r.canReconnect
                                              ? (e.fsm.state === cd &&
                                                    (e.emitter.emit("disconnect", r),
                                                    (t = setTimeout(function () {
                                                        e.fsm.state !== ud && e.abort(rd.CloseReasonEnum.CONNECTION_TIMEOUT);
                                                    }, e.opts.reconnect.timeout))),
                                                e.opts.reconnect.strategy(e.reconnect.bind(e, e.opts, e.token), e.abort.bind(e), r))
                                              : e.abort(r))
                                        : e.fsm.change(pd)
                                        ? e.internalClose(r)
                                        : (e.sessionActivityMonitor.onConnectionClosed(), hd.debug("Unable to handle session disconnect, session state: ", e.fsm.state));
                            }),
                            this.connection.on("connect", function (r) {
                                e.fsm.change(ud)
                                    ? ((e.token = r.token),
                                      r.response === Qf.responseCodes.OK
                                          ? ((e.sessionID = r.identity), (e.serverMaximumMessageSize = r.maximumMessageSize), e.sessionActivityMonitor.onNewConnection(e.connection, r), e.emitter.emit("connect", r.identity))
                                          : (r.response !== Qf.responseCodes.RECONNECTED && r.response !== Qf.responseCodes.RECONNECTED_WITH_MESSAGE_LOSS) ||
                                            ((e.attempts = 0),
                                            clearTimeout(t),
                                            r.response === Qf.responseCodes.RECONNECTED_WITH_MESSAGE_LOSS
                                                ? (e.connection.resetSequences(),
                                                  e.replaceConversationSet(new Error("Peer is disconnected")),
                                                  e.topicCache.notifyUnsubscriptionOfAllTopics(e.topicStreamRegistry),
                                                  hd.info("Reconnected session, but messages may have been lost"))
                                                : hd.info("Reconnected session"),
                                            e.sessionActivityMonitor.onNewConnection(e.connection, r),
                                            e.emitter.emit("reconnect")))
                                    : hd.trace("Unknown connection response: ", r);
                            }),
                            hd.debug("Connecting with options:", this.opts),
                            hd.trace("Connecting with request:", r);
                        try {
                            this.connection.connect(r, this.opts, this.opts.connectionTimeout);
                        } catch (e) {
                            hd.warn("Connection error", e), this.emitter.emit("error", e), this.fsm.change(pd) && this.internalClose(rd.CloseReasonEnum.CONNECTION_ERROR);
                        }
                        this.opts.principal && (this.principal = this.opts.principal);
                    } else hd.warn("Unable to connect, session state: ", this.fsm.state), this.emitter.emit("error", new Error("Unable to connect, session state: " + this.fsm.state));
                }),
                (t.prototype.close = function () {
                    return this.fsm.change(pd) ? (this.sessionActivityMonitor.onConnectionClosed(), this.connection.close(rd.CloseReasonEnum.CLOSED_BY_CLIENT)) : hd.debug("Unable to close, session state: ", this.fsm.state), this;
                }),
                (t.prototype.getErrorHandler = function () {
                    return function (e) {
                        hd.error("Session error:", e.message);
                    };
                }),
                (t.prototype.getServiceLocator = function () {
                    return this.serviceLocator;
                }),
                (t.prototype.getServiceAdapter = function () {
                    return this.serviceAdapter;
                }),
                (t.prototype.getPrincipal = function () {
                    return this.principal;
                }),
                (t.prototype.setPrincipal = function (e) {
                    this.principal = e;
                }),
                (t.prototype.getStreamRegistry = function () {
                    return this.topicStreamRegistry;
                }),
                (t.prototype.getRouting = function () {
                    return this.topicRouting;
                }),
                (t.prototype.onSystemPing = function () {
                    this.sessionActivityMonitor.onSystemPing();
                }),
                (t.prototype.lock = function (e, t, r) {
                    return this.sessionLocks.lock(e, t, r);
                }),
                (t.prototype.unlock = function (e) {
                    return this.sessionLocks.unlock(e);
                }),
                (t.prototype.isShared = function () {
                    return !1;
                }),
                (t.prototype.getContext = function () {
                    return Sf.sessionContext;
                }),
                (t.prototype.updateFeatures = function () {
                    void 0 === this.sessionLocks && void 0 !== Uf.InternalSessionLocks && (this.sessionLocks = new Uf.InternalSessionLocks(this, this.fsm));
                }),
                t
            );
        })(wf.StreamImpl);
    nd.InternalSessionImpl = dd;
    var yd = {};
    Object.defineProperty(yd, "__esModule", { value: !0 }), (yd.ServiceRegistryImpl = void 0);
    var vd = (function () {
        function e() {
            (this.services = new Map()), (this.listeners = []);
        }
        return (
            (e.prototype.add = function (e, t) {
                if (this.services.has(e)) throw new Error("Service already exists for " + e);
                this.services.set(e, t),
                    this.listeners.forEach(function (r) {
                        r(e, t);
                    });
            }),
            (e.prototype.addListener = function (e) {
                this.listeners.push(e),
                    this.services.forEach(function (t, r) {
                        e(r, t);
                    });
            }),
            e
        );
    })();
    yd.ServiceRegistryImpl = vd;
    var Sd = {};
    Object.defineProperty(Sd, "__esModule", { value: !0 }),
        (Sd.monitoredPingService = void 0),
        (Sd.monitoredPingService = {
            onRequest: function (e, t, r) {
                r.respond(), e.onSystemPing();
            },
        });
    var _d = {};
    Object.defineProperty(_d, "__esModule", { value: !0 }),
        (_d.notifySubscriptionService = void 0),
        (_d.notifySubscriptionService = {
            onRequest: function (e, t, r) {
                r.respond(), e.getRouting().subscribe(t);
            },
        });
    var Ed = {};
    Object.defineProperty(Ed, "__esModule", { value: !0 }),
        (Ed.notifyUnsubscriptionService = void 0),
        (Ed.notifyUnsubscriptionService = {
            onRequest: function (e, t, r) {
                r.respond(), e.getRouting().unsubscribe(t.id, t.reason);
            },
        });
    var wd = {};
    Object.defineProperty(wd, "__esModule", { value: !0 }),
        (wd.pingService = void 0),
        (wd.pingService = {
            onRequest: function (e, t, r) {
                r.respond();
            },
        });
    var md = {},
        Td =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })(),
        gd =
            (this && this.__awaiter) ||
            function (e, t, r, n) {
                return new (r || (r = Promise))(function (o, i) {
                    function s(e) {
                        try {
                            u(n.next(e));
                        } catch (e) {
                            i(e);
                        }
                    }
                    function a(e) {
                        try {
                            u(n.throw(e));
                        } catch (e) {
                            i(e);
                        }
                    }
                    function u(e) {
                        var t;
                        e.done
                            ? o(e.value)
                            : ((t = e.value),
                              t instanceof r
                                  ? t
                                  : new r(function (e) {
                                        e(t);
                                    })).then(s, a);
                    }
                    u((n = n.apply(e, t || [])).next());
                });
            },
        Od =
            (this && this.__generator) ||
            function (e, t) {
                var r,
                    n,
                    o,
                    i,
                    s = {
                        label: 0,
                        sent: function () {
                            if (1 & o[0]) throw o[1];
                            return o[1];
                        },
                        trys: [],
                        ops: [],
                    };
                return (
                    (i = { next: a(0), throw: a(1), return: a(2) }),
                    "function" == typeof Symbol &&
                        (i[Symbol.iterator] = function () {
                            return this;
                        }),
                    i
                );
                function a(i) {
                    return function (a) {
                        return (function (i) {
                            if (r) throw new TypeError("Generator is already executing.");
                            for (; s; )
                                try {
                                    if (((r = 1), n && (o = 2 & i[0] ? n.return : i[0] ? n.throw || ((o = n.return) && o.call(n), 0) : n.next) && !(o = o.call(n, i[1])).done)) return o;
                                    switch (((n = 0), o && (i = [2 & i[0], o.value]), i[0])) {
                                        case 0:
                                        case 1:
                                            o = i;
                                            break;
                                        case 4:
                                            return s.label++, { value: i[1], done: !1 };
                                        case 5:
                                            s.label++, (n = i[1]), (i = [0]);
                                            continue;
                                        case 7:
                                            (i = s.ops.pop()), s.trys.pop();
                                            continue;
                                        default:
                                            if (!((o = s.trys), (o = o.length > 0 && o[o.length - 1]) || (6 !== i[0] && 2 !== i[0]))) {
                                                s = 0;
                                                continue;
                                            }
                                            if (3 === i[0] && (!o || (i[1] > o[0] && i[1] < o[3]))) {
                                                s.label = i[1];
                                                break;
                                            }
                                            if (6 === i[0] && s.label < o[1]) {
                                                (s.label = o[1]), (o = i);
                                                break;
                                            }
                                            if (o && s.label < o[2]) {
                                                (s.label = o[2]), s.ops.push(i);
                                                break;
                                            }
                                            o[2] && s.ops.pop(), s.trys.pop();
                                            continue;
                                    }
                                    i = t.call(e, s);
                                } catch (e) {
                                    (i = [6, e]), (n = 0);
                                } finally {
                                    r = o = 0;
                                }
                            if (5 & i[0]) throw i[1];
                            return { value: i[0] ? i[1] : void 0, done: !0 };
                        })([i, a]);
                    };
                }
            },
        Id =
            (this && this.__values) ||
            function (e) {
                var t = "function" == typeof Symbol && Symbol.iterator,
                    r = t && e[t],
                    n = 0;
                if (r) return r.call(e);
                if (e && "number" == typeof e.length)
                    return {
                        next: function () {
                            return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
                        },
                    };
                throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
            };
    Object.defineProperty(md, "__esModule", { value: !0 }), (md.create = md.ConversationSet = md.Result = void 0);
    var Rd,
        bd = (function () {
            var e = new _a(0);
            return function () {
                return gd(void 0, void 0, void 0, function () {
                    return Od(this, function (t) {
                        return (e = e.add(1)), [2, new Ga.ConversationId(e)];
                    });
                });
            };
        })();
    !(function (e) {
        (e[(e.ALREADY_FINISHED = 0)] = "ALREADY_FINISHED"), (e[(e.HANDLED_AND_ACTIVE = 1)] = "HANDLED_AND_ACTIVE"), (e[(e.HANDLED_AND_FINISHED = 2)] = "HANDLED_AND_FINISHED");
    })((Rd = md.Result || (md.Result = {})));
    var Cd = yu.create("Conversation Set"),
        Pd = (function (e) {
            function t(t) {
                var r = e.call(this, t) || this;
                return (r.name = "NoSuchConversationError"), r;
            }
            return Td(t, e), t;
        })(Error),
        Nd = (function () {
            function e(e, t) {
                (this.reserved = !1), (this.closed = !1), (this.handler = e), (this.completedExceptionally = t);
            }
            return (
                (e.prototype.open = function (e) {
                    this.handler.onOpen(e);
                }),
                (e.prototype.respond = function (e, t) {
                    if (this.closed) return Rd.ALREADY_FINISHED;
                    var r,
                        n = this.reserved;
                    this.reserved = !0;
                    try {
                        r = this.handler.onResponse(e, t);
                    } catch (t) {
                        throw (this.completedExceptionally(e, this, t), t);
                    }
                    return this.closed
                        ? (Cd.debug("Conversation already closed", e), Rd.HANDLED_AND_FINISHED)
                        : r
                        ? (Cd.debug("Response handler closed conversation", e), (this.closed = !0), Rd.HANDLED_AND_FINISHED)
                        : this.pendingDiscard
                        ? (Cd.debug("Conversation closed with pending reason", e), this.notifyDiscard(e, this.pendingDiscard), Rd.HANDLED_AND_FINISHED)
                        : ((this.reserved = n), Rd.HANDLED_AND_ACTIVE);
                }),
                (e.prototype.discard = function (e, t) {
                    this.reserved ? (this.pendingDiscard = t) : this.notifyDiscard(e, t);
                }),
                (e.prototype.close = function () {
                    this.closed = !0;
                }),
                (e.prototype.notifyDiscard = function (e, t) {
                    if (!this.closed) {
                        this.closed = !0;
                        try {
                            this.handler.onDiscard(e, t);
                        } catch (t) {
                            throw (Cd.error("Application handler threw exception [cid=" + e + "]", t.stack), t);
                        }
                    }
                }),
                e
            );
        })(),
        Ad = (function () {
            function e(e) {
                (this.nextCID = e), (this.conversations = {});
            }
            return (
                (e.prototype.completedExceptionally = function (e, t, r) {
                    Cd.debug("Application handler threw exception [cid=" + e + "]", r.stack), t.close(), delete this.conversations[e.toString()];
                }),
                (e.prototype.newConversation = function (e) {
                    return gd(this, void 0, void 0, function () {
                        var t, r;
                        return Od(this, function (n) {
                            switch (n.label) {
                                case 0:
                                    return (t = new Nd(e, this.completedExceptionally.bind(this))), [4, this.nextCID()];
                                case 1:
                                    (r = n.sent()), (this.conversations[r.toString()] = t);
                                    try {
                                        t.open(r);
                                    } catch (e) {
                                        throw (this.completedExceptionally(r, t, e), e);
                                    }
                                    return void 0 !== this.discardReason && this.discard(r, this.discardReason), [2, r];
                            }
                        });
                    });
                }),
                (e.prototype.respond = function (e, t) {
                    var r = this.conversations[e.toString()];
                    if (void 0 === r) throw (Cd.debug("No conversation for cid: " + e + ", response: ", t), new Pd("No such conversation"));
                    switch (r.respond(e, t)) {
                        case Rd.ALREADY_FINISHED:
                            throw new Pd("No such conversation");
                        case Rd.HANDLED_AND_ACTIVE:
                            break;
                        default:
                            delete this.conversations[e.toString()];
                    }
                }),
                (e.prototype.respondIfPresent = function (e, t) {
                    try {
                        this.respond(e, t);
                    } catch (e) {
                        if ("NoSuchConversationError" !== e.name) throw e;
                    }
                }),
                (e.prototype.discard = function (e, t) {
                    var r = this.conversations[e.toString()];
                    delete this.conversations[e.toString()], r && r.discard(e, t);
                }),
                (e.prototype.discardAll = function (e) {
                    var t, r;
                    if (void 0 === this.discardReason) {
                        this.discardReason = e;
                        try {
                            for (var n = Id(Object.keys(this.conversations)), o = n.next(); !o.done; o = n.next()) {
                                var i = o.value;
                                this.discard(Ga.ConversationId.fromString(i), e);
                            }
                        } catch (e) {
                            t = { error: e };
                        } finally {
                            try {
                                o && !o.done && (r = n.return) && r.call(n);
                            } finally {
                                if (t) throw t.error;
                            }
                        }
                    }
                }),
                (e.prototype.size = function () {
                    return Object.keys(this.conversations).length;
                }),
                e
            );
        })();
    (md.ConversationSet = Ad),
        (md.create = function () {
            return new Ad(bd);
        });
    var Md = {};
    Object.defineProperty(Md, "__esModule", { value: !0 }),
        (Md.NullSerialiser = void 0),
        (Md.NullSerialiser = {
            read: function () {
                return null;
            },
            write: function () {},
        });
    var jd = {};
    Object.defineProperty(jd, "__esModule", { value: !0 }),
        (jd.USER_PING = jd.SYSTEM_PING = void 0),
        (jd.SYSTEM_PING = { id: 55, request: Md.NullSerialiser, response: Md.NullSerialiser }),
        (jd.USER_PING = { id: 56, request: Md.NullSerialiser, response: Md.NullSerialiser });
    var Ld = {};
    Object.defineProperty(Ld, "__esModule", { value: !0 }), (Ld.DEFAULT = Ld.ControlGroup = void 0);
    var Dd = function (e) {
        this.name = e;
    };
    (Ld.ControlGroup = Dd), (Ld.DEFAULT = Object.freeze(new Dd("default")));
    var xd = {},
        Bd =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(xd, "__esModule", { value: !0 }), (xd.ControlGroupSerialiser = void 0);
    var qd = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            Bd(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readString(e);
                return new Ld.ControlGroup(t);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.name);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    xd.ControlGroupSerialiser = new qd();
    var Ud = {},
        kd =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Ud, "__esModule", { value: !0 }), (Ud.MessageReceiverControlRegistrationParamsSerialiser = void 0);
    var Vd = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            kd(t, e),
            (t.prototype.write = function (e, t) {
                tu.writeInt32(e, t.definition.id), xd.ControlGroupSerialiser.write(e, t.group), tu.writeString(e, t.path), tu.writeCollection(e, t.keys, tu.writeString);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    Ud.MessageReceiverControlRegistrationParamsSerialiser = new Vd();
    var Fd = {},
        Gd =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Fd, "__esModule", { value: !0 }), (Fd.MessageReceiverControlRegistrationRequestSerialiser = void 0);
    var Hd = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            Gd(t, e),
            (t.prototype.write = function (e, t) {
                Ud.MessageReceiverControlRegistrationParamsSerialiser.write(e, t.params), ru.CIDSerialiser.write(e, t.cid);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    Fd.MessageReceiverControlRegistrationRequestSerialiser = new Hd();
    var Yd = {},
        Wd =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Yd, "__esModule", { value: !0 }), (Yd.TopicControlRegistrationParamsSerialiser = void 0);
    var Qd = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            Wd(t, e),
            (t.prototype.write = function (e, t) {
                tu.writeInt32(e, t.definition.id), xd.ControlGroupSerialiser.write(e, t.group), tu.writeString(e, t.path);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    Yd.TopicControlRegistrationParamsSerialiser = new Qd();
    var zd = {},
        Kd =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(zd, "__esModule", { value: !0 }), (zd.TopicControlRegistrationRequestSerialiser = void 0);
    var Jd = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            Kd(t, e),
            (t.prototype.write = function (e, t) {
                Yd.TopicControlRegistrationParamsSerialiser.write(e, t.params), ru.CIDSerialiser.write(e, t.cid);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    zd.TopicControlRegistrationRequestSerialiser = new Jd();
    var $d = {};
    Object.defineProperty($d, "__esModule", { value: !0 }),
        ($d.write = $d.read = void 0),
        ($d.read = function (e) {
            return tu.readInt32(e);
        }),
        ($d.write = function (e, t) {
            tu.writeInt32(e, t);
        });
    var Xd = {};
    Object.defineProperty(Xd, "__esModule", { value: !0 }), (Xd.UnsubscriptionNotification = void 0);
    var Zd = function (e, t) {
        (this.id = e), (this.reason = t);
    };
    Xd.UnsubscriptionNotification = Zd;
    var ey = {},
        ty =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(ey, "__esModule", { value: !0 }), (ey.UnsubscriptionNotificationSerialiser = void 0);
    var ry = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            ty(t, e),
            (t.prototype.read = function (e) {
                var t = $d.read(e),
                    r = Rf.read(e, Hu.UnsubscribeReasonEnum);
                return new Xd.UnsubscriptionNotification(t, r);
            }),
            (t.prototype.write = function (e, t) {
                if (($d.write(e, t.id), void 0 === t.reason.id)) throw new Error("Cannot serialise UnsubscribeReason ${value.reason.reason}");
                Rf.write(e, t.reason);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    ey.UnsubscriptionNotificationSerialiser = new ry();
    var ny = {};
    Object.defineProperty(ny, "__esModule", { value: !0 }), (ny.TopicSpecificationInfo = void 0);
    var oy = function (e, t, r) {
        (this.id = e), (this.path = t), (this.specification = r);
    };
    ny.TopicSpecificationInfo = oy;
    var iy = {};
    (function (e) {
        (function () {
            "use strict";
            var t, r, n;
            Object.defineProperty(iy, "__esModule", { value: !0 }),
                (iy.write = iy.read = void 0),
                (iy.read = function (o) {
                    if (r && o.buffer.slice(o.pos, o.pos + n).equals(r)) return o.readMany(n), t;
                    var i = o.pos,
                        s = Rf.read(o, ku.TopicTypeEnum),
                        a = tu.readDictionary(o, tu.readString),
                        u = new Bu.TopicSpecification(s, a);
                    return (n = o.pos - i), (r = e.from(o.buffer.slice(i, o.pos))), (t = Object.freeze(u)), u;
                }),
                (iy.write = function (e, t) {
                    Rf.write(e, t.type), tu.writeDictionary(e, t.properties, tu.writeString);
                });
        }.call(this));
    }.call(this, u({}).Buffer));
    var sy = {},
        ay =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(sy, "__esModule", { value: !0 }), (sy.TopicSpecificationInfoSerialiser = void 0);
    var uy = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            ay(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readInt32(e),
                    r = tu.readString(e),
                    n = iy.read(e);
                return new ny.TopicSpecificationInfo(t, r, n);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeInt32(e, t.id), tu.writeString(e, t.path), iy.write(e, t.specification);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    sy.TopicSpecificationInfoSerialiser = new uy();
    var cy = {};
    Object.defineProperty(cy, "__esModule", { value: !0 }),
        (cy.MESSAGING_RECEIVER_CONTROL_DEREGISTRATION = cy.MESSAGING_RECEIVER_CONTROL_REGISTRATION = cy.NOTIFY_SUBSCRIPTION = cy.UNSUBSCRIPTION_NOTIFICATION = cy.TOPIC_CONTROL_DEREGISTRATION = cy.TOPIC_CONTROL_REGISTRATION = void 0),
        (cy.TOPIC_CONTROL_REGISTRATION = { id: 20, request: zd.TopicControlRegistrationRequestSerialiser, response: Md.NullSerialiser }),
        (cy.TOPIC_CONTROL_DEREGISTRATION = { id: 21, request: Yd.TopicControlRegistrationParamsSerialiser, response: Md.NullSerialiser }),
        (cy.UNSUBSCRIPTION_NOTIFICATION = { id: 42, request: ey.UnsubscriptionNotificationSerialiser, response: Md.NullSerialiser }),
        Fd.MessageReceiverControlRegistrationRequestSerialiser,
        Md.NullSerialiser,
        Ud.MessageReceiverControlRegistrationParamsSerialiser,
        Md.NullSerialiser,
        (cy.NOTIFY_SUBSCRIPTION = { id: 87, request: sy.TopicSpecificationInfoSerialiser, response: Md.NullSerialiser }),
        (cy.MESSAGING_RECEIVER_CONTROL_REGISTRATION = { id: 97, request: Fd.MessageReceiverControlRegistrationRequestSerialiser, response: Md.NullSerialiser }),
        (cy.MESSAGING_RECEIVER_CONTROL_DEREGISTRATION = { id: 98, request: Ud.MessageReceiverControlRegistrationParamsSerialiser, response: Md.NullSerialiser });
    var ly = {};
    Object.defineProperty(ly, "__esModule", { value: !0 }), (ly.RecoveryBuffer = void 0);
    function py(e) {
        return e >> 10;
    }
    function fy(e, t) {
        return e & (t - 1);
    }
    var hy = (function () {
        function e(e, t) {
            (this.messagesLength = fc.findNextPowerOfTwo(e)),
                (this.indexCapacity = fc.findNextPowerOfTwo(t)),
                (this.messagesMask = qc.curryR(fy, this.messagesLength)),
                (this.indexMask = qc.curryR(fy, this.indexCapacity)),
                (this.messages = Kf.ofSize(this.messagesLength)),
                (this.indices = Kf.ofSize(this.indexCapacity, -1)),
                (this.times = Kf.ofSize(this.indexCapacity)),
                (this.timesHead = 0),
                (this.timesTail = 0),
                (this.messagesTail = this.messagesMask(0)),
                (this.messagesSize = 0);
        }
        return (
            (e.prototype.size = function () {
                return this.messagesSize;
            }),
            (e.prototype.put = function (e) {
                if (((this.messages[this.messagesTail] = e), (this.messagesTail = this.messagesMask(this.messagesTail + 1)), this.messagesSize < this.messagesLength)) this.messagesSize = this.messagesSize + 1;
                else for (; this.indices[this.timesHead] === this.messagesTail; ) (this.indices[this.timesHead] = -1), (this.timesHead = this.indexMask(this.timesHead + 1));
            }),
            (e.prototype.recover = function (e, t) {
                if (e < 0 || e > this.messagesSize) return !1;
                for (var r = e; r >= 1; --r) t(this.messages[this.messagesMask(this.messagesTail - r)]);
                return !0;
            }),
            (e.prototype.clear = function () {
                Kf.fill(this.messages, null), Kf.fill(this.indices, -1), (this.timesHead = 0), (this.timesTail = 0), (this.messagesSize = 0);
            }),
            (e.prototype.removeElements = function (e) {
                var t,
                    r = this.messagesMask(this.messagesTail - this.messagesSize);
                r < e
                    ? (Kf.fill(this.messages, null, r, e), (t = this.messagesSize - e + r))
                    : r > e
                    ? (Kf.fill(this.messages, null, r, this.messagesLength), Kf.fill(this.messages, null, 0, e), (t = this.messagesSize - r + e))
                    : (Kf.fill(this.messages, null), (t = 0)),
                    (this.messagesSize = t);
            }),
            (e.prototype.markTime = function (e) {
                if (this.messagesSize > 0) {
                    var t = this.timesHead,
                        r = this.timesTail,
                        n = this.indices[t],
                        o = py(e);
                    if (n >= 0) {
                        var i = this.indexMask(r - 1);
                        if (this.indices[i] === this.messagesTail) return;
                        if (this.times[i] === o) return void (this.indices[i] = this.messagesTail);
                    }
                    (this.timesTail = this.indexMask(r + 1)), (this.times[r] = o), (this.indices[r] = this.messagesTail), t === r && n >= 0 && (this.removeElements(n), (this.timesHead = this.timesTail));
                }
            }),
            (e.prototype.flush = function (e) {
                if (!(0 === this.messagesSize || this.indices[this.timesHead] < 0)) {
                    var t = this.timesTail,
                        r = py(e);
                    do {
                        var n = t;
                        if (((t = this.indexMask(t - 1)), this.times[t] <= r))
                            return (
                                this.removeElements(this.indices[t]),
                                this.timesHead <= n ? Kf.fill(this.indices, -1, this.timesHead, n) : (Kf.fill(this.indices, -1, this.timesHead, this.indexCapacity), Kf.fill(this.indices, -1, 0, n)),
                                void (this.timesHead = n)
                            );
                    } while (t !== this.timesHead);
                }
            }),
            e
        );
    })();
    ly.RecoveryBuffer = hy;
    var dy = {};
    (function (e) {
        (function () {
            "use strict";
            var t =
                (this && this.__extends) ||
                (function () {
                    var e = function (t, r) {
                        return (e =
                            Object.setPrototypeOf ||
                            ({ __proto__: [] } instanceof Array &&
                                function (e, t) {
                                    e.__proto__ = t;
                                }) ||
                            function (e, t) {
                                for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                            })(t, r);
                    };
                    return function (t, r) {
                        if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                        function n() {
                            this.constructor = t;
                        }
                        e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                    };
                })();
            Object.defineProperty(dy, "__esModule", { value: !0 }), (dy.Connection = void 0);
            var r = yu.create("Connection"),
                n = e.DIFFUSION_CLOSE_TIMEOUT || 1e3,
                o = e.DIFFUSION_RECOVERY_BUFFER_INDEX_SIZE || 8,
                i = (function (e) {
                    function i(t, n, i) {
                        var s = this,
                            a = gf.Emitter.create();
                        return (
                            ((s = e.call(this, a) || this).emitter = a.emitter(s)),
                            (s.fsm = new Xh.FSM("disconnected", {
                                connecting: ["connected", "disconnected", "closed"],
                                connected: ["disconnecting", "disconnected", "closed"],
                                disconnecting: ["disconnected"],
                                disconnected: ["connecting", "closed"],
                                closed: [],
                            })),
                            (s.transports = t),
                            (s.reconnectTimeout = n),
                            (s.lastSentSequence = 0),
                            (s.lastReceivedSequence = 0),
                            (s.recoveryBuffer = new ly.RecoveryBuffer(i, o)),
                            s.fsm.on("change", function (e, t) {
                                r.debug("State changed: " + e + " -> " + t);
                            }),
                            s
                        );
                    }
                    return (
                        t(i, e),
                        (i.prototype.onData = function (e) {
                            var t = this;
                            r.debug("Received message from transport", e),
                                Iu.parse(e, function (e, n) {
                                    if (!e && n) {
                                        if (n.type === Iu.types.ABORT_NOTIFICATION) return "disconnecting" !== t.fsm.state && (t.closeReason = rd.CloseReasonEnum.CLOSED_BY_SERVER), void t.transport.close();
                                        t.lastReceivedSequence++, t.emitter.emit("data", n);
                                    } else r.warn("Unable to parse message", e), t.fsm.change("closed") && ((t.closeReason = rd.CloseReasonEnum.CONNECTION_ERROR), t.transport.close());
                                });
                        }),
                        (i.prototype.onClose = function () {
                            this.fsm.change("disconnected") || this.fsm.change("closed")
                                ? (clearInterval(this.scheduledRecoveryBufferTrim),
                                  clearTimeout(this.scheduledClose),
                                  r.trace("Transport closed: ", this.closeReason),
                                  "disconnected" === this.fsm.state ? this.emitter.emit("disconnect", this.closeReason) : this.emitter.close(this.closeReason))
                                : r.debug("Unable to disconnect, current state: ", this.fsm.state);
                        }),
                        (i.prototype.onError = function (e) {
                            r.error("Error from transport", e), this.fsm.change("closed") && ((this.closeReason = rd.CloseReasonEnum.TRANSPORT_ERROR), this.transport.close());
                        }),
                        (i.prototype.onHandshakeSuccess = function (e) {
                            if (e.response === Qf.responseCodes.RECONNECTED) {
                                var t = this.lastSentSequence - e.sequence + 1;
                                if (!this.recoveryBuffer.recover(t, this.dispatch.bind(this))) {
                                    var n = this.lastSentSequence - this.recoveryBuffer.size() - e.sequence + 1;
                                    return r.warn("Unable to reconnect due to lost messages (" + n + ")"), this.fsm.change("disconnected") && ((this.closeReason = rd.CloseReasonEnum.LOST_MESSAGES), this.transport.close()), e;
                                }
                                this.recoveryBuffer.clear(), (this.lastSentSequence = e.sequence - 1);
                            }
                            if (e.success && this.fsm.change("connected")) r.trace("Connection response: ", e.response), (this.closeReason = rd.CloseReasonEnum.TRANSPORT_ERROR), this.emitter.emit("connect", e);
                            else {
                                switch ((r.error("Connection failed: ", e.response), e.response)) {
                                    case Qf.responseCodes.AUTHENTICATION_FAILED:
                                        this.closeReason = rd.CloseReasonEnum.ACCESS_DENIED;
                                        break;
                                    case Qf.responseCodes.LICENSE_EXCEEDED:
                                        this.closeReason = rd.CloseReasonEnum.LICENSE_EXCEEDED;
                                        break;
                                    case Qf.responseCodes.DOWNGRADE:
                                        this.closeReason = rd.CloseReasonEnum.PROTOCOL_VERSION_MISMATCH;
                                        break;
                                    default:
                                        this.closeReason = rd.CloseReasonEnum.HANDSHAKE_REJECTED;
                                }
                                this.transport.close();
                            }
                            return clearTimeout(this.scheduledClose), e;
                        }),
                        (i.prototype.onHandshakeError = function (e) {
                            e.reason === gh.DeserialisationErrorReason.PROTOCOL_VERSION_MISMATCH ? (this.closeReason = rd.CloseReasonEnum.PROTOCOL_VERSION_MISMATCH) : (this.closeReason = rd.CloseReasonEnum.HANDSHAKE_ERROR),
                                clearTimeout(this.scheduledClose),
                                r.trace("Unable to deserialise handshake response", e);
                        }),
                        (i.prototype.connect = function (e, t, n) {
                            var o = this;
                            if ("disconnected" === this.fsm.state) {
                                if (this.fsm.change("connecting")) {
                                    if (((this.closeReason = rd.CloseReasonEnum.CONNECTION_ERROR), (this.transport = this.transports.get(t)), null === this.transport)) throw new Error("No valid transports requested");
                                    this.transport.on("data", this.onData.bind(this)),
                                        this.transport.on("close", this.onClose.bind(this)),
                                        this.transport.on("error", this.onError.bind(this)),
                                        this.transport.connect(e, this.onHandshakeSuccess.bind(this), this.onHandshakeError.bind(this)),
                                        (this.scheduledClose = setTimeout(function () {
                                            r.debug("Timed out connection attempt after " + n), (o.closeReason = rd.CloseReasonEnum.CONNECTION_TIMEOUT), o.transport.close();
                                        }, n)),
                                        (this.scheduledRecoveryBufferTrim = setInterval(function () {
                                            "connected" === o.fsm.state && o.recoveryBuffer.flush(Date.now() - o.reconnectTimeout);
                                        }, this.reconnectTimeout));
                                }
                            } else r.warn("Cannot connect, current state: ", this.fsm.state);
                        }),
                        (i.prototype.resetSequences = function () {
                            this.recoveryBuffer.clear(), (this.lastSentSequence = 0), (this.lastReceivedSequence = 0);
                        }),
                        (i.prototype.getAvailableSequence = function () {
                            return this.lastSentSequence + 1 - this.recoveryBuffer.size();
                        }),
                        (i.prototype.dispatch = function (e) {
                            var t = new wu.BufferOutputStream();
                            Iu.writeToBuffer(e, t), (this.lastSentSequence += 1), this.recoveryBuffer.put(e), this.recoveryBuffer.markTime(Date.now()), this.transport.dispatch(t.getBuffer());
                        }),
                        (i.prototype.send = function (e) {
                            return "connected" === this.fsm.state && (this.dispatch(e), !0);
                        }),
                        (i.prototype.close = function (e) {
                            return (
                                (this.closeReason = e),
                                "disconnected" === this.fsm.state
                                    ? this.onClose()
                                    : this.fsm.change("disconnecting") && (this.dispatch(Iu.create(Iu.types.CLOSE_REQUEST)), (this.scheduledClose = setTimeout(this.transport.close.bind(this.transport), n))),
                                this
                            );
                        }),
                        (i.prototype.closeIdleConnection = function () {
                            this.fsm.change("disconnecting") && (r.debug("Connection detected as idle"), (this.closeReason = rd.CloseReasonEnum.IDLE_CONNECTION), this.transport.close());
                        }),
                        (i.prototype.getState = function () {
                            return this.fsm.state;
                        }),
                        i
                    );
                })(wf.StreamImpl);
            dy.Connection = i;
        }.call(this));
    }.call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}));
    var yy = {};
    Object.defineProperty(yy, "__esModule", { value: !0 }),
        (yy.create = void 0),
        (yy.create = function (e, t, r) {
            return new dy.Connection(e, t, r);
        });
    var vy = {};
    Object.defineProperty(vy, "__esModule", { value: !0 }), (vy.BufferSerialiser = void 0);
    var Sy = (function () {
        function e() {}
        return (
            (e.prototype.read = function (e) {
                return e.readMany(e.count - e.pos);
            }),
            (e.prototype.write = function (e, t) {
                e.writeMany(t);
            }),
            e
        );
    })();
    vy.BufferSerialiser = new Sy();
    var _y = {};
    (function (e, t) {
        (function () {
            "use strict";
            var r,
                n =
                    (this && this.__assign) ||
                    function () {
                        return (n =
                            Object.assign ||
                            function (e) {
                                for (var t, r = 1, n = arguments.length; r < n; r++) for (var o in (t = arguments[r])) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);
                                return e;
                            }).apply(this, arguments);
                    },
                o =
                    (this && this.__values) ||
                    function (e) {
                        var t = "function" == typeof Symbol && Symbol.iterator,
                            r = t && e[t],
                            n = 0;
                        if (r) return r.call(e);
                        if (e && "number" == typeof e.length)
                            return {
                                next: function () {
                                    return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
                                },
                            };
                        throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
                    };
            Object.defineProperty(_y, "__esModule", { value: !0 }), (_y.OptionsImpl = _y.MIN_MAX_MESSAGE_SIZE = void 0);
            var i = "undefined" != typeof window && window.location.hostname ? window.location.hostname : "localhost",
                s = "undefined" != typeof window && "http:" === window.location.protocol && window.location.port ? parseInt(window.location.port, 10) : 80,
                a = "undefined" != typeof window && "https:" === window.location.protocol && window.location.port ? parseInt(window.location.port, 10) : 443,
                u = "undefined" == typeof window || "http:" !== window.location.protocol,
                c = null !== (r = e.DIFFUSION_CONNECT_TIMEOUT) && void 0 !== r ? r : 1e4,
                l = { attempts: 0, interval: 0 },
                p = function (e) {
                    setTimeout(e, 5e3);
                },
                f = function (e, t) {
                    t();
                },
                h = "undefined" == typeof window ? ["WEBSOCKET"] : ["WEBSOCKET", "XHR"];
            _y.MIN_MAX_MESSAGE_SIZE = 1024;
            var d = (function () {
                function e(e) {
                    var r, o;
                    if ((void 0 === e && (e = {}), void 0 === e.host)) e.host = i;
                    else if (1 === (e.host.match(/:/g) || []).length || e.host.match(/^\[[^\]]*\]:\d+$/)) {
                        var d = e.host.lastIndexOf(":");
                        void 0 === e.port && (e.port = parseInt(e.host.substr(d + 1), 10)), (e.host = e.host.substr(0, d));
                    }
                    e.host.indexOf(":") > -1 && !e.host.match(/^\[/) && (e.host = "[" + e.host + "]"),
                        void 0 === e.path
                            ? (e.path = "/diffusion")
                            : ("/" !== e.path[0] && (e.path = "/" + e.path),
                              "/diffusion" !== e.path.substring(e.path.length - "/diffusion".length) && ("/" === e.path[e.path.length - 1] && (e.path = e.path.substring(0, e.path.length - 1)), (e.path = e.path + "/diffusion"))),
                        void 0 !== e.port && "string" == typeof e.port && (isNaN(parseInt(e.port, 10)) ? (e.port = void 0) : (e.port = parseInt(e.port, 10))),
                        void 0 === e.secure && (void 0 === e.port ? (e.secure = u) : (e.secure = e.port === a)),
                        void 0 === e.port && (e.port = e.secure ? a : s),
                        (this.host = e.host),
                        (this.port = e.port),
                        (this.path = e.path),
                        (this.secure = e.secure),
                        (this.connectionTimeout = null !== (r = e.connectionTimeout) && void 0 !== r ? r : c),
                        e.retry ? ($c.requireNonNull(e.retry.attempts, "options.retry.attempts"), $c.requireNonNull(e.retry.interval, "options.retry.interval"), (this.retry = e.retry)) : (this.retry = n({}, l)),
                        void 0 === e.reconnect || ("boolean" == typeof e.reconnect && e.reconnect)
                            ? (this.reconnect = { timeout: 6e4, strategy: p })
                            : "number" == typeof e.reconnect
                            ? (this.reconnect = { timeout: e.reconnect, strategy: p })
                            : "function" == typeof e.reconnect
                            ? (this.reconnect = { timeout: 6e4, strategy: e.reconnect })
                            : "object" == typeof e.reconnect
                            ? (this.reconnect = { timeout: void 0 === e.reconnect.timeout ? 6e4 : e.reconnect.timeout, strategy: e.reconnect.strategy || p })
                            : (this.reconnect = { timeout: 0, strategy: f }),
                        void 0 !== e.principal &&
                            ((this.principal = e.principal || ""),
                            "string" == typeof e.credentials
                                ? (this.credentials = e.credentials)
                                : (o = e.credentials) instanceof Int8Array ||
                                  o instanceof Int16Array ||
                                  o instanceof Int32Array ||
                                  o instanceof Uint8Array ||
                                  o instanceof Uint8ClampedArray ||
                                  o instanceof Uint16Array ||
                                  o instanceof Uint32Array ||
                                  o instanceof Float32Array ||
                                  o instanceof Float64Array
                                ? (this.credentials = t.from(e.credentials.buffer))
                                : Array.isArray(e.credentials)
                                ? (e.credentials.forEach(function (e) {
                                      if ("number" != typeof e || e > 127 || e < -128) throw new Error("Custom credentials invalid. Element must be octet.");
                                  }),
                                  (this.credentials = t.from(e.credentials)))
                                : (this.credentials = "")),
                        "string" == typeof e.transports
                            ? (this.transports = [e.transports])
                            : "object" == typeof e.transports && e.transports instanceof Array && e.transports.length > 0
                            ? (this.transports = e.transports.slice())
                            : (this.transports = h.slice()),
                        (this.transports = this.transports.slice().map(function (e) {
                            return e.toUpperCase();
                        }));
                    var y = e.maxMessageSize && e.maxMessageSize > _y.MIN_MAX_MESSAGE_SIZE ? e.maxMessageSize : 2147483647;
                    if (((this.maxMessageSize = y), (this.activityMonitor = void 0 === e.activityMonitor || e.activityMonitor), void 0 !== e.properties)) {
                        var v = {};
                        Object.getOwnPropertyNames(e.properties).forEach(function (t) {
                            v[t] = e.properties[t].toString();
                        }),
                            (this.properties = v);
                    }
                    this.httpProxyAgent = e.httpProxyAgent;
                }
                return (
                    (e.prototype.with = function (t) {
                        var r,
                            n,
                            i,
                            s,
                            a,
                            u = {};
                        try {
                            for (var c = o(Object.getOwnPropertyNames(this)), l = c.next(); !l.done; l = c.next()) u[(a = l.value)] = this[a];
                        } catch (e) {
                            r = { error: e };
                        } finally {
                            try {
                                l && !l.done && (n = c.return) && n.call(c);
                            } finally {
                                if (r) throw r.error;
                            }
                        }
                        try {
                            for (var p = o(Object.getOwnPropertyNames(t)), f = p.next(); !f.done; f = p.next()) u[(a = f.value)] = t[a];
                        } catch (e) {
                            i = { error: e };
                        } finally {
                            try {
                                f && !f.done && (s = p.return) && s.call(p);
                            } finally {
                                if (i) throw i.error;
                            }
                        }
                        return new e(u);
                    }),
                    e
                );
            })();
            _y.OptionsImpl = d;
        }.call(this));
    }.call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, u({}).Buffer));
    var Ey = {};
    Object.defineProperty(Ey, "__esModule", { value: !0 }),
        (Ey.WorkerStreamCommand = Ey.WorkerSessionLockCommand = Ey.WorkerCommand = void 0),
        (function (e) {
            (e.CONNECT = "connect"), (e.CONNECT_EXISTING = "connect-existing"), (e.CLOSE = "close"), (e.MESSAGE = "message"), (e.STREAM = "stream"), (e.SERVICE = "service"), (e.LOCK = "lock"), (e.CID = "cid");
        })(Ey.WorkerCommand || (Ey.WorkerCommand = {})),
        (function (e) {
            (e.ACQUIRED = "acquired"), (e.ACQUIRE_ERROR = "acquire_error"), (e.OWNED = "owned"), (e.REMOVED = "removed"), (e.RELEASED = "released"), (e.RELEASE_ERROR = "release_error");
        })(Ey.WorkerSessionLockCommand || (Ey.WorkerSessionLockCommand = {})),
        (function (e) {
            (e.OPEN = "open"), (e.VALUE = "value"), (e.SUBSCRIPTION = "subscription"), (e.UNSUBSCRIPTION = "unsubscription"), (e.SUBSCRIPTION_ERROR = "subscription_error");
        })(Ey.WorkerStreamCommand || (Ey.WorkerStreamCommand = {}));
    var wy = {},
        my =
            (this && this.__read) ||
            function (e, t) {
                var r = "function" == typeof Symbol && e[Symbol.iterator];
                if (!r) return e;
                var n,
                    o,
                    i = r.call(e),
                    s = [];
                try {
                    for (; (void 0 === t || t-- > 0) && !(n = i.next()).done; ) s.push(n.value);
                } catch (e) {
                    o = { error: e };
                } finally {
                    try {
                        n && !n.done && (r = i.return) && r.call(i);
                    } finally {
                        if (o) throw o.error;
                    }
                }
                return s;
            };
    Object.defineProperty(wy, "__esModule", { value: !0 }), (wy.InternalSessionLocksProxy = void 0);
    var Ty = yu.create("InternalSessionLocksProxy"),
        gy = (function () {
            function e(e, t, r, n, o) {
                var i = this;
                (this.owned = !0),
                    (this.name = e),
                    (this.sequence = t),
                    (this.scope = r),
                    (this.releaseLock = o),
                    (n.setOwned = function (e) {
                        i.owned = e;
                    });
            }
            return (
                (e.prototype.getName = function () {
                    return this.name;
                }),
                (e.prototype.getSequence = function () {
                    return this.sequence;
                }),
                (e.prototype.isOwned = function () {
                    return this.owned;
                }),
                (e.prototype.getScope = function () {
                    return this.scope;
                }),
                (e.prototype.unlock = function () {
                    return this.owned ? ((this.owned = !1), this.releaseLock(this)) : Promise.resolve(!1);
                }),
                e
            );
        })(),
        Oy = (function () {
            function e(e) {
                var t = this;
                (this.activeRequests = {}),
                    (this.releaseRequests = {}),
                    (this.locks = {}),
                    (this.nextRequestId = 0),
                    (this.connector = e),
                    this.connector.on("lock_event", function (e) {
                        var r = my(e, 3),
                            n = r[0],
                            o = r[1],
                            i = r[2];
                        switch (o) {
                            case Ey.WorkerSessionLockCommand.ACQUIRED:
                                t.onLockAcquired(n, i);
                                break;
                            case Ey.WorkerSessionLockCommand.ACQUIRE_ERROR:
                                t.onLockAcquireError(n, i);
                                break;
                            case Ey.WorkerSessionLockCommand.OWNED:
                                t.onLockOwned(n, i);
                                break;
                            case Ey.WorkerSessionLockCommand.REMOVED:
                                t.onLockRemoved(n);
                                break;
                            case Ey.WorkerSessionLockCommand.RELEASED:
                                t.onLockReleased(i);
                                break;
                            case Ey.WorkerSessionLockCommand.RELEASE_ERROR:
                                t.onLockReleaseError(i);
                                break;
                            default:
                                Ty.error("Unrecognised lock_event " + o);
                        }
                    });
            }
            return (
                (e.prototype.onLockAcquired = function (e, t) {
                    var r = my(t, 3),
                        n = r[0],
                        o = r[1],
                        i = r[2];
                    void 0 !== this.activeRequests[n] && (this.activeRequests[n](void 0, e, _a.fromString(o, 10), i), delete this.activeRequests[n]);
                }),
                (e.prototype.onLockAcquireError = function (e, t) {
                    var r = my(t, 2),
                        n = r[0],
                        o = r[1];
                    void 0 !== this.activeRequests[n] && (this.activeRequests[n](o, e), delete this.activeRequests[n]);
                }),
                (e.prototype.onLockOwned = function (e, t) {
                    void 0 !== this.locks[e] && this.locks[e].ownedSetter.setOwned(t);
                }),
                (e.prototype.onLockRemoved = function (e) {
                    delete this.locks[e];
                }),
                (e.prototype.onLockReleased = function (e) {
                    var t = my(e, 2),
                        r = t[0],
                        n = t[1];
                    this.releaseRequests[r](void 0, n);
                }),
                (e.prototype.onLockReleaseError = function (e) {
                    var t = my(e, 2),
                        r = t[0],
                        n = t[1];
                    this.releaseRequests[r](n);
                }),
                (e.prototype.handleAcquisition = function (e, t, r) {
                    var n = this.locks[e];
                    if (void 0 !== n && n.lock.getSequence().equals(t)) return n.lock;
                    var o = {
                            setOwned: function () {
                                throw Error("Session lock ownedSetter must be implemented");
                            },
                        },
                        i = new gy(e, t, r, o, this.releaseLock.bind(this));
                    return (this.locks[e] = { lock: i, ownedSetter: o }), i;
                }),
                (e.prototype.releaseLock = function (e) {
                    var t = this;
                    return new Promise(function (r, n) {
                        var o = t.nextRequestId++;
                        (t.releaseRequests[o] = function (e, i) {
                            delete t.releaseRequests[o], e ? (Ty.debug("Release shared-session lock failed"), n(e)) : r(i);
                        }),
                            t.connector.send(Ey.WorkerCommand.LOCK, JSON.stringify({ action: "release", requestId: o, name: e.getName(), sequence: e.getSequence().toString(10), scope: e.getScope() }));
                    });
                }),
                (e.prototype.lock = function (e, t) {
                    var r = this;
                    return new Promise(function (n, o) {
                        if (void 0 !== r.locks[e] && r.locks[e].lock.isOwned()) n(r.locks[e].lock);
                        else {
                            var i = r.nextRequestId++;
                            (r.activeRequests[i] = function (e, t, s, a) {
                                delete r.activeRequests[i], e ? (Ty.debug("Acquire shared-session lock failed"), o(e)) : n(r.handleAcquisition(t, s, a));
                            }),
                                r.connector.send(Ey.WorkerCommand.LOCK, JSON.stringify({ action: "acquire", requestId: i, name: e, scope: t }));
                        }
                    });
                }),
                e
            );
        })();
    wy.InternalSessionLocksProxy = Oy;
    var Iy = {};
    (function (e) {
        (function () {
            "use strict";
            Object.defineProperty(Iy, "__esModule", { value: !0 }), (Iy.ValueStreamWorkerReceiver = void 0);
            var t = i({});
            function r(t) {
                var r = new _u.BufferInputStream(e.from(t, "base64"));
                return iy.read(r);
            }
            function n(e, r, n) {
                return e ? ("any" === r.name() ? (n.type === ku.TopicTypeEnum.TIME_SERIES ? t.DataTypes.timeseries(t.DataTypes.get(n.properties.TIME_SERIES_EVENT_VALUE_TYPE)) : t.DataTypes.get(n.type)).readValue(e) : r.readValue(e)) : null;
            }
            var o = (function () {
                function t(e, t) {
                    (this.stream = e), (this.datatype = t);
                }
                return (
                    (t.prototype.onOpen = function () {
                        this.stream.onOpen();
                    }),
                    (t.prototype.onValue = function (t) {
                        var o = JSON.parse(t),
                            i = r(o.specification),
                            s = o.oldValue ? e.from(o.oldValue, "base64") : null,
                            a = e.from(o.newValue, "base64");
                        this.stream.onValue(o.path, i, s, a, n(s, this.datatype, i), n(a, this.datatype, i));
                    }),
                    (t.prototype.onSubscription = function (e) {
                        var t = JSON.parse(e);
                        this.stream.onSubscription(t.path, r(t.specification));
                    }),
                    (t.prototype.onUnsubscription = function (e) {
                        var t = JSON.parse(e),
                            n = void 0 !== t.reason ? Hu.UnsubscribeReasonEnum[Hu.UnsubscribeReasonEnum[t.reason]] : Hu.UnsubscribeReasonEnum.UNKNOWN_UNSUBSCRIBE_REASON;
                        this.stream.onUnsubscription(t.path, r(t.specification), n);
                    }),
                    (t.prototype.onSubscriptionError = function (e) {
                        this.stream.onSubscriptionError(bu.ErrorReason[bu.ErrorReason[parseInt(e, 10)]]);
                    }),
                    t
                );
            })();
            Iy.ValueStreamWorkerReceiver = o;
        }.call(this));
    }.call(this, u({}).Buffer));
    var Ry = {},
        by =
            (this && this.__read) ||
            function (e, t) {
                var r = "function" == typeof Symbol && e[Symbol.iterator];
                if (!r) return e;
                var n,
                    o,
                    i = r.call(e),
                    s = [];
                try {
                    for (; (void 0 === t || t-- > 0) && !(n = i.next()).done; ) s.push(n.value);
                } catch (e) {
                    o = { error: e };
                } finally {
                    try {
                        n && !n.done && (r = i.return) && r.call(i);
                    } finally {
                        if (o) throw o.error;
                    }
                }
                return s;
            },
        Cy =
            (this && this.__values) ||
            function (e) {
                var t = "function" == typeof Symbol && Symbol.iterator,
                    r = t && e[t],
                    n = 0;
                if (r) return r.call(e);
                if (e && "number" == typeof e.length)
                    return {
                        next: function () {
                            return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
                        },
                    };
                throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
            };
    Object.defineProperty(Ry, "__esModule", { value: !0 }), (Ry.StreamRegistryWebworkerProxy = void 0);
    var Py = (function () {
            var e = new _a(0);
            return function () {
                return (e = e.add(1)), new Ga.ConversationId(e);
            };
        })(),
        Ny = (function () {
            function e(e) {
                var t = this;
                (this.connector = e),
                    (this.adapters = {}),
                    this.connector.on({
                        stream_event: function (e) {
                            var r = by(e, 4),
                                n = r[0],
                                o = r[1],
                                i = r[2],
                                s = r[3],
                                a = t.adapters[n];
                            if (a)
                                switch (o) {
                                    case Ey.WorkerStreamCommand.OPEN:
                                        a.onOpen();
                                        break;
                                    case Ey.WorkerStreamCommand.VALUE:
                                        a.onValue(s);
                                        break;
                                    case Ey.WorkerStreamCommand.SUBSCRIPTION:
                                        a.onSubscription(s);
                                        break;
                                    case Ey.WorkerStreamCommand.UNSUBSCRIPTION:
                                        a.onUnsubscription(s);
                                        break;
                                    case Ey.WorkerStreamCommand.SUBSCRIPTION_ERROR:
                                        a.onSubscriptionError(i);
                                }
                        },
                    });
            }
            return (
                (e.prototype.add = function (e, t, r) {
                    var n = Py();
                    this.adapters[n.toString()] = new Iy.ValueStreamWorkerReceiver(t, r);
                    var o = { action: "add", adapterId: n.toString(), topic: e.expression, datatype: r.name() };
                    this.connector.send(Ey.WorkerCommand.STREAM, JSON.stringify(o));
                }),
                (e.prototype.addFallback = function (e, t) {
                    var r = Py();
                    this.adapters[r.toString()] = new Iy.ValueStreamWorkerReceiver(e, t);
                    var n = { action: "add_fallback", adapterId: r.toString(), datatype: t.name() };
                    this.connector.send(Ey.WorkerCommand.STREAM, JSON.stringify(n));
                }),
                (e.prototype.remove = function (e) {
                    var t, r;
                    try {
                        for (var n = Cy(Object.getOwnPropertyNames(this.adapters)), o = n.next(); !o.done; o = n.next()) {
                            var i = o.value;
                            if (this.adapters[i].stream === e) {
                                var s = { action: "remove", adapterId: i.toString() };
                                this.connector.send(Ey.WorkerCommand.STREAM, JSON.stringify(s)), delete this.adapters[i];
                            }
                        }
                    } catch (e) {
                        t = { error: e };
                    } finally {
                        try {
                            o && !o.done && (r = n.return) && r.call(n);
                        } finally {
                            if (t) throw t.error;
                        }
                    }
                }),
                (e.prototype.close = function () {
                    this.connector.send(Ey.WorkerCommand.STREAM, JSON.stringify({ action: "close_registry" }));
                }),
                e
            );
        })();
    Ry.StreamRegistryWebworkerProxy = Ny;
    var Ay = {};
    (function (e) {
        (function () {
            "use strict";
            var t =
                    (this && this.__extends) ||
                    (function () {
                        var e = function (t, r) {
                            return (e =
                                Object.setPrototypeOf ||
                                ({ __proto__: [] } instanceof Array &&
                                    function (e, t) {
                                        e.__proto__ = t;
                                    }) ||
                                function (e, t) {
                                    for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                                })(t, r);
                        };
                        return function (t, r) {
                            if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                            function n() {
                                this.constructor = t;
                            }
                            e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                        };
                    })(),
                r =
                    (this && this.__rest) ||
                    function (e, t) {
                        var r = {};
                        for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && t.indexOf(n) < 0 && (r[n] = e[n]);
                        if (null != e && "function" == typeof Object.getOwnPropertySymbols) {
                            var o = 0;
                            for (n = Object.getOwnPropertySymbols(e); o < n.length; o++) t.indexOf(n[o]) < 0 && Object.prototype.propertyIsEnumerable.call(e, n[o]) && (r[n[o]] = e[n[o]]);
                        }
                        return r;
                    },
                n =
                    (this && this.__read) ||
                    function (e, t) {
                        var r = "function" == typeof Symbol && e[Symbol.iterator];
                        if (!r) return e;
                        var n,
                            o,
                            i = r.call(e),
                            s = [];
                        try {
                            for (; (void 0 === t || t-- > 0) && !(n = i.next()).done; ) s.push(n.value);
                        } catch (e) {
                            o = { error: e };
                        } finally {
                            try {
                                n && !n.done && (r = i.return) && r.call(i);
                            } finally {
                                if (o) throw o.error;
                            }
                        }
                        return s;
                    };
            Object.defineProperty(Ay, "__esModule", { value: !0 }), (Ay.InternalSessionWebworkerProxy = void 0);
            var o = yu.create("InternalSessionWebworkerProxy"),
                i = (function (i) {
                    function s(t, r, s, a) {
                        var u = this,
                            c = gf.Emitter.create();
                        return (
                            ((u = i.call(this, c) || this).emitter = c.emitter(u)),
                            (u.connector = s),
                            (u.opts = a),
                            (u.connected = !1),
                            (u.state = ya.InternalSessionState.INITIALISING),
                            u.connector.on({
                                connect_event: function (e) {
                                    var t = n(e, 3),
                                        r = t[0],
                                        i = t[1],
                                        s = t[2];
                                    (u.sessionID = _h.SessionId.fromString(r)), (u.connected = !0);
                                    try {
                                        (u.serverMaximumMessageSize = parseInt(s, 10)), (u.opts = JSON.parse(i)), u.emitter.emit("connect", u.sessionID, new _y.OptionsImpl(u.opts));
                                    } catch (e) {
                                        o.error("Unable to parse options from shared session", e), u.emitter.emit("error", new Error("Unable to parse options from shared session"));
                                    }
                                },
                                connect_error: function (e) {
                                    u.connector.disconnect(), u.emitter.emit("error", rd.CloseReasonEnum[e] || new Error(e));
                                },
                                reconnect_event: function () {
                                    (u.connected = !0), u.emitter.emit("reconnect");
                                },
                                disconnect_event: function (e) {
                                    u.connected = !1;
                                    var t = rd.CloseReasonEnum[e];
                                    u.emitter.emit("disconnect", rd.CloseReasonEnum[t]);
                                },
                                close_event: function (e) {
                                    u.connector.disconnect(), (u.connected = !1);
                                    var t = rd.CloseReasonEnum[e];
                                    u.emitter.close(rd.CloseReasonEnum[t]);
                                },
                                error_event: function (e) {
                                    u.connector.disconnect(), (u.connected = !1), u.emitter.emit("error", new Error(e));
                                },
                                command_response: function (t) {
                                    var r = n(t, 2),
                                        o = r[0],
                                        i = r[1],
                                        s = Ga.ConversationId.fromString(o),
                                        a = new _u.BufferInputStream(e.from(i, "base64"));
                                    u.conversationSet.respondIfPresent(s, a);
                                },
                                command_error: function (e) {
                                    var t,
                                        r = n(e, 2),
                                        o = r[0],
                                        i = r[1],
                                        s = Ga.ConversationId.fromString(o);
                                    try {
                                        t = JSON.parse(i);
                                    } catch (e) {
                                        t = new Error("Could not parse error response");
                                    }
                                    u.conversationSet.discard(s, t);
                                },
                                service_request: function (t) {
                                    var r = n(t, 3),
                                        o = r[0],
                                        i = r[1],
                                        s = r[2],
                                        a = Ga.ConversationId.fromString(i),
                                        c = new wu.BufferOutputStream();
                                    cu.CommandHeaderSerialiser.write(c, new su.CommandHeader(parseInt(o, 10), a)), vy.BufferSerialiser.write(c, e.from(s, "base64"));
                                    var l = new _u.BufferInputStream(c.getBuffer());
                                    u.serviceAdapter.onMessage(Iu.types.SERVICE_REQUEST, l);
                                },
                                state_change: function (e) {
                                    u.state = e;
                                },
                            }),
                            (u.serviceAdapter = new Cu.ServiceAdapter(u, function (e) {
                                u.connector.sendMessage(e);
                            })),
                            (u.serviceLocator = new Mu.ServiceLocatorImpl(u, u.serviceAdapter)),
                            (u.serviceRegistry = r),
                            u.serviceRegistry.addListener(u.serviceAdapter.addService.bind(u.serviceAdapter)),
                            u.serviceRegistry.addListener(function (e) {
                                u.connector.send(Ey.WorkerCommand.SERVICE, JSON.stringify({ action: "add", serviceId: e.id }));
                            }),
                            (u.topicStreamRegistry = new Ry.StreamRegistryWebworkerProxy(u.connector)),
                            (u.conversationSet = t()),
                            (u.sessionLocks = new wy.InternalSessionLocksProxy(u.connector)),
                            u
                        );
                    }
                    return (
                        t(s, i),
                        (s.prototype.connect = function () {
                            var t = this;
                            if (this.opts) {
                                var n = this.opts,
                                    o = n.credentials,
                                    i = n.reconnect,
                                    s = r(n, ["credentials", "reconnect"]),
                                    a = o instanceof e,
                                    u = a ? o.toString("base64") : o;
                                (s.reconnect = i.timeout), this.connector.send(Ey.WorkerCommand.CONNECT, JSON.stringify([s, a, u]));
                            } else this.connector.send(Ey.WorkerCommand.CONNECT_EXISTING);
                            var c = !1;
                            this.connector.on("connect_ack", function () {
                                c = !0;
                            }),
                                setTimeout(function () {
                                    c || (t.emitter.emit("error", new Error("Unable to connect to shared worker")), t.connector.close());
                                }, 1e3);
                        }),
                        (s.prototype.close = function () {
                            return this.state !== ya.InternalSessionState.CLOSED && this.connector.send(Ey.WorkerCommand.CLOSE), this;
                        }),
                        (s.prototype.isConnected = function () {
                            return this.connected;
                        }),
                        (s.prototype.checkConnected = function (e) {
                            return !!this.isConnected() || (e(new Error("The session is not connected. Operations are not possible at this time.")), !1);
                        }),
                        (s.prototype.getSessionId = function () {
                            return this.sessionID;
                        }),
                        (s.prototype.getPrincipal = function () {
                            if (void 0 === this.opts) throw new Error("Shared session is not connected");
                            return this.opts.principal || "";
                        }),
                        (s.prototype.setPrincipal = function (e) {
                            if (void 0 === this.opts) throw new Error("Shared session is not connected");
                            this.opts.principal = e;
                        }),
                        (s.prototype.getOptions = function () {
                            if (void 0 === this.opts) throw new Error("Shared session is not connected");
                            return this.opts;
                        }),
                        (s.prototype.getState = function () {
                            return this.state;
                        }),
                        (s.prototype.getServerMaximumMessageSize = function () {
                            return this.serverMaximumMessageSize;
                        }),
                        (s.prototype.lock = function (e, t) {
                            return this.sessionLocks.lock(e, t);
                        }),
                        (s.prototype.onSystemPing = function () {
                            throw new Error("Method not implemented.");
                        }),
                        (s.prototype.getStreamRegistry = function () {
                            return this.topicStreamRegistry;
                        }),
                        (s.prototype.getServiceRegistry = function () {
                            return this.serviceRegistry;
                        }),
                        (s.prototype.getRouting = function () {
                            throw new Error("Method not implemented.");
                        }),
                        (s.prototype.getServiceLocator = function () {
                            return this.serviceLocator;
                        }),
                        (s.prototype.getConversationSet = function () {
                            return this.conversationSet;
                        }),
                        (s.prototype.isShared = function () {
                            return !0;
                        }),
                        (s.prototype.getContext = function () {
                            return Sf.sessionContext;
                        }),
                        (s.prototype.updateFeatures = function () {}),
                        s
                    );
                })(wf.StreamImpl);
            Ay.InternalSessionWebworkerProxy = i;
        }.call(this));
    }.call(this, u({}).Buffer));
    var My = {},
        jy =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })(),
        Ly =
            (this && this.__values) ||
            function (e) {
                var t = "function" == typeof Symbol && Symbol.iterator,
                    r = t && e[t],
                    n = 0;
                if (r) return r.call(e);
                if (e && "number" == typeof e.length)
                    return {
                        next: function () {
                            return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
                        },
                    };
                throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
            },
        Dy =
            (this && this.__read) ||
            function (e, t) {
                var r = "function" == typeof Symbol && e[Symbol.iterator];
                if (!r) return e;
                var n,
                    o,
                    i = r.call(e),
                    s = [];
                try {
                    for (; (void 0 === t || t-- > 0) && !(n = i.next()).done; ) s.push(n.value);
                } catch (e) {
                    o = { error: e };
                } finally {
                    try {
                        n && !n.done && (r = i.return) && r.call(i);
                    } finally {
                        if (o) throw o.error;
                    }
                }
                return s;
            },
        xy =
            (this && this.__spreadArray) ||
            function (e, t) {
                for (var r = 0, n = t.length, o = e.length; r < n; r++, o++) e[o] = t[r];
                return e;
            };
    Object.defineProperty(My, "__esModule", { value: !0 }), (My.getSharedConversationSetFactory = My.SharedSessionConnector = void 0);
    var By = (function () {
            function e(e) {
                var t = this;
                (this.listeners = {}),
                    (this.worker = new SharedWorker(e)),
                    (this.worker.port.onmessage = function (e) {
                        var r,
                            n,
                            o = e.data[0];
                        if (void 0 !== t.listeners[o])
                            try {
                                for (var i = Ly(t.listeners[o]), s = i.next(); !s.done; s = i.next()) {
                                    s.value.apply(void 0, xy([e.data[1]], Dy(e.data.slice(2))));
                                }
                            } catch (e) {
                                r = { error: e };
                            } finally {
                                try {
                                    s && !s.done && (n = i.return) && n.call(i);
                                } finally {
                                    if (r) throw r.error;
                                }
                            }
                    });
            }
            return (
                (e.prototype.getWorker = function () {
                    return this.worker;
                }),
                (e.prototype.addListener = function (e, t) {
                    void 0 === this.listeners[e] ? (this.listeners[e] = [t]) : this.listeners[e].push(t);
                }),
                (e.prototype.removeListener = function (e, t) {
                    void 0 !== this.listeners[e] &&
                        (this.listeners[e] = this.listeners[e].filter(function (e) {
                            return e !== t;
                        }));
                }),
                e
            );
        })(),
        qy = {};
    function Uy(e) {
        if (!window || !window.SharedWorker) throw new Error("SharedWorker could not be found!");
        return void 0 === qy[e] && (qy[e] = new By(e)), qy[e];
    }
    var ky = (function (e) {
        function t(t, r) {
            var n = this,
                o = gf.Emitter.create();
            return (
                ((n = e.call(this, o) || this).emitter = o.emitter(n)),
                (n.sessionName = t),
                (n.router = Uy(r)),
                (n.worker = n.router.getWorker()),
                (n.listener = function (e) {
                    for (var t = [], r = 1; r < arguments.length; r++) t[r - 1] = arguments[r];
                    t.length < 2 ? n.emitter.emit(e, t[0]) : n.emitter.emit(e, t);
                }),
                n.router.addListener(t, n.listener),
                n
            );
        }
        return (
            jy(t, e),
            (t.prototype.send = function (e, t) {
                this.worker.port.postMessage([this.sessionName, e, t]);
            }),
            (t.prototype.sendMessage = function (e) {
                var t = { type: e.type, encoding: e.encoding, data: e.data.toString("base64"), stream: e.getBuffer().toString("base64"), headers: e.headers, id: e.id, topic: e.topic };
                this.send(Ey.WorkerCommand.MESSAGE, JSON.stringify(t));
            }),
            (t.prototype.disconnect = function () {
                this.router.removeListener(this.sessionName, this.listener);
            }),
            t
        );
    })(wf.StreamImpl);
    (My.SharedSessionConnector = ky),
        (My.getSharedConversationSetFactory = function (e) {
            var t = [];
            function r() {
                return new Promise(function (r) {
                    t.push(r), e.send(Ey.WorkerCommand.CID);
                });
            }
            return (
                e.on("cid_event", function (e) {
                    t.length > 0 && t.shift()(new Ga.ConversationId(_a.fromString(e)));
                }),
                function () {
                    return new md.ConversationSet(r);
                }
            );
        });
    var Vy = {};
    function Fy(e) {
        e = $c.requireNonNull(e, "options");
        var t = new yd.ServiceRegistryImpl();
        return (
            t.add(jd.USER_PING, wd.pingService),
            t.add(jd.SYSTEM_PING, Sd.monitoredPingService),
            t.add(cy.NOTIFY_SUBSCRIPTION, _d.notifySubscriptionService),
            t.add(cy.UNSUBSCRIPTION_NOTIFICATION, Ed.notifyUnsubscriptionService),
            new nd.InternalSessionImpl(md.create, t, yy.create, e)
        );
    }
    function Gy(e, t) {
        var r = new yd.ServiceRegistryImpl(),
            n = new My.SharedSessionConnector(e, t),
            o = My.getSharedConversationSetFactory(n);
        return function (e) {
            return new Ay.InternalSessionWebworkerProxy(o, r, n, e);
        };
    }
    Object.defineProperty(Vy, "__esModule", { value: !0 }),
        (Vy.create = Vy.createShared = void 0),
        (Vy.createShared = Gy),
        (Vy.create = function (e, t) {
            if (void 0 === e && void 0 === t) return Fy;
            if (void 0 !== e && void 0 !== t) return Gy(e, t);
            throw new Error('Missing parameter "name" or "workerJs" when creating a shared session');
        });
    var Hy = {};
    Object.defineProperty(Hy, "__esModule", { value: !0 }),
        (Hy.RemoteServerType = Hy.ConnectionState = Hy.ConnectionOption = void 0),
        (function (e) {
            (e[(e.CONNECTION_TIMEOUT = 1)] = "CONNECTION_TIMEOUT"),
                (e[(e.INPUT_BUFFER_SIZE = 2)] = "INPUT_BUFFER_SIZE"),
                (e[(e.MAXIMUM_QUEUE_SIZE = 3)] = "MAXIMUM_QUEUE_SIZE"),
                (e[(e.OUTPUT_BUFFER_SIZE = 4)] = "OUTPUT_BUFFER_SIZE"),
                (e[(e.RECONNECTION_TIMEOUT = 5)] = "RECONNECTION_TIMEOUT"),
                (e[(e.RECOVERY_BUFFER_SIZE = 6)] = "RECOVERY_BUFFER_SIZE"),
                (e[(e.RETRY_DELAY = 7)] = "RETRY_DELAY"),
                (e[(e.WRITE_TIMEOUT = 8)] = "WRITE_TIMEOUT");
        })(Hy.ConnectionOption || (Hy.ConnectionOption = {})),
        (function (e) {
            (e[(e.INACTIVE = 1)] = "INACTIVE"), (e[(e.CONNECTED = 2)] = "CONNECTED"), (e[(e.RETRYING = 3)] = "RETRYING"), (e[(e.FAILED = 4)] = "FAILED"), (e[(e.MISSING = 5)] = "MISSING");
        })(Hy.ConnectionState || (Hy.ConnectionState = {})),
        (function (e) {
            (e[(e.SECONDARY_INITIATOR = 1)] = "SECONDARY_INITIATOR"), (e[(e.PRIMARY_INITIATOR = 2)] = "PRIMARY_INITIATOR"), (e[(e.SECONDARY_ACCEPTOR = 3)] = "SECONDARY_ACCEPTOR");
        })(Hy.RemoteServerType || (Hy.RemoteServerType = {}));
    var Yy = {};
    Object.defineProperty(Yy, "__esModule", { value: !0 }), (Yy.AbstractMetricCollector = void 0);
    var Wy = function (e, t, r) {
        if (r < 1) throw new Error("maximumGroups must be positive: " + r);
        (this.name = e), (this.maximumGroups = r), (this.exportToPrometheus = t);
    };
    Yy.AbstractMetricCollector = Wy;
    var Qy = {},
        zy =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Qy, "__esModule", { value: !0 }), (Qy.SessionMetricCollectorImpl = void 0);
    var Ky = (function (e) {
        function t(t, r, n, o, i, s) {
            var a = e.call(this, t, r, n) || this;
            return (a.sessionFilter = i), (a.groupByProperties = s), (a.removeMetricsWithNoMatches = o), a;
        }
        return zy(t, e), t;
    })(Yy.AbstractMetricCollector);
    Qy.SessionMetricCollectorImpl = Ky;
    var Jy = {};
    Object.defineProperty(Jy, "__esModule", { value: !0 }), (Jy.SessionMetricCollectorBuilderImpl = void 0);
    var $y = (function () {
        function e() {
            this.reset();
        }
        return (
            (e.prototype.reset = function () {
                return (this.exportToPrometheusProp = !1), (this.maximumGroupsProp = fc.MAX_INT32), (this.groupByPropertiesProp = []), (this.removesMetricsWithNoMatchesProp = !1), this;
            }),
            (e.prototype.exportToPrometheus = function (e) {
                return (this.exportToPrometheusProp = e), this;
            }),
            (e.prototype.maximumGroups = function (e) {
                return (this.maximumGroupsProp = e), this;
            }),
            (e.prototype.groupByProperty = function (e) {
                return this.groupByPropertiesProp.push($c.requireNonNull(e, "propertyName is null")), this;
            }),
            (e.prototype.groupByProperties = function (e) {
                return (this.groupByPropertiesProp = $c.requireNonNull(e, "propertyNames is null")), this;
            }),
            (e.prototype.removeMetricsWithNoMatches = function (e) {
                return (this.removesMetricsWithNoMatchesProp = e), this;
            }),
            (e.prototype.create = function (e, t) {
                return new Qy.SessionMetricCollectorImpl(
                    $c.requireNonNull(e, "name is null"),
                    this.exportToPrometheusProp,
                    this.maximumGroupsProp,
                    this.removesMetricsWithNoMatchesProp,
                    $c.requireNonNull(t, "sessionFilter is null"),
                    this.groupByPropertiesProp
                );
            }),
            e
        );
    })();
    Jy.SessionMetricCollectorBuilderImpl = $y;
    var Xy = {},
        Zy =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Xy, "__esModule", { value: !0 }), (Xy.TopicMetricCollectorImpl = void 0);
    var ev = (function (e) {
        function t(t, r, n, o, i, s, a) {
            var u = e.call(this, t, r, n) || this;
            if (((u.topicSelector = o), (u.groupByTopicType = i), (u.groupByTopicView = s), a < 0)) throw new Error("groupByPathPrefixParts must be non-negative: " + a);
            return (u.groupByPathPrefixParts = a), u;
        }
        return Zy(t, e), t;
    })(Yy.AbstractMetricCollector);
    Xy.TopicMetricCollectorImpl = ev;
    var tv = {};
    Object.defineProperty(tv, "__esModule", { value: !0 }), (tv.TopicMetricCollectorBuilderImpl = void 0);
    var rv = (function () {
        function e() {
            (this.exportToPrometheusProp = !1), (this.groupByTopicTypeProp = !1), (this.groupByTopicViewProp = !1), (this.groupByPathPrefixPartsProp = 0), this.reset();
        }
        return (
            (e.prototype.reset = function () {
                return (this.exportToPrometheusProp = !1), (this.maximumGroupsProp = fc.MAX_INT32), (this.groupByTopicTypeProp = !1), (this.groupByTopicViewProp = !1), (this.groupByPathPrefixPartsProp = 0), this;
            }),
            (e.prototype.exportToPrometheus = function (e) {
                return (this.exportToPrometheusProp = e), this;
            }),
            (e.prototype.maximumGroups = function (e) {
                return (this.maximumGroupsProp = e), this;
            }),
            (e.prototype.groupByTopicType = function (e) {
                return (this.groupByTopicTypeProp = e), this;
            }),
            (e.prototype.groupByTopicView = function (e) {
                return (this.groupByTopicViewProp = e), this;
            }),
            (e.prototype.groupByPathPrefixParts = function (e) {
                return (this.groupByPathPrefixPartsProp = e), this;
            }),
            (e.prototype.create = function (e, t) {
                return new Xy.TopicMetricCollectorImpl(
                    $c.requireNonNull(e, "name is null"),
                    this.exportToPrometheusProp,
                    this.maximumGroupsProp,
                    "string" == typeof t ? t : t.expression,
                    this.groupByTopicTypeProp,
                    this.groupByTopicViewProp,
                    this.groupByPathPrefixPartsProp
                );
            }),
            e
        );
    })();
    tv.TopicMetricCollectorBuilderImpl = rv;
    var nv = {};
    Object.defineProperty(nv, "__esModule", { value: !0 }), (nv.RemoteServerDefinitionImpl = void 0);
    var ov = (function () {
        function e(e, t, r, n, o, i, s, a) {
            var u;
            (this.type = e),
                (this.name = t),
                (this.url = r[0]),
                (this.urls = r),
                (this.principal = n),
                (this.credentials = i),
                (this.connectionOptions = o),
                (this.connector = s),
                (this.missingTopicNotificationFilter = a),
                (this.primaryHostName = r[0]),
                (this.retryDelay = parseInt(null !== (u = o[Hy.ConnectionOption.RETRY_DELAY]) && void 0 !== u ? u : "1000", 10));
        }
        return (
            (e.createPrimaryDefinition = function (t, r, n, o) {
                var i;
                return new e(Hy.RemoteServerType.PRIMARY_INITIATOR, t, r, "", (((i = {})[Hy.ConnectionOption.RETRY_DELAY] = "" + n), i), null, o);
            }),
            (e.createSecondaryDefinition = function (t, r, n, o, i, s, a) {
                return new e(t, r, [n], o, i, a, void 0, s);
            }),
            (e.createDefinition = function (t, r) {
                return new e(t.type, t.name, t.urls, t.principal, t.connectionOptions, r, t.connector, t.missingTopicNotificationFilter);
            }),
            (e.prototype.withOptions = function (t) {
                return new e(this.type, this.name, this.urls, this.principal, t, this.credentials, this.connector, this.missingTopicNotificationFilter);
            }),
            e
        );
    })();
    nv.RemoteServerDefinitionImpl = ov;
    var iv = {},
        sv =
            (this && this.__assign) ||
            function () {
                return (sv =
                    Object.assign ||
                    function (e) {
                        for (var t, r = 1, n = arguments.length; r < n; r++) for (var o in (t = arguments[r])) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);
                        return e;
                    }).apply(this, arguments);
            };
    Object.defineProperty(iv, "__esModule", { value: !0 }), (iv.RemoteServerBuilderImpl = void 0);
    var av = (function () {
        function e(e) {
            (this.thePrincipal = ""), (this.theCredentials = void 0), (this.theConnectionOptions = {}), (this.theMissingTopicNotificationFilter = void 0), (this.theTopicSelectors = e);
        }
        return (
            (e.prototype.principal = function (e) {
                return (this.thePrincipal = $c.requireNonNull(e, "principal")), this;
            }),
            (e.prototype.credentials = function (e) {
                return (this.theCredentials = e), this;
            }),
            (e.prototype.connectionOptions = function (e) {
                return $c.requireNonNull(e, "connectionOptions"), (this.theConnectionOptions = sv({}, e)), this;
            }),
            (e.prototype.connectionOption = function (e, t) {
                return null == t ? delete this.theConnectionOptions[$c.requireNonNull(e, "connectionOption")] : (this.theConnectionOptions[$c.requireNonNull(e, "connectionOption")] = t), this;
            }),
            (e.prototype.missingTopicNotificationFilter = function (e) {
                if (null !== e)
                    try {
                        this.theTopicSelectors.parse(e);
                    } catch (e) {
                        throw new Error("filter is invalid: " + e);
                    }
                return (this.theMissingTopicNotificationFilter = null === e ? void 0 : e), this;
            }),
            (e.prototype.reset = function () {
                return (this.thePrincipal = ""), (this.theCredentials = void 0), (this.theConnectionOptions = {}), (this.theMissingTopicNotificationFilter = void 0), this;
            }),
            (e.prototype.create = function (e, t) {
                var r = $c.requireNonNull(e, "name").trim();
                if (0 === r.length) throw new Error("Non whitespace name must be supplied");
                var n = $c.requireNonNull(t, "url").trim();
                if (0 === n.length) throw new Error("Non whitespace url must be supplied");
                return new nv.RemoteServerDefinitionImpl(Hy.RemoteServerType.SECONDARY_INITIATOR, r, [n], this.thePrincipal, this.theConnectionOptions, this.theCredentials, void 0, this.theMissingTopicNotificationFilter);
            }),
            e
        );
    })();
    iv.RemoteServerBuilderImpl = av;
    var uv = {};
    Object.defineProperty(uv, "__esModule", { value: !0 }), (uv.BranchMappingTableImpl = void 0);
    var cv = (function () {
        function e(e, t) {
            (this.sessionTreeBranch = e), (this.branchMappings = t);
        }
        return (
            (e.prototype.getSessionTreeBranch = function () {
                return this.sessionTreeBranch;
            }),
            (e.prototype.getBranchMappings = function () {
                return this.branchMappings;
            }),
            e
        );
    })();
    uv.BranchMappingTableImpl = cv;
    var lv = {},
        pv =
            (this && this.__read) ||
            function (e, t) {
                var r = "function" == typeof Symbol && e[Symbol.iterator];
                if (!r) return e;
                var n,
                    o,
                    i = r.call(e),
                    s = [];
                try {
                    for (; (void 0 === t || t-- > 0) && !(n = i.next()).done; ) s.push(n.value);
                } catch (e) {
                    o = { error: e };
                } finally {
                    try {
                        n && !n.done && (r = i.return) && r.call(i);
                    } finally {
                        if (o) throw o.error;
                    }
                }
                return s;
            },
        fv =
            (this && this.__spreadArray) ||
            function (e, t) {
                for (var r = 0, n = t.length, o = e.length; r < n; r++, o++) e[o] = t[r];
                return e;
            };
    Object.defineProperty(lv, "__esModule", { value: !0 }), (lv.BranchMappingTableBuilderImpl = void 0);
    var hv = (function () {
        function e() {
            this.mappings = [];
        }
        return (
            (e.prototype.reset = function () {
                return (this.mappings = []), this;
            }),
            (e.prototype.addBranchMapping = function (e, t) {
                return this.mappings.push({ sessionFilter: e, topicTreeBranch: t }), this;
            }),
            (e.prototype.create = function (e) {
                return new uv.BranchMappingTableImpl(e, fv([], pv(this.mappings)));
            }),
            e
        );
    })();
    lv.BranchMappingTableBuilderImpl = hv;
    var dv = {};
    Object.defineProperty(dv, "__esModule", { value: !0 }), (dv.RemoteServerBuilderBaseImpl = void 0);
    var yv = (function () {
        function e(e) {
            this.type = e;
        }
        return (
            (e.validateName = function (e) {
                $c.requireNonNull(e, "name");
                var t = e.trim();
                if (0 === t.length) throw new Error("Non whitespace name must be supplied");
                return t;
            }),
            (e.prototype.validateUrl = function (e) {
                $c.requireNonNull(e, "url");
                var t = e.trim(),
                    r = new URL(t);
                if ("ws:" !== r.protocol && "wss:" !== r.protocol) throw new Error("Transport for url " + e + " must be ws");
                if (this.type === Hy.RemoteServerType.PRIMARY_INITIATOR && "wss:" === r.protocol) throw new Error("Invalid url " + e + " - secure connection not supported for primary initiator connections");
                if (this.type === Hy.RemoteServerType.SECONDARY_ACCEPTOR && "wss:" !== r.protocol) throw new Error("Invalid url " + e + " - connection must be secure for secondary acceptor connections");
                return t;
            }),
            e
        );
    })();
    dv.RemoteServerBuilderBaseImpl = yv;
    var vv = {},
        Sv =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(vv, "__esModule", { value: !0 }), (vv.PrimaryInitiatorBuilderImpl = void 0);
    var _v = (function (e) {
        function t() {
            var t = e.call(this, Hy.RemoteServerType.PRIMARY_INITIATOR) || this;
            return (t.theRetryDelay = 1e3), t;
        }
        return (
            Sv(t, e),
            (t.validateConnector = function (e) {
                $c.requireNonNull(e, "connector");
                var t = e.trim();
                if (0 === t.length) throw new Error("Non whitespace connector must be supplied");
                return t;
            }),
            (t.prototype.validateUrls = function (e) {
                var t = this;
                if (0 === e.length) throw new Error("urls is empty");
                return e.map(function (e) {
                    return t.validateUrl(e);
                });
            }),
            (t.prototype.retryDelay = function (e) {
                if (($c.requireNonNull(e, "delay"), e < 0)) throw new Error("delay is invalid");
                return (this.theRetryDelay = e), this;
            }),
            (t.prototype.reset = function () {
                return (this.theRetryDelay = 1e3), this;
            }),
            (t.prototype.build = function (e, r, n) {
                return nv.RemoteServerDefinitionImpl.createPrimaryDefinition(t.validateName(e), this.validateUrls($c.requireNonNull(r, "urls")), this.theRetryDelay, t.validateConnector(n));
            }),
            t
        );
    })(dv.RemoteServerBuilderBaseImpl);
    vv.PrimaryInitiatorBuilderImpl = _v;
    var Ev = {};
    Object.defineProperty(Ev, "__esModule", { value: !0 }), (Ev.limitTimeout = void 0);
    var wv = yu.create("Internal Session");
    Ev.limitTimeout = function (e, t) {
        return t > 36e5 ? (wv.warn("CONFIG_EXCESSIVE_TIMEOUT", t, e, 36e5), 36e5) : t;
    };
    var mv = {},
        Tv =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })(),
        gv =
            (this && this.__values) ||
            function (e) {
                var t = "function" == typeof Symbol && Symbol.iterator,
                    r = t && e[t],
                    n = 0;
                if (r) return r.call(e);
                if (e && "number" == typeof e.length)
                    return {
                        next: function () {
                            return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
                        },
                    };
                throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
            },
        Ov =
            (this && this.__read) ||
            function (e, t) {
                var r = "function" == typeof Symbol && e[Symbol.iterator];
                if (!r) return e;
                var n,
                    o,
                    i = r.call(e),
                    s = [];
                try {
                    for (; (void 0 === t || t-- > 0) && !(n = i.next()).done; ) s.push(n.value);
                } catch (e) {
                    o = { error: e };
                } finally {
                    try {
                        n && !n.done && (r = i.return) && r.call(i);
                    } finally {
                        if (o) throw o.error;
                    }
                }
                return s;
            };
    function Iv(e) {
        var t = Number.parseInt(e.trim(), 10);
        if (Number.isNaN(t)) throw new Error(e + " is not a number");
        return t;
    }
    Object.defineProperty(mv, "__esModule", { value: !0 }), (mv.SecondaryBuilderImpl = void 0);
    var Rv = (function (e) {
        function t(t, r) {
            var n = e.call(this, t) || this;
            return (n.thePrincipal = ""), (n.theCredentials = void 0), (n.theConnectionOptions = {}), (n.theMissingTopicNotificationFilter = void 0), (n.topicSelectors = r), n;
        }
        return (
            Tv(t, e),
            (t.minimumValueOption = function (e, t, r) {
                var n;
                try {
                    n = Iv(t);
                } catch (r) {
                    throw new Error("Connection Option '" + Hy.ConnectionOption[e] + "' value '" + t + "' is invalid");
                }
                if (n < r) throw new Error("Connection Option '" + Hy.ConnectionOption[e] + "' value '" + t + "' cannot be less than " + r);
                return n.toString();
            }),
            (t.timeoutOption = function (e, t) {
                try {
                    return Ev.limitTimeout(e.toString(), Iv(t)).toString();
                } catch (r) {
                    throw new Error("Connection Option '" + Hy.ConnectionOption[e] + "' value '" + t + "' is invalid");
                }
            }),
            (t.prototype.validateConnectionOption = function (e, r) {
                switch ((this.validateOption(e, r), e)) {
                    case Hy.ConnectionOption.CONNECTION_TIMEOUT:
                    case Hy.ConnectionOption.WRITE_TIMEOUT:
                    case Hy.ConnectionOption.RECONNECTION_TIMEOUT:
                        return t.timeoutOption(e, r);
                    case Hy.ConnectionOption.INPUT_BUFFER_SIZE:
                    case Hy.ConnectionOption.OUTPUT_BUFFER_SIZE:
                        return t.minimumValueOption(e, r, _y.MIN_MAX_MESSAGE_SIZE);
                    case Hy.ConnectionOption.MAXIMUM_QUEUE_SIZE:
                        return t.minimumValueOption(e, r, 1);
                    case Hy.ConnectionOption.RECOVERY_BUFFER_SIZE:
                    case Hy.ConnectionOption.RETRY_DELAY:
                        return t.minimumValueOption(e, r, 0);
                    default:
                        throw new Error("Unknown option " + e);
                }
            }),
            (t.prototype.validateOption = function (e, r) {
                if (null == r) throw new Error("Connection Option '" + Hy.ConnectionOption[e] + "' value is null");
                if (this.type === Hy.RemoteServerType.SECONDARY_ACCEPTOR && t.INVALID_ACCEPTOR_OPTIONS.includes(e)) throw new Error("Connection Option '" + Hy.ConnectionOption[e] + "' cannot be specified for SECONDARY_ACCEPTOR servers");
            }),
            (t.prototype.getPrincipal = function () {
                return this.thePrincipal;
            }),
            (t.prototype.getCredentials = function () {
                return this.theCredentials;
            }),
            (t.prototype.getConnectionOptions = function () {
                return this.theConnectionOptions;
            }),
            (t.prototype.getMissingTopicNotificationFilter = function () {
                return this.theMissingTopicNotificationFilter;
            }),
            (t.prototype.principal = function (e) {
                return (this.thePrincipal = null != e ? e : ""), this;
            }),
            (t.prototype.credentials = function (e) {
                return (this.theCredentials = e || void 0), this;
            }),
            (t.prototype.connectionOptions = function (e) {
                var t,
                    r,
                    n = {};
                try {
                    for (var o = gv(Object.entries(e)), i = o.next(); !i.done; i = o.next()) {
                        var s = Ov(i.value, 2),
                            a = s[0],
                            u = s[1],
                            c = parseInt(a, 10);
                        n[c] = this.validateConnectionOption(c, u);
                    }
                } catch (e) {
                    t = { error: e };
                } finally {
                    try {
                        i && !i.done && (r = o.return) && r.call(o);
                    } finally {
                        if (t) throw t.error;
                    }
                }
                return (this.theConnectionOptions = n), this;
            }),
            (t.prototype.connectionOption = function (e, t) {
                return $c.requireNonNull(e, "connectionOption"), null == t ? delete this.theConnectionOptions[e] : (this.theConnectionOptions[e] = this.validateConnectionOption(e, t)), this;
            }),
            (t.prototype.missingTopicNotificationFilter = function (e) {
                if (null != e)
                    try {
                        this.topicSelectors.parse(e);
                    } catch (e) {
                        throw new Error("filter is invalid: " + e);
                    }
                return (this.theMissingTopicNotificationFilter = e || void 0), this;
            }),
            (t.prototype.reset = function () {
                return (this.thePrincipal = ""), (this.theCredentials = void 0), (this.theConnectionOptions = {}), (this.theMissingTopicNotificationFilter = void 0), this;
            }),
            (t.INVALID_ACCEPTOR_OPTIONS = [Hy.ConnectionOption.RECONNECTION_TIMEOUT, Hy.ConnectionOption.RETRY_DELAY, Hy.ConnectionOption.RECOVERY_BUFFER_SIZE]),
            t
        );
    })(dv.RemoteServerBuilderBaseImpl);
    mv.SecondaryBuilderImpl = Rv;
    var bv = {},
        Cv =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(bv, "__esModule", { value: !0 }), (bv.SecondaryAcceptorBuilderImpl = void 0);
    var Pv = (function (e) {
        function t(t) {
            return e.call(this, Hy.RemoteServerType.SECONDARY_ACCEPTOR, t) || this;
        }
        return (
            Cv(t, e),
            (t.prototype.build = function (e, r) {
                return nv.RemoteServerDefinitionImpl.createSecondaryDefinition(
                    Hy.RemoteServerType.SECONDARY_ACCEPTOR,
                    t.validateName(e),
                    $c.requireNonNull(r, "primaryHostName"),
                    this.getPrincipal(),
                    this.getConnectionOptions(),
                    this.getMissingTopicNotificationFilter(),
                    this.getCredentials()
                );
            }),
            t
        );
    })(mv.SecondaryBuilderImpl);
    bv.SecondaryAcceptorBuilderImpl = Pv;
    var Nv = {},
        Av =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Nv, "__esModule", { value: !0 }), (Nv.SecondaryInitiatorBuilderImpl = void 0);
    var Mv = (function (e) {
        function t(t) {
            return e.call(this, Hy.RemoteServerType.SECONDARY_INITIATOR, t) || this;
        }
        return (
            Av(t, e),
            (t.prototype.build = function (e, r) {
                return nv.RemoteServerDefinitionImpl.createSecondaryDefinition(
                    Hy.RemoteServerType.SECONDARY_INITIATOR,
                    t.validateName(e),
                    this.validateUrl(r),
                    this.getPrincipal(),
                    this.getConnectionOptions(),
                    this.getMissingTopicNotificationFilter(),
                    this.getCredentials()
                );
            }),
            t
        );
    })(mv.SecondaryBuilderImpl);
    Nv.SecondaryInitiatorBuilderImpl = Mv;
    var jv = {};
    Object.defineProperty(jv, "__esModule", { value: !0 }),
        (jv.newRemoteServerBuilder = jv.newTopicMetricCollectorBuilder = jv.newSessionMetricCollectorBuilder = jv.newBranchMappingTableBuilder = jv.rolesToString = jv.stringToRoles = jv.escape = void 0),
        (jv.escape = function (e) {
            return Jp.escape($c.requireNonNull(e, "string"));
        }),
        (jv.stringToRoles = function (e) {
            return Jp.stringToSet($c.requireNonNull(e, "string"));
        }),
        (jv.rolesToString = function (e) {
            return Jp.collectionToString($c.requireNonNull(e, "roles"));
        }),
        (jv.newBranchMappingTableBuilder = function () {
            return new lv.BranchMappingTableBuilderImpl();
        }),
        (jv.newSessionMetricCollectorBuilder = function () {
            return new Jy.SessionMetricCollectorBuilderImpl();
        }),
        (jv.newTopicMetricCollectorBuilder = function () {
            return new tv.TopicMetricCollectorBuilderImpl();
        }),
        (jv.newRemoteServerBuilder = function (e, t) {
            switch (t) {
                case void 0:
                    return new iv.RemoteServerBuilderImpl(e);
                case Hy.RemoteServerType.PRIMARY_INITIATOR:
                    return new vv.PrimaryInitiatorBuilderImpl();
                case Hy.RemoteServerType.SECONDARY_ACCEPTOR:
                    return new bv.SecondaryAcceptorBuilderImpl(e);
                case Hy.RemoteServerType.SECONDARY_INITIATOR:
                    return new Nv.SecondaryInitiatorBuilderImpl(e);
                default:
                    throw new Error("Unknown remote server type");
            }
        });
    var Lv = {},
        Dv =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })(),
        xv =
            (this && this.__awaiter) ||
            function (e, t, r, n) {
                return new (r || (r = Promise))(function (o, i) {
                    function s(e) {
                        try {
                            u(n.next(e));
                        } catch (e) {
                            i(e);
                        }
                    }
                    function a(e) {
                        try {
                            u(n.throw(e));
                        } catch (e) {
                            i(e);
                        }
                    }
                    function u(e) {
                        var t;
                        e.done
                            ? o(e.value)
                            : ((t = e.value),
                              t instanceof r
                                  ? t
                                  : new r(function (e) {
                                        e(t);
                                    })).then(s, a);
                    }
                    u((n = n.apply(e, t || [])).next());
                });
            },
        Bv =
            (this && this.__generator) ||
            function (e, t) {
                var r,
                    n,
                    o,
                    i,
                    s = {
                        label: 0,
                        sent: function () {
                            if (1 & o[0]) throw o[1];
                            return o[1];
                        },
                        trys: [],
                        ops: [],
                    };
                return (
                    (i = { next: a(0), throw: a(1), return: a(2) }),
                    "function" == typeof Symbol &&
                        (i[Symbol.iterator] = function () {
                            return this;
                        }),
                    i
                );
                function a(i) {
                    return function (a) {
                        return (function (i) {
                            if (r) throw new TypeError("Generator is already executing.");
                            for (; s; )
                                try {
                                    if (((r = 1), n && (o = 2 & i[0] ? n.return : i[0] ? n.throw || ((o = n.return) && o.call(n), 0) : n.next) && !(o = o.call(n, i[1])).done)) return o;
                                    switch (((n = 0), o && (i = [2 & i[0], o.value]), i[0])) {
                                        case 0:
                                        case 1:
                                            o = i;
                                            break;
                                        case 4:
                                            return s.label++, { value: i[1], done: !1 };
                                        case 5:
                                            s.label++, (n = i[1]), (i = [0]);
                                            continue;
                                        case 7:
                                            (i = s.ops.pop()), s.trys.pop();
                                            continue;
                                        default:
                                            if (!((o = s.trys), (o = o.length > 0 && o[o.length - 1]) || (6 !== i[0] && 2 !== i[0]))) {
                                                s = 0;
                                                continue;
                                            }
                                            if (3 === i[0] && (!o || (i[1] > o[0] && i[1] < o[3]))) {
                                                s.label = i[1];
                                                break;
                                            }
                                            if (6 === i[0] && s.label < o[1]) {
                                                (s.label = o[1]), (o = i);
                                                break;
                                            }
                                            if (o && s.label < o[2]) {
                                                (s.label = o[2]), s.ops.push(i);
                                                break;
                                            }
                                            o[2] && s.ops.pop(), s.trys.pop();
                                            continue;
                                    }
                                    i = t.call(e, s);
                                } catch (e) {
                                    (i = [6, e]), (n = 0);
                                } finally {
                                    r = o = 0;
                                }
                            if (5 & i[0]) throw i[1];
                            return { value: i[0] ? i[1] : void 0, done: !0 };
                        })([i, a]);
                    };
                }
            },
        qv =
            (this && this.__read) ||
            function (e, t) {
                var r = "function" == typeof Symbol && e[Symbol.iterator];
                if (!r) return e;
                var n,
                    o,
                    i = r.call(e),
                    s = [];
                try {
                    for (; (void 0 === t || t-- > 0) && !(n = i.next()).done; ) s.push(n.value);
                } catch (e) {
                    o = { error: e };
                } finally {
                    try {
                        n && !n.done && (r = i.return) && r.call(i);
                    } finally {
                        if (o) throw o.error;
                    }
                }
                return s;
            },
        Uv =
            (this && this.__spreadArray) ||
            function (e, t) {
                for (var r = 0, n = t.length, o = e.length; r < n; r++, o++) e[o] = t[r];
                return e;
            };
    Object.defineProperty(Lv, "__esModule", { value: !0 }), (Lv.registerTopicHandler = Lv.registerRequestHandler = Lv.registerHandler = Lv.registrationCallback = Lv.responseHandler = Lv.ResponseHandlerState = void 0);
    var kv,
        Vv = yu.create("Registration");
    !(function (e) {
        (e[(e.REGISTERING = 0)] = "REGISTERING"), (e[(e.ACTIVE = 1)] = "ACTIVE"), (e[(e.CLOSED = 2)] = "CLOSED");
    })((kv = Lv.ResponseHandlerState || (Lv.ResponseHandlerState = {})));
    var Fv = (function (e) {
        function t(t) {
            for (var r = [], n = 1; n < arguments.length; n++) r[n - 1] = arguments[n];
            var o = e.apply(this, Uv([], qv(r))) || this;
            return (o.cause = t), o;
        }
        return Dv(t, e), t;
    })(Error);
    function Gv(e, t, r) {
        var n,
            o = kv.REGISTERING;
        return {
            onDiscard: function (r, n) {
                try {
                    n instanceof e.getContext().CloseReason ? t.close() : t.close(n);
                } catch (n) {
                    Vv.error("REGISTERED_HANDLER_EXCEPTION", n);
                }
                o = kv.CLOSED;
            },
            onOpen: function (t) {
                n = function () {
                    return new Promise(function (n, i) {
                        o !== kv.CLOSED
                            ? r(t, function (r) {
                                  r ? (e.getConversationSet().discard(t, r), i(r)) : (e.getConversationSet().respondIfPresent(t, kv.CLOSED), n());
                              })
                            : i(new Error("Handler already closed"));
                    });
                };
            },
            onResponse: function (r, i) {
                if (i === kv.CLOSED) {
                    try {
                        t.close();
                    } catch (e) {
                        Vv.error("REGISTERED_HANDLER_EXCEPTION", e);
                    }
                    return (o = i), !0;
                }
                try {
                    return i === kv.ACTIVE ? (t.active(n, r), (o = i), !1) : t.respond(i);
                } catch (t) {
                    Vv.error("REGISTERED_HANDLER_EXCEPTION", t),
                        e.getConversationSet().discard(r, new Fv(t, "An error was thrown by the handler")),
                        n().catch(function (e) {
                            Vv.debug("Failed to deregister with the server", e);
                        });
                }
                return !0;
            },
        };
    }
    function Hv(e, t, r, n) {
        return function (o) {
            o ? (e.discard(t, o), n(o)) : (e.respondIfPresent(t, kv.ACTIVE), r());
        };
    }
    function Yv(e, t, r, n, o) {
        return xv(this, void 0, void 0, function () {
            var i, s, a, u, c;
            return Bv(this, function (l) {
                switch (l.label) {
                    case 0:
                        return (
                            (i = e.getConversationSet()),
                            (s = e.getServiceLocator()),
                            (a = s.obtain(n)),
                            (u = s.obtain(o)),
                            [
                                4,
                                i.newConversation(
                                    Gv(e, r, function (e, r) {
                                        u.send(t, r);
                                    })
                                ),
                            ]
                        );
                    case 1:
                        return (
                            (c = l.sent()),
                            [
                                2,
                                new Promise(function (e, r) {
                                    a.send({ params: t, cid: c }, Hv(i, c, e, r));
                                }),
                            ]
                        );
                }
            });
        });
    }
    (Lv.responseHandler = Gv),
        (Lv.registrationCallback = Hv),
        (Lv.registerHandler = Yv),
        (Lv.registerRequestHandler = function (e, t, r) {
            return Yv(e, t, r, cy.MESSAGING_RECEIVER_CONTROL_REGISTRATION, cy.MESSAGING_RECEIVER_CONTROL_DEREGISTRATION);
        }),
        (Lv.registerTopicHandler = function (e, t, r) {
            return Yv(e, t, r, cy.TOPIC_CONTROL_REGISTRATION, cy.TOPIC_CONTROL_DEREGISTRATION);
        });
    var Wv = {};
    Object.defineProperty(Wv, "__esModule", { value: !0 }), (Wv.SessionFetchResultImpl = void 0);
    var Qv = (function () {
        function e(e, t) {
            (this.resultList = e), (this.totalSelectedCount = t), (this.hasMoreFlag = e.length < t);
        }
        return (
            (e.prototype.results = function () {
                return this.resultList;
            }),
            (e.prototype.hasMore = function () {
                return this.hasMoreFlag;
            }),
            (e.prototype.size = function () {
                return this.resultList.length;
            }),
            (e.prototype.totalSelected = function () {
                return this.totalSelectedCount;
            }),
            (e.prototype.isEmpty = function () {
                return 0 === this.resultList.length;
            }),
            e
        );
    })();
    Wv.SessionFetchResultImpl = Qv;
    var zv = {};
    Object.defineProperty(zv, "__esModule", { value: !0 }), (zv.StringSerialiser = void 0);
    var Kv = (function () {
        function e() {}
        return (
            (e.prototype.read = function (e) {
                return tu.readString(e);
            }),
            (e.prototype.write = function (e, t) {
                tu.writeString(e, t);
            }),
            e
        );
    })();
    zv.StringSerialiser = new Kv();
    var Jv = {},
        $v =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Jv, "__esModule", { value: !0 }), (Jv.TopicSelectorSerialiser = void 0);
    var Xv = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            $v(t, e),
            (t.prototype.read = function (e) {
                return vf.parseSelector(tu.readString(e));
            }),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.expression);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    Jv.TopicSelectorSerialiser = new Xv();
    var Zv = {};
    Object.defineProperty(Zv, "__esModule", { value: !0 }), (Zv.ClientFilterSubscribeRequest = void 0);
    var eS = function (e, t) {
        (this.filter = e), (this.selector = t);
    };
    Zv.ClientFilterSubscribeRequest = eS;
    var tS = {},
        rS =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(tS, "__esModule", { value: !0 }), (tS.ClientFilterSubscribeRequestSerialiser = void 0);
    var nS = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            rS(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readString(e),
                    r = Jv.TopicSelectorSerialiser.read(e);
                return new Zv.ClientFilterSubscribeRequest(t, r);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.filter), Jv.TopicSelectorSerialiser.write(e, t.selector);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    tS.ClientFilterSubscribeRequestSerialiser = new nS();
    var oS = {};
    Object.defineProperty(oS, "__esModule", { value: !0 }), (oS.ErrorReportImpl = void 0);
    var iS = (function () {
        function e(e, t, r) {
            (this.message = $c.requireNonNull(e, "message")), (this.line = t || 0), (this.column = r || 0);
        }
        return (
            (e.prototype.toString = function () {
                return "ErrorReport [" + this.message + " at [" + this.line + ":" + this.column + "]]";
            }),
            e
        );
    })();
    oS.ErrorReportImpl = iS;
    var sS = {},
        aS =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(sS, "__esModule", { value: !0 }), (sS.ErrorReportSerialiser = void 0);
    var uS = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            aS(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readString(e),
                    r = tu.readInt32(e),
                    n = tu.readInt32(e);
                return new oS.ErrorReportImpl(t, r, n);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.message), tu.writeInt32(e, t.line), tu.writeInt32(e, t.column);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    sS.ErrorReportSerialiser = new uS();
    var cS = {};
    Object.defineProperty(cS, "__esModule", { value: !0 }), (cS.ClientFilterSubscribeResponse = void 0);
    var lS = (function () {
        function e(e, t) {
            (this.selected = e), (this.errors = t);
        }
        return (
            (e.prototype.isSuccess = function () {
                return 0 === this.errors.length;
            }),
            e
        );
    })();
    cS.ClientFilterSubscribeResponse = lS;
    var pS = {},
        fS =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(pS, "__esModule", { value: !0 }), (pS.ClientFilterSubscribeResponseSerialiser = void 0);
    var hS = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            fS(t, e),
            (t.prototype.read = function (e) {
                if (tu.readByte(e)) {
                    var t = tu.readCollection(e, sS.ErrorReportSerialiser.read);
                    return new cS.ClientFilterSubscribeResponse(0, t);
                }
                var r = tu.readInt32(e);
                return new cS.ClientFilterSubscribeResponse(r, []);
            }),
            (t.prototype.write = function (e, t) {
                t.isSuccess() ? (tu.writeByte(e, 0), tu.writeInt32(e, t.selected)) : (tu.writeByte(e, 1), tu.writeCollection(e, t.errors, sS.ErrorReportSerialiser.write));
            }),
            t
        );
    })(ou.AbstractSerialiser);
    pS.ClientFilterSubscribeResponseSerialiser = new hS();
    var dS = {};
    Object.defineProperty(dS, "__esModule", { value: !0 }), (dS.SessionIdSerialiser = void 0);
    var yS = (function () {
        function e() {}
        return (
            (e.prototype.read = function (e) {
                var t = tu.readInt64(e),
                    r = tu.readInt64(e);
                return new _h.SessionId(t, r);
            }),
            (e.prototype.write = function (e, t) {
                tu.writeInt64(e, t.server), tu.writeInt64(e, t.value);
            }),
            e
        );
    })();
    dS.SessionIdSerialiser = new yS();
    var vS = {};
    Object.defineProperty(vS, "__esModule", { value: !0 }), (vS.ClientSubscribeRequest = void 0);
    var SS = function (e, t) {
        (this.sessionID = e), (this.selector = t);
    };
    vS.ClientSubscribeRequest = SS;
    var _S = {},
        ES =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(_S, "__esModule", { value: !0 }), (_S.ClientSubscribeRequestSerialiser = void 0);
    var wS = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            ES(t, e),
            (t.prototype.read = function (e) {
                var t = dS.SessionIdSerialiser.read(e),
                    r = Jv.TopicSelectorSerialiser.read(e);
                return new vS.ClientSubscribeRequest(t, r);
            }),
            (t.prototype.write = function (e, t) {
                dS.SessionIdSerialiser.write(e, t.sessionID), Jv.TopicSelectorSerialiser.write(e, t.selector);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    _S.ClientSubscribeRequestSerialiser = new wS();
    var mS = {},
        TS =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(mS, "__esModule", { value: !0 }), (mS.ChangeAuthorisationRolesFilterRequestSerialiser = void 0);
    var gS = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            TS(t, e),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.filter), tu.writeCollection(e, t.rolesToRemove, tu.writeString), tu.writeCollection(e, t.rolesToAdd, tu.writeString);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    mS.ChangeAuthorisationRolesFilterRequestSerialiser = new gS();
    var OS = {},
        IS =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(OS, "__esModule", { value: !0 }), (OS.ChangeAuthorisationRolesRequestSerialiser = void 0);
    var RS = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            IS(t, e),
            (t.prototype.write = function (e, t) {
                if (void 0 === t.sessionID || null === t.sessionID) throw new Error("Session ID is null or undefined");
                dS.SessionIdSerialiser.write(e, t.sessionID), tu.writeCollection(e, t.rolesToRemove, tu.writeString), tu.writeCollection(e, t.rolesToAdd, tu.writeString);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    OS.ChangeAuthorisationRolesRequestSerialiser = new RS();
    var bS = {};
    Object.defineProperty(bS, "__esModule", { value: !0 }), (bS.CloseClientRequest = void 0);
    var CS = (function () {
        function e(e) {
            this.sessionID = e;
        }
        return (
            (e.prototype.toString = function () {
                return "CloseClientRequest [" + this.sessionID + "]";
            }),
            e
        );
    })();
    bS.CloseClientRequest = CS;
    var PS = {},
        NS =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(PS, "__esModule", { value: !0 }), (PS.CloseClientRequestSerialiser = void 0);
    var AS = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            NS(t, e),
            (t.prototype.read = function (e) {
                var t = dS.SessionIdSerialiser.read(e);
                return new bS.CloseClientRequest(t);
            }),
            (t.prototype.write = function (e, t) {
                dS.SessionIdSerialiser.write(e, t.sessionID);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    PS.CloseClientRequestSerialiser = new AS();
    var MS = {},
        jS =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(MS, "__esModule", { value: !0 }), (MS.GetSessionPropertiesRequestSerialiser = void 0);
    var LS = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            jS(t, e),
            (t.prototype.write = function (e, t) {
                if (void 0 === t.sessionID || null === t.sessionID) throw new Error("session ID is null or undefined");
                dS.SessionIdSerialiser.write(e, t.sessionID), void 0 !== t.propertyKeys && null !== t.propertyKeys ? tu.writeCollection(e, t.propertyKeys, tu.writeString) : tu.writeCollection(e, [], tu.writeString);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    MS.GetSessionPropertiesRequestSerialiser = new LS();
    var DS = {};
    Object.defineProperty(DS, "__esModule", { value: !0 }), (DS.GetSessionPropertiesResponse = void 0);
    var xS = (function () {
        function e(e) {
            this.properties = e;
        }
        return (
            (e.prototype.toString = function () {
                return "GetSessionPropertiesResponse []";
            }),
            e
        );
    })();
    DS.GetSessionPropertiesResponse = xS;
    var BS = {},
        qS =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(BS, "__esModule", { value: !0 }), (BS.GetSessionPropertiesResponseSerialiser = void 0);
    var US = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            qS(t, e),
            (t.prototype.read = function (e) {
                return tu.readBoolean(e) ? new DS.GetSessionPropertiesResponse(tu.readDictionary(e, tu.readString)) : null;
            }),
            t
        );
    })(ou.AbstractSerialiser);
    BS.GetSessionPropertiesResponseSerialiser = new US();
    var kS = {};
    Object.defineProperty(kS, "__esModule", { value: !0 }),
        (kS.SessionCloseReason = void 0),
        (function (e) {
            (e[(e.CONNECTION_LOST = 0)] = "CONNECTION_LOST"),
                (e[(e.IO_EXCEPTION = 1)] = "IO_EXCEPTION"),
                (e[(e.CLIENT_UNRESPONSIVE = 2)] = "CLIENT_UNRESPONSIVE"),
                (e[(e.MESSAGE_QUEUE_LIMIT_REACHED = 3)] = "MESSAGE_QUEUE_LIMIT_REACHED"),
                (e[(e.CLOSED_BY_CLIENT = 4)] = "CLOSED_BY_CLIENT"),
                (e[(e.MESSAGE_TOO_LARGE = 5)] = "MESSAGE_TOO_LARGE"),
                (e[(e.INTERNAL_ERROR = 6)] = "INTERNAL_ERROR"),
                (e[(e.INVALID_INBOUND_MESSAGE = 7)] = "INVALID_INBOUND_MESSAGE"),
                (e[(e.ABORT = 8)] = "ABORT"),
                (e[(e.LOST_MESSAGES = 9)] = "LOST_MESSAGES"),
                (e[(e.SERVER_CLOSING = 10)] = "SERVER_CLOSING"),
                (e[(e.CLOSED_BY_CONTROLLER = 11)] = "CLOSED_BY_CONTROLLER");
        })(kS.SessionCloseReason || (kS.SessionCloseReason = {}));
    var VS = {};
    Object.defineProperty(VS, "__esModule", { value: !0 }), (VS.SessionPropertiesEvent = void 0);
    var FS = function (e, t, r, n, o, i) {
        (this.sessionId = e), (this.type = t), (this.updateType = r), (this.oldProperties = n), (this.newProperties = o), (this.closeReason = i);
    };
    VS.SessionPropertiesEvent = FS;
    var GS = {};
    Object.defineProperty(GS, "__esModule", { value: !0 }),
        (GS.SessionPropertiesEventType = void 0),
        (function (e) {
            (e[(e.OPEN = 0)] = "OPEN"), (e[(e.UPDATE = 1)] = "UPDATE"), (e[(e.CLOSE = 2)] = "CLOSE");
        })(GS.SessionPropertiesEventType || (GS.SessionPropertiesEventType = {}));
    var HS,
        YS = {},
        WS =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(YS, "__esModule", { value: !0 }),
        (YS.SessionPropertiesEventSerialiser = void 0),
        (function (e) {
            (e[(e.NEW = 1)] = "NEW"), (e[(e.CHANGE = 2)] = "CHANGE"), (e[(e.REMOVE = 3)] = "REMOVE"), (e[(e.SAME = 4)] = "SAME");
        })(HS || (HS = {}));
    var QS = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            WS(t, e),
            (t.prototype.read = function (e) {
                var t = dS.SessionIdSerialiser.read(e),
                    r = Rf.read(e, GS.SessionPropertiesEventType);
                switch (r) {
                    case GS.SessionPropertiesEventType.OPEN:
                        var n = tu.readDictionary(e, tu.readString);
                        return new VS.SessionPropertiesEvent(t, r, void 0, n);
                    case GS.SessionPropertiesEventType.UPDATE:
                        return (function (e, t) {
                            for (var r = tu.readByte(e), n = {}, o = {}, i = tu.readInt32(e), s = 0; s < i; ++s) {
                                var a = tu.readString(e);
                                switch (Rf.read(e, HS)) {
                                    case HS.NEW:
                                        (n[a] = null), (o[a] = tu.readString(e));
                                        break;
                                    case HS.CHANGE:
                                        (n[a] = tu.readString(e)), (o[a] = tu.readString(e));
                                        break;
                                    case HS.REMOVE:
                                        n[a] = tu.readString(e);
                                        break;
                                    case HS.SAME:
                                        o[a] = tu.readString(e);
                                        break;
                                    default:
                                        throw new Error("Invalid update entry type: type");
                                }
                            }
                            return new VS.SessionPropertiesEvent(t, GS.SessionPropertiesEventType.UPDATE, r, n, o);
                        })(e, t);
                    case GS.SessionPropertiesEventType.CLOSE:
                        var o = Rf.read(e, kS.SessionCloseReason),
                            i = tu.readDictionary(e, tu.readString);
                        return new VS.SessionPropertiesEvent(t, r, void 0, i, void 0, o);
                    default:
                        throw new Error("Unknown session properties event type: " + r);
                }
            }),
            t
        );
    })(ou.AbstractSerialiser);
    YS.SessionPropertiesEventSerialiser = new QS();
    var zS = {};
    Object.defineProperty(zS, "__esModule", { value: !0 }), (zS.SessionPropertiesEventBatch = void 0);
    var KS = function (e, t) {
        (this.cid = e), (this.events = t);
    };
    zS.SessionPropertiesEventBatch = KS;
    var JS = {},
        $S =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(JS, "__esModule", { value: !0 }), (JS.SessionPropertiesEventBatchSerialiser = void 0);
    var XS = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            $S(t, e),
            (t.prototype.read = function (e) {
                var t = ru.CIDSerialiser.read(e),
                    r = tu.readCollection(e, YS.SessionPropertiesEventSerialiser.read);
                return new zS.SessionPropertiesEventBatch(t, r);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    JS.SessionPropertiesEventBatchSerialiser = new XS();
    var ZS = {},
        e_ =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(ZS, "__esModule", { value: !0 }), (ZS.SetClientConflationFilterRequestSerialiser = void 0);
    var t_ = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            e_(t, e),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.filter), tu.writeBoolean(e, t.conflate);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    ZS.SetClientConflationFilterRequestSerialiser = new t_();
    var r_ = {},
        n_ =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(r_, "__esModule", { value: !0 }), (r_.SetClientConflationRequestSerialiser = void 0);
    var o_ = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            n_(t, e),
            (t.prototype.write = function (e, t) {
                dS.SessionIdSerialiser.write(e, t.sessionID), tu.writeBoolean(e, t.conflate);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    r_.SetClientConflationRequestSerialiser = new o_();
    var i_ = {},
        s_ =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(i_, "__esModule", { value: !0 }), (i_.SetSessionPropertiesFilterRequestSerialiser = void 0);
    var a_ = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            s_(t, e),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.filter),
                    0 === Object.keys(t.overwriteProperties).length ? tu.writeByte(e, 0) : (tu.writeByte(e, 1), tu.writeDictionary(e, t.overwriteProperties, tu.writeString)),
                    0 === Object.keys(t.removeProperties).length ? tu.writeByte(e, 0) : (tu.writeByte(e, 1), tu.writeCollection(e, t.removeProperties, tu.writeString));
            }),
            t
        );
    })(ou.AbstractSerialiser);
    i_.SetSessionPropertiesFilterRequestSerialiser = new a_();
    var u_ = {},
        c_ =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(u_, "__esModule", { value: !0 }), (u_.SetSessionPropertiesListenerSerialiser = void 0);
    var l_ = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            c_(t, e),
            (t.prototype.write = function (e, t) {
                t.properties ? (tu.writeInt32(e, 0), tu.writeCollection(e, t.properties, tu.writeString)) : tu.writeInt32(e, 1), ru.CIDSerialiser.write(e, t.cid);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    u_.SetSessionPropertiesListenerSerialiser = new l_();
    var p_ = {},
        f_ =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(p_, "__esModule", { value: !0 }), (p_.SetSessionPropertiesRequestSerialiser = void 0);
    var h_ = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            f_(t, e),
            (t.prototype.write = function (e, t) {
                if (void 0 === t.sessionID || null === t.sessionID) throw new Error("Session ID is null or undefined");
                dS.SessionIdSerialiser.write(e, t.sessionID),
                    0 === Object.keys(t.overwriteProperties).length ? tu.writeByte(e, 0) : (tu.writeByte(e, 1), tu.writeDictionary(e, t.overwriteProperties, tu.writeString)),
                    0 === Object.keys(t.removeProperties).length ? tu.writeByte(e, 0) : (tu.writeByte(e, 1), tu.writeCollection(e, t.removeProperties, tu.writeString));
            }),
            t
        );
    })(ou.AbstractSerialiser);
    p_.SetSessionPropertiesRequestSerialiser = new h_();
    var d_ = {},
        y_ =
            (this && this.__values) ||
            function (e) {
                var t = "function" == typeof Symbol && Symbol.iterator,
                    r = t && e[t],
                    n = 0;
                if (r) return r.call(e);
                if (e && "number" == typeof e.length)
                    return {
                        next: function () {
                            return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
                        },
                    };
                throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
            };
    Object.defineProperty(d_, "__esModule", { value: !0 }), (d_.SetSessionPropertiesResult = void 0);
    var v_ = function (e, t) {
        var r, n, o, i;
        this.properties = {};
        try {
            for (var s = y_(Object.getOwnPropertyNames(e)), a = s.next(); !a.done; a = s.next()) {
                var u = a.value;
                this.properties[u] = e[u];
            }
        } catch (e) {
            r = { error: e };
        } finally {
            try {
                a && !a.done && (n = s.return) && n.call(s);
            } finally {
                if (r) throw r.error;
            }
        }
        try {
            for (var c = y_(t), l = c.next(); !l.done; l = c.next()) {
                var p = l.value;
                this.properties[p] = null;
            }
        } catch (e) {
            o = { error: e };
        } finally {
            try {
                l && !l.done && (i = c.return) && i.call(c);
            } finally {
                if (o) throw o.error;
            }
        }
    };
    d_.SetSessionPropertiesResult = v_;
    var S_ = {},
        __ =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(S_, "__esModule", { value: !0 }), (S_.SetSessionPropertiesResultSerialiser = void 0);
    var E_ = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            __(t, e),
            (t.prototype.read = function (e) {
                var t, r;
                return (t = 0 === tu.readByte(e) ? {} : tu.readDictionary(e, tu.readString)), (r = 0 === tu.readByte(e) ? [] : tu.readCollection(e, tu.readString)), new d_.SetSessionPropertiesResult(t, r);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    S_.SetSessionPropertiesResultSerialiser = new E_();
    var w_ = {};
    Object.defineProperty(w_, "__esModule", { value: !0 }), (w_.CountOrParserErrors = void 0);
    var m_ = function (e, t) {
        (this.count = $c.requireNonNull(e, "count")), (this.errors = $c.requireNonNull(t, "errors"));
    };
    w_.CountOrParserErrors = m_;
    var T_ = {},
        g_ =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(T_, "__esModule", { value: !0 }), (T_.CountOrParserErrorsSerialiser = void 0);
    var O_ = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            g_(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readInt32(e),
                    r = tu.readCollection(e, sS.ErrorReportSerialiser.read);
                return new w_.CountOrParserErrors(t, r);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeInt32(e, t.count), tu.writeCollection(e, t.errors, sS.ErrorReportSerialiser.write);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    T_.CountOrParserErrorsSerialiser = new O_();
    var I_ = {};
    Object.defineProperty(I_, "__esModule", { value: !0 }), (I_.ErrorReportList = void 0);
    var R_ = (function () {
        function e(e) {
            this.errors = $c.requireNonNull(e, "errors");
        }
        return (
            (e.prototype.toString = function () {
                return "ErrorReportList [" + this.errors + "]";
            }),
            e
        );
    })();
    I_.ErrorReportList = R_;
    var b_ = {},
        C_ =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(b_, "__esModule", { value: !0 }), (b_.ErrorReportListSerialiser = void 0);
    var P_ = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            C_(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readCollection(e, sS.ErrorReportSerialiser.read);
                return new I_.ErrorReportList(t);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeCollection(e, t.errors, sS.ErrorReportSerialiser.write);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    b_.ErrorReportListSerialiser = new P_();
    var N_ = {};
    Object.defineProperty(N_, "__esModule", { value: !0 }), (N_.SessionFetchQueryResult = void 0);
    var A_ = function (e, t, r) {
        (this.results = e), (this.totalCount = t), (this.errors = r);
    };
    N_.SessionFetchQueryResult = A_;
    var M_ = {},
        j_ =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    function L_(e) {
        var t = null;
        1 === tu.readByte(e) && (t = tu.readInt64(e));
        var r = tu.readDictionary(e, tu.readString);
        return t && (r.$StartTime = t.toString()), r;
    }
    Object.defineProperty(M_, "__esModule", { value: !0 }), (M_.SessionFetchQueryResultSerialiser = void 0);
    var D_ = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            j_(t, e),
            (t.prototype.read = function (e) {
                if (0 === tu.readByte(e)) {
                    var t = tu.readCollection(e, L_),
                        r = tu.readInt32(e);
                    return new N_.SessionFetchQueryResult(t, r);
                }
                var n = b_.ErrorReportListSerialiser.read(e);
                return new N_.SessionFetchQueryResult(void 0, void 0, n);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    M_.SessionFetchQueryResultSerialiser = new D_();
    var x_ = {},
        B_ =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })(),
        q_ =
            (this && this.__read) ||
            function (e, t) {
                var r = "function" == typeof Symbol && e[Symbol.iterator];
                if (!r) return e;
                var n,
                    o,
                    i = r.call(e),
                    s = [];
                try {
                    for (; (void 0 === t || t-- > 0) && !(n = i.next()).done; ) s.push(n.value);
                } catch (e) {
                    o = { error: e };
                } finally {
                    try {
                        n && !n.done && (r = i.return) && r.call(i);
                    } finally {
                        if (o) throw o.error;
                    }
                }
                return s;
            },
        U_ =
            (this && this.__spreadArray) ||
            function (e, t) {
                for (var r = 0, n = t.length, o = e.length; r < n; r++, o++) e[o] = t[r];
                return e;
            };
    function k_(e, t) {
        void 0 === t ? tu.writeByte(e, 0) : (tu.writeByte(e, 1), tu.writeInt64(e, t));
    }
    Object.defineProperty(x_, "__esModule", { value: !0 }), (x_.SessionFetchQuerySerialiser = void 0);
    var V_ = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            B_(t, e),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.filter),
                    (function (e, t) {
                        null === t ? tu.writeByte(e, 0) : (tu.writeByte(e, 1), tu.writeCollection(e, U_([], q_(t)), tu.writeString));
                    })(e, t.withProperties),
                    (function (e, t) {
                        k_(e, t.from), k_(e, t.to);
                    })(e, t.range),
                    (function (e, t) {
                        t === fc.MAX_INT32 ? tu.writeByte(e, 0) : (tu.writeByte(e, 1), tu.writeInt32(e, t));
                    })(e, t.limit),
                    tu.writeInt32(e, t.maximumResultSize),
                    tu.writeBoolean(e, t.requiresStartTime);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    x_.SessionFetchQuerySerialiser = new V_();
    var F_ = {};
    Object.defineProperty(F_, "__esModule", { value: !0 }),
        (F_.SESSION_FETCH = F_.SET_CLIENT_CONFLATION_FILTER = F_.CLOSE_CLIENT_FILTER = F_.CHANGE_AUTHORISATION_ROLES_FILTER = F_.CHANGE_AUTHORISATION_ROLES = F_.SET_SESSION_PROPERTIES_FILTER = F_.SET_SESSION_PROPERTIES = F_.SESSION_PROPERTIES_EVENT_2 = F_.SESSION_PROPERTIES_REGISTRATION_2 = F_.GET_SESSION_PROPERTIES = F_.FILTER_UNSUBSCRIBE = F_.FILTER_SUBSCRIBE = F_.SET_CLIENT_CONFLATION = F_.CLOSE_CLIENT = F_.UNSUBSCRIBE_CLIENT = F_.SUBSCRIBE_CLIENT = void 0),
        (F_.SUBSCRIBE_CLIENT = { id: 10, request: _S.ClientSubscribeRequestSerialiser, response: Md.NullSerialiser }),
        (F_.UNSUBSCRIBE_CLIENT = { id: 11, request: _S.ClientSubscribeRequestSerialiser, response: Md.NullSerialiser }),
        (F_.CLOSE_CLIENT = { id: 14, request: PS.CloseClientRequestSerialiser, response: Md.NullSerialiser }),
        (F_.SET_CLIENT_CONFLATION = { id: 15, request: r_.SetClientConflationRequestSerialiser, response: Md.NullSerialiser }),
        (F_.FILTER_SUBSCRIBE = { id: 65, request: tS.ClientFilterSubscribeRequestSerialiser, response: pS.ClientFilterSubscribeResponseSerialiser }),
        (F_.FILTER_UNSUBSCRIBE = { id: 66, request: tS.ClientFilterSubscribeRequestSerialiser, response: pS.ClientFilterSubscribeResponseSerialiser }),
        (F_.GET_SESSION_PROPERTIES = { id: 67, request: MS.GetSessionPropertiesRequestSerialiser, response: BS.GetSessionPropertiesResponseSerialiser }),
        (F_.SESSION_PROPERTIES_REGISTRATION_2 = { id: 81, request: u_.SetSessionPropertiesListenerSerialiser, response: Md.NullSerialiser }),
        (F_.SESSION_PROPERTIES_EVENT_2 = { id: 82, request: JS.SessionPropertiesEventBatchSerialiser, response: Md.NullSerialiser }),
        (F_.SET_SESSION_PROPERTIES = { id: 105, request: p_.SetSessionPropertiesRequestSerialiser, response: S_.SetSessionPropertiesResultSerialiser }),
        (F_.SET_SESSION_PROPERTIES_FILTER = { id: 106, request: i_.SetSessionPropertiesFilterRequestSerialiser, response: T_.CountOrParserErrorsSerialiser }),
        (F_.CHANGE_AUTHORISATION_ROLES = { id: 123, request: OS.ChangeAuthorisationRolesRequestSerialiser, response: Md.NullSerialiser }),
        (F_.CHANGE_AUTHORISATION_ROLES_FILTER = { id: 124, request: mS.ChangeAuthorisationRolesFilterRequestSerialiser, response: T_.CountOrParserErrorsSerialiser }),
        (F_.CLOSE_CLIENT_FILTER = { id: 162, request: zv.StringSerialiser, response: T_.CountOrParserErrorsSerialiser }),
        (F_.SET_CLIENT_CONFLATION_FILTER = { id: 163, request: ZS.SetClientConflationFilterRequestSerialiser, response: T_.CountOrParserErrorsSerialiser }),
        (F_.SESSION_FETCH = { id: 168, request: x_.SessionFetchQuerySerialiser, response: M_.SessionFetchQueryResultSerialiser });
    var G_ = {};
    Object.defineProperty(G_, "__esModule", { value: !0 }), (G_.SessionFetchQuery = void 0);
    var H_ = function (e, t, r, n, o, i) {
        (this.filter = e), (this.range = t), (this.withProperties = r), (this.limit = n), (this.maximumResultSize = o), (this.requiresStartTime = i);
    };
    G_.SessionFetchQuery = H_;
    var Y_ = {};
    Object.defineProperty(Y_, "__esModule", { value: !0 }),
        (Y_.ClientControlOptions = void 0),
        (Y_.ClientControlOptions = {
            PropertyKeys: Object.freeze({
                ALL_FIXED_PROPERTIES: ["*F"],
                ALL_USER_PROPERTIES: ["*U"],
                ALL_PROPERTIES: ["*F", "*U"],
                SESSION_ID: "$SessionId",
                PRINCIPAL: "$Principal",
                CONNECTOR: "$Connector",
                TRANSPORT: "$Transport",
                CLIENT_TYPE: "$ClientType",
                COUNTRY: "$Country",
                LANGUAGE: "$Language",
                SERVER_NAME: "$ServerName",
                CLIENT_IP: "$ClientIP",
                LATITUDE: "$Latitude",
                LONGITUDE: "$Longitude",
                START_TIME: "$StartTime",
                ROLES: "$Roles",
                MQTT_CLIENT_ID: "$MQTTClientId",
                GATEWAY_TYPE: "$GatewayType",
                GATEWAY_ID: "$GatewayId",
            }),
            ANONYMOUS: "",
            CloseReason: rd.CloseReasonEnum,
        });
    var W_ = {};
    Object.defineProperty(W_, "__esModule", { value: !0 }), (W_.SessionFetchRequestImpl = void 0);
    var Q_ = yu.create("Session Fetch Request"),
        z_ = (function () {
            function e(e, t) {
                (this.from = e), (this.to = t);
            }
            return (
                (e.prototype.isUnbounded = function () {
                    return void 0 === this.from && void 0 === this.to;
                }),
                e
            );
        })();
    function K_(e, t) {
        if (!Number.isInteger(e) || e < 0) throw new Error("Invalid argument '" + t + "': " + e);
        return e;
    }
    function J_(e, t) {
        if (e instanceof _a && e.gte(0)) return e;
        if ("number" == typeof e && Number.isInteger(e) && e >= 0) return _a.fromNumber(e);
        throw new Error("Invalid argument '" + t + "': " + e);
    }
    var $_ = (function () {
        function e(e, t) {
            var r = { range: new z_(), filter: "all", withProperties: null, limit: fc.MAX_INT32, maximumResultSize: e.getOptions().maxMessageSize };
            (this.internal = e), (this.options = Object.assign(r, t));
        }
        return (
            (e.prototype.copyOptions = function () {
                return {
                    range: new z_(this.options.range.from, this.options.range.to),
                    filter: this.options.filter,
                    withProperties: this.options.withProperties,
                    limit: this.options.limit,
                    maximumResultSize: this.options.maximumResultSize,
                };
            }),
            (e.prototype.from = function (t) {
                var r = J_(t, "time");
                return new e(this.internal, Object.assign(this.copyOptions(), { range: new z_(r, this.options.range.to) }));
            }),
            (e.prototype.to = function (t) {
                var r = J_(t, "time");
                return new e(this.internal, Object.assign(this.copyOptions(), { range: new z_(this.options.range.from, r) }));
            }),
            (e.prototype.withProperties = function (t) {
                return new e(this.internal, Object.assign(this.copyOptions(), { withProperties: t }));
            }),
            (e.prototype.first = function (t) {
                return new e(this.internal, Object.assign(this.copyOptions(), { limit: K_(t, "count") }));
            }),
            (e.prototype.last = function (t) {
                return new e(this.internal, Object.assign(this.copyOptions(), { limit: 0 - K_(t, "count") }));
            }),
            (e.prototype.maximumResultSize = function (t) {
                return new e(this.internal, Object.assign(this.copyOptions(), { maximumResultSize: Math.min(K_(t, "maximumSize"), this.internal.getOptions().maxMessageSize) }));
            }),
            (e.prototype.filter = function (t) {
                return new e(this.internal, Object.assign(this.copyOptions(), { filter: t }));
            }),
            (e.prototype.fetch = function () {
                var e = this.internal.getServiceLocator().obtain(F_.SESSION_FETCH),
                    t = this.options.withProperties && new Set(this.options.withProperties),
                    r = !t || t.has(Y_.ClientControlOptions.PropertyKeys.START_TIME) || t.has(Y_.ClientControlOptions.PropertyKeys.ALL_FIXED_PROPERTIES[0]),
                    n = new G_.SessionFetchQuery(this.options.filter, this.options.range, t, this.options.limit, this.options.maximumResultSize, r);
                return new Promise(function (t, r) {
                    e.send(n, function (e, n) {
                        qf.responseSuccess(e, n)
                            ? n.errors
                                ? (Q_.debug("Session fetch query failed"), r(n.errors.errors))
                                : t(new Wv.SessionFetchResultImpl(n.results || [], n.totalCount || 0))
                            : (Q_.debug("Session fetch query failed"), r(e));
                    });
                });
            }),
            e
        );
    })();
    W_.SessionFetchRequestImpl = $_;
    var X_ = {};
    Object.defineProperty(X_, "__esModule", { value: !0 }), (X_.ChangeAuthorisationRolesFilterRequest = void 0);
    var Z_ = function (e, t, r) {
        (this.filter = e), (this.rolesToRemove = t), (this.rolesToAdd = r);
    };
    X_.ChangeAuthorisationRolesFilterRequest = Z_;
    var eE = {};
    Object.defineProperty(eE, "__esModule", { value: !0 }), (eE.ChangeAuthorisationRolesRequest = void 0);
    var tE = function (e, t, r) {
        (this.sessionID = e), (this.rolesToRemove = t), (this.rolesToAdd = r);
    };
    eE.ChangeAuthorisationRolesRequest = tE;
    var rE = {};
    Object.defineProperty(rE, "__esModule", { value: !0 }), (rE.SetClientConflationFilterRequest = void 0);
    var nE = function (e, t) {
        (this.filter = e), (this.conflate = t);
    };
    rE.SetClientConflationFilterRequest = nE;
    var oE = {};
    Object.defineProperty(oE, "__esModule", { value: !0 }), (oE.SetClientConflationRequest = void 0);
    var iE = function (e, t) {
        (this.sessionID = e), (this.conflate = t);
    };
    oE.SetClientConflationRequest = iE;
    var sE = {};
    Object.defineProperty(sE, "__esModule", { value: !0 }), (sE.SetSessionPropertiesFilterRequest = void 0);
    var aE = function (e, t, r) {
        (this.filter = e), (this.overwriteProperties = t), (this.removeProperties = r);
    };
    sE.SetSessionPropertiesFilterRequest = aE;
    var uE = {};
    Object.defineProperty(uE, "__esModule", { value: !0 }),
        (uE.SessionEventType = void 0),
        (function (e) {
            (e[(e.UPDATED = 0)] = "UPDATED"), (e[(e.RECONNECTED = 1)] = "RECONNECTED"), (e[(e.FAILED_OVER = 2)] = "FAILED_OVER"), (e[(e.DISCONNECTED = 3)] = "DISCONNECTED");
        })(uE.SessionEventType || (uE.SessionEventType = {}));
    var cE = {},
        lE =
            (this && this.__awaiter) ||
            function (e, t, r, n) {
                return new (r || (r = Promise))(function (o, i) {
                    function s(e) {
                        try {
                            u(n.next(e));
                        } catch (e) {
                            i(e);
                        }
                    }
                    function a(e) {
                        try {
                            u(n.throw(e));
                        } catch (e) {
                            i(e);
                        }
                    }
                    function u(e) {
                        var t;
                        e.done
                            ? o(e.value)
                            : ((t = e.value),
                              t instanceof r
                                  ? t
                                  : new r(function (e) {
                                        e(t);
                                    })).then(s, a);
                    }
                    u((n = n.apply(e, t || [])).next());
                });
            },
        pE =
            (this && this.__generator) ||
            function (e, t) {
                var r,
                    n,
                    o,
                    i,
                    s = {
                        label: 0,
                        sent: function () {
                            if (1 & o[0]) throw o[1];
                            return o[1];
                        },
                        trys: [],
                        ops: [],
                    };
                return (
                    (i = { next: a(0), throw: a(1), return: a(2) }),
                    "function" == typeof Symbol &&
                        (i[Symbol.iterator] = function () {
                            return this;
                        }),
                    i
                );
                function a(i) {
                    return function (a) {
                        return (function (i) {
                            if (r) throw new TypeError("Generator is already executing.");
                            for (; s; )
                                try {
                                    if (((r = 1), n && (o = 2 & i[0] ? n.return : i[0] ? n.throw || ((o = n.return) && o.call(n), 0) : n.next) && !(o = o.call(n, i[1])).done)) return o;
                                    switch (((n = 0), o && (i = [2 & i[0], o.value]), i[0])) {
                                        case 0:
                                        case 1:
                                            o = i;
                                            break;
                                        case 4:
                                            return s.label++, { value: i[1], done: !1 };
                                        case 5:
                                            s.label++, (n = i[1]), (i = [0]);
                                            continue;
                                        case 7:
                                            (i = s.ops.pop()), s.trys.pop();
                                            continue;
                                        default:
                                            if (!((o = s.trys), (o = o.length > 0 && o[o.length - 1]) || (6 !== i[0] && 2 !== i[0]))) {
                                                s = 0;
                                                continue;
                                            }
                                            if (3 === i[0] && (!o || (i[1] > o[0] && i[1] < o[3]))) {
                                                s.label = i[1];
                                                break;
                                            }
                                            if (6 === i[0] && s.label < o[1]) {
                                                (s.label = o[1]), (o = i);
                                                break;
                                            }
                                            if (o && s.label < o[2]) {
                                                (s.label = o[2]), s.ops.push(i);
                                                break;
                                            }
                                            o[2] && s.ops.pop(), s.trys.pop();
                                            continue;
                                    }
                                    i = t.call(e, s);
                                } catch (e) {
                                    (i = [6, e]), (n = 0);
                                } finally {
                                    r = o = 0;
                                }
                            if (5 & i[0]) throw i[1];
                            return { value: i[0] ? i[1] : void 0, done: !0 };
                        })([i, a]);
                    };
                }
            },
        fE =
            (this && this.__values) ||
            function (e) {
                var t = "function" == typeof Symbol && Symbol.iterator,
                    r = t && e[t],
                    n = 0;
                if (r) return r.call(e);
                if (e && "number" == typeof e.length)
                    return {
                        next: function () {
                            return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
                        },
                    };
                throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
            },
        hE =
            (this && this.__read) ||
            function (e, t) {
                var r = "function" == typeof Symbol && e[Symbol.iterator];
                if (!r) return e;
                var n,
                    o,
                    i = r.call(e),
                    s = [];
                try {
                    for (; (void 0 === t || t-- > 0) && !(n = i.next()).done; ) s.push(n.value);
                } catch (e) {
                    o = { error: e };
                } finally {
                    try {
                        n && !n.done && (r = i.return) && r.call(i);
                    } finally {
                        if (o) throw o.error;
                    }
                }
                return s;
            },
        dE =
            (this && this.__spreadArray) ||
            function (e, t) {
                for (var r = 0, n = t.length, o = e.length; r < n; r++, o++) e[o] = t[r];
                return e;
            };
    Object.defineProperty(cE, "__esModule", { value: !0 }), (cE.ClientControlImpl = void 0);
    var yE = yu.create("Session.Clients"),
        vE = (function () {
            function e(e) {
                (this.SessionEventType = uE.SessionEventType),
                    (this.internal = e),
                    (this.serviceLocator = e.getServiceLocator()),
                    (this.SET_CLIENT_CONFLATION = this.serviceLocator.obtain(F_.SET_CLIENT_CONFLATION)),
                    (this.SET_CLIENT_CONFLATION_FILTER = this.serviceLocator.obtain(F_.SET_CLIENT_CONFLATION_FILTER)),
                    (this.GET_SESSION_PROPERTIES = this.serviceLocator.obtain(F_.GET_SESSION_PROPERTIES)),
                    (this.SESSION_PROPERTIES_REGISTRATION = this.serviceLocator.obtain(F_.SESSION_PROPERTIES_REGISTRATION_2)),
                    (this.CHANGE_AUTHORISATION_ROLES = this.serviceLocator.obtain(F_.CHANGE_AUTHORISATION_ROLES)),
                    (this.CHANGE_AUTHORISATION_ROLES_FILTER = this.serviceLocator.obtain(F_.CHANGE_AUTHORISATION_ROLES_FILTER)),
                    (this.SET_SESSION_PROPERTIES_FILTER = this.serviceLocator.obtain(F_.SET_SESSION_PROPERTIES_FILTER)),
                    this.internal.getServiceRegistry().add(F_.SESSION_PROPERTIES_EVENT_2, {
                        onRequest: function (e, t, r) {
                            e.getConversationSet().respondIfPresent(t.cid, t), r.respond();
                        },
                    });
            }
            return (
                (e.prototype.close = function (e) {
                    var t = this;
                    return new Promise(function (r, n) {
                        try {
                            $c.requireNonNull(e, "sessions");
                        } catch (e) {
                            return void n(e);
                        }
                        if (t.internal.checkConnected(n)) {
                            var o = _h.SessionId.validate(e);
                            o
                                ? t.serviceLocator.obtain(F_.CLOSE_CLIENT).send({ sessionID: o }, function (e, t) {
                                      e ? n(e) : r(1);
                                  })
                                : "string" == typeof e
                                ? t.serviceLocator.obtain(F_.CLOSE_CLIENT_FILTER).send(e, function (e, t) {
                                      qf.responseSuccess(e, t) ? (t.errors.length > 0 ? n(t.errors) : r(t.count)) : n(e);
                                  })
                                : n(new Error("Invalid SessionID: " + e));
                        }
                    });
                }),
                (e.prototype.subscribe = function (e, t) {
                    var r = this;
                    return new Promise(function (n, o) {
                        try {
                            (e = $c.requireNonNull(e, "SessionID or Session Filter")), (t = $c.requireNonNull(t, "Topic Selector"));
                        } catch (e) {
                            return void o(e);
                        }
                        if (r.internal.checkConnected(o)) {
                            var i = void 0;
                            try {
                                i = r.internal.getContext().parseSelector(t);
                            } catch (e) {
                                return void o(e);
                            }
                            var s = _h.SessionId.validate(e);
                            s
                                ? r.serviceLocator.obtain(F_.SUBSCRIBE_CLIENT).send({ sessionID: s, selector: i }, function (e) {
                                      e ? o(e) : n();
                                  })
                                : r.serviceLocator.obtain(F_.FILTER_SUBSCRIBE).send({ filter: e, selector: i }, function (e, t) {
                                      qf.responseSuccess(e, t) ? (t.isSuccess() ? n(t.selected) : o(t.errors)) : o(e);
                                  });
                        }
                    });
                }),
                (e.prototype.unsubscribe = function (e, t) {
                    var r = this;
                    return new Promise(function (n, o) {
                        try {
                            $c.requireNonNull(e, "SessionID or Session Filter"), $c.requireNonNull(t, "Topic Selector");
                        } catch (e) {
                            return void o(e);
                        }
                        if (r.internal.checkConnected(o)) {
                            var i = void 0;
                            try {
                                i = r.internal.getContext().parseSelector(t);
                            } catch (e) {
                                return void o(e);
                            }
                            var s = _h.SessionId.validate(e);
                            s
                                ? r.serviceLocator.obtain(F_.UNSUBSCRIBE_CLIENT).send({ sessionID: s, selector: i }, function (e) {
                                      e ? o(e) : n();
                                  })
                                : r.serviceLocator.obtain(F_.FILTER_UNSUBSCRIBE).send({ filter: e, selector: i }, function (e, t) {
                                      qf.responseSuccess(e, t) ? (t.isSuccess() ? n(t.selected) : o(t.errors)) : o(e);
                                  });
                        }
                    });
                }),
                (e.prototype.getSessionProperties = function (e, t) {
                    var r = this;
                    return (
                        void 0 === t && (t = []),
                        new Promise(function (n, o) {
                            "string" == typeof e && (e = _h.SessionId.fromString(e)),
                                r.internal.checkConnected(o) &&
                                    r.GET_SESSION_PROPERTIES.send({ sessionID: e, propertyKeys: t }, function (e, t) {
                                        qf.responseSuccess(e, t) ? (null === t ? o(new Error("Invalid session ID")) : n(t.properties)) : o(e);
                                    });
                        })
                    );
                }),
                (e.prototype.setSessionProperties = function (e, t) {
                    var r = this;
                    return new Promise(function (n, o) {
                        try {
                            $c.requireNonNull(e, "sessionId"), $c.requireNonNull(t, "properties");
                        } catch (e) {
                            return void o(e);
                        }
                        if (("string" == typeof e && (e = _h.SessionId.fromString(e)), r.internal.checkConnected(o))) {
                            var i = {},
                                s = [];
                            r.extractOverwriteAndRemoveProperties(i, s, t),
                                r.serviceLocator.obtain(F_.SET_SESSION_PROPERTIES).send({ sessionID: e, overwriteProperties: i, removeProperties: s }, function (e, t) {
                                    qf.responseSuccess(e, t) ? n(t.properties) : o(e);
                                });
                        }
                    });
                }),
                (e.prototype.setOverwriteOrRemoveProperty = function (e, t, r, n) {
                    null === n ? t.push(r) : (e[r] = n);
                }),
                (e.prototype.extractOverwriteAndRemoveProperties = function (e, t, r) {
                    var n,
                        o,
                        i = this;
                    if (r.forEach instanceof Function)
                        r.forEach(function (r, n) {
                            i.setOverwriteOrRemoveProperty(e, t, r, n);
                        });
                    else
                        try {
                            for (var s = fE(Object.getOwnPropertyNames(r)), a = s.next(); !a.done; a = s.next()) {
                                var u = a.value;
                                this.setOverwriteOrRemoveProperty(e, t, u, r[u]);
                            }
                        } catch (e) {
                            n = { error: e };
                        } finally {
                            try {
                                a && !a.done && (o = s.return) && o.call(s);
                            } finally {
                                if (n) throw n.error;
                            }
                        }
                }),
                (e.prototype.setSessionPropertiesByFilter = function (e, t) {
                    var r = this;
                    return new Promise(function (n, o) {
                        try {
                            $c.requireNonNull(e, "filter"), $c.requireNonNull(t, "properties");
                        } catch (e) {
                            return void o(e);
                        }
                        if (r.internal.checkConnected(o)) {
                            var i = {},
                                s = [],
                                a = new sE.SetSessionPropertiesFilterRequest(e, i, s);
                            r.extractOverwriteAndRemoveProperties(i, s, t),
                                r.SET_SESSION_PROPERTIES_FILTER.send(a, function (e, t) {
                                    qf.responseSuccess(e, t) ? (t.errors.length > 0 ? o(t.errors) : n(t.count)) : o(e);
                                });
                        }
                    });
                }),
                (e.prototype.setSessionPropertiesListener = function (e, t) {
                    var r = this;
                    return new Promise(function (n, o) {
                        return lE(r, void 0, void 0, function () {
                            var r,
                                i,
                                s,
                                a = this;
                            return pE(this, function (u) {
                                switch (u.label) {
                                    case 0:
                                        return (
                                            t || o(new Error("Session Properties listener is null or undefined")),
                                            this.internal.checkConnected(o)
                                                ? (yE.debug("Adding Session Properties Listener"),
                                                  (r = {
                                                      active: function (e) {
                                                          yE.debug("Session Properties Listener active"), t.onActive(e);
                                                      },
                                                      respond: function (e) {
                                                          var r, n;
                                                          try {
                                                              for (var o = fE(e.events), i = o.next(); !i.done; i = o.next()) {
                                                                  var s = i.value;
                                                                  switch (s.type) {
                                                                      case GS.SessionPropertiesEventType.OPEN:
                                                                          t.onSessionOpen(s.sessionId, s.oldProperties);
                                                                          break;
                                                                      case GS.SessionPropertiesEventType.UPDATE:
                                                                          t.onSessionEvent(s.sessionId, s.updateType, s.newProperties, s.oldProperties);
                                                                          break;
                                                                      case GS.SessionPropertiesEventType.CLOSE:
                                                                          t.onSessionClose(s.sessionId, s.oldProperties, s.closeReason);
                                                                          break;
                                                                      default:
                                                                          yE.debug("Unknown event type received for session properties listener", s.type);
                                                                  }
                                                              }
                                                          } catch (e) {
                                                              r = { error: e };
                                                          } finally {
                                                              try {
                                                                  i && !i.done && (n = o.return) && n.call(o);
                                                              } finally {
                                                                  if (r) throw r.error;
                                                              }
                                                          }
                                                          return !1;
                                                      },
                                                      close: function (e) {
                                                          yE.debug("Session Properties Listener closed"), e ? t.onError(e) : t.onClose();
                                                      },
                                                  }),
                                                  [
                                                      4,
                                                      (i = this.internal.getConversationSet()).newConversation(
                                                          Lv.responseHandler(this.internal, r, function (e, t) {
                                                              a.SESSION_PROPERTIES_REGISTRATION.send({ cid: e }, t);
                                                          })
                                                      ),
                                                  ])
                                                : [3, 2]
                                        );
                                    case 1:
                                        (s = u.sent()), this.SESSION_PROPERTIES_REGISTRATION.send({ cid: s, properties: e }, Lv.registrationCallback(i, s, n, o)), (u.label = 2);
                                    case 2:
                                        return [2];
                                }
                            });
                        });
                    });
                }),
                (e.prototype.changeRoles = function (e, t, r) {
                    var n = this,
                        o = Array.isArray(t) ? t : dE([], hE(t)),
                        i = Array.isArray(r) ? r : dE([], hE(r));
                    if (0 === o.length && 0 === i.length) throw new Error("rolesToRemove and rolesToAdd cannot both be empty");
                    var s = _h.SessionId.validate(e);
                    return new Promise(function (t, r) {
                        try {
                            $c.requireNonNull(e, "sessions");
                        } catch (e) {
                            return void r(e);
                        }
                        if (n.internal.checkConnected(r))
                            if (!1 === s) {
                                var a = new X_.ChangeAuthorisationRolesFilterRequest(e, o, i);
                                n.CHANGE_AUTHORISATION_ROLES_FILTER.send(a, function (e, n) {
                                    e ? r(e) : n.errors.length > 0 ? r(n.errors) : t(n.count);
                                });
                            } else {
                                a = new eE.ChangeAuthorisationRolesRequest(s, o, i);
                                n.CHANGE_AUTHORISATION_ROLES.send(a, function (e) {
                                    e ? r(e) : t(1);
                                });
                            }
                    });
                }),
                (e.prototype.setConflated = function (e, t) {
                    var r = this;
                    return new Promise(function (n, o) {
                        try {
                            $c.requireNonNull(e, "sessions");
                        } catch (e) {
                            return void o(e);
                        }
                        if (r.internal.checkConnected(o)) {
                            var i = _h.SessionId.validate(e);
                            if (i) {
                                var s = new oE.SetClientConflationRequest(i, t);
                                r.SET_CLIENT_CONFLATION.send(s, function (e) {
                                    e ? o(e) : n(1);
                                });
                            } else if ("string" == typeof e) {
                                s = new rE.SetClientConflationFilterRequest(e, t);
                                r.SET_CLIENT_CONFLATION_FILTER.send(s, function (e, t) {
                                    qf.responseSuccess(e, t) ? (t.errors.length > 0 ? o(t.errors) : n(t.count)) : o(e);
                                });
                            } else o(new Error("Invalid SessionID: " + e));
                        }
                    });
                }),
                (e.prototype.fetchRequest = function () {
                    return new W_.SessionFetchRequestImpl(this.internal);
                }),
                e
            );
        })();
    cE.ClientControlImpl = vE;
    var SE = {};
    Object.defineProperty(SE, "__esModule", { value: !0 }), (SE.BaseGatewayClientRequest = void 0);
    var _E = function (e) {
        this.sessionId = e;
    };
    SE.BaseGatewayClientRequest = _E;
    var EE = {};
    Object.defineProperty(EE, "__esModule", { value: !0 }),
        (EE.GatewayRequestType = void 0),
        (function (e) {
            (e[(e.GET_CONFIGURATION = 1)] = "GET_CONFIGURATION"),
                (e[(e.GET_STATUS = 2)] = "GET_STATUS"),
                (e[(e.GET_OPERATIONS = 3)] = "GET_OPERATIONS"),
                (e[(e.GET_OPERATION_DETAIL = 4)] = "GET_OPERATION_DETAIL"),
                (e[(e.INVOKE_OPERATION = 5)] = "INVOKE_OPERATION"),
                (e[(e.ADD_SERVICE = 6)] = "ADD_SERVICE"),
                (e[(e.UPDATE_SERVICE = 7)] = "UPDATE_SERVICE"),
                (e[(e.REMOVE_SERVICE = 8)] = "REMOVE_SERVICE"),
                (e[(e.GET_SERVICES = 9)] = "GET_SERVICES"),
                (e[(e.GET_SERVICE_TYPES = 10)] = "GET_SERVICE_TYPES"),
                (e[(e.GET_SERVICE_CONFIGURATION = 11)] = "GET_SERVICE_CONFIGURATION"),
                (e[(e.GET_SERVICE_STATUS = 12)] = "GET_SERVICE_STATUS"),
                (e[(e.GET_SERVICE_OPERATIONS = 13)] = "GET_SERVICE_OPERATIONS"),
                (e[(e.GET_SERVICE_OPERATION_DETAIL = 14)] = "GET_SERVICE_OPERATION_DETAIL"),
                (e[(e.INVOKE_SERVICE_OPERATION = 15)] = "INVOKE_SERVICE_OPERATION");
        })(EE.GatewayRequestType || (EE.GatewayRequestType = {}));
    var wE = {},
        mE =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(wE, "__esModule", { value: !0 }), (wE.GatewayClientAddServiceRequest = void 0);
    var TE = (function (e) {
        function t(t, r) {
            var n = e.call(this, t) || this;
            return (n.type = EE.GatewayRequestType.ADD_SERVICE), (n.serviceDetails = r), n;
        }
        return mE(t, e), t;
    })(SE.BaseGatewayClientRequest);
    wE.GatewayClientAddServiceRequest = TE;
    var gE = {},
        OE =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(gE, "__esModule", { value: !0 }), (gE.GatewayClientGetConfigurationRequest = void 0);
    var IE = (function (e) {
        function t(t) {
            var r = e.call(this, t) || this;
            return (r.type = EE.GatewayRequestType.GET_CONFIGURATION), r;
        }
        return OE(t, e), t;
    })(SE.BaseGatewayClientRequest);
    gE.GatewayClientGetConfigurationRequest = IE;
    var RE = {},
        bE =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(RE, "__esModule", { value: !0 }), (RE.GatewayClientGetServiceTypesRequest = void 0);
    var CE = (function (e) {
        function t(t) {
            var r = e.call(this, t) || this;
            return (r.type = EE.GatewayRequestType.GET_SERVICE_TYPES), r;
        }
        return bE(t, e), t;
    })(SE.BaseGatewayClientRequest);
    RE.GatewayClientGetServiceTypesRequest = CE;
    var PE = {},
        NE =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(PE, "__esModule", { value: !0 }), (PE.GatewayClientGetServicesRequest = void 0);
    var AE = (function (e) {
        function t(t) {
            var r = e.call(this, t) || this;
            return (r.type = EE.GatewayRequestType.GET_SERVICES), r;
        }
        return NE(t, e), t;
    })(SE.BaseGatewayClientRequest);
    PE.GatewayClientGetServicesRequest = AE;
    var ME = {},
        jE =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(ME, "__esModule", { value: !0 }), (ME.GatewayClientGetStatusRequest = void 0);
    var LE = (function (e) {
        function t(t) {
            var r = e.call(this, t) || this;
            return (r.type = EE.GatewayRequestType.GET_STATUS), r;
        }
        return jE(t, e), t;
    })(SE.BaseGatewayClientRequest);
    ME.GatewayClientGetStatusRequest = LE;
    var DE = {},
        xE =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(DE, "__esModule", { value: !0 }), (DE.GatewayClientUpdateServiceRequest = void 0);
    var BE = (function (e) {
        function t(t, r) {
            var n = e.call(this, t) || this;
            return (n.type = EE.GatewayRequestType.UPDATE_SERVICE), (n.serviceDetails = r), n;
        }
        return xE(t, e), t;
    })(SE.BaseGatewayClientRequest);
    DE.GatewayClientUpdateServiceRequest = BE;
    var qE = {},
        UE =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(qE, "__esModule", { value: !0 }), (qE.GatewayClientGetOperationDetailRequest = void 0);
    var kE = (function (e) {
        function t(t, r) {
            var n = e.call(this, t) || this;
            return (n.type = EE.GatewayRequestType.GET_OPERATION_DETAIL), (n.operationName = r), n;
        }
        return UE(t, e), t;
    })(SE.BaseGatewayClientRequest);
    qE.GatewayClientGetOperationDetailRequest = kE;
    var VE = {},
        FE =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(VE, "__esModule", { value: !0 }), (VE.GatewayClientGetOperationsRequest = void 0);
    var GE = (function (e) {
        function t(t) {
            var r = e.call(this, t) || this;
            return (r.type = EE.GatewayRequestType.GET_OPERATIONS), r;
        }
        return FE(t, e), t;
    })(SE.BaseGatewayClientRequest);
    VE.GatewayClientGetOperationsRequest = GE;
    var HE = {},
        YE =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(HE, "__esModule", { value: !0 }), (HE.GatewayClientInvokeOperationRequest = void 0);
    var WE = (function (e) {
        function t(t, r, n) {
            var o = e.call(this, t) || this;
            return (o.type = EE.GatewayRequestType.INVOKE_OPERATION), (o.operationName = r), (o.input = n), o;
        }
        return YE(t, e), t;
    })(SE.BaseGatewayClientRequest);
    HE.GatewayClientInvokeOperationRequest = WE;
    var QE = {},
        zE =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(QE, "__esModule", { value: !0 }), (QE.BaseGatewayServiceRequest = void 0);
    var KE = (function (e) {
        function t(t, r) {
            var n = e.call(this, t) || this;
            return (n.serviceId = r), n;
        }
        return zE(t, e), t;
    })(SE.BaseGatewayClientRequest);
    QE.BaseGatewayServiceRequest = KE;
    var JE = {},
        $E =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(JE, "__esModule", { value: !0 }), (JE.GatewayClientRemoveServiceRequest = void 0);
    var XE = (function (e) {
        function t(t, r) {
            var n = e.call(this, t, r) || this;
            return (n.type = EE.GatewayRequestType.REMOVE_SERVICE), n;
        }
        return $E(t, e), t;
    })(QE.BaseGatewayServiceRequest);
    JE.GatewayClientRemoveServiceRequest = XE;
    var ZE = {},
        ew =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(ZE, "__esModule", { value: !0 }), (ZE.GatewayServiceGetConfigurationRequest = void 0);
    var tw = (function (e) {
        function t(t, r) {
            var n = e.call(this, t, r) || this;
            return (n.type = EE.GatewayRequestType.GET_SERVICE_CONFIGURATION), n;
        }
        return ew(t, e), t;
    })(QE.BaseGatewayServiceRequest);
    ZE.GatewayServiceGetConfigurationRequest = tw;
    var rw = {},
        nw =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(rw, "__esModule", { value: !0 }), (rw.GatewayServiceGetOperationDetailRequest = void 0);
    var ow = (function (e) {
        function t(t, r, n) {
            var o = e.call(this, t, r) || this;
            return (o.type = EE.GatewayRequestType.GET_SERVICE_OPERATION_DETAIL), (o.operationName = n), o;
        }
        return nw(t, e), t;
    })(QE.BaseGatewayServiceRequest);
    rw.GatewayServiceGetOperationDetailRequest = ow;
    var iw = {},
        sw =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(iw, "__esModule", { value: !0 }), (iw.GatewayServiceGetOperationsRequest = void 0);
    var aw = (function (e) {
        function t(t, r) {
            var n = e.call(this, t, r) || this;
            return (n.type = EE.GatewayRequestType.GET_SERVICE_OPERATIONS), n;
        }
        return sw(t, e), t;
    })(QE.BaseGatewayServiceRequest);
    iw.GatewayServiceGetOperationsRequest = aw;
    var uw = {},
        cw =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(uw, "__esModule", { value: !0 }), (uw.GatewayServiceGetStatusRequest = void 0);
    var lw = (function (e) {
        function t(t, r) {
            var n = e.call(this, t, r) || this;
            return (n.type = EE.GatewayRequestType.GET_SERVICE_STATUS), n;
        }
        return cw(t, e), t;
    })(QE.BaseGatewayServiceRequest);
    uw.GatewayServiceGetStatusRequest = lw;
    var pw = {},
        fw =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(pw, "__esModule", { value: !0 }), (pw.GatewayServiceInvokeOperationRequest = void 0);
    var hw = (function (e) {
        function t(t, r, n, o) {
            var i = e.call(this, t, r) || this;
            return (i.type = EE.GatewayRequestType.INVOKE_SERVICE_OPERATION), (i.operationName = n), (i.input = o), i;
        }
        return fw(t, e), t;
    })(QE.BaseGatewayServiceRequest);
    pw.GatewayServiceInvokeOperationRequest = hw;
    var dw = {},
        yw =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(dw, "__esModule", { value: !0 }), (dw.GatewayClientKeySerialiser = void 0);
    var vw = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            yw(t, e),
            (t.prototype.read = function (e) {
                return { type: tu.readString(e), id: tu.readString(e) };
            }),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.type), tu.writeString(e, t.id);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    dw.GatewayClientKeySerialiser = new vw();
    var Sw = {},
        _w =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Sw, "__esModule", { value: !0 }), (Sw.GatewayClientListSerialiser = void 0);
    var Ew = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            _w(t, e),
            (t.prototype.read = function (e) {
                return { clients: tu.readCollection(e, dw.GatewayClientKeySerialiser.read) };
            }),
            t
        );
    })(ou.AbstractSerialiser);
    Sw.GatewayClientListSerialiser = new Ew();
    var ww = {},
        mw =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(ww, "__esModule", { value: !0 }), (ww.GatewayServiceIdSerialiser = void 0);
    var Tw = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            mw(t, e),
            (t.prototype.read = function (e) {
                return { type: tu.readString(e), name: tu.readString(e) };
            }),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.type), tu.writeString(e, t.name);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    ww.GatewayServiceIdSerialiser = new Tw();
    var gw = {},
        Ow =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(gw, "__esModule", { value: !0 }), (gw.GatewayServiceSerialiser = void 0);
    var Iw = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            Ow(t, e),
            (t.prototype.read = function (e) {
                return { id: ww.GatewayServiceIdSerialiser.read(e), description: tu.readByte(e) ? tu.readString(e) : void 0, configuration: tu.readByte(e) ? tu.readString(e) : void 0 };
            }),
            (t.prototype.write = function (e, t) {
                ww.GatewayServiceIdSerialiser.write(e, t.id),
                    void 0 !== t.description && null !== t.description ? (tu.writeByte(e, 1), tu.writeString(e, t.description)) : tu.writeByte(e, 0),
                    void 0 !== t.configuration && null !== t.configuration ? (tu.writeByte(e, 1), tu.writeString(e, t.configuration)) : tu.writeByte(e, 0);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    gw.GatewayServiceSerialiser = new Iw();
    var Rw = {},
        bw =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Rw, "__esModule", { value: !0 }), (Rw.GatewayClientRequestSerialiser = Rw.UnknownGatewayRequestTypeError = void 0);
    var Cw = (function (e) {
        function t(t) {
            return e.call(this, "Cannot serialise unknown gateway request type: " + t.type) || this;
        }
        return bw(t, e), t;
    })(Error);
    Rw.UnknownGatewayRequestTypeError = Cw;
    var Pw = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            bw(t, e),
            (t.prototype.write = function (e, t) {
                switch ((t.type in EE.GatewayRequestType && (dS.SessionIdSerialiser.write(e, t.sessionId), Rf.write(e, t.type), t instanceof QE.BaseGatewayServiceRequest && ww.GatewayServiceIdSerialiser.write(e, t.serviceId)), t.type)) {
                    case EE.GatewayRequestType.GET_CONFIGURATION:
                    case EE.GatewayRequestType.GET_SERVICE_CONFIGURATION:
                    case EE.GatewayRequestType.GET_STATUS:
                    case EE.GatewayRequestType.GET_SERVICE_STATUS:
                    case EE.GatewayRequestType.GET_OPERATIONS:
                    case EE.GatewayRequestType.GET_SERVICE_OPERATIONS:
                    case EE.GatewayRequestType.GET_SERVICES:
                    case EE.GatewayRequestType.GET_SERVICE_TYPES:
                        break;
                    case EE.GatewayRequestType.ADD_SERVICE:
                    case EE.GatewayRequestType.UPDATE_SERVICE:
                        gw.GatewayServiceSerialiser.write(e, t.serviceDetails);
                        break;
                    case EE.GatewayRequestType.REMOVE_SERVICE:
                        ww.GatewayServiceIdSerialiser.write(e, t.serviceId);
                        break;
                    case EE.GatewayRequestType.GET_OPERATION_DETAIL:
                    case EE.GatewayRequestType.GET_SERVICE_OPERATION_DETAIL:
                        tu.writeString(e, t.operationName);
                        break;
                    case EE.GatewayRequestType.INVOKE_OPERATION:
                    case EE.GatewayRequestType.INVOKE_SERVICE_OPERATION:
                        tu.writeString(e, t.operationName), null === t.input || void 0 === t.input ? tu.writeByte(e, 0) : (tu.writeByte(e, 1), tu.writeString(e, t.input));
                        break;
                    default:
                        throw new Cw(t);
                }
            }),
            t
        );
    })(ou.AbstractSerialiser);
    Rw.GatewayClientRequestSerialiser = new Pw();
    var Nw = {};
    Object.defineProperty(Nw, "__esModule", { value: !0 }), (Nw.GetConfigurationResponse = void 0);
    var Aw = function (e, t, r, n) {
        (this.type = e), (this.config = n), (this.schemaType = t), (this.schema = r);
    };
    Nw.GetConfigurationResponse = Aw;
    var Mw = {};
    Object.defineProperty(Mw, "__esModule", { value: !0 }), (Mw.GetStatusResponse = void 0);
    var jw = function (e, t) {
        (this.type = e), (this.items = t);
    };
    Mw.GetStatusResponse = jw;
    var Lw = {};
    Object.defineProperty(Lw, "__esModule", { value: !0 }), (Lw.GetOperationDetailResponse = void 0);
    var Dw = function (e, t, r, n) {
        (this.type = e), (this.description = t), (this.inputSchema = r), (this.outputSchema = n);
    };
    Lw.GetOperationDetailResponse = Dw;
    var xw = {};
    Object.defineProperty(xw, "__esModule", { value: !0 }), (xw.GetOperationsResponse = void 0);
    var Bw = function (e, t) {
        (this.type = e), (this.operations = t);
    };
    xw.GetOperationsResponse = Bw;
    var qw = {};
    Object.defineProperty(qw, "__esModule", { value: !0 }), (qw.InvokeOperationResponse = void 0);
    var Uw = function (e, t) {
        (this.type = e), (this.output = t);
    };
    qw.InvokeOperationResponse = Uw;
    var kw = {},
        Vw =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(kw, "__esModule", { value: !0 }), (kw.GatewayOperationSerialiser = void 0);
    var Fw = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            Vw(t, e),
            (t.prototype.read = function (e) {
                return { name: tu.readString(e), summary: tu.readString(e) };
            }),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.name), tu.writeString(e, t.summary);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    kw.GatewayOperationSerialiser = new Fw();
    var Gw = {};
    Object.defineProperty(Gw, "__esModule", { value: !0 }), (Gw.AddUpdateServiceResponse = void 0);
    var Hw = function (e, t) {
        (this.type = e), (this.service = t);
    };
    Gw.AddUpdateServiceResponse = Hw;
    var Yw = {};
    Object.defineProperty(Yw, "__esModule", { value: !0 }), (Yw.GetServiceTypesResponse = void 0);
    var Ww = function (e) {
        (this.type = EE.GatewayRequestType.GET_SERVICE_TYPES), (this.serviceTypes = e);
    };
    Yw.GetServiceTypesResponse = Ww;
    var Qw = {};
    Object.defineProperty(Qw, "__esModule", { value: !0 }), (Qw.GetServicesResponse = void 0);
    var zw = function (e) {
        (this.type = EE.GatewayRequestType.GET_SERVICES), (this.services = e);
    };
    Qw.GetServicesResponse = zw;
    var Kw = {},
        Jw =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Kw, "__esModule", { value: !0 }), (Kw.GatewayServiceTypeSerialiser = void 0);
    var $w = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            Jw(t, e),
            (t.prototype.read = function (e) {
                return { name: tu.readString(e), description: tu.readString(e), schema: tu.readString(e), isSharedConfig: tu.readBoolean(e) };
            }),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.name), tu.writeString(e, t.description), tu.writeString(e, t.schema), tu.writeBoolean(e, t.isSharedConfig);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    Kw.GatewayServiceTypeSerialiser = new $w();
    var Xw = {};
    Object.defineProperty(Xw, "__esModule", { value: !0 }), (Xw.EntriesFetchRequest = void 0);
    var Zw = function (e, t) {
        (this.firstEntry = e), (this.entryCount = t);
    };
    Xw.EntriesFetchRequest = Zw;
    var em = {},
        tm =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(em, "__esModule", { value: !0 }), (em.EntriesFetchRequestSerialiser = void 0);
    var rm = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            tm(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readInt64(e),
                    r = tu.readInt64(e);
                return new Xw.EntriesFetchRequest(t, r);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeInt64(e, t.firstEntry), tu.writeInt64(e, t.entryCount);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    em.EntriesFetchRequestSerialiser = new rm();
    var nm = {};
    Object.defineProperty(nm, "__esModule", { value: !0 }), (nm.EntriesFetchResponse = void 0);
    var om = function (e, t, r, n, o, i) {
        (this.firstEntry = e), (this.entryCount = t), (this.fileId = r), (this.maxEntriesAvailable = n), (this.firstLineNumber = o), (this.entries = i);
    };
    nm.EntriesFetchResponse = om;
    var im = {},
        sm =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(im, "__esModule", { value: !0 }), (im.EntriesFetchResponseSerialiser = void 0);
    var am = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            sm(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readInt64(e),
                    r = tu.readInt64(e),
                    n = tu.readInt64(e),
                    o = tu.readInt64(e),
                    i = tu.readBytes(e),
                    s = tu.readInt64(e);
                return new nm.EntriesFetchResponse(t, r, s, n, o, i);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeInt64(e, t.firstEntry), tu.writeInt64(e, t.entryCount), tu.writeInt64(e, t.maxEntriesAvailable), tu.writeInt64(e, t.firstLineNumber), tu.writeBytes(e, t.entries), tu.writeInt64(e, t.fileId);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    im.EntriesFetchResponseSerialiser = new am();
    var um = {};
    Object.defineProperty(um, "__esModule", { value: !0 }), (um.FETCH_LOG_ENTRIES_SERVICE = void 0), (um.FETCH_LOG_ENTRIES_SERVICE = { id: 132, request: em.EntriesFetchRequestSerialiser, response: im.EntriesFetchResponseSerialiser });
    var cm = {};
    Object.defineProperty(cm, "__esModule", { value: !0 }), (cm.LogRetrieval = void 0);
    var lm = (function () {
        function e(e) {
            (this.internal = e), (this.FETCH_LOG_ENTRIES_SERVICE = e.getServiceLocator().obtain(um.FETCH_LOG_ENTRIES_SERVICE));
        }
        return (
            (e.prototype.fetchEntries = function (e, t) {
                var r = this;
                return new Promise(function (n, o) {
                    r.internal.checkConnected(o) &&
                        r.FETCH_LOG_ENTRIES_SERVICE.send(new Xw.EntriesFetchRequest(e, t), function (e, t) {
                            e ? o(e) : n(t);
                        });
                });
            }),
            e
        );
    })();
    cm.LogRetrieval = lm;
    var pm = {};
    Object.defineProperty(pm, "__esModule", { value: !0 }),
        (pm.create = void 0),
        (pm.create = function (e) {
            return {
                onRequest: function (t, r, n) {
                    try {
                        e(t, r, n);
                    } catch (e) {
                        n.fail(t.getContext().ErrorReason.CALLBACK_EXCEPTION, e.message);
                    }
                },
            };
        });
    var fm = {};
    Object.defineProperty(fm, "__esModule", { value: !0 }), (fm.MessagingClientForwardSendRequest = void 0);
    var hm = function (e, t, r, n, o, i) {
        (this.cid = e), (this.sessionID = t), (this.path = r), (this.properties = n), (this.dataType = o), (this.content = i);
    };
    fm.MessagingClientForwardSendRequest = hm;
    var dm = {},
        ym =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(dm, "__esModule", { value: !0 }), (dm.MessagingClientForwardSendRequestSerialiser = void 0);
    var vm = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            ym(t, e),
            (t.prototype.read = function (e) {
                var t = ru.CIDSerialiser.read(e),
                    r = dS.SessionIdSerialiser.read(e),
                    n = tu.readString(e),
                    o = tu.readDictionary(e, tu.readString),
                    i = tu.readString(e),
                    s = tu.readBytes(e);
                return new fm.MessagingClientForwardSendRequest(t, r, n, o, i, s);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    dm.MessagingClientForwardSendRequestSerialiser = new vm();
    var Sm = {},
        _m =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Sm, "__esModule", { value: !0 }), (Sm.MessagingClientSendRequestSerialiser = void 0);
    var Em = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            _m(t, e),
            (t.prototype.write = function (e, t) {
                dS.SessionIdSerialiser.write(e, t.sessionId), tu.writeString(e, t.path), tu.writeString(e, t.dataType), tu.writeBytes(e, t.request);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    Sm.MessagingClientSendRequestSerialiser = new Em();
    var wm = {};
    Object.defineProperty(wm, "__esModule", { value: !0 }), (wm.MessagingFilterResponse = void 0);
    var mm = function (e, t, r, n) {
        (this.cid = e), (this.sessionID = t), (this.response = r), (this.errorReason = n);
    };
    wm.MessagingFilterResponse = mm;
    var Tm = {};
    Object.defineProperty(Tm, "__esModule", { value: !0 }), (Tm.MessagingResponse = void 0);
    var gm = function (e, t) {
        (this.responseDataType = e), (this.data = t);
    };
    Tm.MessagingResponse = gm;
    var Om = {},
        Im =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Om, "__esModule", { value: !0 }), (Om.MessagingResponseSerialiser = void 0);
    var Rm = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            Im(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readString(e),
                    r = tu.readBytes(e);
                return new Tm.MessagingResponse(t, r);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.responseDataType), tu.writeBytes(e, t.data);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    Om.MessagingResponseSerialiser = new Rm();
    var bm = {},
        Cm =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(bm, "__esModule", { value: !0 }), (bm.ErrorReasonSerialiser = void 0);
    var Pm = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            Cm(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readInt32(e),
                    r = tu.readString(e);
                return new va.ErrorReason(t, r);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeInt32(e, t.id), tu.writeString(e, t.reason);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    bm.ErrorReasonSerialiser = new Pm();
    var Nm = {},
        Am =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Nm, "__esModule", { value: !0 }), (Nm.MessagingFilterResponseSerialiser = void 0);
    var Mm = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            Am(t, e),
            (t.prototype.read = function (e) {
                var t = ru.CIDSerialiser.read(e),
                    r = dS.SessionIdSerialiser.read(e);
                switch (tu.readByte(e)) {
                    case 0:
                        var n = Om.MessagingResponseSerialiser.read(e);
                        return new wm.MessagingFilterResponse(t, r, n);
                    default:
                        var o = bm.ErrorReasonSerialiser.read(e);
                        return new wm.MessagingFilterResponse(t, r, null, o);
                }
            }),
            t
        );
    })(ou.AbstractSerialiser);
    Nm.MessagingFilterResponseSerialiser = new Mm();
    var jm = {},
        Lm =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(jm, "__esModule", { value: !0 }), (jm.MessagingFilterSendRequestSerialiser = void 0);
    var Dm = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            Lm(t, e),
            (t.prototype.write = function (e, t) {
                ru.CIDSerialiser.write(e, t.cid), tu.writeString(e, t.filter), tu.writeString(e, t.path), tu.writeString(e, t.dataType.name()), tu.writeBytes(e, t.request);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    jm.MessagingFilterSendRequestSerialiser = new Dm();
    var xm = {};
    Object.defineProperty(xm, "__esModule", { value: !0 }), (xm.MessagingFilterSendResponse = void 0);
    var Bm = function (e, t) {
        (this.numberSent = e), (this.errors = t), (this.isSuccess = 0 === t.length);
    };
    xm.MessagingFilterSendResponse = Bm;
    var qm = {},
        Um =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(qm, "__esModule", { value: !0 }), (qm.MessagingFilterSendResponseSerialiser = void 0);
    var km = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            Um(t, e),
            (t.prototype.read = function (e) {
                if (0 === tu.readByte(e)) {
                    var t = tu.readInt32(e);
                    return new xm.MessagingFilterSendResponse(t, []);
                }
                var r = tu.readCollection(e, sS.ErrorReportSerialiser.read);
                return new xm.MessagingFilterSendResponse(0, r);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    qm.MessagingFilterSendResponseSerialiser = new km();
    var Vm = {};
    Object.defineProperty(Vm, "__esModule", { value: !0 }), (Vm.MessagingSendRequest = void 0);
    var Fm = function (e, t, r) {
        (this.path = e), (this.dataType = t), (this.request = r);
    };
    Vm.MessagingSendRequest = Fm;
    var Gm = {},
        Hm =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Gm, "__esModule", { value: !0 }), (Gm.MessagingSendRequestSerialiser = void 0);
    var Ym = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            Hm(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readString(e),
                    r = tu.readString(e),
                    n = tu.readBytes(e);
                return new Vm.MessagingSendRequest(t, r, n);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.path), tu.writeString(e, t.dataType), tu.writeBytes(e, t.request);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    Gm.MessagingSendRequestSerialiser = new Ym();
    var Wm = {};
    Object.defineProperty(Wm, "__esModule", { value: !0 }),
        (Wm.FILTER_RESPONSE = Wm.MESSAGING_FILTER_SEND = Wm.MESSAGING_RECEIVER_CLIENT = Wm.MESSAGING_RECEIVER_SERVER = Wm.MESSAGING_SEND = void 0),
        (Wm.MESSAGING_SEND = { id: 85, request: Gm.MessagingSendRequestSerialiser, response: Om.MessagingResponseSerialiser }),
        (Wm.MESSAGING_RECEIVER_SERVER = { id: 86, request: Sm.MessagingClientSendRequestSerialiser, response: Om.MessagingResponseSerialiser }),
        (Wm.MESSAGING_RECEIVER_CLIENT = { id: 88, request: dm.MessagingClientForwardSendRequestSerialiser, response: Om.MessagingResponseSerialiser }),
        (Wm.MESSAGING_FILTER_SEND = { id: 102, request: jm.MessagingFilterSendRequestSerialiser, response: qm.MessagingFilterSendResponseSerialiser }),
        (Wm.FILTER_RESPONSE = { id: 103, request: Nm.MessagingFilterResponseSerialiser, response: Md.NullSerialiser });
    var Qm = {},
        zm =
            (this && this.__awaiter) ||
            function (e, t, r, n) {
                return new (r || (r = Promise))(function (o, i) {
                    function s(e) {
                        try {
                            u(n.next(e));
                        } catch (e) {
                            i(e);
                        }
                    }
                    function a(e) {
                        try {
                            u(n.throw(e));
                        } catch (e) {
                            i(e);
                        }
                    }
                    function u(e) {
                        var t;
                        e.done
                            ? o(e.value)
                            : ((t = e.value),
                              t instanceof r
                                  ? t
                                  : new r(function (e) {
                                        e(t);
                                    })).then(s, a);
                    }
                    u((n = n.apply(e, t || [])).next());
                });
            },
        Km =
            (this && this.__generator) ||
            function (e, t) {
                var r,
                    n,
                    o,
                    i,
                    s = {
                        label: 0,
                        sent: function () {
                            if (1 & o[0]) throw o[1];
                            return o[1];
                        },
                        trys: [],
                        ops: [],
                    };
                return (
                    (i = { next: a(0), throw: a(1), return: a(2) }),
                    "function" == typeof Symbol &&
                        (i[Symbol.iterator] = function () {
                            return this;
                        }),
                    i
                );
                function a(i) {
                    return function (a) {
                        return (function (i) {
                            if (r) throw new TypeError("Generator is already executing.");
                            for (; s; )
                                try {
                                    if (((r = 1), n && (o = 2 & i[0] ? n.return : i[0] ? n.throw || ((o = n.return) && o.call(n), 0) : n.next) && !(o = o.call(n, i[1])).done)) return o;
                                    switch (((n = 0), o && (i = [2 & i[0], o.value]), i[0])) {
                                        case 0:
                                        case 1:
                                            o = i;
                                            break;
                                        case 4:
                                            return s.label++, { value: i[1], done: !1 };
                                        case 5:
                                            s.label++, (n = i[1]), (i = [0]);
                                            continue;
                                        case 7:
                                            (i = s.ops.pop()), s.trys.pop();
                                            continue;
                                        default:
                                            if (!((o = s.trys), (o = o.length > 0 && o[o.length - 1]) || (6 !== i[0] && 2 !== i[0]))) {
                                                s = 0;
                                                continue;
                                            }
                                            if (3 === i[0] && (!o || (i[1] > o[0] && i[1] < o[3]))) {
                                                s.label = i[1];
                                                break;
                                            }
                                            if (6 === i[0] && s.label < o[1]) {
                                                (s.label = o[1]), (o = i);
                                                break;
                                            }
                                            if (o && s.label < o[2]) {
                                                (s.label = o[2]), s.ops.push(i);
                                                break;
                                            }
                                            o[2] && s.ops.pop(), s.trys.pop();
                                            continue;
                                    }
                                    i = t.call(e, s);
                                } catch (e) {
                                    (i = [6, e]), (n = 0);
                                } finally {
                                    r = o = 0;
                                }
                            if (5 & i[0]) throw i[1];
                            return { value: i[0] ? i[1] : void 0, done: !0 };
                        })([i, a]);
                    };
                }
            };
    Object.defineProperty(Qm, "__esModule", { value: !0 }), (Qm.MessagesImpl = void 0);
    var Jm = yu.create("Session.Messages"),
        $m = function (e, t, r) {
            (this.reqType = e), (this.resType = t), (this.stream = r);
        },
        Xm = (function () {
            function e(e, t, r) {
                (this.callback = e), (this.context = t), (this.responseType = r);
            }
            return (
                (e.prototype.respond = function (e) {
                    var t = this.context.DataTypes;
                    if (0 === arguments.length) throw new Error("No argument provided to the responder");
                    if (null == e && !this.responseType) throw new Error("No response type has been provided and the value provided is null. Unable to determine the response type.");
                    var r = this.responseType ? t.getChecked(this.responseType) : t.getByValue(e);
                    if (void 0 === r) throw new Error("Unable to determine the response type.");
                    var n = r.writeValue(e);
                    this.callback.respond({ responseDataType: r.name(), data: n });
                }),
                (e.prototype.reject = function (e) {
                    this.callback.fail(bu.ErrorReason.REJECTED_REQUEST, e);
                }),
                e
            );
        })();
    var Zm = (function () {
        function e(e) {
            var t = this;
            (this.requestStreams = {}), (this.internal = e);
            var r = this.internal.getContext().DataTypes,
                n = e.getServiceLocator();
            (this.MESSAGING_SEND = n.obtain(Wm.MESSAGING_SEND)),
                (this.MESSAGING_FILTER_SEND = n.obtain(Wm.MESSAGING_FILTER_SEND)),
                (this.MESSAGING_RECEIVER_SERVER = n.obtain(Wm.MESSAGING_RECEIVER_SERVER)),
                (this.deregisterRequestHandler = n.obtain(cy.MESSAGING_RECEIVER_CONTROL_DEREGISTRATION));
            var o = e.getServiceRegistry();
            o.add(
                Wm.MESSAGING_SEND,
                pm.create(function (n, o, i) {
                    var s = t.requestStreams[o.path];
                    if (void 0 !== s) {
                        var a,
                            u,
                            c = new Xm(i, e.getContext(), s.resType),
                            l = r.get(o.dataType),
                            p = s.reqType ? s.reqType : l.valueClass;
                        if (l.canReadAs(p)) {
                            var f = void 0;
                            try {
                                f = l.readAs(p, o.request);
                            } catch (e) {
                                return Jm.error("Failed to convert " + l.name() + " datatype to " + p), s.stream.onError(bu.ErrorReason.INVALID_DATA), void delete t.requestStreams[o.path];
                            }
                            try {
                                s.stream.onRequest(o.path, f, c);
                            } catch (e) {
                                Jm.error("Messaging request stream threw an error", e), i.fail(bu.ErrorReason.CALLBACK_EXCEPTION, e.stack);
                            }
                        } else {
                            var h = "Messaging request for path " + o.path + " with " + l.name() + "datatype is incompatible for stream (" + p + ")";
                            Jm.debug(h), i.fail(bu.ErrorReason.INCOMPATIBLE_DATATYPE, h);
                        }
                    } else i.fail(bu.ErrorReason.UNHANDLED_MESSAGE, ((a = n.getSessionId()), (u = o.path), "Session " + a + " has no registered streams for message sent to path '" + u + "'"));
                })
            ),
                o.add(
                    Wm.FILTER_RESPONSE,
                    pm.create(function (e, t, r) {
                        r.respond(), e.getConversationSet().respondIfPresent(t.cid, t);
                    })
                ),
                o.add(
                    Wm.MESSAGING_RECEIVER_CLIENT,
                    pm.create(function (e, t, r) {
                        e.getConversationSet().respondIfPresent(t.cid, { request: t, callback: r.respond, fail: r.fail });
                    })
                );
        }
        return (
            (e.prototype.addRequestHandler = function (e, t, r, n) {
                var o = this,
                    i = this.internal.getContext().DataTypes;
                return new Promise(function (s, a) {
                    if (o.internal.checkConnected(a)) {
                        try {
                            $c.requireNonNull(e, "Message path"), $c.requireNonNull(t, "Request handler");
                        } catch (e) {
                            return void a(e);
                        }
                        Jm.debug("Adding request handler", e);
                        var u = { definition: Wm.MESSAGING_RECEIVER_CLIENT, group: Ld.DEFAULT, path: e, keys: void 0 !== r ? r : [] },
                            c = {
                                active: function (r, n) {
                                    Jm.debug("Request handler active", e),
                                        s({
                                            close: function () {
                                                return new Promise(function (e) {
                                                    o.deregisterRequestHandler.send(u, function (r, i) {
                                                        r ? (o.internal.getConversationSet().discard(n, r), Jm.debug("Error with request handler deregistration: ", r)) : (t.onClose(), o.internal.getConversationSet().respondIfPresent(n, i)),
                                                            e();
                                                    });
                                                });
                                            },
                                        });
                                },
                                respond: function (r) {
                                    Jm.debug("Request handler pair.request", e);
                                    var o = { sessionId: r.request.sessionID, path: r.request.path, properties: r.request.properties };
                                    try {
                                        var s = (n || i.getChecked(r.request.dataType)).readValue(r.request.content),
                                            a = {
                                                respond: function (e, t) {
                                                    var n = i.getChecked(void 0 !== t ? t : e);
                                                    r.callback({ responseDataType: n.name(), data: n.writeValue(e) });
                                                },
                                                reject: function (e) {
                                                    r.fail(bu.ErrorReason.REJECTED_REQUEST, e, !1);
                                                },
                                            };
                                        return t.onRequest(s, o, a), !1;
                                    } catch (e) {
                                        return Jm.info("An exception has occurred whilst processing the request:", e), t.onError(e), r.fail(bu.ErrorReason.CALLBACK_EXCEPTION, e && e.message), !1;
                                    }
                                },
                                close: function () {
                                    Jm.debug("Request handler closed", e), t.onClose();
                                },
                            };
                        Lv.registerRequestHandler(o.internal, u, c).then(void 0, function (e) {
                            a(e);
                        });
                    }
                });
            }),
            (e.prototype.sendRequestToController = function (e, t, r, n, o, i) {
                var s,
                    a = this.internal.getContext().DataTypes;
                try {
                    $c.requireNonNull(r, "Message path"), $c.requireNonNull(n, "Request");
                } catch (e) {
                    return void t(e);
                }
                try {
                    s = o ? a.getChecked(o) : a.getByValue(n);
                } catch (e) {
                    return void t(e);
                }
                if (void 0 === s) throw new Error("Could not determine request type");
                Jm.debug("Sending request to server", n),
                    this.MESSAGING_SEND.send({ path: r, dataType: s.name(), request: s.writeValue(n) }, function (n, o) {
                        var s;
                        if (qf.responseSuccess(n, o)) {
                            Jm.debug("Request complete", r);
                            try {
                                s = a.getChecked(i || o.responseDataType);
                            } catch (e) {
                                return void t(e);
                            }
                            e(s.readValue(o.data));
                        } else Jm.debug("Request failed", r), t(n);
                    });
            }),
            (e.prototype.sendRequestToSession = function (e, t, r, n, o, i, s) {
                var a,
                    u = this.internal.getContext().DataTypes;
                try {
                    $c.requireNonNull(o, "Session ID"), $c.requireNonNull(r, "Message path"), $c.requireNonNull(n, "Request");
                } catch (e) {
                    return void t(e);
                }
                try {
                    a = i ? u.getChecked(i) : u.getByValue(n);
                } catch (e) {
                    return void t(e);
                }
                if (void 0 === a) throw new Error("Could not determine request type");
                Jm.debug("Sending request to session", o, n),
                    this.MESSAGING_RECEIVER_SERVER.send({ sessionId: o, path: r, dataType: a.name(), request: a.writeValue(n) }, function (n, o) {
                        var i;
                        if (qf.responseSuccess(n, o)) {
                            Jm.debug("Request complete", r);
                            try {
                                i = u.getChecked(s || o.responseDataType);
                            } catch (e) {
                                return void t(e);
                            }
                            e(i.readValue(o.data));
                        } else Jm.debug("Request failed", r), t(n);
                    });
            }),
            (e.prototype.sendRequest = function (e, t, r, n, o) {
                var i = this;
                return new Promise(function (s, a) {
                    if (i.internal.checkConnected(a))
                        if (r instanceof _h.SessionId) i.sendRequestToSession(s, a, e, t, r, n, o);
                        else if ("string" == typeof r) {
                            var u = (function (e) {
                                try {
                                    return _h.SessionId.fromString(e);
                                } catch (e) {
                                    return !1;
                                }
                            })(r);
                            u ? i.sendRequestToSession(s, a, e, t, u, n, o) : i.sendRequestToController(s, a, e, t, r, n);
                        } else i.sendRequestToController(s, a, e, t, r, n);
                });
            }),
            (e.prototype.sendRequestToFilter = function (e, t, r, n, o, i) {
                var s = this,
                    a = this.internal.getContext().DataTypes;
                return new Promise(function (u, c) {
                    return zm(s, void 0, void 0, function () {
                        var s,
                            l,
                            p,
                            f,
                            h,
                            d = this;
                        return Km(this, function (y) {
                            switch (y.label) {
                                case 0:
                                    if (!this.internal.checkConnected(c)) return [3, 2];
                                    try {
                                        $c.requireNonNull(t, "Message path"), $c.requireNonNull(e, "Session filter"), $c.requireNonNull(r, "Request"), $c.requireNonNull(n, "Response callback");
                                    } catch (e) {
                                        return c(e), [2];
                                    }
                                    s = void 0;
                                    try {
                                        s = o ? a.getChecked(o) : a.getByValue(r);
                                    } catch (e) {
                                        return c(e), [2];
                                    }
                                    if (void 0 === s) throw new Error("Could not determine request type");
                                    return (
                                        (l = 0),
                                        (p = -1),
                                        (f = function () {
                                            return (l >= p && -1 !== p) || 0 === p;
                                        }),
                                        [
                                            4,
                                            this.internal.getConversationSet().newConversation({
                                                onOpen: function () {},
                                                onResponse: function (e, t) {
                                                    if (null === t) return !0;
                                                    if ("number" == typeof t) return (p = t), f();
                                                    var r = t.sessionID;
                                                    if ((l++, t.errorReason)) n.onResponseError(r, t.errorReason);
                                                    else {
                                                        var o = a.getByName(t.response.responseDataType),
                                                            s = void 0;
                                                        try {
                                                            s = a.getChecked(i || t.response.responseDataType);
                                                        } catch (e) {
                                                            return c(e), f();
                                                        }
                                                        if (o.canReadAs(s.valueClass)) {
                                                            var u = void 0;
                                                            try {
                                                                u = o.readAs(s.valueClass, t.response.data);
                                                            } catch (e) {
                                                                return n.onResponseError(r, e), f();
                                                            }
                                                            try {
                                                                n.onResponse(r, u);
                                                            } catch (e) {
                                                                Jm.error("Exception within messaging filter callback", e);
                                                            }
                                                        } else n.onResponseError(r, new Error("The received response was a " + o + ",'\n                                        + ' which cannot be read as: " + s));
                                                    }
                                                    return f();
                                                },
                                                onDiscard: function () {},
                                            }),
                                        ]
                                    );
                                case 1:
                                    (h = y.sent()),
                                        Jm.debug("Sending filter request to server", r),
                                        this.MESSAGING_FILTER_SEND.send({ cid: h, path: t, filter: e, dataType: s, request: s.writeValue(r) }, function (e, r) {
                                            qf.responseSuccess(e, r)
                                                ? r.isSuccess
                                                    ? (Jm.debug("Request complete", t), d.internal.getConversationSet().respondIfPresent(h, r.numberSent), u(r.numberSent))
                                                    : (Jm.debug("Request failed", t), d.internal.getConversationSet().respondIfPresent(h, null), c(r.errors))
                                                : (Jm.debug("Request failed", t), d.internal.getConversationSet().respondIfPresent(h, null), c(e));
                                        }),
                                        (y.label = 2);
                                case 2:
                                    return [2];
                            }
                        });
                    });
                });
            }),
            (e.prototype.setRequestStream = function (e, t, r, n) {
                var o = this.internal.getContext().DataTypes,
                    i = new $m(r ? o.getValueClassChecked(r) : void 0, n ? o.getValueClassChecked(n) : void 0, t),
                    s = this.requestStreams[e];
                return (this.requestStreams[e] = i), s ? s.stream : void 0;
            }),
            (e.prototype.removeRequestStream = function (e) {
                var t = this.requestStreams[e];
                return delete this.requestStreams[e], t ? t.stream : void 0;
            }),
            e
        );
    })();
    Qm.MessagesImpl = Zm;
    var eT = {};
    Object.defineProperty(eT, "__esModule", { value: !0 }), (eT.JMXFetchRequest = void 0);
    var tT = function (e, t) {
        (this.names = e), (this.isClustered = t);
    };
    eT.JMXFetchRequest = tT;
    var rT = {},
        nT =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(rT, "__esModule", { value: !0 }), (rT.JMXFetchRequestSerialiser = void 0);
    var oT = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            nT(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readCollection(e, tu.readString),
                    r = tu.readBoolean(e);
                return new eT.JMXFetchRequest(t, r);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeCollection(e, t.names, tu.writeString), tu.writeBoolean(e, t.isClustered);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    rT.JMXFetchRequestSerialiser = new oT();
    var iT = {},
        sT =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(iT, "__esModule", { value: !0 }), (iT.MBeanValuesSerialiser = void 0);
    var aT = new pc.Encoder(),
        uT = (function (e) {
            function t() {
                return (null !== e && e.apply(this, arguments)) || this;
            }
            return (
                sT(t, e),
                (t.prototype.read = function (e) {
                    var t = tu.readBytes(e);
                    return new lc.Decoder(t).nextValueExpecting(function (e) {
                        return e === ec.types.MAP;
                    });
                }),
                (t.prototype.write = function (e, t) {
                    aT.encode(t), tu.writeBytes(e, aT.flush());
                }),
                t
            );
        })(ou.AbstractSerialiser);
    iT.MBeanValuesSerialiser = new uT();
    var cT = {},
        lT =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(cT, "__esModule", { value: !0 }), (cT.JMXFetchResponseSerialiser = void 0);
    var pT = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            lT(t, e),
            (t.prototype.read = function (e) {
                return tu.readDictionary(e, this.readWrapper);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeDictionary(e, t, this.writeWrapper);
            }),
            (t.prototype.readWrapper = function (e) {
                switch (tu.readByte(e)) {
                    case 0:
                        return iT.MBeanValuesSerialiser.read(e);
                    default:
                    case 1:
                        return bm.ErrorReasonSerialiser.read(e);
                }
            }),
            (t.prototype.writeWrapper = function (e, t) {
                this.isErrorReason(t) ? (tu.writeByte(e, 1), bm.ErrorReasonSerialiser.write(e, t)) : (tu.writeByte(e, 0), iT.MBeanValuesSerialiser.write(e, t));
            }),
            (t.prototype.isErrorReason = function (e) {
                return "reason" in e;
            }),
            t
        );
    })(ou.AbstractSerialiser);
    cT.JMXFetchResponseSerialiser = new pT();
    var fT = {};
    Object.defineProperty(fT, "__esModule", { value: !0 }), (fT.SessionMetricCollectorListImpl = void 0);
    var hT = function (e) {
        this.collectors = e;
    };
    fT.SessionMetricCollectorListImpl = hT;
    var dT = {},
        yT =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(dT, "__esModule", { value: !0 }), (dT.SessionMetricCollectorSerialiser = void 0);
    var vT = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            yT(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readString(e),
                    r = tu.readBoolean(e),
                    n = tu.readInt32(e),
                    o = tu.readBoolean(e),
                    i = tu.readString(e),
                    s = tu.readCollection(e, tu.readString);
                return new Qy.SessionMetricCollectorImpl(t, r, n, o, i, s);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.name),
                    tu.writeBoolean(e, t.exportToPrometheus),
                    tu.writeInt32(e, t.maximumGroups),
                    tu.writeBoolean(e, t.removeMetricsWithNoMatches),
                    tu.writeString(e, t.sessionFilter),
                    tu.writeCollection(e, t.groupByProperties, tu.writeString);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    dT.SessionMetricCollectorSerialiser = new vT();
    var ST = {},
        _T =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(ST, "__esModule", { value: !0 }), (ST.SessionMetricCollectorListSerialiser = void 0);
    var ET = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            _T(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readCollection(e, dT.SessionMetricCollectorSerialiser.read);
                return new fT.SessionMetricCollectorListImpl(t);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeCollection(e, t.collectors, dT.SessionMetricCollectorSerialiser.write);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    ST.SessionMetricCollectorListSerialiser = new ET();
    var wT = {};
    Object.defineProperty(wT, "__esModule", { value: !0 }), (wT.TopicMetricCollectorListImpl = void 0);
    var mT = function (e) {
        this.collectors = e;
    };
    wT.TopicMetricCollectorListImpl = mT;
    var TT = {},
        gT =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(TT, "__esModule", { value: !0 }), (TT.TopicMetricCollectorSerialiser = void 0);
    var OT = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            gT(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readString(e),
                    r = tu.readBoolean(e),
                    n = tu.readInt32(e),
                    o = tu.readString(e),
                    i = tu.readBoolean(e),
                    s = tu.readBoolean(e),
                    a = tu.readInt32(e);
                return new Xy.TopicMetricCollectorImpl(t, r, n, o, i, s, a);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.name),
                    tu.writeBoolean(e, t.exportToPrometheus),
                    tu.writeInt32(e, t.maximumGroups),
                    tu.writeString(e, t.topicSelector),
                    tu.writeBoolean(e, t.groupByTopicType),
                    tu.writeBoolean(e, t.groupByTopicView),
                    tu.writeInt32(e, t.groupByPathPrefixParts);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    TT.TopicMetricCollectorSerialiser = new OT();
    var IT = {},
        RT =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(IT, "__esModule", { value: !0 }), (IT.TopicMetricCollectorListSerialiser = void 0);
    var bT = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            RT(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readCollection(e, TT.TopicMetricCollectorSerialiser.read);
                return new wT.TopicMetricCollectorListImpl(t);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeCollection(e, t.collectors, TT.TopicMetricCollectorSerialiser.write);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    IT.TopicMetricCollectorListSerialiser = new bT();
    var CT = {};
    Object.defineProperty(CT, "__esModule", { value: !0 }), (CT.MeasuredEntityClassMetrics = void 0);
    var PT = function (e, t) {
        (this.metricNames = e), (this.values = t);
    };
    CT.MeasuredEntityClassMetrics = PT;
    var NT = {},
        AT =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    function MT(e, t) {
        return tu.readMap(
            e,
            function (e) {
                return tu.readCollection(e, tu.readString);
            },
            t
        );
    }
    function jT(e, t, r) {
        tu.writeMap(
            e,
            t,
            function (e, t) {
                return tu.writeCollection(e, t, tu.writeString);
            },
            r
        );
    }
    Object.defineProperty(NT, "__esModule", { value: !0 }), (NT.MeasuredEntityClassMetricsSerialiser = void 0);
    var LT = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            AT(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readCollection(e, tu.readString),
                    r = MT(e, function (e) {
                        return MT(e, function (e) {
                            return tu.readCollection(e, tu.readInt64);
                        });
                    });
                return new CT.MeasuredEntityClassMetrics(t, r);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeCollection(e, t.metricNames, tu.writeString),
                    jT(e, t.values, function (e, t) {
                        return jT(e, t, function (e, t) {
                            return tu.writeCollection(e, t, tu.writeInt64);
                        });
                    });
            }),
            t
        );
    })(ou.AbstractSerialiser);
    NT.MeasuredEntityClassMetricsSerialiser = new LT();
    var DT = {};
    Object.defineProperty(DT, "__esModule", { value: !0 }), (DT.MeasuredEntityClassRequest = void 0);
    var xT = function (e, t) {
        (this.entityClass = e), (this.serverName = t);
    };
    DT.MeasuredEntityClassRequest = xT;
    var BT = {},
        qT =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(BT, "__esModule", { value: !0 }), (BT.MeasuredEntityClassRequestSerialiser = void 0);
    var UT = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            qT(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readString(e),
                    r = 1 === tu.readByte(e) ? tu.readString(e) : void 0;
                return new DT.MeasuredEntityClassRequest(t, r);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.entityClass), void 0 !== t.serverName ? (tu.writeByte(e, 1), tu.writeString(e, t.serverName)) : tu.writeByte(e, 0);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    BT.MeasuredEntityClassRequestSerialiser = new UT();
    var kT = {},
        VT =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(kT, "__esModule", { value: !0 }), (kT.ServerMetricsSerialiser = void 0);
    var FT = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            VT(t, e),
            (t.prototype.read = function (e) {
                return tu.readDictionary(e, function (e) {
                    return tu.readDictionary(e, tu.readInt64);
                });
            }),
            (t.prototype.write = function (e, t) {
                tu.writeDictionary(e, t, function (e, t) {
                    return tu.writeDictionary(e, t, tu.writeInt64);
                });
            }),
            t
        );
    })(ou.AbstractSerialiser);
    kT.ServerMetricsSerialiser = new FT();
    var GT = {};
    Object.defineProperty(GT, "__esModule", { value: !0 }),
        (GT.FETCH_JMX_VALUES = GT.LIST_TOPIC_METRIC_COLLECTORS = GT.REMOVE_TOPIC_METRIC_COLLECTOR = GT.PUT_TOPIC_METRIC_COLLECTOR = GT.GET_MEASURED_ENTITY_CLASS_METRICS = GT.GET_SERVER_METRICS = GT.LIST_SESSION_METRIC_COLLECTORS = GT.REMOVE_SESSION_METRIC_COLLECTOR = GT.PUT_SESSION_METRIC_COLLECTOR = void 0),
        (GT.PUT_SESSION_METRIC_COLLECTOR = { id: 135, request: dT.SessionMetricCollectorSerialiser, response: b_.ErrorReportListSerialiser }),
        (GT.REMOVE_SESSION_METRIC_COLLECTOR = { id: 136, request: zv.StringSerialiser, response: Md.NullSerialiser }),
        (GT.LIST_SESSION_METRIC_COLLECTORS = { id: 137, request: Md.NullSerialiser, response: ST.SessionMetricCollectorListSerialiser }),
        (GT.GET_SERVER_METRICS = { id: 142, request: Md.NullSerialiser, response: kT.ServerMetricsSerialiser }),
        (GT.GET_MEASURED_ENTITY_CLASS_METRICS = { id: 145, request: BT.MeasuredEntityClassRequestSerialiser, response: NT.MeasuredEntityClassMetricsSerialiser }),
        (GT.PUT_TOPIC_METRIC_COLLECTOR = { id: 146, request: TT.TopicMetricCollectorSerialiser, response: Md.NullSerialiser }),
        (GT.REMOVE_TOPIC_METRIC_COLLECTOR = { id: 147, request: zv.StringSerialiser, response: Md.NullSerialiser }),
        (GT.LIST_TOPIC_METRIC_COLLECTORS = { id: 148, request: Md.NullSerialiser, response: IT.TopicMetricCollectorListSerialiser }),
        (GT.FETCH_JMX_VALUES = { id: 149, request: rT.JMXFetchRequestSerialiser, response: cT.JMXFetchResponseSerialiser });
    var HT = {},
        YT =
            (this && this.__awaiter) ||
            function (e, t, r, n) {
                return new (r || (r = Promise))(function (o, i) {
                    function s(e) {
                        try {
                            u(n.next(e));
                        } catch (e) {
                            i(e);
                        }
                    }
                    function a(e) {
                        try {
                            u(n.throw(e));
                        } catch (e) {
                            i(e);
                        }
                    }
                    function u(e) {
                        var t;
                        e.done
                            ? o(e.value)
                            : ((t = e.value),
                              t instanceof r
                                  ? t
                                  : new r(function (e) {
                                        e(t);
                                    })).then(s, a);
                    }
                    u((n = n.apply(e, t || [])).next());
                });
            },
        WT =
            (this && this.__generator) ||
            function (e, t) {
                var r,
                    n,
                    o,
                    i,
                    s = {
                        label: 0,
                        sent: function () {
                            if (1 & o[0]) throw o[1];
                            return o[1];
                        },
                        trys: [],
                        ops: [],
                    };
                return (
                    (i = { next: a(0), throw: a(1), return: a(2) }),
                    "function" == typeof Symbol &&
                        (i[Symbol.iterator] = function () {
                            return this;
                        }),
                    i
                );
                function a(i) {
                    return function (a) {
                        return (function (i) {
                            if (r) throw new TypeError("Generator is already executing.");
                            for (; s; )
                                try {
                                    if (((r = 1), n && (o = 2 & i[0] ? n.return : i[0] ? n.throw || ((o = n.return) && o.call(n), 0) : n.next) && !(o = o.call(n, i[1])).done)) return o;
                                    switch (((n = 0), o && (i = [2 & i[0], o.value]), i[0])) {
                                        case 0:
                                        case 1:
                                            o = i;
                                            break;
                                        case 4:
                                            return s.label++, { value: i[1], done: !1 };
                                        case 5:
                                            s.label++, (n = i[1]), (i = [0]);
                                            continue;
                                        case 7:
                                            (i = s.ops.pop()), s.trys.pop();
                                            continue;
                                        default:
                                            if (!((o = s.trys), (o = o.length > 0 && o[o.length - 1]) || (6 !== i[0] && 2 !== i[0]))) {
                                                s = 0;
                                                continue;
                                            }
                                            if (3 === i[0] && (!o || (i[1] > o[0] && i[1] < o[3]))) {
                                                s.label = i[1];
                                                break;
                                            }
                                            if (6 === i[0] && s.label < o[1]) {
                                                (s.label = o[1]), (o = i);
                                                break;
                                            }
                                            if (o && s.label < o[2]) {
                                                (s.label = o[2]), s.ops.push(i);
                                                break;
                                            }
                                            o[2] && s.ops.pop(), s.trys.pop();
                                            continue;
                                    }
                                    i = t.call(e, s);
                                } catch (e) {
                                    (i = [6, e]), (n = 0);
                                } finally {
                                    r = o = 0;
                                }
                            if (5 & i[0]) throw i[1];
                            return { value: i[0] ? i[1] : void 0, done: !0 };
                        })([i, a]);
                    };
                }
            },
        QT =
            (this && this.__read) ||
            function (e, t) {
                var r = "function" == typeof Symbol && e[Symbol.iterator];
                if (!r) return e;
                var n,
                    o,
                    i = r.call(e),
                    s = [];
                try {
                    for (; (void 0 === t || t-- > 0) && !(n = i.next()).done; ) s.push(n.value);
                } catch (e) {
                    o = { error: e };
                } finally {
                    try {
                        n && !n.done && (r = i.return) && r.call(i);
                    } finally {
                        if (o) throw o.error;
                    }
                }
                return s;
            };
    Object.defineProperty(HT, "__esModule", { value: !0 }), (HT.MetricsImpl = void 0);
    var zT = (function () {
        function e(e) {
            this.internal = e;
        }
        return (
            (e.prototype.callService = function (e, t) {
                var r = this;
                return new Promise(function (n, o) {
                    r.internal.checkConnected(o) &&
                        r.internal
                            .getServiceLocator()
                            .obtain(e)
                            .send(t, function (e, t) {
                                e ? o(e) : n(null === t ? void 0 : t);
                            });
                });
            }),
            (e.prototype.putSessionMetricCollector = function (e) {
                return YT(this, void 0, void 0, function () {
                    var t;
                    return WT(this, function (r) {
                        switch (r.label) {
                            case 0:
                                return $c.requireNonNull(e, "sessionMetricCollector"), [4, this.callService(GT.PUT_SESSION_METRIC_COLLECTOR, e)];
                            case 1:
                                if (0 !== (t = r.sent()).errors.length) throw new Error("Invalid filter: " + t.toString());
                                return [2];
                        }
                    });
                });
            }),
            (e.prototype.removeSessionMetricCollector = function (e) {
                return YT(this, void 0, void 0, function () {
                    return WT(this, function (t) {
                        return $c.requireNonNull(e, "sessionMetricCollectorName"), [2, this.callService(GT.REMOVE_SESSION_METRIC_COLLECTOR, e)];
                    });
                });
            }),
            (e.prototype.listSessionMetricCollectors = function () {
                return this.callService(GT.LIST_SESSION_METRIC_COLLECTORS, null);
            }),
            (e.prototype.putTopicMetricCollector = function (e) {
                return YT(this, void 0, void 0, function () {
                    return WT(this, function (t) {
                        return $c.requireNonNull(e, "topicMetricCollector"), [2, this.callService(GT.PUT_TOPIC_METRIC_COLLECTOR, e)];
                    });
                });
            }),
            (e.prototype.removeTopicMetricCollector = function (e) {
                return YT(this, void 0, void 0, function () {
                    return WT(this, function (t) {
                        return $c.requireNonNull(e, "topicMetricCollectorName"), [2, this.callService(GT.REMOVE_TOPIC_METRIC_COLLECTOR, e)];
                    });
                });
            }),
            (e.prototype.listTopicMetricCollectors = function () {
                return this.callService(GT.LIST_TOPIC_METRIC_COLLECTORS, null);
            }),
            (e.prototype.getServerMetrics = function () {
                return this.callService(GT.GET_SERVER_METRICS, null);
            }),
            (e.prototype.getMeasuredEntityClassMetrics = function (e, t) {
                return this.callService(GT.GET_MEASURED_ENTITY_CLASS_METRICS, new DT.MeasuredEntityClassRequest(e, t));
            }),
            (e.prototype.fetchJMXValues = function (e) {
                return this.callService(GT.FETCH_JMX_VALUES, new eT.JMXFetchRequest(e, !1)).then(function (e) {
                    var t = QT(Object.keys(e)),
                        r = t[0],
                        n = t.slice(1),
                        o = e[r];
                    if (!n.length && !("reason" in o)) return o;
                    throw bu.ErrorReason.INVALID_DATA;
                });
            }),
            (e.prototype.fetchClusterJMXValues = function (e) {
                return this.callService(GT.FETCH_JMX_VALUES, new eT.JMXFetchRequest(e, !0));
            }),
            e
        );
    })();
    HT.MetricsImpl = zT;
    var KT = {};
    Object.defineProperty(KT, "__esModule", { value: !0 }), (KT.PingImpl = void 0);
    var JT = (function () {
        function e(e, t) {
            void 0 === t && (t = Date.now), (this.currentTime = Date.now), (this.internal = e), (this.currentTime = t), (this.ping = e.getServiceLocator().obtain(jd.USER_PING));
        }
        return (
            (e.prototype.pingServer = function () {
                var e = this;
                return new Promise(function (t, r) {
                    if (e.internal.checkConnected(r)) {
                        var n = e.currentTime();
                        e.ping.send(null, function (o) {
                            if (o) r(o);
                            else {
                                var i = e.currentTime() - n;
                                t({ timestamp: n, rtt: i });
                            }
                        });
                    }
                });
            }),
            e
        );
    })();
    KT.PingImpl = JT;
    var $T = {};
    Object.defineProperty($T, "__esModule", { value: !0 }), ($T.CheckRemoteServerResult = void 0);
    var XT = function (e) {
        this.status = e;
    };
    $T.CheckRemoteServerResult = XT;
    var ZT = {};
    Object.defineProperty(ZT, "__esModule", { value: !0 }),
        (ZT.readRemoteServerStatus = void 0),
        (ZT.readRemoteServerStatus = function (e) {
            return { connectionState: Rf.read(e, Hy.ConnectionState), failureMessage: tu.readString(e) };
        });
    var eg = {},
        tg =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(eg, "__esModule", { value: !0 }), (eg.CheckRemoteServerResultSerialiser = void 0);
    var rg = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            tg(t, e),
            (t.prototype.read = function (e) {
                var t = ZT.readRemoteServerStatus(e);
                return new $T.CheckRemoteServerResult(t);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    eg.CheckRemoteServerResultSerialiser = new rg();
    var ng = {};
    Object.defineProperty(ng, "__esModule", { value: !0 }), (ng.RemoteServerImpl = void 0);
    var og = (function () {
        function e(e, t, r, n, o, i, s) {
            (this.type = e), (this.name = t), (this.urls = r), (this.url = r[0]), (this.primaryHostName = r[0]), (this.principal = n), (this.connectionOptions = o), (this.missingTopicNotificationFilter = i), (this.connector = s);
        }
        return (
            (e.prototype.getRetryDelay = function () {
                var e = this.connectionOptions[Hy.ConnectionOption.RETRY_DELAY];
                return void 0 === e ? 1e3 : Number.parseInt(e, 10);
            }),
            e
        );
    })();
    ng.RemoteServerImpl = og;
    var ig = {};
    Object.defineProperty(ig, "__esModule", { value: !0 }),
        (ig.readRemoteServer = void 0),
        (ig.readRemoteServer = function (e) {
            var t = Rf.read(e, Hy.RemoteServerType),
                r = tu.readString(e),
                n = tu.readCollection(e, tu.readString),
                o = tu.readString(e),
                i = tu.readObject(
                    e,
                    function (e) {
                        return Rf.read(e, Hy.ConnectionOption);
                    },
                    tu.readString
                ),
                s = tu.readString(e),
                a = tu.readString(e);
            return new ng.RemoteServerImpl(t, r, n, o, i, "" !== s ? s : void 0, "" !== a ? a : void 0);
        });
    var sg = {};
    Object.defineProperty(sg, "__esModule", { value: !0 }), (sg.CreateRemoteServerResult = void 0);
    var ag = function (e, t) {
        (this.server = e), (this.errors = t);
    };
    sg.CreateRemoteServerResult = ag;
    var ug = {},
        cg =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(ug, "__esModule", { value: !0 }), (ug.CreateRemoteServerResultSerialiser = void 0);
    var lg = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            cg(t, e),
            (t.prototype.read = function (e) {
                if (0 === e.peek()) {
                    tu.readByte(e);
                    var t = ig.readRemoteServer(e);
                    return new sg.CreateRemoteServerResult(t);
                }
                var r = b_.ErrorReportListSerialiser.read(e);
                return new sg.CreateRemoteServerResult(void 0, r);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    ug.CreateRemoteServerResultSerialiser = new lg();
    var pg = {};
    Object.defineProperty(pg, "__esModule", { value: !0 }), (pg.ListRemoteServersResult = void 0);
    var fg = function (e) {
        this.result = e;
    };
    pg.ListRemoteServersResult = fg;
    var hg = {},
        dg =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(hg, "__esModule", { value: !0 }), (hg.ListRemoteServersResultSerialiser = void 0);
    var yg = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            dg(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readCollection(e, ig.readRemoteServer);
                return new pg.ListRemoteServersResult(t);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    hg.ListRemoteServersResultSerialiser = new yg();
    var vg = {},
        Sg =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(vg, "__esModule", { value: !0 }), (vg.RemoteServerDefinitionSerialiser = void 0);
    var _g = function (e, t) {
            return tu.writeByte(e, parseInt(t, 10));
        },
        Eg = (function (e) {
            function t() {
                return (null !== e && e.apply(this, arguments)) || this;
            }
            return (
                Sg(t, e),
                (t.prototype.write = function (e, t) {
                    Rf.write(e, t.type),
                        tu.writeString(e, t.name),
                        tu.writeCollection(e, t.urls, tu.writeString),
                        tu.writeString(e, t.principal),
                        tu.writeObject(e, t.connectionOptions, _g, tu.writeString),
                        tu.writeString(e, void 0 !== t.missingTopicNotificationFilter ? t.missingTopicNotificationFilter : ""),
                        tu.writeString(e, void 0 !== t.connector ? t.connector : ""),
                        xh.write(e, t.credentials);
                }),
                t
            );
        })(ou.AbstractSerialiser);
    vg.RemoteServerDefinitionSerialiser = new Eg();
    var wg = {};
    Object.defineProperty(wg, "__esModule", { value: !0 }),
        (wg.CHECK_REMOTE_SERVER = wg.LIST_REMOTE_SERVERS = wg.REMOVE_REMOTE_SERVER = wg.CREATE_REMOTE_SERVER = void 0),
        (wg.CREATE_REMOTE_SERVER = { id: 157, request: vg.RemoteServerDefinitionSerialiser, response: ug.CreateRemoteServerResultSerialiser }),
        (wg.REMOVE_REMOTE_SERVER = { id: 158, request: zv.StringSerialiser, response: Md.NullSerialiser }),
        (wg.LIST_REMOTE_SERVERS = { id: 164, request: Md.NullSerialiser, response: hg.ListRemoteServersResultSerialiser }),
        (wg.CHECK_REMOTE_SERVER = { id: 165, request: zv.StringSerialiser, response: eg.CheckRemoteServerResultSerialiser });
    var mg = {};
    Object.defineProperty(mg, "__esModule", { value: !0 }), (mg.RemoteServersImpl = void 0);
    var Tg = yu.create("RemoteServers"),
        gg = (function () {
            function e(e) {
                this.internal = e;
                var t = e.getServiceLocator();
                (this.CREATE_REMOTE_SERVER = t.obtain(wg.CREATE_REMOTE_SERVER)),
                    (this.LIST_REMOTE_SERVERS = t.obtain(wg.LIST_REMOTE_SERVERS)),
                    (this.CHECK_REMOTE_SERVER = t.obtain(wg.CHECK_REMOTE_SERVER)),
                    (this.REMOVE_REMOTE_SERVER = t.obtain(wg.REMOVE_REMOTE_SERVER));
            }
            return (
                (e.prototype.createRemoteServer = function (e, t, r, n, o) {
                    var i = this;
                    return new Promise(
                        "string" == typeof e
                            ? function (s, a) {
                                  if (0 === $c.requireNonNull(e, "name").length) throw new Error("Remote server name cannot be empty");
                                  if (i.internal.checkConnected(a)) {
                                      var u = new nv.RemoteServerDefinitionImpl(
                                          Hy.RemoteServerType.SECONDARY_INITIATOR,
                                          e,
                                          [$c.requireNonNull(t, "url")],
                                          $c.requireNonNull(r, "principal"),
                                          o || {},
                                          $c.requireNonNull(n, "credentials"),
                                          void 0
                                      );
                                      i.CREATE_REMOTE_SERVER.send(u, function (e, t) {
                                          qf.responseSuccess(e, t) ? (t.errors ? (a(t.errors.errors), Tg.debug("Create remote server failed")) : s(t.server)) : (a(e), Tg.debug("Create remote server failed"));
                                      });
                                  }
                              }
                            : function (t, r) {
                                  if (($c.requireNonNull(e, "remoteServer"), i.internal.checkConnected(r))) {
                                      var n = e;
                                      i.CREATE_REMOTE_SERVER.send(n, function (e, n) {
                                          qf.responseSuccess(e, n) ? (n.errors ? (r(n.errors.errors), Tg.debug("Create remote server failed")) : t(n.server)) : (r(e), Tg.debug("Create remote server failed"));
                                      });
                                  }
                              }
                    );
                }),
                (e.prototype.checkRemoteServer = function (e) {
                    var t = this;
                    return new Promise(function (r, n) {
                        t.internal.checkConnected(n) &&
                            t.CHECK_REMOTE_SERVER.send($c.requireNonNull(e, "name"), function (e, t) {
                                e ? (n(e), Tg.debug("Check remote server failed")) : r(t.status);
                            });
                    });
                }),
                (e.prototype.listRemoteServers = function () {
                    var e = this;
                    return new Promise(function (t, r) {
                        e.internal.checkConnected(r) &&
                            e.LIST_REMOTE_SERVERS.send(null, function (e, n) {
                                qf.responseSuccess(e, n) ? t(n.result) : (r(e), Tg.debug("List remote servers failed"));
                            });
                    });
                }),
                (e.prototype.removeRemoteServer = function (e) {
                    var t = this;
                    return new Promise(function (r, n) {
                        t.internal.checkConnected(n) &&
                            t.REMOVE_REMOTE_SERVER.send($c.requireNonNull(e, "name"), function (e) {
                                e ? (n(e), Tg.debug("Remove remote server failed")) : r();
                            });
                    });
                }),
                e
            );
        })();
    mg.RemoteServersImpl = gg;
    var Og = {};
    Object.defineProperty(Og, "__esModule", { value: !0 }), (Og.BytesSerialiser = void 0);
    var Ig = (function () {
        function e() {}
        return (
            (e.prototype.read = function (e) {
                return tu.readBytes(e);
            }),
            (e.prototype.write = function (e, t) {
                tu.writeBytes(e, t);
            }),
            e
        );
    })();
    Og.BytesSerialiser = new Ig();
    var Rg = {};
    Object.defineProperty(Rg, "__esModule", { value: !0 }), (Rg.ReplaceLicenceResponse = void 0);
    var bg = function (e, t) {
        (this.type = e), (this.resString = t);
    };
    Rg.ReplaceLicenceResponse = bg;
    var Cg = {},
        Pg =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Cg, "__esModule", { value: !0 }), (Cg.ReplaceLicenceResponseSerialiser = void 0);
    var Ng = (function (e) {
        function t() {
            var t = e.call(this) || this;
            return (
                (t.responseCode = []),
                (t.responseCode[0] = "The license was replaced successfully."),
                (t.responseCode[1] = "The provided license does not match this version of Diffusion."),
                (t.responseCode[2] = "Diffusion was unable to find the IP address provided within the license."),
                (t.responseCode[3] = "The provided license has expired."),
                (t.responseCode[4] = "The date on the provided license is not valid."),
                (t.responseCode[5] = "The license file is missing.Please check the read / write permissions of your Diffusion server."),
                (t.responseCode[6] = "The licencing service has encountered an unknown error."),
                (t.responseCode[7] = "The provided license is not valid for the given IP address(es)."),
                (t.responseCode[8] = "The provided license is not valid for the given MAC address(es)."),
                (t.responseCode[9] = "The license file provided cannot be read, and may be corrupt."),
                (t.responseCode[10] = "The new license has an non-matching feature set to the current license.\nPlease shut down the server and replace the license manually."),
                t
            );
        }
        return (
            Pg(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readByte(e),
                    r = t in this.responseCode ? this.responseCode[t] : "An unknown response was received from the server.";
                return new Rg.ReplaceLicenceResponse(t, r);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    Cg.ReplaceLicenceResponseSerialiser = new Ng();
    var Ag = {};
    Object.defineProperty(Ag, "__esModule", { value: !0 }), (Ag.UPDATE_LICENSE = void 0), (Ag.UPDATE_LICENSE = { id: 159, request: Og.BytesSerialiser, response: Cg.ReplaceLicenceResponseSerialiser });
    var Mg = {};
    (function (e) {
        (function () {
            "use strict";
            Object.defineProperty(Mg, "__esModule", { value: !0 }), (Mg.LicenceUpdater = void 0);
            var t = (function () {
                function t(e) {
                    this.LICENCE_UPDATE = e.getServiceLocator().obtain(Ag.UPDATE_LICENSE);
                }
                return (
                    (t.prototype.updateLicence = function (t) {
                        var r = this,
                            n = e.from(t);
                        return new Promise(function (e, t) {
                            r.LICENCE_UPDATE.send(n, function (r, n) {
                                r ? t(r) : e(n);
                            });
                        });
                    }),
                    t
                );
            })();
            Mg.LicenceUpdater = t;
        }.call(this));
    }.call(this, u({}).Buffer));
    var jg = {},
        Lg =
            (this && this.__values) ||
            function (e) {
                var t = "function" == typeof Symbol && Symbol.iterator,
                    r = t && e[t],
                    n = 0;
                if (r) return r.call(e);
                if (e && "number" == typeof e.length)
                    return {
                        next: function () {
                            return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
                        },
                    };
                throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
            };
    function Dg(e) {
        var t,
            r,
            n = "";
        if (e.indexOf("'") < 0 && e.indexOf("\\") < 0) n += e;
        else
            try {
                for (var o = Lg(e), i = o.next(); !i.done; i = o.next()) {
                    var s = i.value;
                    ("'" !== s && "\\" !== s) || (n += "\\"), (n += s);
                }
            } catch (e) {
                t = { error: e };
            } finally {
                try {
                    i && !i.done && (r = o.return) && r.call(o);
                } finally {
                    if (t) throw t.error;
                }
            }
        return "'" + n + "'";
    }
    Object.defineProperty(jg, "__esModule", { value: !0 }),
        (jg.permissionsToString = jg.setToString = jg.quoteAndEscape = void 0),
        (jg.quoteAndEscape = Dg),
        (jg.setToString = function (e) {
            return "[" + e.map(Dg).join(" ") + "]";
        }),
        (jg.permissionsToString = function (e) {
            return "[" + e.join(" ") + "]";
        });
    var xg = {};
    Object.defineProperty(xg, "__esModule", { value: !0 }), (xg.SecurityScriptBuilderImpl = void 0);
    var Bg = (function () {
        function e() {
            (this.commands = ""), (this.setDefaultTopicPermissions = this.setDefaultPathPermissions.bind(this));
        }
        return (
            (e.prototype.maybeApppendNewLine = function () {
                this.commands.length > 0 && (this.commands += "\n");
            }),
            (e.prototype.build = function () {
                return this.commands;
            }),
            (e.prototype.toString = function () {
                return "ConfigurationScriptBuilder [" + this.commands + "]";
            }),
            (e.prototype.setRolesForAnonymousSessions = function (e) {
                var t = $c.requireNonNull(e, "roles");
                return this.maybeApppendNewLine(), (this.commands += "set roles for anonymous sessions "), (this.commands += jg.setToString(t)), this;
            }),
            (e.prototype.setRolesForNamedSessions = function (e) {
                var t = $c.requireNonNull(e, "roles");
                return this.maybeApppendNewLine(), (this.commands += "set roles for named sessions "), (this.commands += jg.setToString(t)), this;
            }),
            (e.prototype.setGlobalPermissions = function (e, t) {
                var r = $c.requireNonNull(e, "role"),
                    n = $c.requireNonNull(t, "permissions");
                return this.maybeApppendNewLine(), (this.commands += "set " + jg.quoteAndEscape(r) + " permissions "), (this.commands += jg.permissionsToString(n)), this;
            }),
            (e.prototype.setDefaultPathPermissions = function (e, t) {
                var r = $c.requireNonNull(e, "role"),
                    n = $c.requireNonNull(t, "permissions");
                return this.maybeApppendNewLine(), (this.commands += "set " + jg.quoteAndEscape(r) + " default path permissions "), (this.commands += jg.permissionsToString(n)), this;
            }),
            (e.prototype.removeTopicPermissions = function (e, t) {
                return this.removePathPermissions(e, t);
            }),
            (e.prototype.removePathPermissions = function (e, t) {
                var r = $c.requireNonNull(e, "role"),
                    n = $c.requireNonNull(t, "path");
                return this.maybeApppendNewLine(), (this.commands += "remove " + jg.quoteAndEscape(r) + " permissions for path " + jg.quoteAndEscape(n)), this;
            }),
            (e.prototype.setTopicPermissions = function (e, t, r) {
                return this.setPathPermissions(e, t, r);
            }),
            (e.prototype.setPathPermissions = function (e, t, r) {
                var n = $c.requireNonNull(e, "role"),
                    o = $c.requireNonNull(t, "path"),
                    i = $c.requireNonNull(r, "permissions");
                return this.maybeApppendNewLine(), (this.commands += "set " + jg.quoteAndEscape(n) + " path " + jg.quoteAndEscape(o) + " permissions "), (this.commands += jg.permissionsToString(i)), this;
            }),
            (e.prototype.setRoleIncludes = function (e, t) {
                var r = $c.requireNonNull(e, "role"),
                    n = $c.requireNonNull(t, "includedRoles");
                return this.maybeApppendNewLine(), (this.commands += "set " + jg.quoteAndEscape(r) + " includes "), (this.commands += jg.setToString(n)), this;
            }),
            (e.prototype.setRoleLockedByPrincipal = function (e, t) {
                var r = $c.requireNonNull(e, "role"),
                    n = $c.requireNonNull(t, "lockingPrincipal");
                return this.maybeApppendNewLine(), (this.commands += "set role " + jg.quoteAndEscape(r) + " locked by principal " + jg.quoteAndEscape(n)), this;
            }),
            (e.prototype.isolatePath = function (e) {
                var t = $c.requireNonNull(e, "path");
                return this.maybeApppendNewLine(), (this.commands += "isolate path " + jg.quoteAndEscape(t)), this;
            }),
            (e.prototype.deisolatePath = function (e) {
                var t = $c.requireNonNull(e, "path");
                return this.maybeApppendNewLine(), (this.commands += "deisolate path " + jg.quoteAndEscape(t)), this;
            }),
            e
        );
    })();
    xg.SecurityScriptBuilderImpl = Bg;
    var qg = {};
    Object.defineProperty(qg, "__esModule", { value: !0 }), (qg.SystemAuthenticationScriptBuilderImpl = void 0);
    var Ug = (function () {
        function e() {
            this.commands = "";
        }
        return (
            (e.prototype.maybeApppendNewLine = function () {
                this.commands.length > 0 && (this.commands += "\n");
            }),
            (e.prototype.build = function () {
                return this.commands;
            }),
            (e.prototype.toString = function () {
                return "SystemAuthenticationScriptBuilder [" + this.commands + "]";
            }),
            (e.prototype.assignRoles = function (e, t) {
                var r = $c.requireNonNull(t, "roles"),
                    n = $c.requireNonNull(e, "principal");
                return this.maybeApppendNewLine(), (this.commands += "assign roles " + jg.quoteAndEscape(n) + " "), (this.commands += jg.setToString(r)), this;
            }),
            (e.prototype.addPrincipal = function (e, t, r, n) {
                void 0 === r && (r = []);
                var o = $c.requireNonNull(r, "roles"),
                    i = $c.requireNonNull(e, "principal"),
                    s = $c.requireNonNull(t, "password");
                return (
                    this.maybeApppendNewLine(),
                    (this.commands += "add principal " + jg.quoteAndEscape(i) + " " + jg.quoteAndEscape(s)),
                    o.length && ((this.commands += " "), (this.commands += jg.setToString(o))),
                    n && (this.commands += " locked by " + jg.quoteAndEscape(n)),
                    this
                );
            }),
            (e.prototype.setPassword = function (e, t) {
                var r = $c.requireNonNull(e, "principal"),
                    n = $c.requireNonNull(t, "password");
                return this.maybeApppendNewLine(), (this.commands += "set password " + jg.quoteAndEscape(r) + " " + jg.quoteAndEscape(n)), this;
            }),
            (e.prototype.verifyPassword = function (e, t) {
                var r = $c.requireNonNull(e, "principal"),
                    n = $c.requireNonNull(t, "password");
                return this.maybeApppendNewLine(), (this.commands += "verify password " + jg.quoteAndEscape(r) + " " + jg.quoteAndEscape(n)), this;
            }),
            (e.prototype.removePrincipal = function (e) {
                var t = $c.requireNonNull(e, "principal");
                return this.maybeApppendNewLine(), (this.commands += "remove principal " + jg.quoteAndEscape(t)), this;
            }),
            (e.prototype.allowAnonymousConnections = function (e) {
                var t = $c.requireNonNull(e, "roles");
                return this.maybeApppendNewLine(), (this.commands += "allow anonymous connections" + (e ? " " : "")), (this.commands += jg.setToString(t)), this;
            }),
            (e.prototype.denyAnonymousConnections = function () {
                return this.maybeApppendNewLine(), (this.commands += "deny anonymous connections"), this;
            }),
            (e.prototype.abstainAnonymousConnections = function () {
                return this.maybeApppendNewLine(), (this.commands += "abstain anonymous connections"), this;
            }),
            (e.prototype.trustClientProposedPropertyIn = function (e, t) {
                var r = $c.requireNonNull(e, "propertyName"),
                    n = $c.requireNonNull(t, "allowedValues");
                return this.maybeApppendNewLine(), (this.commands += "trust client proposed property " + jg.quoteAndEscape(r) + " if value in "), (this.commands += jg.setToString(n)), this;
            }),
            (e.prototype.trustClientProposedPropertyMatches = function (e, t) {
                var r = $c.requireNonNull(e, "propertyName"),
                    n = $c.requireNonNull(t, "regex");
                return this.maybeApppendNewLine(), (this.commands += "trust client proposed property " + jg.quoteAndEscape(r) + " if value matches " + jg.quoteAndEscape(n)), this;
            }),
            (e.prototype.ignoreClientProposedProperty = function (e) {
                var t = $c.requireNonNull(e, "propertyName");
                return this.maybeApppendNewLine(), (this.commands += "ignore client proposed property " + jg.quoteAndEscape(t)), this;
            }),
            e
        );
    })();
    qg.SystemAuthenticationScriptBuilderImpl = Ug;
    var kg = {};
    Object.defineProperty(kg, "__esModule", { value: !0 }), (kg.SecurityCommandScript = void 0);
    var Vg = (function () {
        function e(e) {
            this.script = $c.requireNonNull(e, "script");
        }
        return (
            (e.prototype.toString = function () {
                return "SecurityCommandScript [" + this.script + "]";
            }),
            e
        );
    })();
    kg.SecurityCommandScript = Vg;
    var Fg = {};
    Object.defineProperty(Fg, "__esModule", { value: !0 }), (Fg.ChangePrincipalRequest = void 0);
    var Gg = function (e, t) {
        (this.principal = e), (this.credentials = t);
    };
    Fg.ChangePrincipalRequest = Gg;
    var Hg = {},
        Yg =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Hg, "__esModule", { value: !0 }), (Hg.SecurityCommandScriptSerialiser = void 0);
    var Wg = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            Yg(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readString(e);
                return new kg.SecurityCommandScript(t);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.script);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    Hg.SecurityCommandScriptSerialiser = new Wg();
    var Qg = {};
    Object.defineProperty(Qg, "__esModule", { value: !0 }), (Qg.connectionActionFromString = Qg.CONNECTION_ACTION = Qg.SystemAuthentication = void 0);
    var zg = (function () {
        function e(e, t, r, n) {
            void 0 === e && (e = []), void 0 === r && (r = []), void 0 === n && (n = {}), (this.principals = e), (this.anonymous = { action: t, roles: r }), (this.trustedClientProposedProperties = n);
        }
        return (
            (e.prototype.toString = function () {
                return "SystemAuthenticationConfiguration [principals=" + this.principals + ", anonymous=" + this.anonymous + "]";
            }),
            e
        );
    })();
    (Qg.SystemAuthentication = zg),
        (Qg.CONNECTION_ACTION = { ALLOW: { id: 0, value: "allow" }, DENY: { id: 1, value: "deny" }, ABSTAIN: { id: 2, value: "abstain" } }),
        Ru.enumerize(Qg.CONNECTION_ACTION),
        (Qg.connectionActionFromString = function (e) {
            return Qg.CONNECTION_ACTION[e.toUpperCase()];
        });
    var Kg = {};
    Object.defineProperty(Kg, "__esModule", { value: !0 }), (Kg.SessionPropertyValidationImpl = void 0);
    var Jg = function (e) {
        this.type = e;
    };
    Kg.SessionPropertyValidationImpl = Jg;
    var $g = {};
    Object.defineProperty($g, "__esModule", { value: !0 }),
        ($g.ValidationType = $g.PathPermission = $g.GlobalPermission = void 0),
        (function (e) {
            (e.AUTHENTICATE = "AUTHENTICATE"),
                (e.VIEW_SESSION = "VIEW_SESSION"),
                (e.MODIFY_SESSION = "MODIFY_SESSION"),
                (e.REGISTER_HANDLER = "REGISTER_HANDLER"),
                (e.VIEW_SERVER = "VIEW_SERVER"),
                (e.CONTROL_SERVER = "CONTROL_SERVER"),
                (e.VIEW_SECURITY = "VIEW_SECURITY"),
                (e.MODIFY_SECURITY = "MODIFY_SECURITY"),
                (e.UNKNOWN_GLOBAL_PERMISSION = "UNKNOWN_GLOBAL_PERMISSION"),
                (e.READ_TOPIC_VIEWS = "READ_TOPIC_VIEWS"),
                (e.MODIFY_TOPIC_VIEWS = "MODIFY_TOPIC_VIEWS");
        })($g.GlobalPermission || ($g.GlobalPermission = {})),
        (function (e) {
            (e.READ_TOPIC = "READ_TOPIC"),
                (e.UPDATE_TOPIC = "UPDATE_TOPIC"),
                (e.MODIFY_TOPIC = "MODIFY_TOPIC"),
                (e.SEND_TO_MESSAGE_HANDLER = "SEND_TO_MESSAGE_HANDLER"),
                (e.SEND_TO_SESSION = "SEND_TO_SESSION"),
                (e.SELECT_TOPIC = "SELECT_TOPIC"),
                (e.QUERY_OBSOLETE_TIME_SERIES_EVENTS = "QUERY_OBSOLETE_TIME_SERIES_EVENTS"),
                (e.EDIT_TIME_SERIES_EVENTS = "EDIT_TIME_SERIES_EVENTS"),
                (e.EDIT_OWN_TIME_SERIES_EVENTS = "EDIT_OWN_TIME_SERIES_EVENTS"),
                (e.ACQUIRE_LOCK = "ACQUIRE_LOCK"),
                (e.EXPOSE_BRANCH = "EXPOSE_BRANCH"),
                (e.UNKNOWN_PATH_PERMISSION = "UNKNOWN_PATH_PERMISSION"),
                (e.UNKNOWN_TOPIC_PERMISSION = "UNKNOWN_TOPIC_PERMISSION");
        })($g.PathPermission || ($g.PathPermission = {})),
        (function (e) {
            (e[(e.REGEX = 0)] = "REGEX"), (e[(e.VALUES = 1)] = "VALUES");
        })($g.ValidationType || ($g.ValidationType = {}));
    var Xg = {},
        Zg =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Xg, "__esModule", { value: !0 }), (Xg.MatchesSessionPropertyValidationImpl = void 0);
    var eO = (function (e) {
        function t(t) {
            var r = e.call(this, $g.ValidationType.REGEX) || this;
            return (r.regex = t), r;
        }
        return (
            Zg(t, e),
            (t.prototype.toString = function () {
                return "SessionPropertyValidation [type=" + this.type + ", regex=" + this.regex + "]";
            }),
            t
        );
    })(Kg.SessionPropertyValidationImpl);
    Xg.MatchesSessionPropertyValidationImpl = eO;
    var tO = {},
        rO =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(tO, "__esModule", { value: !0 }), (tO.ValuesSessionPropertyValidationImpl = void 0);
    var nO = (function (e) {
        function t(t) {
            var r = e.call(this, $g.ValidationType.VALUES) || this;
            return (r.values = t), r;
        }
        return (
            rO(t, e),
            (t.prototype.toString = function () {
                return "SessionPropertyValidation [type=" + this.type + ", values=" + this.values + "]";
            }),
            t
        );
    })(Kg.SessionPropertyValidationImpl);
    tO.ValuesSessionPropertyValidationImpl = nO;
    var oO = {},
        iO =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(oO, "__esModule", { value: !0 }), (oO.SessionPropertyValidationSerialiser = void 0);
    var sO = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            iO(t, e),
            (t.prototype.read = function (e) {
                if (Rf.read(e, $g.ValidationType) === $g.ValidationType.REGEX) return new Xg.MatchesSessionPropertyValidationImpl(tu.readString(e));
                var t = tu.readCollection(e, tu.readString);
                return new tO.ValuesSessionPropertyValidationImpl(t);
            }),
            (t.prototype.write = function (e, t) {
                var r = t.type;
                if ((tu.writeByte(e, r), r === $g.ValidationType.REGEX)) {
                    var n = t;
                    tu.writeString(e, n.regex);
                } else {
                    var o = t;
                    tu.writeCollection(e, o.values, tu.writeString);
                }
            }),
            t
        );
    })(ou.AbstractSerialiser);
    oO.SessionPropertyValidationSerialiser = new sO();
    var aO = {};
    Object.defineProperty(aO, "__esModule", { value: !0 }), (aO.SystemPrincipalImpl = void 0);
    var uO = (function () {
        function e(e, t, r) {
            (this.name = $c.requireNonNull(e, "name")), (this.roles = t || []), (this.lockingPrincipal = r);
        }
        return (
            (e.prototype.toString = function () {
                return "SystemPrincipal [" + this.name + ", " + this.roles + "]";
            }),
            e
        );
    })();
    aO.SystemPrincipalImpl = uO;
    var cO = {},
        lO =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(cO, "__esModule", { value: !0 }), (cO.SystemPrincipalSerialiser = void 0);
    var pO = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            lO(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readString(e),
                    r = tu.readCollection(e, tu.readString),
                    n = tu.readBoolean(e) ? tu.readString(e) : void 0;
                return new aO.SystemPrincipalImpl(t, r, n);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.name), tu.writeCollection(e, t.roles, tu.writeString), tu.writeBoolean(e, !!t.lockingPrincipal), t.lockingPrincipal && tu.writeString(e, t.lockingPrincipal);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    cO.SystemPrincipalSerialiser = new pO();
    var fO = {},
        hO =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(fO, "__esModule", { value: !0 }), (fO.SystemAuthenticationConfigurationSerialiser = void 0);
    var dO = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            hO(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readCollection(e, cO.SystemPrincipalSerialiser.read),
                    r = Rf.read(e, Qg.CONNECTION_ACTION),
                    n = tu.readCollection(e, tu.readString),
                    o = tu.readDictionary(e, oO.SessionPropertyValidationSerialiser.read);
                return new Qg.SystemAuthentication(t, r.value, n, o);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeCollection(e, t.principals, cO.SystemPrincipalSerialiser.write);
                var r = Qg.connectionActionFromString(t.anonymous.action);
                tu.writeByte(e, r.id), tu.writeCollection(e, t.anonymous.roles, tu.writeString), tu.writeDictionary(e, t.trustedClientProposedProperties, oO.SessionPropertyValidationSerialiser.write);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    fO.SystemAuthenticationConfigurationSerialiser = new dO();
    var yO = {},
        vO =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(yO, "__esModule", { value: !0 }), (yO.ChangePrincipalRequestSerialiser = void 0);
    var SO = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            vO(t, e),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.principal), xh.write(e, t.credentials);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    yO.ChangePrincipalRequestSerialiser = new SO();
    var _O = {};
    Object.defineProperty(_O, "__esModule", { value: !0 }), (_O.ControlRegistrationParams = void 0);
    var EO = function (e, t) {
        (this.definition = e), (this.group = t);
    };
    _O.ControlRegistrationParams = EO;
    var wO = {},
        mO =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(wO, "__esModule", { value: !0 }), (wO.ControlRegistrationParamsSerialiser = void 0);
    var TO = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            mO(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readInt32(e),
                    r = xd.ControlGroupSerialiser.read(e);
                return new _O.ControlRegistrationParams({ id: t }, r);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeInt32(e, t.definition.id), xd.ControlGroupSerialiser.write(e, t.group);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    wO.ControlRegistrationParamsSerialiser = new TO();
    var gO = {},
        OO =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(gO, "__esModule", { value: !0 }), (gO.AuthenticatorRegistrationParameters = void 0);
    var IO = (function (e) {
        function t(t, r, n) {
            var o = e.call(this, r, n) || this;
            return (o.name = t), o;
        }
        return OO(t, e), t;
    })(_O.ControlRegistrationParams);
    gO.AuthenticatorRegistrationParameters = IO;
    var RO = {},
        bO =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(RO, "__esModule", { value: !0 }), (RO.AuthenticatorRegistrationParametersSerialiser = void 0);
    var CO = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            bO(t, e),
            (t.prototype.read = function (e) {
                var t = wO.ControlRegistrationParamsSerialiser.read(e),
                    r = tu.readString(e);
                return new gO.AuthenticatorRegistrationParameters(r, t.definition, t.group);
            }),
            (t.prototype.write = function (e, t) {
                wO.ControlRegistrationParamsSerialiser.write(e, t), tu.writeString(e, t.name);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    RO.AuthenticatorRegistrationParametersSerialiser = new CO();
    var PO = {};
    Object.defineProperty(PO, "__esModule", { value: !0 }), (PO.AuthenticatorRegistrationRequest = void 0);
    var NO = function (e, t) {
        (this.params = e), (this.cid = t);
    };
    PO.AuthenticatorRegistrationRequest = NO;
    var AO = {},
        MO =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(AO, "__esModule", { value: !0 }), (AO.AuthenticatorRegistrationRequestSerialiser = void 0);
    var jO = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            MO(t, e),
            (t.prototype.read = function (e) {
                var t = RO.AuthenticatorRegistrationParametersSerialiser.read(e),
                    r = ru.CIDSerialiser.read(e);
                return new PO.AuthenticatorRegistrationRequest(t, r);
            }),
            (t.prototype.write = function (e, t) {
                RO.AuthenticatorRegistrationParametersSerialiser.write(e, t.params), ru.CIDSerialiser.write(e, t.cid);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    AO.AuthenticatorRegistrationRequestSerialiser = new jO();
    var LO = {};
    Object.defineProperty(LO, "__esModule", { value: !0 }), (LO.AuthenticatorRequest = void 0);
    var DO = function (e, t, r, n, o) {
        (this.principal = e), (this.credentials = t), (this.sessionProperties = r), (this.proposedProperties = n), (this.cid = o);
    };
    LO.AuthenticatorRequest = DO;
    var xO = {},
        BO =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(xO, "__esModule", { value: !0 }), (xO.AuthenticatorRequestSerialiser = void 0);
    var qO = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            BO(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readString(e),
                    r = xh.read(e),
                    n = tu.readDictionary(e, tu.readString),
                    o = tu.readDictionary(e, tu.readString),
                    i = ru.CIDSerialiser.read(e);
                return new LO.AuthenticatorRequest(t, r, n, o, i);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    xO.AuthenticatorRequestSerialiser = new qO();
    var UO,
        kO = {};
    Object.defineProperty(kO, "__esModule", { value: !0 }),
        (kO.ABSTAIN = kO.DENY = kO.AuthenticatorResponse = kO.TypeCode = void 0),
        (function (e) {
            (e[(e.DENY = 0)] = "DENY"), (e[(e.ABSTAIN = 1)] = "ABSTAIN"), (e[(e.ALLOW = 2)] = "ALLOW");
        })((UO = kO.TypeCode || (kO.TypeCode = {})));
    var VO = function (e, t) {
        (this.type = e), (this.properties = t);
    };
    (kO.AuthenticatorResponse = VO), (kO.DENY = Object.freeze(new VO(UO.DENY))), (kO.ABSTAIN = Object.freeze(new VO(UO.ABSTAIN)));
    var FO = {},
        GO =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(FO, "__esModule", { value: !0 }), (FO.AuthenticatorResponseSerialiser = void 0);
    var HO = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            GO(t, e),
            (t.prototype.read = function (e) {
                switch (Rf.read(e, kO.TypeCode)) {
                    case kO.TypeCode.ABSTAIN:
                        return kO.ABSTAIN;
                    case kO.TypeCode.ALLOW:
                        var t = tu.readDictionary(e, tu.readString);
                        return new kO.AuthenticatorResponse(kO.TypeCode.ALLOW, t);
                    default:
                        return kO.DENY;
                }
            }),
            (t.prototype.write = function (e, t) {
                Rf.write(e, t.type), t.type === kO.TypeCode.ALLOW && tu.writeDictionary(e, t.properties || {}, tu.writeString);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    FO.AuthenticatorResponseSerialiser = new HO();
    var YO = {};
    Object.defineProperty(YO, "__esModule", { value: !0 }),
        (YO.PathPermissionCode = YO.GlobalPermissionCode = void 0),
        (function (e) {
            (e[(e.AUTHENTICATE = 0)] = "AUTHENTICATE"),
                (e[(e.VIEW_SESSION = 1)] = "VIEW_SESSION"),
                (e[(e.MODIFY_SESSION = 2)] = "MODIFY_SESSION"),
                (e[(e.REGISTER_HANDLER = 3)] = "REGISTER_HANDLER"),
                (e[(e.VIEW_SERVER = 4)] = "VIEW_SERVER"),
                (e[(e.CONTROL_SERVER = 5)] = "CONTROL_SERVER"),
                (e[(e.VIEW_SECURITY = 6)] = "VIEW_SECURITY"),
                (e[(e.MODIFY_SECURITY = 7)] = "MODIFY_SECURITY"),
                (e[(e.UNKNOWN_GLOBAL_PERMISSION = 8)] = "UNKNOWN_GLOBAL_PERMISSION"),
                (e[(e.READ_TOPIC_VIEWS = 9)] = "READ_TOPIC_VIEWS"),
                (e[(e.MODIFY_TOPIC_VIEWS = 10)] = "MODIFY_TOPIC_VIEWS");
        })(YO.GlobalPermissionCode || (YO.GlobalPermissionCode = {})),
        (function (e) {
            (e[(e.READ_TOPIC = 0)] = "READ_TOPIC"),
                (e[(e.UPDATE_TOPIC = 1)] = "UPDATE_TOPIC"),
                (e[(e.MODIFY_TOPIC = 2)] = "MODIFY_TOPIC"),
                (e[(e.SEND_TO_MESSAGE_HANDLER = 3)] = "SEND_TO_MESSAGE_HANDLER"),
                (e[(e.SEND_TO_SESSION = 4)] = "SEND_TO_SESSION"),
                (e[(e.SELECT_TOPIC = 5)] = "SELECT_TOPIC"),
                (e[(e.QUERY_OBSOLETE_TIME_SERIES_EVENTS = 6)] = "QUERY_OBSOLETE_TIME_SERIES_EVENTS"),
                (e[(e.EDIT_TIME_SERIES_EVENTS = 7)] = "EDIT_TIME_SERIES_EVENTS"),
                (e[(e.EDIT_OWN_TIME_SERIES_EVENTS = 8)] = "EDIT_OWN_TIME_SERIES_EVENTS"),
                (e[(e.ACQUIRE_LOCK = 9)] = "ACQUIRE_LOCK"),
                (e[(e.UNKNOWN_TOPIC_PERMISSION = 10)] = "UNKNOWN_TOPIC_PERMISSION"),
                (e[(e.UNKNOWN_PATH_PERMISSION = 10)] = "UNKNOWN_PATH_PERMISSION"),
                (e[(e.EXPOSE_BRANCH = 11)] = "EXPOSE_BRANCH");
        })(YO.PathPermissionCode || (YO.PathPermissionCode = {}));
    var WO = {};
    Object.defineProperty(WO, "__esModule", { value: !0 }), (WO.ListGlobalPermissionsResult = void 0);
    var QO = function (e) {
        this.permissions = e;
    };
    WO.ListGlobalPermissionsResult = QO;
    var zO = {},
        KO =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(zO, "__esModule", { value: !0 }), (zO.ListGlobalPermissionsResultSerialiser = void 0);
    var JO = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            KO(t, e),
            (t.prototype.read = function (e) {
                return new WO.ListGlobalPermissionsResult(
                    tu.readCollection(e, function () {
                        var t = YO.GlobalPermissionCode[e.read()];
                        return $g.GlobalPermission[t];
                    })
                );
            }),
            t
        );
    })(ou.AbstractSerialiser);
    zO.ListGlobalPermissionsResultSerialiser = new JO();
    var $O = {};
    Object.defineProperty($O, "__esModule", { value: !0 }), ($O.ListPathPermissionsResult = void 0);
    var XO = function (e) {
        this.permissions = e;
    };
    $O.ListPathPermissionsResult = XO;
    var ZO = {},
        eI =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(ZO, "__esModule", { value: !0 }), (ZO.ListPathPermissionsResultSerialiser = void 0);
    var tI = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            eI(t, e),
            (t.prototype.read = function (e) {
                return new $O.ListPathPermissionsResult(
                    tu.readCollection(e, function () {
                        var t = YO.PathPermissionCode[e.read()];
                        return $g.PathPermission[t];
                    })
                );
            }),
            t
        );
    })(ou.AbstractSerialiser);
    ZO.ListPathPermissionsResultSerialiser = new tI();
    var rI = {};
    Object.defineProperty(rI, "__esModule", { value: !0 }), (rI.SecurityConfigurationImpl = void 0);
    var nI = (function () {
        function e(e, t, r, n) {
            (this.anonymous = e), (this.named = t), (this.roles = r), (this.isolatedPaths = n);
        }
        return (
            (e.prototype.toString = function () {
                return "SecurityConfiguration [anonymous=${this.anonymous}, named=${this.named}, roles=${this.roles}, isolatedPaths=${this.isolatedPaths}]";
            }),
            e
        );
    })();
    rI.SecurityConfigurationImpl = nI;
    var oI = {};
    Object.defineProperty(oI, "__esModule", { value: !0 }), (oI.RoleImpl = void 0);
    var iI = function (e, t, r, n, o, i) {
        (this.name = e), (this.global = t), (this.default = r), (this.topic = n), (this.roles = o), (this.lockingPrincipal = i);
    };
    oI.RoleImpl = iI;
    var sI = {};
    Object.defineProperty(sI, "__esModule", { value: !0 }),
        (sI.read = void 0),
        (sI.read = function (e) {
            var t = tu.readString(e),
                r = tu
                    .readCollection(e, function () {
                        return Rf.read(e, YO.GlobalPermissionCode);
                    })
                    .map(function (e) {
                        return YO.GlobalPermissionCode[e];
                    }),
                n = tu
                    .readCollection(e, function () {
                        return Rf.read(e, YO.PathPermissionCode);
                    })
                    .map(function (e) {
                        return YO.PathPermissionCode[e];
                    }),
                o = tu.readDictionary(e, function () {
                    return tu
                        .readCollection(e, function () {
                            return Rf.read(e, YO.PathPermissionCode);
                        })
                        .map(function (e) {
                            return YO.PathPermissionCode[e];
                        });
                }),
                i = tu.readCollection(e, tu.readString),
                s = tu.readBoolean(e) ? tu.readString(e) : void 0;
            return new oI.RoleImpl(t, r, n, o, i, s);
        });
    var aI = {},
        uI =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(aI, "__esModule", { value: !0 }), (aI.SecurityConfigurationSerialiser = void 0);
    var cI = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            uI(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readCollection(e, tu.readString),
                    r = tu.readCollection(e, tu.readString),
                    n = tu.readCollection(e, sI.read),
                    o = tu.readCollection(e, tu.readString);
                return new rI.SecurityConfigurationImpl(t, r, n, o);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    aI.SecurityConfigurationSerialiser = new cI();
    var lI = {};
    Object.defineProperty(lI, "__esModule", { value: !0 }),
        (lI.LIST_PATH_PERMISSIONS = lI.LIST_GLOBAL_PERMISSIONS = lI.AUTHENTICATOR_DEREGISTRATION = lI.AUTHENTICATOR = lI.AUTHENTICATOR_REGISTRATION = lI.UPDATE_SECURITY_CONFIGURATION = lI.GET_SECURITY_CONFIGURATION = lI.UPDATE_SYSTEM_AUTHENTICATION = lI.GET_SYSTEM_AUTHENTICATION = lI.CHANGE_PRINCIPAL = void 0),
        (lI.CHANGE_PRINCIPAL = { id: 5, request: yO.ChangePrincipalRequestSerialiser, response: Of.BooleanSerialiser }),
        (lI.GET_SYSTEM_AUTHENTICATION = { id: 57, request: Md.NullSerialiser, response: fO.SystemAuthenticationConfigurationSerialiser }),
        (lI.UPDATE_SYSTEM_AUTHENTICATION = { id: 58, request: Hg.SecurityCommandScriptSerialiser, response: b_.ErrorReportListSerialiser }),
        (lI.GET_SECURITY_CONFIGURATION = { id: 59, request: Md.NullSerialiser, response: aI.SecurityConfigurationSerialiser }),
        (lI.UPDATE_SECURITY_CONFIGURATION = { id: 60, request: Hg.SecurityCommandScriptSerialiser, response: b_.ErrorReportListSerialiser }),
        (lI.AUTHENTICATOR_REGISTRATION = { id: 119, request: AO.AuthenticatorRegistrationRequestSerialiser, response: Md.NullSerialiser }),
        (lI.AUTHENTICATOR = { id: 120, request: xO.AuthenticatorRequestSerialiser, response: FO.AuthenticatorResponseSerialiser }),
        (lI.AUTHENTICATOR_DEREGISTRATION = { id: 121, request: RO.AuthenticatorRegistrationParametersSerialiser, response: Md.NullSerialiser }),
        (lI.LIST_GLOBAL_PERMISSIONS = { id: 143, request: Md.NullSerialiser, response: zO.ListGlobalPermissionsResultSerialiser }),
        (lI.LIST_PATH_PERMISSIONS = { id: 144, request: zv.StringSerialiser, response: ZO.ListPathPermissionsResultSerialiser });
    var pI = {},
        fI =
            (this && this.__values) ||
            function (e) {
                var t = "function" == typeof Symbol && Symbol.iterator,
                    r = t && e[t],
                    n = 0;
                if (r) return r.call(e);
                if (e && "number" == typeof e.length)
                    return {
                        next: function () {
                            return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
                        },
                    };
                throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
            };
    Object.defineProperty(pI, "__esModule", { value: !0 }), (pI.SecurityImpl = void 0);
    var hI = yu.create("Session.Security"),
        dI = (function () {
            function e(e) {
                (this.GlobalPermission = $g.GlobalPermission), (this.PathPermission = $g.PathPermission), (this.TopicPermission = $g.PathPermission), (this.internal = e);
                var t = e.getServiceLocator();
                (this.CHANGE_PRINCIPAL = t.obtain(lI.CHANGE_PRINCIPAL)),
                    (this.GET_SECURITY_CONFIGURATION = t.obtain(lI.GET_SECURITY_CONFIGURATION)),
                    (this.GET_SYSTEM_AUTHENTICATION = t.obtain(lI.GET_SYSTEM_AUTHENTICATION)),
                    (this.UPDATE_SECURITY_CONFIGURATION = t.obtain(lI.UPDATE_SECURITY_CONFIGURATION)),
                    (this.UPDATE_SYSTEM_AUTHENTICATION = t.obtain(lI.UPDATE_SYSTEM_AUTHENTICATION)),
                    (this.AUTHENTICATOR_DEREGISTRATION = t.obtain(lI.AUTHENTICATOR_DEREGISTRATION)),
                    (this.LIST_GLOBAL_PERMISSIONS = t.obtain(lI.LIST_GLOBAL_PERMISSIONS)),
                    (this.LIST_PATH_PERMISSIONS = t.obtain(lI.LIST_PATH_PERMISSIONS)),
                    e.getServiceRegistry().add(
                        lI.AUTHENTICATOR,
                        pm.create(function (e, t, r) {
                            e.getConversationSet().respondIfPresent(t.cid, { req: t, callback: r });
                        })
                    );
            }
            return (
                (e.prototype.getPrincipal = function () {
                    return this.internal.getPrincipal();
                }),
                (e.prototype.changePrincipal = function (e, t) {
                    var r = this;
                    return new Promise(function (n, o) {
                        r.internal.checkConnected(o) &&
                            (hI.debug("Changing principal", e),
                            r.CHANGE_PRINCIPAL.send(new Fg.ChangePrincipalRequest(e, t), function (t, i) {
                                t ? o(t) : i ? (r.internal.setPrincipal(e), n()) : o(new Error("Unable to change principal due to authentication failure"));
                            }));
                    });
                }),
                (e.prototype.getSecurityConfiguration = function () {
                    var e = this;
                    return new Promise(function (t, r) {
                        e.internal.checkConnected(r) &&
                            (hI.debug("Getting security configuration"),
                            e.GET_SECURITY_CONFIGURATION.send(null, function (e, n) {
                                e ? r(e) : t(n);
                            }));
                    });
                }),
                (e.prototype.getSystemAuthenticationConfiguration = function () {
                    var e = this;
                    return new Promise(function (t, r) {
                        e.internal.checkConnected(r) &&
                            (hI.debug("Getting system authentication"),
                            e.GET_SYSTEM_AUTHENTICATION.send(null, function (e, n) {
                                e ? r(e) : t(n);
                            }));
                    });
                }),
                (e.prototype.setAuthenticator = function (e, t) {
                    var r = this;
                    return new Promise(function (n, o) {
                        var i = !1;
                        if (r.internal.checkConnected(o)) {
                            try {
                                $c.requireNonNull(e, "handlerName"), $c.requireNonNull(t, "authenticator");
                            } catch (e) {
                                return void o(e);
                            }
                            ("function" == typeof t.authenticate && "function" == typeof t.onError && "function" == typeof t.onClose) || o(new Error("authenticator does not implement the Authenticator interface")),
                                hI.debug("Adding authenticator", e);
                            var s = { name: e, definition: lI.AUTHENTICATOR, group: Ld.DEFAULT },
                                a = {
                                    active: function (o, a) {
                                        hI.debug("Authenticator active", e),
                                            n({
                                                close: function () {
                                                    return new Promise(function (e) {
                                                        (i = !0),
                                                            r.AUTHENTICATOR_DEREGISTRATION.send(s, function (n, o) {
                                                                n
                                                                    ? (r.internal.getConversationSet().discard(a, n), hI.debug("Error with authenticator deregistration: ", n))
                                                                    : (r.internal.getConversationSet().respondIfPresent(a, o), t.onClose()),
                                                                    e();
                                                            });
                                                    });
                                                },
                                            });
                                    },
                                    respond: function (e) {
                                        if (i) return !0;
                                        var r = e.req,
                                            n = e.callback;
                                        try {
                                            t.authenticate(r.principal, r.credentials, r.sessionProperties, r.proposedProperties, {
                                                allow: function (e) {
                                                    var t, o;
                                                    if (e) {
                                                        e = Object.assign({}, e);
                                                        try {
                                                            for (var i = fI(Object.getOwnPropertyNames(r.sessionProperties)), s = i.next(); !s.done; s = i.next()) {
                                                                var a = s.value;
                                                                e[a] === r.sessionProperties[a] && delete e[a];
                                                            }
                                                        } catch (e) {
                                                            t = { error: e };
                                                        } finally {
                                                            try {
                                                                s && !s.done && (o = i.return) && o.call(i);
                                                            } finally {
                                                                if (t) throw t.error;
                                                            }
                                                        }
                                                    }
                                                    n.respond(new kO.AuthenticatorResponse(kO.TypeCode.ALLOW, e));
                                                },
                                                abstain: function () {
                                                    n.respond(kO.ABSTAIN);
                                                },
                                                deny: function () {
                                                    n.respond(kO.DENY);
                                                },
                                            });
                                        } catch (e) {
                                            throw (t.onError(e), n.fail(bu.ErrorReason.CALLBACK_EXCEPTION, e && e.message), e);
                                        }
                                        return !1;
                                    },
                                    close: function (r) {
                                        r ? (hI.debug("'Authenticator closed with error for \"" + e + "\"'"), t.onError(r)) : (hI.debug("'Authentication Handler closed for \"" + e + "\"'"), t.onClose());
                                    },
                                };
                            Lv.registerHandler(r.internal, s, a, lI.AUTHENTICATOR_REGISTRATION, lI.AUTHENTICATOR_DEREGISTRATION).then(void 0, function (e) {
                                o(e);
                            });
                        }
                    });
                }),
                (e.prototype.updateStoreCallback = function (e, t, r, n) {
                    e ? n(e) : t.errors.length > 0 ? n(t.errors) : r();
                }),
                (e.prototype.updateStore = function (e, t) {
                    var r = this;
                    return new Promise(function (n, o) {
                        "" === t
                            ? n()
                            : t && "string" == typeof t
                            ? r.internal.checkConnected(o) &&
                              e.send(new kg.SecurityCommandScript(t), function (e, t) {
                                  r.updateStoreCallback(e, t, n, o);
                              })
                            : o(new Error("Invalid argument for script: " + t));
                    });
                }),
                (e.prototype.updateSecurityStore = function (e) {
                    return hI.debug("Updating security store"), this.updateStore(this.UPDATE_SECURITY_CONFIGURATION, e);
                }),
                (e.prototype.updateAuthenticationStore = function (e) {
                    return hI.debug("Updating authentication store"), this.updateStore(this.UPDATE_SYSTEM_AUTHENTICATION, e);
                }),
                (e.prototype.securityScriptBuilder = function () {
                    return new xg.SecurityScriptBuilderImpl();
                }),
                (e.prototype.authenticationScriptBuilder = function () {
                    return new qg.SystemAuthenticationScriptBuilderImpl();
                }),
                (e.prototype.getGlobalPermissions = function () {
                    var e = this;
                    return new Promise(function (t, r) {
                        e.internal.checkConnected(r) &&
                            (hI.debug("Getting global permissions"),
                            e.LIST_GLOBAL_PERMISSIONS.send(null, function (e, n) {
                                e ? r(e) : t(n.permissions);
                            }));
                    });
                }),
                (e.prototype.getPathPermissions = function (e) {
                    var t = this;
                    return new Promise(function (r, n) {
                        t.internal.checkConnected(n) &&
                            (hI.debug("Getting path permissions"),
                            t.LIST_PATH_PERMISSIONS.send(e, function (e, t) {
                                e ? n(e) : r(t.permissions);
                            }));
                    });
                }),
                (e.prototype.getTopicPermissions = function (e) {
                    var t = this;
                    return new Promise(function (r, n) {
                        t.internal.checkConnected(n) &&
                            (hI.debug("Getting path permissions"),
                            t.LIST_PATH_PERMISSIONS.send(e, function (e, t) {
                                e ? n(e) : r(t.permissions);
                            }));
                    });
                }),
                e
            );
        })();
    pI.SecurityImpl = dI;
    var yI = {},
        vI =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    function SI(e, t) {
        tu.writeString(e, t.sessionFilter), tu.writeString(e, t.topicTreeBranch);
    }
    function _I(e) {
        return { sessionFilter: tu.readString(e), topicTreeBranch: tu.readString(e) };
    }
    Object.defineProperty(yI, "__esModule", { value: !0 }), (yI.BranchMappingTableSerialiser = void 0);
    var EI = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            vI(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readString(e),
                    r = tu.readCollection(e, _I);
                return new uv.BranchMappingTableImpl(t, r);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.getSessionTreeBranch()), tu.writeCollection(e, t.getBranchMappings(), SI);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    yI.BranchMappingTableSerialiser = new EI();
    var wI = {};
    Object.defineProperty(wI, "__esModule", { value: !0 }), (wI.SessionTreeBranchList = void 0);
    var mI = function (e) {
        this.paths = e;
    };
    wI.SessionTreeBranchList = mI;
    var TI = {},
        gI =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(TI, "__esModule", { value: !0 }), (TI.SessionTreeBranchListSerialiser = void 0);
    var OI = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            gI(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readCollection(e, tu.readString);
                return new wI.SessionTreeBranchList(t);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    TI.SessionTreeBranchListSerialiser = new OI();
    var II = {};
    Object.defineProperty(II, "__esModule", { value: !0 }),
        (II.GET_BRANCH_MAPPING_TABLE = II.GET_SESSION_TREE_BRANCHES_WITH_MAPPINGS = II.PUT_BRANCH_MAPPING_TABLE = void 0),
        (II.PUT_BRANCH_MAPPING_TABLE = { id: 176, request: yI.BranchMappingTableSerialiser, response: Md.NullSerialiser }),
        (II.GET_SESSION_TREE_BRANCHES_WITH_MAPPINGS = { id: 177, request: Md.NullSerialiser, response: TI.SessionTreeBranchListSerialiser }),
        (II.GET_BRANCH_MAPPING_TABLE = { id: 178, request: zv.StringSerialiser, response: yI.BranchMappingTableSerialiser });
    var RI = {};
    Object.defineProperty(RI, "__esModule", { value: !0 }), (RI.SessionTreesImpl = void 0);
    var bI = yu.create("SessionTrees"),
        CI = (function () {
            function e(e) {
                this.internal = e;
                var t = e.getServiceLocator();
                (this.PUT_BRANCH_MAPPING_TABLE = t.obtain(II.PUT_BRANCH_MAPPING_TABLE)),
                    (this.GET_SESSION_TREE_BRANCHES_WITH_MAPPINGS = t.obtain(II.GET_SESSION_TREE_BRANCHES_WITH_MAPPINGS)),
                    (this.GET_BRANCH_MAPPING_TABLE = t.obtain(II.GET_BRANCH_MAPPING_TABLE));
            }
            return (
                (e.prototype.putBranchMappingTable = function (e) {
                    var t = this;
                    return new Promise(function (r, n) {
                        $c.requireNonNull(e, "branchMappingTable"),
                            t.internal.checkConnected(n) &&
                                t.PUT_BRANCH_MAPPING_TABLE.send(e, function (e, t) {
                                    qf.responseSuccess(e, t) ? r() : (n(e), bI.debug("Put branch mapping table failed"));
                                });
                    });
                }),
                (e.prototype.getSessionTreeBranchesWithMappings = function () {
                    var e = this;
                    return new Promise(function (t, r) {
                        e.internal.checkConnected(r) &&
                            e.GET_SESSION_TREE_BRANCHES_WITH_MAPPINGS.send(null, function (e, n) {
                                qf.responseSuccess(e, n) ? t(n.paths) : (r(e), bI.debug("Get session tree branches with mappings failed"));
                            });
                    });
                }),
                (e.prototype.getBranchMappingTable = function (e) {
                    var t = this;
                    return new Promise(function (r, n) {
                        $c.requireNonNull(e, "sessionTreeBranch"),
                            t.internal.checkConnected(n) &&
                                t.GET_BRANCH_MAPPING_TABLE.send(e, function (e, t) {
                                    qf.responseSuccess(e, t) ? r(t) : (n(e), bI.debug("Get branch mapping table failed"));
                                });
                    });
                }),
                e
            );
        })();
    RI.SessionTreesImpl = CI;
    var PI = {};
    function NI(e, t) {
        if (null == e || e < 0) throw new Error(t + " is negative: " + e);
        return e;
    }
    Object.defineProperty(PI, "__esModule", { value: !0 }), (PI.Point = PI.Types = void 0);
    var AI = function (e, t, r, n) {
        (this.id = e), (this.anchorOperator = t), (this.spanOperator = r), (this.unitsSuffix = n);
    };
    (PI.Types = {
        ABSOLUTE_START: new AI(0, "fromStart", "toStart", ""),
        ABSOLUTE_SEQUENCE: new AI(1, "from", "to", ""),
        ABSOLUTE_TIME: new AI(2, "from", "to", " ms"),
        OFFSET_SEQUENCE: new AI(3, "fromLast", "untilLast", ""),
        OFFSET_TIME: new AI(4, "fromLast", "untilLast", " ms"),
        NEXT_COUNT: new AI(5, null, "next", ""),
        NEXT_TIME: new AI(6, null, "next", " ms"),
        PREVIOUS_COUNT: new AI(7, null, "previous", ""),
        PREVIOUS_TIME: new AI(8, null, "previous", " ms"),
    }),
        Ru.enumerize(PI.Types);
    var MI = (function () {
        function e(e, t) {
            (this.value = e), (this.type = t);
        }
        return (
            (e.at = function (t) {
                return t instanceof Date ? new e($c.requireNonNull(t, "Date").getTime(), PI.Types.ABSOLUTE_TIME) : new e(NI(t, "Sequence"), PI.Types.ABSOLUTE_SEQUENCE);
            }),
            (e.atStart = function () {
                return jI;
            }),
            (e.offset = function (t) {
                return new e(NI(t, "Count"), PI.Types.OFFSET_SEQUENCE);
            }),
            (e.offsetMillis = function (t) {
                return new e(NI(t, "Timespan"), PI.Types.OFFSET_TIME);
            }),
            (e.next = function (t) {
                return new e(NI(t, "Count"), PI.Types.NEXT_COUNT);
            }),
            (e.nextMillis = function (t) {
                return new e(NI(t, "Timespan"), PI.Types.NEXT_TIME);
            }),
            (e.previous = function (t) {
                return new e(NI(t, "Count"), PI.Types.PREVIOUS_COUNT);
            }),
            (e.previousMillis = function (t) {
                return new e(NI(t, "Timespan"), PI.Types.PREVIOUS_TIME);
            }),
            (e.prototype.equals = function (t) {
                return !!(t && t instanceof e) && this.value === t.value && this.type === t.type;
            }),
            e
        );
    })();
    PI.Point = MI;
    var jI = new MI(0, PI.Types.ABSOLUTE_START),
        LI = {};
    Object.defineProperty(LI, "__esModule", { value: !0 }), (LI.DEFAULT_RANGE = LI.Range = void 0);
    var DI = (function () {
        function e(e, t) {
            (this.anchor = e), (this.span = t);
        }
        return (
            (e.prototype.equals = function (t) {
                return !!(t && t instanceof e) && this.anchor.equals(t.anchor) && this.span.equals(t.span);
            }),
            (e.prototype.from = function (t) {
                return new e(PI.Point.at(t), this.span);
            }),
            (e.prototype.fromStart = function () {
                return new e(PI.Point.atStart(), this.span);
            }),
            (e.prototype.fromLast = function (t) {
                return new e(PI.Point.offset(t), this.span);
            }),
            (e.prototype.fromLastMillis = function (t) {
                return new e(PI.Point.offsetMillis(t), this.span);
            }),
            (e.prototype.to = function (t) {
                return new e(this.anchor, PI.Point.at(t));
            }),
            (e.prototype.toStart = function () {
                return new e(this.anchor, PI.Point.atStart());
            }),
            (e.prototype.untilLast = function (t) {
                return new e(this.anchor, PI.Point.offset(t));
            }),
            (e.prototype.untilLastMillis = function (t) {
                return new e(this.anchor, PI.Point.offsetMillis(t));
            }),
            (e.prototype.next = function (t) {
                return new e(this.anchor, PI.Point.next(t));
            }),
            (e.prototype.nextMillis = function (t) {
                return new e(this.anchor, PI.Point.nextMillis(t));
            }),
            (e.prototype.previous = function (t) {
                return new e(this.anchor, PI.Point.previous(t));
            }),
            (e.prototype.previousMillis = function (t) {
                return new e(this.anchor, PI.Point.previousMillis(t));
            }),
            e
        );
    })();
    (LI.Range = DI), (LI.DEFAULT_RANGE = new DI(PI.Point.atStart(), PI.Point.offset(0)));
    var xI = {};
    Object.defineProperty(xI, "__esModule", { value: !0 }), (xI.DEFAULT_RANGE_QUERY = xI.RangeQueryParameters = xI.QueryTypes = xI.StreamStructures = void 0);
    var BI = (function () {
        function e(e, t) {
            (this.id = e), (this.name = t);
        }
        return (
            (e.prototype.toString = function () {
                return this.name;
            }),
            e
        );
    })();
    (xI.StreamStructures = { VALUE_EVENT_STREAM: new BI(1, "VALUE_EVENT_STREAM"), EDIT_EVENT_STREAM: new BI(2, "EDIT_EVENT_STREAM") }), Ru.enumerize(xI.StreamStructures), Object.freeze(xI.StreamStructures);
    var qI = function (e, t) {
        (this.id = e), (this.streamStructure = t);
    };
    (xI.QueryTypes = { VALUES: new qI(0, xI.StreamStructures.VALUE_EVENT_STREAM), ALL_EDITS: new qI(1, xI.StreamStructures.EDIT_EVENT_STREAM), LATEST_EDITS: new qI(2, xI.StreamStructures.EDIT_EVENT_STREAM) }),
        Ru.enumerize(xI.QueryTypes),
        Object.freeze(xI.QueryTypes);
    var UI = (function () {
        function e(e, t, r, n) {
            (this.queryType = e), (this.viewRange = t), (this.editRange = r), (this.limit = n);
        }
        return (
            (e.prototype.withViewRange = function (t) {
                return new e(this.queryType, t, this.editRange, this.limit);
            }),
            (e.prototype.withEditRange = function (t) {
                return new e(this.queryType, this.viewRange, t, this.limit);
            }),
            (e.prototype.withLimit = function (t) {
                return new e(
                    this.queryType,
                    this.viewRange,
                    this.editRange,
                    (function (e, t) {
                        if (e < 0) throw new Error(t + '" is negative: ' + e);
                        return e;
                    })(t, "limit")
                );
            }),
            (e.prototype.withQueryType = function (t) {
                return new e(t, this.viewRange, this.editRange, this.limit);
            }),
            (e.prototype.equals = function (t) {
                return !!(t && t instanceof e) && this.queryType === t.queryType && this.viewRange.equals(t.viewRange) && this.editRange.equals(t.editRange) && this.limit === t.limit;
            }),
            e
        );
    })();
    (xI.RangeQueryParameters = UI), (xI.DEFAULT_RANGE_QUERY = Object.freeze(new UI(xI.QueryTypes.VALUES, LI.DEFAULT_RANGE, LI.DEFAULT_RANGE, fc.MAX_SAFE_INTEGER)));
    var kI = {};
    function VI(e, t) {
        return e.withViewRange(t(e.viewRange));
    }
    function FI(e, t) {
        return e.withEditRange(t(e.editRange));
    }
    Object.defineProperty(kI, "__esModule", { value: !0 }), (kI.RangeQueryImpl = void 0);
    var GI = (function () {
        function e(e, t, r, n) {
            (this.context = e), (this.valueType = t), (this.parameters = r), (this.mode = n);
        }
        return (
            (e.createDefault = function (t) {
                return new e(t, jc.BytesImpl, xI.DEFAULT_RANGE_QUERY, VI);
            }),
            (e.prototype.withCurrentRange = function (t) {
                return new e(this.context, this.valueType, this.mode(this.parameters, t), this.mode);
            }),
            (e.prototype.selectFrom = function (e) {
                var t = this;
                return new Promise(function (r, n) {
                    if (e) {
                        var o = { topicPath: e, parameters: t.parameters };
                        t.context.send(o, function (e, o) {
                            qf.responseSuccess(e, o) ? r(o.createQueryResult(t.valueType, t.parameters.queryType.streamStructure)) : n(e);
                        });
                    } else n(new Error("Topic path is null"));
                });
            }),
            (e.prototype.forValues = function () {
                return new e(this.context, this.valueType, this.parameters.withQueryType(xI.QueryTypes.VALUES).withViewRange(LI.DEFAULT_RANGE), VI);
            }),
            (e.prototype.forEdits = function () {
                return new e(this.context, this.valueType, this.parameters.withQueryType(xI.QueryTypes.ALL_EDITS).withViewRange(LI.DEFAULT_RANGE), VI);
            }),
            (e.prototype.editRange = function () {
                if (this.parameters.queryType !== xI.QueryTypes.VALUES) throw new Error(".editRange() cannot be applied to this edit range query");
                return new e(this.context, this.valueType, this.parameters, FI);
            }),
            (e.prototype.allEdits = function () {
                if (this.parameters.queryType === xI.QueryTypes.VALUES) throw new Error(".allEdits() cannot be applied to this value range query");
                return new e(this.context, this.valueType, this.parameters.withQueryType(xI.QueryTypes.ALL_EDITS), FI);
            }),
            (e.prototype.latestEdits = function () {
                if (this.parameters.queryType === xI.QueryTypes.VALUES) throw new Error(".latestEdits() cannot be applied to this value range query");
                return new e(this.context, this.valueType, this.parameters.withQueryType(xI.QueryTypes.LATEST_EDITS), FI);
            }),
            (e.prototype.limit = function (t) {
                return new e(this.context, this.valueType, this.parameters.withLimit(t), this.mode);
            }),
            (e.prototype.as = function (t) {
                if (t && t.valueClass) return new e(this.context, t.valueClass, this.parameters, this.mode);
                if (t instanceof Function) return new e(this.context, t, this.parameters, this.mode);
                throw new Error("Invalid value type: " + t);
            }),
            (e.prototype.from = function (e) {
                return this.withCurrentRange(function (t) {
                    return t.from(e);
                });
            }),
            (e.prototype.fromStart = function () {
                return this.withCurrentRange(function (e) {
                    return e.fromStart();
                });
            }),
            (e.prototype.fromLast = function (e) {
                return this.withCurrentRange(function (t) {
                    return t.fromLast(e);
                });
            }),
            (e.prototype.fromLastMillis = function (e) {
                return this.withCurrentRange(function (t) {
                    return t.fromLastMillis(e);
                });
            }),
            (e.prototype.to = function (e) {
                return this.withCurrentRange(function (t) {
                    return t.to(e);
                });
            }),
            (e.prototype.toStart = function () {
                return this.withCurrentRange(function (e) {
                    return e.toStart();
                });
            }),
            (e.prototype.untilLast = function (e) {
                return this.withCurrentRange(function (t) {
                    return t.untilLast(e);
                });
            }),
            (e.prototype.untilLastMillis = function (e) {
                return this.withCurrentRange(function (t) {
                    return t.untilLastMillis(e);
                });
            }),
            (e.prototype.next = function (e) {
                return this.withCurrentRange(function (t) {
                    return t.next(e);
                });
            }),
            (e.prototype.nextMillis = function (e) {
                return this.withCurrentRange(function (t) {
                    return t.nextMillis(e);
                });
            }),
            (e.prototype.previous = function (e) {
                return this.withCurrentRange(function (t) {
                    return t.previous(e);
                });
            }),
            (e.prototype.previousMillis = function (e) {
                return this.withCurrentRange(function (t) {
                    return t.previousMillis(e);
                });
            }),
            (e.prototype.equals = function (t) {
                return !!(t && t instanceof e) && this.parameters.equals(t.parameters);
            }),
            (e.prototype.toString = function () {
                return this.parameters.toString();
            }),
            e
        );
    })();
    kI.RangeQueryImpl = GI;
    var HI = {};
    function YI(e) {
        var t = tu.readInt64(e),
            r = Rf.read(e, PI.Types);
        return new PI.Point(t, r);
    }
    function WI(e) {
        var t = YI(e),
            r = YI(e);
        return new LI.Range(t, r);
    }
    function QI(e, t) {
        tu.writeInt64(e, t.value), Rf.write(e, t.type);
    }
    function zI(e, t) {
        QI(e, t.anchor), QI(e, t.span);
    }
    Object.defineProperty(HI, "__esModule", { value: !0 }),
        (HI.write = HI.read = void 0),
        (HI.read = function (e) {
            var t = Rf.read(e, xI.QueryTypes),
                r = WI(e),
                n = WI(e),
                o = tu.readInt64(e);
            return new xI.RangeQueryParameters(t, r, n, o);
        }),
        (HI.write = function (e, t) {
            Rf.write(e, t.queryType), zI(e, t.viewRange), zI(e, t.editRange), tu.writeInt64(e, t.limit);
        });
    var KI = {};
    Object.defineProperty(KI, "__esModule", { value: !0 }), (KI.RangeQueryRequest = void 0);
    var JI = function (e, t) {
        (this.topicPath = e), (this.parameters = t);
    };
    KI.RangeQueryRequest = JI;
    var $I = {},
        XI =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty($I, "__esModule", { value: !0 }), ($I.RangeQueryRequestSerialiser = void 0);
    var ZI = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            XI(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readString(e),
                    r = HI.read(e);
                return new KI.RangeQueryRequest(t, r);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.topicPath), HI.write(e, t.parameters);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    $I.RangeQueryRequestSerialiser = new ZI();
    var eR = {};
    function tR(e) {
        return !!e;
    }
    function rR(e, t) {
        return e.originalEvent.sequence !== t.originalEvent.sequence ? e.originalEvent.sequence - t.originalEvent.sequence : e.sequence - t.sequence;
    }
    Object.defineProperty(eR, "__esModule", { value: !0 }), (eR.QueryResultImpl = void 0);
    var nR = (function () {
        function e(e, t, r, n) {
            (this.events = n), (this.selectedCount = e.toNumber()), (this.isComplete = e.equals(t)), (this.streamStructure = r);
        }
        return (
            (e.prototype.merge = function (t) {
                var r,
                    n,
                    o = this.events
                        .concat(t.events)
                        .sort(rR)
                        .map(
                            ((r = this.events.concat(t.events)),
                            (n = {}),
                            r.forEach(function (e) {
                                var t = e.originalEvent.sequence.toString(10);
                                (!n[t] || n[t].sequence < e.sequence) && (n[t] = e);
                            }),
                            function (e) {
                                var t = e.originalEvent.sequence.toString(10),
                                    r = n[t];
                                return r ? (e.isEditEvent ? (e.sequence.equals(r.sequence) ? (delete n[t], e) : null) : (delete n[t], r)) : null;
                            })
                        )
                        .filter(tR),
                    i = _a.fromNumber(o.length);
                return new e(i, i, xI.StreamStructures.VALUE_EVENT_STREAM, o);
            }),
            e
        );
    })();
    eR.QueryResultImpl = nR;
    var oR = {};
    Object.defineProperty(oR, "__esModule", { value: !0 }), (oR.RangeQueryResult = void 0);
    var iR = (function () {
        function e(e, t, r) {
            (this.valueDataType = e), (this.selectedCount = t), (this.events = r);
        }
        return (
            (e.prototype.createQueryResult = function (e, t) {
                var r = this;
                if (!this.valueDataType.canReadAs(e)) throw new Error("Time series topic has an incompatible event data type: " + this.valueDataType);
                return new eR.QueryResultImpl(
                    this.selectedCount,
                    _a.fromNumber(this.events.length),
                    t,
                    this.events.map(function (t) {
                        return t.withValue(r.valueDataType.readAs(e, t.value));
                    })
                );
            }),
            e
        );
    })();
    oR.RangeQueryResult = iR;
    var sR = {},
        aR =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(sR, "__esModule", { value: !0 }), (sR.RangeQueryResultSerialiserClass = void 0);
    var uR = function (e, t) {
        (this.sequence = e), (this.timestamp = t);
    };
    function cR(e, t, r) {
        var n = tu.readInt64(e).add(t.sequence),
            o = tu.readInt64(e).add(t.timestamp),
            i = tu.readBytes(e),
            s = r[i.toString()],
            a = s || i.toString("utf-8");
        return new Ip.EventMetadataImpl(n.toNumber(), o.toNumber(), a);
    }
    function lR(e, t, r) {
        var n = cR(e, t, r);
        return gp.EventImpl.create(n, n, tu.readBytes(e));
    }
    function pR(e, t, r) {
        var n = cR(e, t, r),
            o = cR(e, t, r);
        return gp.EventImpl.create(o, n, tu.readBytes(e));
    }
    function fR(e, t) {
        t[tu.readBytes(e).toString()] = tu.readString(e);
    }
    var hR = (function (e) {
        function t(t) {
            var r = e.call(this) || this;
            return (r.datatypes = t), r;
        }
        return (
            aR(t, e),
            (t.prototype.read = function (e) {
                var t = this.datatypes.get(tu.readString(e));
                if (null === t) throw new Error("Received unexpected data type");
                for (var r, n = tu.readInt64(e), o = new uR(_a.ZERO, _a.ZERO), i = {}, s = [], a = tu.readInt32(e), u = 0; u < a; ++u)
                    switch (tu.readByte(e)) {
                        case 0:
                            s.push(lR(e, o, i));
                            break;
                        case 1:
                            s.push(pR(e, o, i));
                            break;
                        case 2:
                            (r = e), (o = new uR(tu.readInt64(r), tu.readInt64(r)));
                            break;
                        case 3:
                            fR(e, i);
                            break;
                        default:
                            fR(e, i);
                    }
                return new oR.RangeQueryResult(t, n, s);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    sR.RangeQueryResultSerialiserClass = hR;
    var dR = {},
        yR =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(dR, "__esModule", { value: !0 }), (dR.TimeSeriesAppendRequestSerialiser = void 0);
    var vR = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            yR(t, e),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.path), tu.writeString(e, t.dataType.name()), tu.writeBytes(e, t.value);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    dR.TimeSeriesAppendRequestSerialiser = new vR();
    var SR = {},
        _R =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(SR, "__esModule", { value: !0 }), (SR.TimeSeriesEditRequestSerialiser = void 0);
    var ER = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            _R(t, e),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.path), tu.writeString(e, t.dataType.name()), tu.writeInt64(e, t.sequence), tu.writeBytes(e, t.value);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    SR.TimeSeriesEditRequestSerialiser = new ER();
    var wR = {},
        mR =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(wR, "__esModule", { value: !0 }), (wR.TimeSeriesTimestampAppendRequestSerialiser = void 0);
    var TR = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            mR(t, e),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.path), tu.writeString(e, t.dataType.name()), tu.writeBytes(e, t.value), tu.writeInt64(e, t.timestamp);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    wR.TimeSeriesTimestampAppendRequestSerialiser = new TR();
    var gR = {};
    Object.defineProperty(gR, "__esModule", { value: !0 }),
        (gR.TIME_SERIES_TIMESTAMP_APPEND = gR.TIME_SERIES_EDIT = gR.TIME_SERIES_APPEND = gR.rangeQueryFactory = void 0),
        (gR.rangeQueryFactory = function (e) {
            return { id: 84, request: $I.RangeQueryRequestSerialiser, response: new sR.RangeQueryResultSerialiserClass(e) };
        }),
        (gR.TIME_SERIES_APPEND = { id: 99, request: dR.TimeSeriesAppendRequestSerialiser, response: bp.EventMetadataImplSerialiser }),
        (gR.TIME_SERIES_EDIT = { id: 100, request: SR.TimeSeriesEditRequestSerialiser, response: bp.EventMetadataImplSerialiser }),
        (gR.TIME_SERIES_TIMESTAMP_APPEND = { id: 166, request: wR.TimeSeriesTimestampAppendRequestSerialiser, response: bp.EventMetadataImplSerialiser });
    var OR = {};
    Object.defineProperty(OR, "__esModule", { value: !0 }), (OR.TimeSeriesAppendRequest = void 0);
    var IR = function (e, t, r) {
        (this.path = e), (this.dataType = t), (this.value = r);
    };
    OR.TimeSeriesAppendRequest = IR;
    var RR = {};
    Object.defineProperty(RR, "__esModule", { value: !0 }), (RR.TimeSeriesTimestampAppendRequest = void 0);
    var bR = function (e, t, r, n) {
        (this.path = e), (this.dataType = t), (this.value = r), (this.timestamp = n);
    };
    RR.TimeSeriesTimestampAppendRequest = bR;
    var CR = {};
    Object.defineProperty(CR, "__esModule", { value: !0 }), (CR.TimeSeriesImpl = void 0);
    var PR = (function () {
        function e(e) {
            this.internal = e;
            var t = e.getServiceLocator();
            (this.defaultRangeQuery = kI.RangeQueryImpl.createDefault(t.obtain(gR.rangeQueryFactory(e.getContext().DataTypes)))),
                (this.appendService = t.obtain(gR.TIME_SERIES_APPEND)),
                (this.appendTimestampService = t.obtain(gR.TIME_SERIES_TIMESTAMP_APPEND)),
                (this.editService = t.obtain(gR.TIME_SERIES_EDIT));
        }
        return (
            (e.prototype.rangeQuery = function () {
                return this.defaultRangeQuery;
            }),
            (e.prototype.edit = function (e, t, r, n) {
                var o = this,
                    i = this.internal.getContext().DataTypes;
                return new Promise(function (s, a) {
                    var u;
                    try {
                        (u = n instanceof o.internal.getContext().AbstractDataType ? n : n ? i.getByClass(n) : i.getByValue(r)),
                            $c.requireNonNull(e, "Path"),
                            $c.requireNonNull(r, "Value"),
                            $c.requireNonNull(t, "Sequence"),
                            (u = $c.requireNonNull(u, "Data type"));
                    } catch (e) {
                        return void a(e);
                    }
                    o.editService.send({ path: e, sequence: t, dataType: u, value: u.writeValue(r) }, function (e, t) {
                        e ? a(e) : s(t);
                    });
                });
            }),
            (e.prototype.append = function (e, t, r, n) {
                var o = this,
                    i = this.internal.getContext().DataTypes;
                return new Promise(function (s, a) {
                    var u;
                    try {
                        (u = r instanceof o.internal.getContext().AbstractDataType ? r : r ? i.getByClass(r) : i.getByValue(t)), $c.requireNonNull(e, "Path"), $c.requireNonNull(t, "Value"), (u = $c.requireNonNull(u, "Data type"));
                    } catch (e) {
                        return void a(e);
                    }
                    var c = function (e, t) {
                        e ? a(e) : s(t);
                    };
                    void 0 === n
                        ? o.appendService.send(new OR.TimeSeriesAppendRequest(e, u, u.writeValue(t)), c)
                        : o.appendTimestampService.send(new RR.TimeSeriesTimestampAppendRequest(e, u, u.writeValue(t), "number" == typeof n ? _a.fromNumber(n) : n), c);
                });
            }),
            e
        );
    })();
    CR.TimeSeriesImpl = PR;
    var NR = {};
    Object.defineProperty(NR, "__esModule", { value: !0 }), (NR.RemoveTopic = void 0);
    var AR = function (e) {
        this.selector = e;
    };
    NR.RemoveTopic = AR;
    var MR = {};
    Object.defineProperty(MR, "__esModule", { value: !0 }),
        (MR.TopicAddResponse = MR.TopicAddResponseStatus = void 0),
        (function (e) {
            (e[(e.OK = 0)] = "OK"), (e[(e.EXISTS = 1)] = "EXISTS");
        })(MR.TopicAddResponseStatus || (MR.TopicAddResponseStatus = {}));
    var jR = function (e) {
        this.status = e;
    };
    MR.TopicAddResponse = jR;
    var LR = {};
    Object.defineProperty(LR, "__esModule", { value: !0 }), (LR.IntegerSerialiser = void 0);
    var DR = (function () {
        function e() {}
        return (
            (e.prototype.read = function (e) {
                return tu.readInt32(e);
            }),
            (e.prototype.write = function (e, t) {
                tu.writeInt32(e, t);
            }),
            e
        );
    })();
    LR.IntegerSerialiser = new DR();
    var xR = {};
    Object.defineProperty(xR, "__esModule", { value: !0 }), (xR.MissingTopicRequest = void 0);
    var BR = function (e, t, r, n) {
        (this.selector = e), (this.sessionProperties = t), (this.serverNames = r), (this.cid = n);
    };
    xR.MissingTopicRequest = BR;
    var qR = {},
        UR =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(qR, "__esModule", { value: !0 }), (qR.MissingTopicRequestSerialiser = void 0);
    var kR = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            UR(t, e),
            (t.prototype.read = function (e) {
                var t = Jv.TopicSelectorSerialiser.read(e),
                    r = tu.readDictionary(e, tu.readString),
                    n = tu.readCollection(e, tu.readString),
                    o = ru.CIDSerialiser.read(e);
                return new xR.MissingTopicRequest(t, r, n, o);
            }),
            (t.prototype.write = function (e, t) {
                Jv.TopicSelectorSerialiser.write(e, t.selector), tu.writeDictionary(e, t.sessionProperties, tu.writeString), tu.writeCollection(e, t.serverNames, tu.writeString), ru.CIDSerialiser.write(e, t.cid);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    qR.MissingTopicRequestSerialiser = new kR();
    var VR = {},
        FR =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(VR, "__esModule", { value: !0 }), (VR.RemoveTopicSerialiser = void 0);
    var GR = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            FR(t, e),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.selector.expression);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    VR.RemoveTopicSerialiser = new GR();
    var HR = {},
        YR =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(HR, "__esModule", { value: !0 }), (HR.TopicAddRequestSerialiser = void 0);
    var WR = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            YR(t, e),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.path), iy.write(e, t.specification);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    HR.TopicAddRequestSerialiser = new WR();
    var QR = {},
        zR =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(QR, "__esModule", { value: !0 }), (QR.TopicAddResponseSerialiser = void 0);
    var KR = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            zR(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readByte(e);
                return new MR.TopicAddResponse(t);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    QR.TopicAddResponseSerialiser = new KR();
    var JR = {};
    Object.defineProperty(JR, "__esModule", { value: !0 }),
        (JR.TOPIC_ADD = JR.TOPIC_REMOVAL = JR.MISSING_TOPIC = void 0),
        (JR.MISSING_TOPIC = { id: 50, request: qR.MissingTopicRequestSerialiser, response: Of.BooleanSerialiser }),
        (JR.TOPIC_REMOVAL = { id: 83, request: VR.RemoveTopicSerialiser, response: LR.IntegerSerialiser }),
        (JR.TOPIC_ADD = { id: 112, request: HR.TopicAddRequestSerialiser, response: QR.TopicAddResponseSerialiser });
    var $R = {};
    Object.defineProperty($R, "__esModule", { value: !0 }), ($R.TopicControlImpl = void 0);
    var XR = yu.create("Session.Topics"),
        ZR = (function () {
            function e(e) {
                this.internal = e;
                var t = e.getServiceLocator();
                (this.TOPIC_ADD_SERVICE = t.obtain(JR.TOPIC_ADD)), (this.TOPIC_REMOVAL = t.obtain(JR.TOPIC_REMOVAL));
                var r = e.getContext().TopicAddFailReasonEnum;
                (this.errorReasonIdToAddFailReason = {
                    103: r.PERMISSIONS_FAILURE,
                    110: r.CLUSTER_REPARTITION,
                    9004: r.EXISTS_MISMATCH,
                    9005: r.INVALID_NAME,
                    9006: r.INVALID_DETAILS,
                    9007: r.EXCEEDED_LICENSE_LIMIT,
                    9008: r.INCOMPATIBLE_PARENT,
                    9010: r.EXISTS_INCOMPATIBLE,
                    9011: r.UNEXPECTED_ERROR,
                }),
                    e.getServiceRegistry().add(
                        JR.MISSING_TOPIC,
                        pm.create(function (e, t, r) {
                            r.respond(!0), e.getConversationSet().respondIfPresent(t.cid, { request: t, callback: r });
                        })
                    );
            }
            return (
                (e.prototype.isSupportedTopicType = function (e) {
                    var t = this.internal.getContext().TopicTypeEnum;
                    return Object.keys(t).some(function (r) {
                        return t[r] === e;
                    });
                }),
                (e.prototype.add = function (e, t) {
                    var r = this,
                        n = this.internal.getContext().TopicSpecification;
                    return new Promise(function (o, i) {
                        if (e) {
                            if (r.internal.checkConnected(i)) {
                                XR.debug("Adding topic", e);
                                var s = r.isSupportedTopicType(t) ? new n(t) : t;
                                if (!(s instanceof n)) throw new Error("Invalid topic specification or type");
                                r.TOPIC_ADD_SERVICE.send({ path: e, specification: s }, function (t, n) {
                                    t ? i(r.errorReasonIdToAddFailReason[t.id]) : o({ topic: e, added: n.status === MR.TopicAddResponseStatus.OK });
                                });
                            }
                        } else i({ id: 0, reason: "Path cannot be empty or null" });
                    });
                }),
                (e.prototype.remove = function (e) {
                    for (var t = this, r = [], n = 1; n < arguments.length; n++) r[n - 1] = arguments[n];
                    var o = arguments,
                        i = this.internal.getContext().parseSelector;
                    return new Promise(function (r, n) {
                        if (t.internal.checkConnected(n)) {
                            XR.debug("Removing topics", e);
                            try {
                                t.TOPIC_REMOVAL.send(new NR.RemoveTopic(o.length > 1 ? i(Array.prototype.slice.call(o)) : i(e)), function (t, o) {
                                    t ? (XR.debug("Topic removal failed", e), n(t)) : (XR.debug("Topic removal complete", e), r({ removedCount: o }));
                                });
                            } catch (t) {
                                XR.debug("Error parsing selector", e), n(t);
                            }
                        }
                    });
                }),
                (e.prototype.addMissingTopicHandler = function (e, t) {
                    var r = this;
                    return new Promise(function (n, o) {
                        if (t) {
                            if (r.internal.checkConnected(o)) {
                                var i = {
                                        active: function (r) {
                                            XR.debug("Missing Topic Handler registered for " + e), t.onRegister(e, r), n();
                                        },
                                        respond: function (r) {
                                            var n = r.callback;
                                            XR.debug("Missing Topic Handler notification for " + r.request.sessionID + " using " + r.request.selector);
                                            try {
                                                var o = r.request;
                                                t.onMissingTopic({
                                                    path: o.selector.prefix,
                                                    selector: o.selector,
                                                    sessionID: _h.SessionId.fromString(o.sessionProperties.$SessionId),
                                                    sessionProperties: o.sessionProperties,
                                                    serverNames: o.serverNames,
                                                    proceed: function () {},
                                                    cancel: function () {},
                                                });
                                            } catch (r) {
                                                throw (t.onError(e, r), n.fail(bu.ErrorReason.CALLBACK_EXCEPTION, r && r.message), r);
                                            }
                                            return !1;
                                        },
                                        close: function (r) {
                                            XR.debug("Missing Topic Handler closed for " + e), r ? t.onError(e, r) : t.onClose(e);
                                        },
                                    },
                                    s = { definition: JR.MISSING_TOPIC, group: Ld.DEFAULT, path: e };
                                n(Lv.registerTopicHandler(r.internal, s, i));
                            }
                        } else o(new Error("Missing Topic handler is null or undefined"));
                    });
                }),
                e
            );
        })();
    $R.TopicControlImpl = ZR;
    var eb = {},
        tb =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(eb, "__esModule", { value: !0 }), (eb.TopicNotificationDeregistrationRequestSerialiser = void 0);
    var rb = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            tb(t, e),
            (t.prototype.write = function (e, t) {
                ru.CIDSerialiser.write(e, t.cid);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    eb.TopicNotificationDeregistrationRequestSerialiser = new rb();
    var nb = {};
    Object.defineProperty(nb, "__esModule", { value: !0 }),
        (nb.TopicNotificationType = void 0),
        (function (e) {
            (e[(e.ADDED = 0)] = "ADDED"), (e[(e.SELECTED = 1)] = "SELECTED"), (e[(e.REMOVED = 2)] = "REMOVED"), (e[(e.DESELECTED = 3)] = "DESELECTED");
        })(nb.TopicNotificationType || (nb.TopicNotificationType = {}));
    var ob = {};
    Object.defineProperty(ob, "__esModule", { value: !0 }), (ob.TopicNotificationDescendantEvent = void 0);
    var ib = function (e, t, r) {
        (this.cid = e), (this.path = t), (this.type = r), (this.isDescendantEvent = !0);
    };
    ob.TopicNotificationDescendantEvent = ib;
    var sb = {},
        ab =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(sb, "__esModule", { value: !0 }), (sb.TopicNotificationDescendantEventSerialiser = void 0);
    var ub = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            ab(t, e),
            (t.prototype.read = function (e) {
                var t = ru.CIDSerialiser.read(e),
                    r = tu.readString(e),
                    n = Rf.read(e, nb.TopicNotificationType);
                return new ob.TopicNotificationDescendantEvent(t, r, n);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    sb.TopicNotificationDescendantEventSerialiser = new ub();
    var cb = {},
        lb =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(cb, "__esModule", { value: !0 }), (cb.TopicNotificationDeselectionSerialiser = void 0);
    var pb = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            lb(t, e),
            (t.prototype.write = function (e, t) {
                ru.CIDSerialiser.write(e, t.cid), Jv.TopicSelectorSerialiser.write(e, t.selector);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    cb.TopicNotificationDeselectionSerialiser = new pb();
    var fb = {};
    Object.defineProperty(fb, "__esModule", { value: !0 }), (fb.TopicNotificationEvent = void 0);
    var hb = function (e, t, r, n) {
        (this.cid = e), (this.path = t), (this.type = r), (this.specification = n), (this.isDescendantEvent = !1);
    };
    fb.TopicNotificationEvent = hb;
    var db = {},
        yb =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(db, "__esModule", { value: !0 }), (db.TopicNotificationEventSerialiser = void 0);
    var vb = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            yb(t, e),
            (t.prototype.read = function (e) {
                var t = ru.CIDSerialiser.read(e),
                    r = tu.readString(e),
                    n = Rf.read(e, nb.TopicNotificationType),
                    o = iy.read(e);
                return new fb.TopicNotificationEvent(t, r, n, o);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    db.TopicNotificationEventSerialiser = new vb();
    var Sb = {},
        _b =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Sb, "__esModule", { value: !0 }), (Sb.TopicNotificationSelectionSerialiser = void 0);
    var Eb = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            _b(t, e),
            (t.prototype.write = function (e, t) {
                ru.CIDSerialiser.write(e, t.cid), Jv.TopicSelectorSerialiser.write(e, t.selector);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    Sb.TopicNotificationSelectionSerialiser = new Eb();
    var wb = {};
    Object.defineProperty(wb, "__esModule", { value: !0 }),
        (wb.TOPIC_NOTIFICATION_DESELECTION = wb.TOPIC_NOTIFICATION_SELECTION = wb.TOPIC_DESCENDANT_EVENTS = wb.TOPIC_NOTIFICATION_EVENTS = wb.TOPIC_NOTIFICATION_DEREGISTRATION = void 0),
        (wb.TOPIC_NOTIFICATION_DEREGISTRATION = { id: 91, request: eb.TopicNotificationDeregistrationRequestSerialiser, response: Md.NullSerialiser }),
        (wb.TOPIC_NOTIFICATION_EVENTS = { id: 92, request: db.TopicNotificationEventSerialiser, response: Md.NullSerialiser }),
        (wb.TOPIC_DESCENDANT_EVENTS = { id: 93, request: sb.TopicNotificationDescendantEventSerialiser, response: Md.NullSerialiser }),
        (wb.TOPIC_NOTIFICATION_SELECTION = { id: 94, request: Sb.TopicNotificationSelectionSerialiser, response: Md.NullSerialiser }),
        (wb.TOPIC_NOTIFICATION_DESELECTION = { id: 95, request: cb.TopicNotificationDeselectionSerialiser, response: Md.NullSerialiser });
    var mb = {},
        Tb =
            (this && this.__awaiter) ||
            function (e, t, r, n) {
                return new (r || (r = Promise))(function (o, i) {
                    function s(e) {
                        try {
                            u(n.next(e));
                        } catch (e) {
                            i(e);
                        }
                    }
                    function a(e) {
                        try {
                            u(n.throw(e));
                        } catch (e) {
                            i(e);
                        }
                    }
                    function u(e) {
                        var t;
                        e.done
                            ? o(e.value)
                            : ((t = e.value),
                              t instanceof r
                                  ? t
                                  : new r(function (e) {
                                        e(t);
                                    })).then(s, a);
                    }
                    u((n = n.apply(e, t || [])).next());
                });
            },
        gb =
            (this && this.__generator) ||
            function (e, t) {
                var r,
                    n,
                    o,
                    i,
                    s = {
                        label: 0,
                        sent: function () {
                            if (1 & o[0]) throw o[1];
                            return o[1];
                        },
                        trys: [],
                        ops: [],
                    };
                return (
                    (i = { next: a(0), throw: a(1), return: a(2) }),
                    "function" == typeof Symbol &&
                        (i[Symbol.iterator] = function () {
                            return this;
                        }),
                    i
                );
                function a(i) {
                    return function (a) {
                        return (function (i) {
                            if (r) throw new TypeError("Generator is already executing.");
                            for (; s; )
                                try {
                                    if (((r = 1), n && (o = 2 & i[0] ? n.return : i[0] ? n.throw || ((o = n.return) && o.call(n), 0) : n.next) && !(o = o.call(n, i[1])).done)) return o;
                                    switch (((n = 0), o && (i = [2 & i[0], o.value]), i[0])) {
                                        case 0:
                                        case 1:
                                            o = i;
                                            break;
                                        case 4:
                                            return s.label++, { value: i[1], done: !1 };
                                        case 5:
                                            s.label++, (n = i[1]), (i = [0]);
                                            continue;
                                        case 7:
                                            (i = s.ops.pop()), s.trys.pop();
                                            continue;
                                        default:
                                            if (!((o = s.trys), (o = o.length > 0 && o[o.length - 1]) || (6 !== i[0] && 2 !== i[0]))) {
                                                s = 0;
                                                continue;
                                            }
                                            if (3 === i[0] && (!o || (i[1] > o[0] && i[1] < o[3]))) {
                                                s.label = i[1];
                                                break;
                                            }
                                            if (6 === i[0] && s.label < o[1]) {
                                                (s.label = o[1]), (o = i);
                                                break;
                                            }
                                            if (o && s.label < o[2]) {
                                                (s.label = o[2]), s.ops.push(i);
                                                break;
                                            }
                                            o[2] && s.ops.pop(), s.trys.pop();
                                            continue;
                                    }
                                    i = t.call(e, s);
                                } catch (e) {
                                    (i = [6, e]), (n = 0);
                                } finally {
                                    r = o = 0;
                                }
                            if (5 & i[0]) throw i[1];
                            return { value: i[0] ? i[1] : void 0, done: !0 };
                        })([i, a]);
                    };
                }
            };
    Object.defineProperty(mb, "__esModule", { value: !0 }), (mb.TopicNotificationsImpl = void 0);
    var Ob = yu.create("Session.Notifications"),
        Ib = (function () {
            function e(e) {
                (this.TopicNotificationType = nb.TopicNotificationType), (this.internal = e);
                var t = e.getServiceLocator();
                (this.conversationSet = e.getConversationSet()),
                    (this.TOPIC_NOTIFICATION_SELECTION = t.obtain(wb.TOPIC_NOTIFICATION_SELECTION)),
                    (this.TOPIC_NOTIFICATION_DESELECTION = t.obtain(wb.TOPIC_NOTIFICATION_DESELECTION)),
                    (this.TOPIC_NOTIFICATION_DEREGISTRATION = t.obtain(wb.TOPIC_NOTIFICATION_DEREGISTRATION));
                var r = e.getServiceRegistry(),
                    n = pm.create(function (e, t, r) {
                        r.respond(), e.getConversationSet().respond(t.cid, t);
                    });
                r.add(wb.TOPIC_NOTIFICATION_EVENTS, n), r.add(wb.TOPIC_DESCENDANT_EVENTS, n);
            }
            return (
                (e.prototype.addListener = function (e) {
                    var t = this,
                        r = this.internal.getContext().parseSelector;
                    return new Promise(function (n, o) {
                        return Tb(t, void 0, void 0, function () {
                            var t,
                                i,
                                s = this;
                            return gb(this, function (a) {
                                switch (a.label) {
                                    case 0:
                                        return e
                                            ? this.internal.checkConnected(o)
                                                ? (Ob.debug("Adding Topic Notification Listener"),
                                                  (t = {
                                                      active: function (t, o) {
                                                          Ob.debug("Topic Notification Listener active"),
                                                              n({
                                                                  select: function (e) {
                                                                      for (var t = [], n = 1; n < arguments.length; n++) t[n - 1] = arguments[n];
                                                                      return new Promise(function (n, i) {
                                                                          if (e)
                                                                              try {
                                                                                  var a = t.length > 0 ? r([e].concat(t)) : r(e);
                                                                                  s.TOPIC_NOTIFICATION_SELECTION.send({ cid: o, selector: a }, function (e) {
                                                                                      e ? (s.conversationSet.discard(o, e), i(e)) : n();
                                                                                  });
                                                                              } catch (e) {
                                                                                  i(e);
                                                                              }
                                                                          else i(new Error("No topic selector provided"));
                                                                      });
                                                                  },
                                                                  deselect: function (e) {
                                                                      for (var t = [], n = 1; n < arguments.length; n++) t[n - 1] = arguments[n];
                                                                      return new Promise(function (n, i) {
                                                                          if (e)
                                                                              try {
                                                                                  var a = t.length > 0 ? r([e].concat(t)) : r(e);
                                                                                  s.TOPIC_NOTIFICATION_DESELECTION.send({ cid: o, selector: a }, function (e) {
                                                                                      e ? (s.conversationSet.discard(o, e), i(e)) : n();
                                                                                  });
                                                                              } catch (e) {
                                                                                  i(e);
                                                                              }
                                                                          else i(new Error("No topic selector provided"));
                                                                      });
                                                                  },
                                                                  close: function () {
                                                                      s.TOPIC_NOTIFICATION_DEREGISTRATION.send({ cid: o }, function (t, r) {
                                                                          t ? (s.conversationSet.discard(o, t), Ob.debug("Error with topic notification deregistration: ", t)) : (e.onClose(), s.conversationSet.respondIfPresent(o, r));
                                                                      });
                                                                  },
                                                              });
                                                      },
                                                      respond: function (t) {
                                                          return t.isDescendantEvent ? e.onDescendantNotification(t.path, t.type) : e.onTopicNotification(t.path, t.specification, t.type), !1;
                                                      },
                                                      close: function (t) {
                                                          Ob.debug("Topic Notification Listener closed"), t ? e.onError(t) : e.onClose();
                                                      },
                                                  }),
                                                  [
                                                      4,
                                                      this.conversationSet.newConversation(
                                                          Lv.responseHandler(this.internal, t, function (e, t) {
                                                              s.TOPIC_NOTIFICATION_DEREGISTRATION.send({ cid: e }, t);
                                                          })
                                                      ),
                                                  ])
                                                : [3, 2]
                                            : (o(new Error("Topic Notification Listener is null or undefined")), [2]);
                                    case 1:
                                        (i = a.sent()),
                                            Lv.registrationCallback(
                                                this.conversationSet,
                                                i,
                                                function () {},
                                                function () {}
                                            )(void 0),
                                            (a.label = 2);
                                    case 2:
                                        return [2];
                                }
                            });
                        });
                    });
                }),
                e
            );
        })();
    mb.TopicNotificationsImpl = Ib;
    var Rb = {},
        bb =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Rb, "__esModule", { value: !0 }), (Rb.PartialJSONImpl = Rb.NoValue = Rb.NoTopic = Rb.Locked = Rb.BinaryValue = Rb.Unconstrained = Rb.ConstraintType = void 0);
    var Cb = i({});
    !(function (e) {
        (e[(e.UNCONSTRAINED = 0)] = "UNCONSTRAINED"),
            (e[(e.CONJUNCTION = 1)] = "CONJUNCTION"),
            (e[(e.BINARY_VALUE = 2)] = "BINARY_VALUE"),
            (e[(e.NO_VALUE = 3)] = "NO_VALUE"),
            (e[(e.LOCKED = 4)] = "LOCKED"),
            (e[(e.NO_TOPIC = 5)] = "NO_TOPIC"),
            (e[(e.PARTIAL_JSON = 6)] = "PARTIAL_JSON");
    })(Rb.ConstraintType || (Rb.ConstraintType = {}));
    var Pb = (function () {
            function e() {}
            return (
                (e.prototype.and = function (e) {
                    if (!Array.isArray(e) && "CONJUNCTION" === e.getConstraintType()) return e.and(this);
                    var t = Array.isArray(e) ? e.concat(this) : [this, e];
                    return Bb(t), new Ab(t);
                }),
                e
            );
        })(),
        Nb = (function (e) {
            function t() {
                return (null !== e && e.apply(this, arguments)) || this;
            }
            return (
                bb(t, e),
                (t.prototype.getConstraintType = function () {
                    return "UNCONSTRAINED";
                }),
                t
            );
        })(Pb);
    Rb.Unconstrained = Nb;
    var Ab = (function () {
            function e(e) {
                Bb(e), (this.constraints = e);
            }
            return (
                (e.prototype.and = function (t) {
                    if (!Array.isArray(t) && "CONJUNCTION" === t.getConstraintType()) return t.and(this.constraints);
                    var r = this.constraints.concat(t);
                    return Bb(r), new e(r);
                }),
                (e.prototype.getConstraints = function () {
                    return this.constraints.slice();
                }),
                (e.prototype.getConstraintType = function () {
                    return "CONJUNCTION";
                }),
                e
            );
        })(),
        Mb = (function (e) {
            function t(t) {
                var r = e.call(this) || this;
                return (r.bytes = t), r;
            }
            return (
                bb(t, e),
                (t.prototype.getBytes = function () {
                    return this.bytes;
                }),
                (t.prototype.getConstraintType = function () {
                    return "BINARY_VALUE";
                }),
                t
            );
        })(Pb);
    Rb.BinaryValue = Mb;
    var jb = (function (e) {
        function t(t) {
            var r = e.call(this) || this;
            return (r.lock = t), (r.lockName = t.getName()), (r.sequence = t.getSequence()), r;
        }
        return (
            bb(t, e),
            (t.prototype.getLockName = function () {
                return this.lockName;
            }),
            (t.prototype.getSequence = function () {
                return this.sequence;
            }),
            (t.prototype.getConstraintType = function () {
                return "LOCKED";
            }),
            t
        );
    })(Pb);
    Rb.Locked = jb;
    var Lb = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            bb(t, e),
            (t.prototype.getConstraintType = function () {
                return "NO_TOPIC";
            }),
            t
        );
    })(Pb);
    Rb.NoTopic = Lb;
    var Db = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            bb(t, e),
            (t.prototype.getConstraintType = function () {
                return "NO_VALUE";
            }),
            t
        );
    })(Pb);
    Rb.NoValue = Db;
    var xb = (function (e) {
        function t(t, r) {
            void 0 === t && (t = {}), void 0 === r && (r = new Set());
            var n = e.call(this) || this;
            return (n.withValues = t), (n.withoutValues = r), n;
        }
        return (
            bb(t, e),
            (t.prototype.getWithValues = function () {
                return Object.assign({}, this.withValues);
            }),
            (t.prototype.getWithoutValues = function () {
                return new Set(this.withoutValues);
            }),
            (t.prototype.with = function (e, r, n) {
                var o = void 0 !== n ? n : Cb.DataTypes.getByValue(r);
                if (void 0 === o) throw new Error("Datatype invalid or could not be inferred");
                $c.requireNonNull(r, "value"), Hc.JSONPointer.parse($c.requireNonNull(e, "pointer"));
                var i = {};
                return (i[e.toString()] = o.toBytes(r)), new t(Object.assign({}, this.withValues, i), this.withoutValues);
            }),
            (t.prototype.without = function (e) {
                Hc.JSONPointer.parse($c.requireNonNull(e, "pointer"));
                var r = new Set(this.withoutValues);
                return r.add(e.toString()), new t(this.withValues, r);
            }),
            (t.prototype.getConstraintType = function () {
                return "PARTIAL_JSON";
            }),
            t
        );
    })(Pb);
    function Bb(e) {
        var t;
        e.forEach(function (e) {
            if (
                (function (e) {
                    switch (e.getConstraintType()) {
                        case "BINARY_VALUE":
                        case "NO_VALUE":
                        case "NO_TOPIC":
                        case "PARTIAL_JSON":
                            return !0;
                        default:
                            return !1;
                    }
                })(e)
            ) {
                if (void 0 !== t) throw new Error("Multiple value constraints found: " + t + " and " + e);
                t = e;
            }
        });
    }
    Rb.PartialJSONImpl = xb;
    var qb = {};
    Object.defineProperty(qb, "__esModule", { value: !0 }),
        (qb.write = void 0),
        (qb.write = function (e, t) {
            tu.writeBytes(e, t.getBytes().asBuffer());
        });
    var Ub = {};
    Object.defineProperty(Ub, "__esModule", { value: !0 }),
        (Ub.write = void 0),
        (Ub.write = function (e, t, r) {
            tu.writeCollection(e, t.getConstraints(), r);
        });
    var kb = {};
    Object.defineProperty(kb, "__esModule", { value: !0 }),
        (kb.write = void 0),
        (kb.write = function (e, t) {
            tu.writeString(e, t.getLockName()), tu.writeInt64(e, t.getSequence());
        });
    var Vb = {};
    Object.defineProperty(Vb, "__esModule", { value: !0 }), (Vb.write = void 0), (Vb.write = function () {});
    var Fb = {};
    Object.defineProperty(Fb, "__esModule", { value: !0 }), (Fb.write = void 0), (Fb.write = function () {});
    var Gb = {};
    Object.defineProperty(Gb, "__esModule", { value: !0 }),
        (Gb.write = void 0),
        (Gb.write = function (e, t) {
            tu.writeObject(e, t.getWithValues(), tu.writeString, function (e, t) {
                tu.writeBytes(e, t.asBuffer());
            }),
                tu.writeCollection(e, Array.from(t.getWithoutValues()), tu.writeString);
        });
    var Hb = {};
    Object.defineProperty(Hb, "__esModule", { value: !0 }), (Hb.write = void 0), (Hb.write = function () {});
    var Yb = {};
    Object.defineProperty(Yb, "__esModule", { value: !0 }), (Yb.write = void 0);
    var Wb = { UNCONSTRAINED: Hb, CONJUNCTION: Ub, BINARY_VALUE: qb, NO_VALUE: Fb, LOCKED: kb, NO_TOPIC: Vb, PARTIAL_JSON: Gb };
    Yb.write = function e(t, r) {
        if (void 0 === r.getConstraintType || void 0 === Rb.ConstraintType[r.getConstraintType()]) throw new Error("Unknown constraint type");
        tu.writeByte(t, Rb.ConstraintType[r.getConstraintType()]), Wb[r.getConstraintType()].write(t, r, e);
    };
    var Qb = {},
        zb =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(Qb, "__esModule", { value: !0 }), (Qb.AddAndSetTopicRequestSerialiser = void 0);
    var Kb = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            zb(t, e),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.path), iy.write(e, t.topicSpecification), tu.writeBytes(e, t.value), Yb.write(e, t.constraint);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    Qb.AddAndSetTopicRequestSerialiser = new Kb();
    var Jb,
        $b = {};
    Object.defineProperty($b, "__esModule", { value: !0 }),
        ($b.TopicUpdateNamespace = $b.TopicCreationResult = void 0),
        (function (e) {
            (e[(e.CREATED = 1)] = "CREATED"), (e[(e.EXISTS = 2)] = "EXISTS");
        })((Jb = $b.TopicCreationResult || ($b.TopicCreationResult = {}))),
        ($b.TopicUpdateNamespace = { TopicCreationResult: Jb });
    var Xb = {};
    Object.defineProperty(Xb, "__esModule", { value: !0 }), (Xb.AddTopicResult = void 0);
    var Zb = function (e) {
        this.result = e;
    };
    Xb.AddTopicResult = Zb;
    var eC,
        tC = {},
        rC =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(tC, "__esModule", { value: !0 }),
        (tC.AddTopicResultSerialiser = void 0),
        (function (e) {
            (e[(e.CREATED = 0)] = "CREATED"), (e[(e.EXISTS = 1)] = "EXISTS");
        })(eC || (eC = {}));
    var nC = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            rC(t, e),
            (t.prototype.read = function (e) {
                var t = Rf.read(e, eC) === eC.CREATED ? $b.TopicCreationResult.CREATED : $b.TopicCreationResult.EXISTS;
                return new Xb.AddTopicResult(t);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    tC.AddTopicResultSerialiser = new nC();
    var oC = {},
        iC =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(oC, "__esModule", { value: !0 }), (oC.ApplyJsonPatchRequestSerialiser = void 0);
    var sC = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            iC(t, e),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.path), tu.writeString(e, t.patch), Yb.write(e, t.constraint);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    oC.ApplyJsonPatchRequestSerialiser = new sC();
    var aC = {},
        uC =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(aC, "__esModule", { value: !0 }), (aC.CreateUpdateStreamAndSetRequestSerialiser = void 0);
    var cC = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            uC(t, e),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.path), Rf.write(e, t.topicType), tu.writeBytes(e, t.value), Yb.write(e, t.constraint);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    aC.CreateUpdateStreamAndSetRequestSerialiser = new cC();
    var lC = {},
        pC =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(lC, "__esModule", { value: !0 }), (lC.CreateUpdateStreamRequestSerialiser = void 0);
    var fC = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            pC(t, e),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.path), Rf.write(e, t.topicType), Yb.write(e, t.constraint);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    lC.CreateUpdateStreamRequestSerialiser = new fC();
    var hC = {};
    Object.defineProperty(hC, "__esModule", { value: !0 }), (hC.CreateUpdateStreamResponse = void 0);
    var dC = function (e, t, r) {
        (this.streamId = e), (this.retainsValue = t), (this.supportsConflation = r);
    };
    hC.CreateUpdateStreamResponse = dC;
    var yC = {};
    Object.defineProperty(yC, "__esModule", { value: !0 }), (yC.UpdateStreamId = void 0);
    var vC = function (e, t, r, n, o) {
        (this.topicId = e), (this.instanceId = t), (this.clustered = r), (this.partitionId = n), (this.generationId = o);
    };
    yC.UpdateStreamId = vC;
    var SC = {},
        _C =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(SC, "__esModule", { value: !0 }), (SC.UpdateStreamIdSerialiser = void 0);
    var EC = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            _C(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readInt32(e),
                    r = tu.readInt32(e),
                    n = tu.readInt32(e),
                    o = tu.readInt32(e),
                    i = 0 !== n;
                return new yC.UpdateStreamId(t, r, i, i ? n - 1 : 0, i ? o : 0);
            }),
            (t.prototype.write = function (e, t) {
                tu.writeInt32(e, t.topicId), tu.writeInt32(e, t.instanceId), t.clustered ? (tu.writeInt32(e, t.partitionId + 1), tu.writeInt32(e, t.generationId)) : (tu.writeInt32(e, 0), tu.writeInt32(e, 0));
            }),
            t
        );
    })(ou.AbstractSerialiser);
    SC.UpdateStreamIdSerialiser = new EC();
    var wC = {},
        mC =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(wC, "__esModule", { value: !0 }), (wC.CreateUpdateStreamResponseSerialiser = void 0);
    var TC = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            mC(t, e),
            (t.prototype.read = function (e) {
                var t = SC.UpdateStreamIdSerialiser.read(e),
                    r = tu.readByte(e),
                    n = (1 & r) > 0,
                    o = (2 & r) > 0;
                return new hC.CreateUpdateStreamResponse(t, n, o);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    wC.CreateUpdateStreamResponseSerialiser = new TC();
    var gC = {};
    Object.defineProperty(gC, "__esModule", { value: !0 }), (gC.JsonPatchResult = void 0);
    var OC = function (e) {
        this.failedOperation = e < 0 ? void 0 : e;
    };
    gC.JsonPatchResult = OC;
    var IC = {},
        RC =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(IC, "__esModule", { value: !0 }), (IC.JsonPatchResultSerialiser = void 0);
    var bC = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            RC(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readInt32(e);
                return new gC.JsonPatchResult(t);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    IC.JsonPatchResultSerialiser = new bC();
    var CC = {},
        PC =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(CC, "__esModule", { value: !0 }), (CC.SetTopicRequestSerialiser = void 0);
    var NC = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            PC(t, e),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.path), Rf.write(e, t.topicType), tu.writeBytes(e, t.value), Yb.write(e, t.constraint);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    CC.SetTopicRequestSerialiser = new NC();
    var AC = {},
        MC =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(AC, "__esModule", { value: !0 }), (AC.UpdateStreamAddTopicRequestSerialiser = void 0);
    var jC = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            MC(t, e),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.path), iy.write(e, t.topicSpecification), Yb.write(e, t.constraint);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    AC.UpdateStreamAddTopicRequestSerialiser = new jC();
    var LC = {};
    Object.defineProperty(LC, "__esModule", { value: !0 }), (LC.UpdateStreamAddTopicResponse = void 0);
    var DC = function (e, t, r, n) {
        (this.creationResult = e), (this.streamId = t), (this.retainsValue = r), (this.supportsConflation = n);
    };
    LC.UpdateStreamAddTopicResponse = DC;
    var xC = {},
        BC =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(xC, "__esModule", { value: !0 }), (xC.UpdateStreamAddTopicResponseSerialiser = void 0);
    var qC = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            BC(t, e),
            (t.prototype.read = function (e) {
                var t = tC.AddTopicResultSerialiser.read(e),
                    r = SC.UpdateStreamIdSerialiser.read(e),
                    n = tu.readByte(e),
                    o = (1 & n) > 0,
                    i = (2 & n) > 0;
                return new LC.UpdateStreamAddTopicResponse(t.result, r, o, i);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    xC.UpdateStreamAddTopicResponseSerialiser = new qC();
    var UC = {},
        kC =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(UC, "__esModule", { value: !0 }), (UC.UpdateStreamRequestSerialiser = void 0);
    var VC = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            kC(t, e),
            (t.prototype.write = function (e, t) {
                SC.UpdateStreamIdSerialiser.write(e, t.streamId), tu.writeBytes(e, t.update);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    UC.UpdateStreamRequestSerialiser = new VC();
    var FC = {};
    Object.defineProperty(FC, "__esModule", { value: !0 }),
        (FC.STREAM_ADD_AND_SET_TOPIC_SERVICE = FC.STREAM_ADD_TOPIC_SERVICE = FC.STREAM_APPLY_DELTA_SERVICE = FC.STREAM_SET_TOPIC_SERVICE = FC.CHECK_UPDATE_STREAM = FC.CREATE_UPDATE_STREAM_AND_SET = FC.CREATE_UPDATE_STREAM = FC.APPLY_JSON_PATCH = FC.ADD_AND_SET_TOPIC = FC.SET_TOPIC = void 0),
        (FC.SET_TOPIC = { id: 118, request: CC.SetTopicRequestSerialiser, response: Md.NullSerialiser }),
        (FC.ADD_AND_SET_TOPIC = { id: 122, request: Qb.AddAndSetTopicRequestSerialiser, response: tC.AddTopicResultSerialiser }),
        (FC.APPLY_JSON_PATCH = { id: 151, request: oC.ApplyJsonPatchRequestSerialiser, response: IC.JsonPatchResultSerialiser }),
        (FC.CREATE_UPDATE_STREAM = { id: 125, request: lC.CreateUpdateStreamRequestSerialiser, response: wC.CreateUpdateStreamResponseSerialiser }),
        (FC.CREATE_UPDATE_STREAM_AND_SET = { id: 126, request: aC.CreateUpdateStreamAndSetRequestSerialiser, response: wC.CreateUpdateStreamResponseSerialiser }),
        (FC.CHECK_UPDATE_STREAM = { id: 127, request: SC.UpdateStreamIdSerialiser, response: Md.NullSerialiser }),
        (FC.STREAM_SET_TOPIC_SERVICE = { id: 128, request: UC.UpdateStreamRequestSerialiser, response: Md.NullSerialiser }),
        (FC.STREAM_APPLY_DELTA_SERVICE = { id: 129, request: UC.UpdateStreamRequestSerialiser, response: Md.NullSerialiser }),
        (FC.STREAM_ADD_TOPIC_SERVICE = { id: 130, request: AC.UpdateStreamAddTopicRequestSerialiser, response: xC.UpdateStreamAddTopicResponseSerialiser }),
        (FC.STREAM_ADD_AND_SET_TOPIC_SERVICE = { id: 131, request: Qb.AddAndSetTopicRequestSerialiser, response: xC.UpdateStreamAddTopicResponseSerialiser });
    var GC = {};
    Object.defineProperty(GC, "__esModule", { value: !0 }), (GC.AddAndSetTopicRequest = void 0);
    var HC = function (e, t, r, n) {
        (this.path = e), (this.topicSpecification = t), (this.value = r), (this.constraint = n);
    };
    GC.AddAndSetTopicRequest = HC;
    var YC = {};
    Object.defineProperty(YC, "__esModule", { value: !0 }), (YC.UpdateStreamAddTopicRequest = void 0);
    var WC = function (e, t, r) {
        (this.path = e), (this.topicSpecification = t), (this.constraint = r);
    };
    YC.UpdateStreamAddTopicRequest = WC;
    var QC = {};
    Object.defineProperty(QC, "__esModule", { value: !0 }), (QC.UpdateStreamRequest = void 0);
    var zC = function (e, t) {
        (this.streamId = e), (this.update = t);
    };
    QC.UpdateStreamRequest = zC;
    var KC = {};
    Object.defineProperty(KC, "__esModule", { value: !0 }), (KC.InvalidSetStream = void 0);
    var JC = (function () {
        function e(e, t) {
            (this.value = t), (this.err = e);
        }
        return (
            (e.prototype.set = function () {
                return Promise.reject(this.err);
            }),
            (e.prototype.get = function () {
                return this.value;
            }),
            (e.prototype.validate = function () {
                return Promise.reject(this.err);
            }),
            (e.prototype.onSetComplete = function () {}),
            (e.prototype.onSetFailed = function () {}),
            (e.prototype.onValidateComplete = function () {}),
            (e.prototype.onValidateFailed = function () {}),
            e
        );
    })();
    KC.InvalidSetStream = JC;
    var $C = {};
    Object.defineProperty($C, "__esModule", { value: !0 }), ($C.SetStream = void 0);
    var XC = yu.create("diffusion.TopicUpdate"),
        ZC = (function () {
            function e(e, t, r, n, o) {
                (this.streamServices = e), (this.options = t), (this.stream = r), (this.streamId = n), (this.cache = o);
            }
            return (
                (e.prototype.set = function (e) {
                    var t = this;
                    return (
                        this.options.checkOperation(e),
                        new Promise(function (r, n) {
                            var o = t.options.toBuffer(t.cache, e);
                            (t.cache = e),
                                t.options.deltaService.send(new QC.UpdateStreamRequest(t.streamId, o), function (e) {
                                    e ? (XC.debug("Set update stream failed"), t.stream.onSetFailed(e), n(e)) : (t.stream.onSetComplete(t.streamId, t.options.retainsValue, t.options.supportsConflation), r());
                                });
                        })
                    );
                }),
                (e.prototype.get = function () {
                    return this.cache;
                }),
                (e.prototype.validate = function () {
                    var e = this;
                    return new Promise(function (t, r) {
                        e.streamServices.CHECK_UPDATE_STREAM.send(e.streamId, function (n) {
                            n
                                ? (XC.debug("Validate update stream failed"), e.stream.onValidateFailed(n), r(n))
                                : (e.stream.onValidateComplete(e.streamId, e.options.retainsValue, e.options.supportsConflation), t($b.TopicCreationResult.EXISTS));
                        });
                    });
                }),
                (e.prototype.onSetComplete = function () {}),
                (e.prototype.onSetFailed = function (e) {
                    this.stream.setDelegate(new KC.InvalidSetStream(e, this.cache));
                }),
                (e.prototype.onValidateComplete = function () {}),
                (e.prototype.onValidateFailed = function (e) {
                    this.stream.setDelegate(new KC.InvalidSetStream(e, this.cache));
                }),
                e
            );
        })();
    $C.SetStream = ZC;
    var eP = {};
    (function (e) {
        (function () {
            "use strict";
            Object.defineProperty(eP, "__esModule", { value: !0 }), (eP.PendingSetStream = void 0);
            var t = (function () {
                function t(e, t, r, n, o) {
                    (this.streamServices = e), (this.options = t), (this.stream = r), (this.pendingResult = n), (this.deferredResolvers = []), (this.value = o), (this.nextValue = o);
                }
                return (
                    (t.prototype.set = function (e) {
                        var t = this;
                        return (
                            this.options.checkOperation(e),
                            (this.nextValue = e),
                            new Promise(function (r, n) {
                                t.deferredResolvers.push({ value: e, resolve: r, reject: n });
                            })
                        );
                    }),
                    (t.prototype.get = function () {
                        return this.nextValue;
                    }),
                    (t.prototype.validate = function () {
                        var e = this;
                        return new Promise(function (t, r) {
                            e.pendingResult.then(
                                function (e) {
                                    return t($b.TopicCreationResult.EXISTS), e;
                                },
                                function (e) {
                                    r(e);
                                }
                            );
                        });
                    }),
                    (t.prototype.onSetComplete = function (e, t, r) {
                        var n = this;
                        (this.options.retainsValue = t),
                            (this.options.supportsConflation = r),
                            t ||
                                ((this.options.toBuffer = function (e, t) {
                                    return n.options.dataType.toBytes(t).asBuffer();
                                }),
                                (this.options.deltaService = this.streamServices.STREAM_SET_TOPIC_SERVICE)),
                            this.stream.setDelegate(new $C.SetStream(this.streamServices, this.options, this.stream, e, this.nextValue)),
                            t && r ? this.processPendingUpdatesRetainsValue(e) : this.processPendingUpdatesDoesntRetainValue(e);
                    }),
                    (t.prototype.processPendingUpdatesRetainsValue = function (t) {
                        var r = this,
                            n = this.options.dataType.toBytes(this.value).asBuffer(),
                            o = this.options.dataType.toBytes(this.nextValue).asBuffer();
                        if (0 !== e.compare(n, o)) {
                            var i = this.options.toBuffer(this.value, this.nextValue);
                            this.options.deltaService.send(new QC.UpdateStreamRequest(t, i), function (e) {
                                e
                                    ? r.deferredResolvers.forEach(function (t) {
                                          t.reject(e);
                                      })
                                    : r.deferredResolvers.forEach(function (e) {
                                          e.resolve();
                                      });
                            });
                        } else
                            this.deferredResolvers.forEach(function (e) {
                                e.resolve();
                            });
                    }),
                    (t.prototype.processPendingUpdatesDoesntRetainValue = function (e) {
                        var t = this,
                            r = this.value;
                        this.deferredResolvers.forEach(function (n) {
                            var o = t.options.toBuffer(r, n.value);
                            (r = n.value),
                                t.options.deltaService.send(new QC.UpdateStreamRequest(e, o), function (e) {
                                    e ? n.reject(e) : n.resolve();
                                });
                        });
                    }),
                    (t.prototype.onSetFailed = function (e) {
                        this.stream.setDelegate(new KC.InvalidSetStream(e, this.nextValue)),
                            this.deferredResolvers.forEach(function (t) {
                                t.reject(e);
                            });
                    }),
                    (t.prototype.onValidateComplete = function () {
                        throw new Error("No validate request has been sent");
                    }),
                    (t.prototype.onValidateFailed = function () {
                        throw new Error("No validate request has been sent");
                    }),
                    t
                );
            })();
            eP.PendingSetStream = t;
        }.call(this));
    }.call(this, u({}).Buffer));
    var tP = {};
    Object.defineProperty(tP, "__esModule", { value: !0 }), (tP.InvalidUnsetStream = void 0);
    var rP = (function () {
        function e(e) {
            this.err = e;
        }
        return (
            (e.prototype.set = function () {
                return Promise.reject(this.err);
            }),
            (e.prototype.get = function () {
                throw new Error("No value has been set");
            }),
            (e.prototype.validate = function () {
                return Promise.reject(this.err);
            }),
            (e.prototype.onSetComplete = function () {}),
            (e.prototype.onSetFailed = function () {}),
            (e.prototype.onValidateComplete = function () {}),
            (e.prototype.onValidateFailed = function () {}),
            e
        );
    })();
    tP.InvalidUnsetStream = rP;
    var nP = {};
    Object.defineProperty(nP, "__esModule", { value: !0 }), (nP.PendingValidateAndSetStream = void 0);
    var oP = (function () {
        function e(e, t, r, n, o, i) {
            (this.streamServices = e), (this.options = t), (this.stream = r), (this.pendingResult = n), (this.deferredResolvers = [o]), (this.nextValue = i);
        }
        return (
            (e.prototype.set = function (e) {
                var t = this;
                return (
                    this.options.checkOperation(e),
                    (this.nextValue = e),
                    new Promise(function (r, n) {
                        t.deferredResolvers.push({ value: e, resolve: r, reject: n });
                    })
                );
            }),
            (e.prototype.get = function () {
                return this.nextValue;
            }),
            (e.prototype.validate = function () {
                var e = this;
                return new Promise(function (t, r) {
                    e.pendingResult.then(
                        function (e) {
                            return t($b.TopicCreationResult.EXISTS), e;
                        },
                        function (e) {
                            r(e);
                        }
                    );
                });
            }),
            (e.prototype.onSetComplete = function () {
                throw new Error("No set request has been sent");
            }),
            (e.prototype.onSetFailed = function () {
                throw new Error("No set request has been sent");
            }),
            (e.prototype.onValidateComplete = function (e, t, r) {
                var n = this;
                (this.options.retainsValue = t),
                    (this.options.supportsConflation = r),
                    t ||
                        ((this.options.toBuffer = function (e, t) {
                            return n.options.dataType.toBytes(t).asBuffer();
                        }),
                        (this.options.deltaService = this.streamServices.STREAM_SET_TOPIC_SERVICE)),
                    this.stream.setDelegate(new $C.SetStream(this.streamServices, this.options, this.stream, e, this.nextValue)),
                    t && r ? this.processPendingUpdatesRetainsValue(e) : this.processPendingUpdatesDoesntRetainValue(e);
            }),
            (e.prototype.processPendingUpdatesRetainsValue = function (e) {
                var t = this,
                    r = this.options.dataType.toBytes(this.nextValue).asBuffer();
                this.streamServices.STREAM_SET_TOPIC_SERVICE.send(new QC.UpdateStreamRequest(e, r), function (e) {
                    e
                        ? t.deferredResolvers.forEach(function (t) {
                              t.reject(e);
                          })
                        : t.deferredResolvers.forEach(function (e) {
                              e.resolve();
                          });
                });
            }),
            (e.prototype.processPendingUpdatesDoesntRetainValue = function (e) {
                var t = this;
                this.deferredResolvers.forEach(function (r) {
                    var n = t.options.dataType.toBytes(r.value).asBuffer();
                    t.streamServices.STREAM_SET_TOPIC_SERVICE.send(new QC.UpdateStreamRequest(e, n), function (e) {
                        e ? r.reject(e) : r.resolve();
                    });
                });
            }),
            (e.prototype.onValidateFailed = function (e) {
                this.stream.setDelegate(new KC.InvalidSetStream(e, this.nextValue)),
                    this.deferredResolvers.forEach(function (t) {
                        t.reject(e);
                    });
            }),
            e
        );
    })();
    nP.PendingValidateAndSetStream = oP;
    var iP = {};
    Object.defineProperty(iP, "__esModule", { value: !0 }), (iP.ValidatedStream = void 0);
    var sP = yu.create("diffusion.TopicUpdate"),
        aP = (function () {
            function e(e, t, r, n) {
                (this.streamServices = e), (this.options = t), (this.stream = r), (this.streamId = n);
            }
            return (
                (e.prototype.set = function (e) {
                    var t = this;
                    return (
                        this.options.checkOperation(e),
                        new Promise(function (r, n) {
                            t.stream.setDelegate(new $C.SetStream(t.streamServices, t.options, t.stream, t.streamId, e));
                            var o = t.options.dataType.toBytes(e).asBuffer();
                            t.streamServices.STREAM_SET_TOPIC_SERVICE.send(new QC.UpdateStreamRequest(t.streamId, o), function (e) {
                                e ? (sP.debug("Stream set topic failed"), t.stream.onSetFailed(e), n(e)) : (t.stream.onSetComplete(t.streamId, t.options.retainsValue, t.options.supportsConflation), r());
                            });
                        })
                    );
                }),
                (e.prototype.get = function () {
                    throw new Error("The set method has not been called");
                }),
                (e.prototype.validate = function () {
                    var e = this;
                    return new Promise(function (t, r) {
                        e.streamServices.CHECK_UPDATE_STREAM.send(e.streamId, function (n) {
                            n
                                ? (sP.debug("Validate update stream failed"), e.stream.onValidateFailed(n), r(n))
                                : (e.stream.onValidateComplete(e.streamId, e.options.retainsValue, e.options.supportsConflation), t($b.TopicCreationResult.EXISTS));
                        });
                    });
                }),
                (e.prototype.onSetComplete = function () {
                    throw new Error("The set method has not been called");
                }),
                (e.prototype.onSetFailed = function () {
                    throw new Error("The set method has not been called");
                }),
                (e.prototype.onValidateComplete = function () {}),
                (e.prototype.onValidateFailed = function (e) {
                    this.stream.setDelegate(new tP.InvalidUnsetStream(e));
                }),
                e
            );
        })();
    iP.ValidatedStream = aP;
    var uP = {};
    Object.defineProperty(uP, "__esModule", { value: !0 }), (uP.PendingValidateStream = void 0);
    var cP = (function () {
        function e(e, t, r, n) {
            (this.streamServices = e), (this.options = t), (this.stream = r), (this.pendingResult = n);
        }
        return (
            (e.prototype.set = function (e) {
                var t = this;
                return (
                    this.options.checkOperation(e),
                    new Promise(function (r, n) {
                        t.stream.setDelegate(new nP.PendingValidateAndSetStream(t.streamServices, t.options, t.stream, t.pendingResult, { value: e, resolve: r, reject: n }, e));
                    })
                );
            }),
            (e.prototype.get = function () {
                throw new Error("The set method has not been called");
            }),
            (e.prototype.validate = function () {
                var e = this;
                return new Promise(function (t, r) {
                    e.pendingResult.then(
                        function (e) {
                            return t($b.TopicCreationResult.EXISTS), e;
                        },
                        function (e) {
                            r(e);
                        }
                    );
                });
            }),
            (e.prototype.onSetComplete = function () {
                throw new Error("No set request has been sent");
            }),
            (e.prototype.onSetFailed = function () {
                throw new Error("No set request has been sent");
            }),
            (e.prototype.onValidateComplete = function (e, t, r) {
                var n = this;
                (this.options.retainsValue = t),
                    (this.options.supportsConflation = r),
                    t ||
                        ((this.options.toBuffer = function (e, t) {
                            return n.options.dataType.toBytes(t).asBuffer();
                        }),
                        (this.options.deltaService = this.streamServices.STREAM_SET_TOPIC_SERVICE)),
                    this.stream.setDelegate(new iP.ValidatedStream(this.streamServices, this.options, this.stream, e));
            }),
            (e.prototype.onValidateFailed = function (e) {
                this.stream.setDelegate(new tP.InvalidUnsetStream(e));
            }),
            e
        );
    })();
    uP.PendingValidateStream = cP;
    var lP = {};
    Object.defineProperty(lP, "__esModule", { value: !0 }), (lP.NewAddTopicAndUpdateStream = void 0);
    var pP = yu.create("diffusion.TopicUpdate"),
        fP = (function () {
            function e(e, t, r, n, o, i) {
                (this.streamServices = e), (this.options = t), (this.stream = r), (this.path = n), (this.specification = o), (this.constraint = i);
            }
            return (
                (e.prototype.set = function (e) {
                    var t = this;
                    this.options.checkOperation(e);
                    var r = new Promise(function (r, n) {
                        var o = t.options.dataType.toBytes(e).asBuffer();
                        t.streamServices.STREAM_ADD_AND_SET_TOPIC_SERVICE.send(new GC.AddAndSetTopicRequest(t.path, t.specification, o, t.constraint), function (e, o) {
                            qf.responseSuccess(e, o) ? (t.stream.onSetComplete(o.streamId, o.retainsValue, o.supportsConflation), r(o.creationResult)) : (pP.debug("Stream add and set topic failed"), t.stream.onSetFailed(e), n(e));
                        });
                    });
                    return this.stream.setDelegate(new eP.PendingSetStream(this.streamServices, this.options, this.stream, r, e)), r;
                }),
                (e.prototype.get = function () {
                    throw new Error("The set method has not been called");
                }),
                (e.prototype.validate = function () {
                    var e = this,
                        t = new Promise(function (t, r) {
                            e.streamServices.STREAM_ADD_TOPIC_SERVICE.send(new YC.UpdateStreamAddTopicRequest(e.path, e.specification, e.constraint), function (n, o) {
                                qf.responseSuccess(n, o) ? (e.stream.onValidateComplete(o.streamId, o.retainsValue, o.supportsConflation), t(o.creationResult)) : (pP.debug("Stream add topic failed"), e.stream.onValidateFailed(n), r(n));
                            });
                        });
                    return this.stream.setDelegate(new uP.PendingValidateStream(this.streamServices, this.options, this.stream, t)), t;
                }),
                (e.prototype.onSetComplete = function () {
                    throw new Error("No set request has been sent");
                }),
                (e.prototype.onSetFailed = function () {
                    throw new Error("No set request has been sent");
                }),
                (e.prototype.onValidateComplete = function () {
                    throw new Error("No validate request has been sent");
                }),
                (e.prototype.onValidateFailed = function () {
                    throw new Error("No validate request has been sent");
                }),
                e
            );
        })();
    lP.NewAddTopicAndUpdateStream = fP;
    var hP = {};
    Object.defineProperty(hP, "__esModule", { value: !0 }), (hP.CreateUpdateStreamAndSetRequest = void 0);
    var dP = function (e, t, r, n) {
        (this.path = e), (this.topicType = t), (this.value = r), (this.constraint = n);
    };
    hP.CreateUpdateStreamAndSetRequest = dP;
    var yP = {};
    Object.defineProperty(yP, "__esModule", { value: !0 }), (yP.CreateUpdateStreamRequest = void 0);
    var vP = function (e, t, r) {
        (this.path = e), (this.topicType = t), (this.constraint = r);
    };
    yP.CreateUpdateStreamRequest = vP;
    var SP = {};
    Object.defineProperty(SP, "__esModule", { value: !0 }), (SP.NewUpdateStream = void 0);
    var _P = yu.create("diffusion.TopicUpdate"),
        EP = (function () {
            function e(e, t, r, n, o, i) {
                (this.streamServices = e), (this.options = t), (this.stream = r), (this.path = n), (this.topicType = o), (this.constraint = i);
            }
            return (
                (e.prototype.set = function (e) {
                    var t = this;
                    this.options.checkOperation(e);
                    var r = new Promise(function (r, n) {
                        var o = t.options.dataType.toBytes(e).asBuffer();
                        t.streamServices.CREATE_UPDATE_STREAM_AND_SET.send(new hP.CreateUpdateStreamAndSetRequest(t.path, t.topicType, o, t.constraint), function (e, o) {
                            qf.responseSuccess(e, o)
                                ? (t.stream.onSetComplete(o.streamId, o.retainsValue, o.supportsConflation), r($b.TopicCreationResult.EXISTS))
                                : (_P.debug("Failed to create update stream and set"), t.stream.onSetFailed(e), n(e));
                        });
                    });
                    return this.stream.setDelegate(new eP.PendingSetStream(this.streamServices, this.options, this.stream, r, e)), r;
                }),
                (e.prototype.get = function () {
                    throw new Error("The set method has not been called");
                }),
                (e.prototype.validate = function () {
                    var e = this,
                        t = new Promise(function (t, r) {
                            e.streamServices.CREATE_UPDATE_STREAM.send(new yP.CreateUpdateStreamRequest(e.path, e.topicType, e.constraint), function (n, o) {
                                qf.responseSuccess(n, o)
                                    ? (e.stream.onValidateComplete(o.streamId, o.retainsValue, o.supportsConflation), t($b.TopicCreationResult.EXISTS))
                                    : (_P.debug("Create update stream failed"), e.stream.onValidateFailed(n), r(n));
                            });
                        });
                    return this.stream.setDelegate(new uP.PendingValidateStream(this.streamServices, this.options, this.stream, t)), t;
                }),
                (e.prototype.onSetComplete = function () {
                    throw new Error("No set request has been sent");
                }),
                (e.prototype.onSetFailed = function () {
                    throw new Error("No set request has been sent");
                }),
                (e.prototype.onValidateComplete = function () {
                    throw new Error("No validate request has been sent");
                }),
                (e.prototype.onValidateFailed = function () {
                    throw new Error("No validate request has been sent");
                }),
                e
            );
        })();
    SP.NewUpdateStream = EP;
    var wP = {};
    Object.defineProperty(wP, "__esModule", { value: !0 }), (wP.UpdateStreamImpl = void 0);
    var mP = (function () {
        function e(e) {
            this.delegate = e(this);
        }
        return (
            (e.prototype.set = function (e) {
                return this.delegate.set(e);
            }),
            (e.prototype.get = function () {
                return this.delegate.get();
            }),
            (e.prototype.validate = function () {
                return this.delegate.validate();
            }),
            (e.prototype.onSetComplete = function (e, t, r) {
                this.delegate.onSetComplete(e, t, r);
            }),
            (e.prototype.onSetFailed = function (e) {
                this.delegate.onSetFailed(e);
            }),
            (e.prototype.onValidateComplete = function (e, t, r) {
                this.delegate.onValidateComplete(e, t, r);
            }),
            (e.prototype.onValidateFailed = function (e) {
                this.delegate.onValidateFailed(e);
            }),
            (e.prototype.setDelegate = function (e) {
                this.delegate = e;
            }),
            e
        );
    })();
    wP.UpdateStreamImpl = mP;
    var TP = {};
    Object.defineProperty(TP, "__esModule", { value: !0 }), (TP.UpdateStreamFactory = void 0);
    var gP = (function () {
        function e(e, t) {
            (this.context = t), (this.streamServices = e);
        }
        return (
            (e.prototype.getValueCheckOperation = function (e) {
                switch (e.name()) {
                    case "int64":
                    case "double":
                    case "string":
                        return function () {};
                    default:
                        return function (e) {
                            $c.requireNonNull(e, "null can only be passed for int64, double or string topics");
                        };
                }
            }),
            (e.prototype.getChangeService = function (e) {
                return void 0 === e ? this.streamServices.STREAM_SET_TOPIC_SERVICE : this.streamServices.STREAM_APPLY_DELTA_SERVICE;
            }),
            (e.prototype.getToBytesFunction = function (e, t) {
                return void 0 === t
                    ? function (t, r) {
                          return e.toBytes(r).asBuffer();
                      }
                    : function (e, r) {
                          var n = t.diff(e, r);
                          return n.$buffer.slice(n.$offset, n.$offset + n.$length);
                      };
            }),
            (e.prototype.binaryDeltaType = function (e) {
                try {
                    return e.binaryDeltaType();
                } catch (e) {
                    return;
                }
            }),
            (e.prototype.createUpdateStream = function (e, t, r) {
                var n = this,
                    o = this.binaryDeltaType(t),
                    i = { dataType: t, retainsValue: !0, supportsConflation: !0, checkOperation: this.getValueCheckOperation(t), toBuffer: this.getToBytesFunction(t, o), deltaService: this.getChangeService(o) },
                    s = ku.TopicTypeEnum[t.name().toUpperCase()];
                return new wP.UpdateStreamImpl(function (t) {
                    return new SP.NewUpdateStream(n.streamServices, i, t, e, s, r);
                });
            }),
            (e.prototype.createUpdateStreamThatAddsTopic = function (e, t, r, n) {
                var o = this;
                if (t.type === ku.TopicTypeEnum.TIME_SERIES) {
                    var i = t.properties.TIME_SERIES_EVENT_VALUE_TYPE;
                    if (null == i) throw new Error("The specification for time-series topics requires an event type.");
                    if (i.toLowerCase() !== r.name().toLowerCase()) throw new Error("The time-series event and value have different data types.");
                } else if (r !== this.context.DataTypes.getByValue(t.type)) throw new Error("The specification and value have different data types");
                var s = this.binaryDeltaType(r),
                    a = { dataType: r, retainsValue: !0, supportsConflation: !0, checkOperation: this.getValueCheckOperation(r), toBuffer: this.getToBytesFunction(r, s), deltaService: this.getChangeService(s) };
                return new wP.UpdateStreamImpl(function (r) {
                    return new lP.NewAddTopicAndUpdateStream(o.streamServices, a, r, e, t, n);
                });
            }),
            e
        );
    })();
    TP.UpdateStreamFactory = gP;
    var OP = {};
    Object.defineProperty(OP, "__esModule", { value: !0 }), (OP.UpdateStreamBuilderImpl = void 0);
    var IP = new Rb.Unconstrained(),
        RP = (function () {
            function e(e, t) {
                (this.topicSpecification = null), (this.topicConstraint = IP), (this.context = e), (this.updateStreamFactory = t);
            }
            return (
                (e.prototype.isSupportedTopicType = function (e) {
                    var t = this.context.TopicTypeEnum;
                    return Object.keys(t).some(function (r) {
                        return t[r] === e;
                    });
                }),
                (e.prototype.specification = function (e) {
                    return null == e ? (this.topicSpecification = null) : this.isSupportedTopicType(e) ? (this.topicSpecification = new this.context.TopicSpecification(e)) : (this.topicSpecification = e), this;
                }),
                (e.prototype.constraint = function (e) {
                    return (this.topicConstraint = null == e ? IP : e), this;
                }),
                (e.prototype.reset = function () {
                    return (this.topicSpecification = null), (this.topicConstraint = IP), this;
                }),
                (e.prototype.build = function (e, t) {
                    return (
                        $c.requireNonNull(e, "path"),
                        $c.requireNonNull(t, "dataType"),
                        null !== this.topicSpecification
                            ? this.updateStreamFactory.createUpdateStreamThatAddsTopic(e, this.topicSpecification, t, this.topicConstraint)
                            : this.updateStreamFactory.createUpdateStream(e, t, this.topicConstraint)
                    );
                }),
                e
            );
        })();
    OP.UpdateStreamBuilderImpl = RP;
    var bP = {};
    Object.defineProperty(bP, "__esModule", { value: !0 }), (bP.TopicUpdateImpl = void 0);
    var CP = yu.create("Session.TopicUpdate"),
        PP = new Rb.Unconstrained(),
        NP = (function () {
            function e(e) {
                this.internal = e;
                var t = e.getServiceLocator();
                (this.SET_TOPIC = t.obtain(FC.SET_TOPIC)), (this.ADD_AND_SET_TOPIC = t.obtain(FC.ADD_AND_SET_TOPIC)), (this.APPLY_JSON_PATCH = t.obtain(FC.APPLY_JSON_PATCH));
                var r = {
                    CREATE_UPDATE_STREAM: t.obtain(FC.CREATE_UPDATE_STREAM),
                    CREATE_UPDATE_STREAM_AND_SET: t.obtain(FC.CREATE_UPDATE_STREAM_AND_SET),
                    CHECK_UPDATE_STREAM: t.obtain(FC.CHECK_UPDATE_STREAM),
                    STREAM_SET_TOPIC_SERVICE: t.obtain(FC.STREAM_SET_TOPIC_SERVICE),
                    STREAM_APPLY_DELTA_SERVICE: t.obtain(FC.STREAM_APPLY_DELTA_SERVICE),
                    STREAM_ADD_TOPIC_SERVICE: t.obtain(FC.STREAM_ADD_TOPIC_SERVICE),
                    STREAM_ADD_AND_SET_TOPIC_SERVICE: t.obtain(FC.STREAM_ADD_AND_SET_TOPIC_SERVICE),
                };
                this.updateStreamFactory = new TP.UpdateStreamFactory(r, e.getContext());
            }
            return (
                (e.prototype.setTopic = function (e, t, r, n) {
                    var o = this;
                    return new Promise(function (i, s) {
                        var a = o.internal.getContext().TopicTypeEnum;
                        o.SET_TOPIC.send({ path: e, topicType: a[t.name().toUpperCase()], value: t.toBytes(r).asBuffer(), constraint: n }, function (e) {
                            e ? (CP.debug("Set topic failed"), s(e)) : i();
                        });
                    });
                }),
                (e.prototype.addAndSetTopic = function (e, t, r, n, o) {
                    var i = this,
                        s = this.internal.getContext().TopicTypeEnum;
                    if (t.type !== s[r.name().toUpperCase()] && t.type !== s.TIME_SERIES) throw new Error("The specification and value have different data types");
                    var a = r.toBytes(n).asBuffer();
                    return new Promise(function (r, n) {
                        i.ADD_AND_SET_TOPIC.send({ path: e, topicSpecification: t, value: a, constraint: o }, function (e, t) {
                            e ? (CP.debug("Add and set topic failed"), n(e)) : r(t.result);
                        });
                    });
                }),
                (e.prototype.set = function (e, t, r, n) {
                    var o = void 0 !== n && void 0 !== n.constraint ? n.constraint : PP;
                    return void 0 !== n && void 0 !== n.specification ? this.addAndSetTopic(e, n.specification, t, r, o) : this.setTopic(e, t, r, o);
                }),
                (e.prototype.createUpdateStream = function (e, t, r) {
                    var n = void 0 !== r && void 0 !== r.constraint ? r.constraint : PP;
                    return void 0 !== r && void 0 !== r.specification ? this.updateStreamFactory.createUpdateStreamThatAddsTopic(e, r.specification, t, n) : this.updateStreamFactory.createUpdateStream(e, t, n);
                }),
                (e.prototype.newUpdateStreamBuilder = function () {
                    return new OP.UpdateStreamBuilderImpl(this.internal.getContext(), this.updateStreamFactory);
                }),
                (e.prototype.applyJsonPatch = function (e, t, r) {
                    var n = this;
                    return new Promise(function (o, i) {
                        n.APPLY_JSON_PATCH.send({ path: e, patch: "string" == typeof t ? t : JSON.stringify(t), constraint: r || PP }, function (e, t) {
                            e ? (CP.debug("Apply JSON patch failed"), i(e)) : o(t);
                        });
                    });
                }),
                e
            );
        })();
    bP.TopicUpdateImpl = NP;
    var AP = {};
    Object.defineProperty(AP, "__esModule", { value: !0 }), (AP.CreateTopicViewResult = void 0);
    var MP = function (e, t) {
        (this.view = e), (this.errors = t);
    };
    AP.CreateTopicViewResult = MP;
    var jP = {};
    Object.defineProperty(jP, "__esModule", { value: !0 }),
        (jP.readTopicView = void 0),
        (jP.readTopicView = function (e) {
            return { name: tu.readString(e), specification: tu.readString(e), roles: new Set(tu.readCollection(e, tu.readString)) };
        });
    var LP = {},
        DP =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(LP, "__esModule", { value: !0 }), (LP.CreateTopicViewResultSerialiser = void 0);
    var xP = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            DP(t, e),
            (t.prototype.read = function (e) {
                if (0 === e.peek()) {
                    tu.readByte(e);
                    var t = jP.readTopicView(e);
                    return new AP.CreateTopicViewResult(t);
                }
                var r = b_.ErrorReportListSerialiser.read(e);
                return new AP.CreateTopicViewResult(void 0, r);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    LP.CreateTopicViewResultSerialiser = new xP();
    var BP = {};
    Object.defineProperty(BP, "__esModule", { value: !0 }), (BP.GetTopicViewResult = void 0);
    var qP = function (e) {
        this.result = e;
    };
    BP.GetTopicViewResult = qP;
    var UP = {},
        kP =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(UP, "__esModule", { value: !0 }), (UP.GetTopicViewResultSerialiser = void 0);
    var VP = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            kP(t, e),
            (t.prototype.read = function (e) {
                var t = 1 === tu.readByte(e) ? jP.readTopicView(e) : null;
                return new BP.GetTopicViewResult(t);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    UP.GetTopicViewResultSerialiser = new VP();
    var FP = {};
    Object.defineProperty(FP, "__esModule", { value: !0 }), (FP.ListTopicViewsResult = void 0);
    var GP = function (e) {
        this.result = e;
    };
    FP.ListTopicViewsResult = GP;
    var HP = {},
        YP =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(HP, "__esModule", { value: !0 }), (HP.ListTopicViewsResultSerialiser = void 0);
    var WP = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            YP(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readCollection(e, jP.readTopicView);
                return new FP.ListTopicViewsResult(t);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    HP.ListTopicViewsResultSerialiser = new WP();
    var QP = {},
        zP =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(QP, "__esModule", { value: !0 }), (QP.NamedTopicViewSpecificationSerialiser = void 0);
    var KP = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            zP(t, e),
            (t.prototype.write = function (e, t) {
                tu.writeString(e, t.name), tu.writeString(e, t.specification);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    QP.NamedTopicViewSpecificationSerialiser = new KP();
    var JP = {};
    Object.defineProperty(JP, "__esModule", { value: !0 }),
        (JP.GET_TOPIC_VIEW = JP.LIST_TOPIC_VIEWS = JP.REMOVE_TOPIC_VIEW = JP.CREATE_TOPIC_VIEW = void 0),
        (JP.CREATE_TOPIC_VIEW = { id: 138, request: QP.NamedTopicViewSpecificationSerialiser, response: LP.CreateTopicViewResultSerialiser }),
        (JP.REMOVE_TOPIC_VIEW = { id: 139, request: zv.StringSerialiser, response: Md.NullSerialiser }),
        (JP.LIST_TOPIC_VIEWS = { id: 141, request: Md.NullSerialiser, response: HP.ListTopicViewsResultSerialiser }),
        (JP.GET_TOPIC_VIEW = { id: 182, request: zv.StringSerialiser, response: UP.GetTopicViewResultSerialiser });
    var $P = {};
    Object.defineProperty($P, "__esModule", { value: !0 }), ($P.NamedTopicViewSpecification = void 0);
    var XP = function (e, t) {
        (this.name = e), (this.specification = t);
    };
    $P.NamedTopicViewSpecification = XP;
    var ZP = {};
    Object.defineProperty(ZP, "__esModule", { value: !0 }), (ZP.TopicViewsImpl = void 0);
    var eN = yu.create("TopicViews"),
        tN = (function () {
            function e(e) {
                this.internal = e;
                var t = e.getServiceLocator();
                (this.CREATE_TOPIC_VIEW = t.obtain(JP.CREATE_TOPIC_VIEW)),
                    (this.LIST_TOPIC_VIEWS = t.obtain(JP.LIST_TOPIC_VIEWS)),
                    (this.GET_TOPIC_VIEW = t.obtain(JP.GET_TOPIC_VIEW)),
                    (this.REMOVE_TOPIC_VIEW = t.obtain(JP.REMOVE_TOPIC_VIEW));
            }
            return (
                (e.prototype.createTopicView = function (e, t) {
                    var r = this;
                    return new Promise(function (n, o) {
                        if (0 === $c.requireNonNull(e, "name").length) throw new Error("Topic View name cannot be empty");
                        if (r.internal.checkConnected(o)) {
                            var i = new $P.NamedTopicViewSpecification(e, $c.requireNonNull(t, "specification"));
                            r.CREATE_TOPIC_VIEW.send(i, function (e, t) {
                                qf.responseSuccess(e, t) ? (t.errors ? (o(t.errors.errors), eN.debug("Create topic view failed")) : n(t.view)) : (o(e), eN.debug("Create topic view failed"));
                            });
                        }
                    });
                }),
                (e.prototype.listTopicViews = function () {
                    var e = this;
                    return new Promise(function (t, r) {
                        e.internal.checkConnected(r) &&
                            e.LIST_TOPIC_VIEWS.send(null, function (e, n) {
                                qf.responseSuccess(e, n) ? t(n.result) : (r(e), eN.debug("List topic views failed"));
                            });
                    });
                }),
                (e.prototype.getTopicView = function (e) {
                    var t = this;
                    return new Promise(function (r, n) {
                        t.internal.checkConnected(n) &&
                            t.GET_TOPIC_VIEW.send($c.requireNonNull(e, "name"), function (e, t) {
                                qf.responseSuccess(e, t) ? r(t.result) : (n(e), eN.debug("Get topic view failed"));
                            });
                    });
                }),
                (e.prototype.removeTopicView = function (e) {
                    var t = this;
                    return new Promise(function (r, n) {
                        t.internal.checkConnected(n) &&
                            t.REMOVE_TOPIC_VIEW.send($c.requireNonNull(e, "name"), function (e) {
                                e ? (n(e), eN.debug("Remove topic view failed")) : r();
                            });
                    });
                }),
                e
            );
        })();
    ZP.TopicViewsImpl = tN;
    var rN = {};
    Object.defineProperty(rN, "__esModule", { value: !0 }), (rN.TopicResultImpl = void 0);
    var nN = (function () {
        function e(e, t, r, n) {
            (this.mPath = e), (this.mType = t), (this.mValue = r), (this.mProperties = n);
        }
        return (
            (e.prototype.path = function () {
                return this.mPath;
            }),
            (e.prototype.type = function () {
                return this.mType;
            }),
            (e.prototype.value = function () {
                return this.mValue;
            }),
            (e.prototype.specification = function () {
                return new Bu.TopicSpecification(this.mType, this.mProperties);
            }),
            e
        );
    })();
    rN.TopicResultImpl = nN;
    var oN = {};
    Object.defineProperty(oN, "__esModule", { value: !0 }), (oN.FetchResultImpl = oN.TIME_SERIES_DATA_TYPE = void 0);
    var iN = s({});
    oN.TIME_SERIES_DATA_TYPE = iN.TimeSeriesEventDataType.create({
        name: function () {
            return "event data type";
        },
        readValue: function (e) {
            return e;
        },
        toBytes: function (e) {
            return e;
        },
    });
    var sN = (function () {
        function e(e, t, r) {
            (this.resultList = t.results.map(function (n) {
                var o;
                if (void 0 !== n.value)
                    if (n.type === r.TopicTypeEnum.TIME_SERIES) {
                        var i = oN.TIME_SERIES_DATA_TYPE.readAs(oN.TIME_SERIES_DATA_TYPE.valueClass, n.value);
                        o = e instanceof r.TimeSeriesEventDataType || e instanceof Ju.AnyDataTypeImpl ? i : e.readAs(e.valueClass, i.value);
                    } else {
                        o = r.DataTypes.get(n.type).readAs(e.valueClass, n.value);
                    }
                return new rN.TopicResultImpl(n.path, n.type, o, 0 === t.properties.length ? {} : t.properties[n.propertiesIndex]);
            })),
                (this.hasMoreFlag = t.hasMore);
        }
        return (
            (e.prototype.results = function () {
                return this.resultList;
            }),
            (e.prototype.hasMore = function () {
                return this.hasMoreFlag;
            }),
            (e.prototype.size = function () {
                return this.resultList.length;
            }),
            (e.prototype.isEmpty = function () {
                return 0 === this.resultList.length;
            }),
            e
        );
    })();
    oN.FetchResultImpl = sN;
    var aN = {};
    Object.defineProperty(aN, "__esModule", { value: !0 }), (aN.FetchQuery = void 0);
    var uN = function (e, t, r, n, o, i, s, a, u, c) {
        (this.selector = $c.requireNonNull(e, "FetchQuery.selector")),
            (this.range = t),
            (this.topicTypes = $c.requireNonNull(r, "FetchQuery.topicTypes")),
            (this.withValues = n),
            (this.withProperties = o),
            (this.limit = i),
            (this.maximumResultSize = s),
            (this.deepBranchDepth = a),
            (this.deepBranchLimit = u),
            (this.withUnpublishedDelayedTopics = c);
    };
    aN.FetchQuery = uN;
    var cN = {};
    Object.defineProperty(cN, "__esModule", { value: !0 }), (cN.FetchTopicResult = void 0);
    var lN = function (e, t, r, n) {
        (this.path = e), (this.type = t), (this.value = n), (this.propertiesIndex = r);
    };
    cN.FetchTopicResult = lN;
    var pN = {};
    Object.defineProperty(pN, "__esModule", { value: !0 }), (pN.FetchQueryResult = void 0);
    var fN = function (e, t, r) {
        (this.properties = e), (this.results = t), (this.hasMore = r);
    };
    pN.FetchQueryResult = fN;
    var hN = {},
        dN =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    function yN(e) {
        return tu.readDictionary(e, tu.readString);
    }
    function vN(e) {
        var t = tu.readString(e),
            r = Rf.read(e, ku.TopicTypeEnum),
            n = 0 !== tu.readByte(e) ? tu.readBytes(e) : void 0,
            o = tu.readInt32(e);
        return new cN.FetchTopicResult(t, r, o, n);
    }
    Object.defineProperty(hN, "__esModule", { value: !0 }), (hN.FetchQueryResultSerialiser = void 0);
    var SN = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            dN(t, e),
            (t.prototype.read = function (e) {
                var t = tu.readCollection(e, yN),
                    r = tu.readCollection(e, vN),
                    n = tu.readBoolean(e);
                return new pN.FetchQueryResult(t, r, n);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    hN.FetchQueryResultSerialiser = new SN();
    var _N = {};
    Object.defineProperty(_N, "__esModule", { value: !0 }),
        (_N.write = void 0),
        (_N.write = function (e, t) {
            var r = _a.UZERO,
                n = {
                    write: function (e) {
                        if (e >= 64) throw new Error("Cannot encode enum in long, " + e + " >= 64'");
                        r = r.or(_a.ONE.shiftLeft(e));
                    },
                };
            t.forEach(function (e) {
                Rf.write(n, e);
            }),
                tu.writeInt64(e, r);
        });
    var EN = {},
        wN =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    function mN(e, t) {
        void 0 === t ? tu.writeByte(e, 0) : (tu.writeByte(e, 1), tu.writeString(e, t.path), tu.writeBoolean(e, t.includesPath));
    }
    Object.defineProperty(EN, "__esModule", { value: !0 }), (EN.FetchQuerySerialiser = void 0);
    var TN = (function (e) {
        function t() {
            return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
            wN(t, e),
            (t.prototype.write = function (e, t) {
                Jv.TopicSelectorSerialiser.write(e, t.selector),
                    (function (e, t) {
                        mN(e, t.from), mN(e, t.to);
                    })(e, t.range),
                    _N.write(e, t.topicTypes),
                    tu.writeBoolean(e, t.withValues),
                    tu.writeBoolean(e, t.withProperties),
                    tu.writeInt32(e, t.limit),
                    tu.writeInt32(e, t.maximumResultSize),
                    tu.writeInt32(e, t.deepBranchDepth),
                    tu.writeInt32(e, t.deepBranchLimit),
                    tu.writeBoolean(e, t.withUnpublishedDelayedTopics);
            }),
            t
        );
    })(ou.AbstractSerialiser);
    EN.FetchQuerySerialiser = new TN();
    var gN = {};
    Object.defineProperty(gN, "__esModule", { value: !0 }),
        (gN.FETCH_QUERY = gN.UNSUBSCRIBE = gN.SUBSCRIBE = void 0),
        (gN.SUBSCRIBE = { id: 3, request: Jv.TopicSelectorSerialiser, response: Md.NullSerialiser }),
        (gN.UNSUBSCRIBE = { id: 4, request: Jv.TopicSelectorSerialiser, response: Md.NullSerialiser }),
        (gN.FETCH_QUERY = { id: 117, request: EN.FetchQuerySerialiser, response: hN.FetchQueryResultSerialiser });
    var ON = {},
        IN =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(ON, "__esModule", { value: !0 }), (ON.FetchRequestImpl = void 0);
    var RN = yu.create("Fetch Request"),
        bN = function (e, t) {
            (this.path = e), (this.includesPath = t);
        },
        CN = (function () {
            function e(e, t) {
                (this.from = e), (this.to = t);
            }
            return (
                (e.prototype.isUnbounded = function () {
                    return void 0 === this.from && void 0 === this.to;
                }),
                e
            );
        })();
    function PN(e, t, r) {
        if (t === ku.TopicTypeEnum.TIME_SERIES) return oN.TIME_SERIES_DATA_TYPE.canReadAs(r);
        var n = e.getByValue(t);
        return null !== n && void 0 !== r.valueClass && n.canReadAs(r.valueClass);
    }
    function NN(e, t) {
        if (!Number.isInteger(e) || e < 0) throw new Error("Invalid argument " + t + ": " + e);
        return e;
    }
    var AN = (function (e) {
        function t(t, r) {
            var n = e.call(this) || this,
                o = {
                    range: new CN(),
                    topicTypes: Fu.FetchRequest.getAllTypes(),
                    dataType: void 0,
                    withProperties: !1,
                    limit: fc.MAX_INT32,
                    maximumResultSize: t.getOptions().maxMessageSize,
                    deepBranchDepth: fc.MAX_INT32,
                    deepBranchLimit: fc.MAX_INT32,
                    withUnpublishedDelayedTopics: !1,
                };
            return (n.internal = t), (n.options = Object.assign(o, r)), n;
        }
        return (
            IN(t, e),
            (t.prototype.copyOptions = function () {
                return {
                    range: new CN(this.options.range.from, this.options.range.to),
                    topicTypes: new Set(this.options.topicTypes),
                    dataType: this.options.dataType,
                    withProperties: this.options.withProperties,
                    limit: this.options.limit,
                    maximumResultSize: this.options.maximumResultSize,
                    deepBranchDepth: this.options.deepBranchDepth,
                    deepBranchLimit: this.options.deepBranchLimit,
                    withUnpublishedDelayedTopics: this.options.withUnpublishedDelayedTopics,
                };
            }),
            (t.prototype.from = function (e) {
                var r = new bN(e, !0);
                return new t(this.internal, Object.assign(this.copyOptions(), { range: new CN(r, this.options.range.to) }));
            }),
            (t.prototype.after = function (e) {
                var r = new bN(e, !1);
                return new t(this.internal, Object.assign(this.copyOptions(), { range: new CN(r, this.options.range.to) }));
            }),
            (t.prototype.to = function (e) {
                var r = new bN(e, !0);
                return new t(this.internal, Object.assign(this.copyOptions(), { range: new CN(this.options.range.from, r) }));
            }),
            (t.prototype.before = function (e) {
                var r = new bN(e, !1);
                return new t(this.internal, Object.assign(this.copyOptions(), { range: new CN(this.options.range.from, r) }));
            }),
            (t.prototype.topicTypes = function (e) {
                var r = this;
                if ((Array.isArray(e) && (e = new Set(e)), 0 === e.size)) throw new Error("No types specified");
                var n = Fu.FetchRequest.getAllTypes(),
                    o = this.internal.getContext();
                return (
                    e.forEach(function (e) {
                        if (!n.has(e)) throw new Error("Invalid topic type " + e.id);
                        if (void 0 !== r.options.dataType && !PN(o.DataTypes, e, r.options.dataType) && e !== o.TopicTypeEnum.TIME_SERIES) throw new Error("Topic type " + e.id + " cannot be read as " + r.options.dataType);
                    }),
                    new t(this.internal, Object.assign(this.copyOptions(), { topicTypes: e }))
                );
            }),
            (t.prototype.withValues = function (e) {
                var r,
                    n = this;
                if (void 0 === e || e instanceof Ju.AnyDataTypeImpl) r = this.options.topicTypes;
                else if (
                    ((r = new Set(this.options.topicTypes)),
                    this.options.topicTypes.forEach(function (t) {
                        PN(n.internal.getContext().DataTypes, t, e) || r.delete(t);
                    }),
                    0 === r.size)
                )
                    throw new Error("No selected topic types can be read as " + e);
                return new t(this.internal, Object.assign(this.copyOptions(), { topicTypes: r, dataType: e }));
            }),
            (t.prototype.withProperties = function () {
                return new t(this.internal, Object.assign(this.copyOptions(), { withProperties: !0 }));
            }),
            (t.prototype.first = function (e) {
                return new t(this.internal, Object.assign(this.copyOptions(), { limit: NN(e, "count") }));
            }),
            (t.prototype.last = function (e) {
                return new t(this.internal, Object.assign(this.copyOptions(), { limit: 0 - NN(e, "count") }));
            }),
            (t.prototype.maximumResultSize = function (e) {
                return new t(this.internal, Object.assign(this.copyOptions(), { maximumResultSize: Math.min(NN(e, "maximumSize"), this.internal.getOptions().maxMessageSize) }));
            }),
            (t.prototype.limitDeepBranches = function (e, r) {
                return new t(this.internal, Object.assign(this.copyOptions(), { deepBranchDepth: NN(e, "deepBranchDepth"), deepBranchLimit: NN(r, "deepBranchLimit") }));
            }),
            (t.prototype.withUnpublishedDelayedTopics = function () {
                return new t(this.internal, Object.assign(this.copyOptions(), { withUnpublishedDelayedTopics: !0 }));
            }),
            (t.prototype.fetch = function (e) {
                for (var t = this, r = [], n = 1; n < arguments.length; n++) r[n - 1] = arguments[n];
                var o = this.internal.getContext().parseSelector,
                    i = this.internal.getServiceLocator(),
                    s = i.obtain(gN.FETCH_QUERY),
                    a = o(arguments.length > 1 ? Array.prototype.slice.call(arguments) : e),
                    u = new aN.FetchQuery(
                        a,
                        this.options.range,
                        this.options.topicTypes,
                        void 0 !== this.options.dataType,
                        this.options.withProperties,
                        this.options.limit,
                        this.options.maximumResultSize,
                        this.options.deepBranchDepth,
                        this.options.deepBranchLimit,
                        this.options.withUnpublishedDelayedTopics
                    );
                return new Promise(function (e, r) {
                    s.send(u, function (n, o) {
                        if (qf.responseSuccess(n, o)) {
                            var i = new oN.FetchResultImpl(t.options.dataType, o, t.internal.getContext());
                            e(i);
                        } else RN.debug("Fetch query failed"), r(n);
                    });
                });
            }),
            t
        );
    })(Fu.FetchRequest);
    ON.FetchRequestImpl = AN;
    var MN = {},
        jN =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(MN, "__esModule", { value: !0 }), (MN.ValueStreamImpl = void 0);
    var LN = (function (e) {
        function t(t, r) {
            var n = e.call(this, t) || this;
            return (n.selector = r), n;
        }
        return jN(t, e), t;
    })(wf.StreamImpl);
    MN.ValueStreamImpl = LN;
    var DN = {},
        xN =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(DN, "__esModule", { value: !0 }), (DN.ValueStreamTimeseriesToPrimitiveAdapter = DN.ValueStreamTimeseriesAdapter = DN.ValueStreamAdapter = void 0);
    var BN = i({}),
        qN = (function () {
            function e(e, t, r) {
                (this.stream = e), (this.datatype = t), (this.sourceDatatype = this.getSourceDataType(r));
            }
            return (
                (e.prototype.selects = function (e) {
                    return this.stream.selects(e);
                }),
                (e.prototype.onOpen = function () {
                    return this.stream.onOpen();
                }),
                (e.prototype.onDelta = function (e, t, r, n, o, i, s) {
                    return this.stream.onDelta(e, t, r, n, o, null !== r ? this.readAsDataType(r, i) : null, this.readAsDataType(n, s));
                }),
                (e.prototype.onValue = function (e, t, r, n, o, i) {
                    return this.stream.onValue(e, t, r, n, null !== r ? this.readAsDataType(r, o) : null, this.readAsDataType(n, i));
                }),
                (e.prototype.onSubscription = function (e, t) {
                    return this.stream.onSubscription(e, t);
                }),
                (e.prototype.onUnsubscription = function (e, t, r) {
                    return this.stream.onUnsubscription(e, t, r);
                }),
                (e.prototype.onSubscriptionError = function (e) {
                    return this.stream.onSubscriptionError(e);
                }),
                e
            );
        })(),
        UN = (function (e) {
            function t(t, r, n) {
                return e.call(this, t, r, n) || this;
            }
            return (
                xN(t, e),
                (t.prototype.getSourceDataType = function (e) {
                    return BN.DataTypes.getByValue(e.type);
                }),
                (t.prototype.readAsDataType = function (e) {
                    return this.sourceDatatype.readAs(this.datatype.valueClass, e);
                }),
                t
            );
        })(qN);
    DN.ValueStreamAdapter = UN;
    var kN = (function (e) {
        function t(t, r, n) {
            var o = e.call(this, t, r, n) || this;
            return (o.sourceValuetype = BN.DataTypes.getByName(o.sourceDatatype.valueTypeName)), (o.destValuetype = BN.DataTypes.getByName(o.datatype.valueTypeName)), o;
        }
        return (
            xN(t, e),
            (t.prototype.getSourceDataType = function (e) {
                return BN.DataTypes.timeseries(BN.DataTypes.getByName(e.properties.TIME_SERIES_EVENT_VALUE_TYPE));
            }),
            (t.prototype.readAsDataType = function (e, t) {
                var r = this.sourceValuetype.readAs(this.destValuetype.valueClass, this.sourceValuetype.writeValue(t.value));
                return new gp.EventImpl(t.metadata, t.originalEvent, r);
            }),
            t
        );
    })(qN);
    DN.ValueStreamTimeseriesAdapter = kN;
    var VN = (function (e) {
        function t(t, r, n) {
            var o = e.call(this, t, r, n) || this;
            return (o.sourceValuetype = BN.DataTypes.getByName(o.sourceDatatype.valueTypeName)), o;
        }
        return (
            xN(t, e),
            (t.prototype.getSourceDataType = function (e) {
                return BN.DataTypes.timeseries(BN.DataTypes.getByName(e.properties.TIME_SERIES_EVENT_VALUE_TYPE));
            }),
            (t.prototype.readAsDataType = function (e, t) {
                return this.sourceValuetype.readAs(this.datatype.valueClass, this.sourceValuetype.writeValue(t.value));
            }),
            t
        );
    })(qN);
    DN.ValueStreamTimeseriesToPrimitiveAdapter = VN;
    var FN = {};
    Object.defineProperty(FN, "__esModule", { value: !0 }), (FN.create = void 0);
    var GN = i({}),
        HN = s({}),
        YN = (function () {
            function e(e, t, r, n, o, i) {
                var s = this;
                this.pending = !0;
                var a = gf.Emitter.create();
                (this.subscription = o(a, t)),
                    (this.emitter = a.emitter(this.subscription)),
                    this.subscription.on("close", function () {
                        e.remove(s);
                    }),
                    (this.adapterFactory = i),
                    (this.datatype = r),
                    (this.registry = e);
                var u = this.subscription.on.bind(this.subscription);
                this.subscription.on = function (o, i) {
                    var a = u(o, i);
                    return s.pending && (n ? e.addFallback(s, r) : e.add(t, s, r), (s.pending = !1)), a;
                };
            }
            return (
                (e.prototype.selects = function (e) {
                    if (e) {
                        if (e.type === ku.TopicTypeEnum.TIME_SERIES) {
                            var t = GN.DataTypes.get(e.properties.TIME_SERIES_EVENT_VALUE_TYPE),
                                r = this.datatype instanceof HN.TimeSeriesEventDataType ? GN.DataTypes.get(this.datatype.valueTypeName) : this.datatype;
                            return !!t && t.canReadAs(r.valueClass);
                        }
                        return GN.DataTypes.getByValue(e.type).canReadAs(this.datatype.valueClass);
                    }
                    return !1;
                }),
                (e.prototype.adapter = function (e) {
                    return (e.type === ku.TopicTypeEnum.TIME_SERIES && this.datatype.valueTypeName === e.properties.TIME_SERIES_EVENT_VALUE_TYPE) ||
                        e.type === ku.TopicTypeEnum[this.datatype.name().toUpperCase()] ||
                        "any" === this.datatype.name()
                        ? this
                        : this.adapterFactory(this, this.datatype, e);
                }),
                (e.prototype.onOpen = function () {
                    this.emitter.emit("open", this.subscription);
                }),
                (e.prototype.onDelta = function (e, t, r, n, o, i, s) {
                    this.emitter.emit("value", e, t, s, i);
                }),
                (e.prototype.onValue = function (e, t, r, n, o, i) {
                    this.emitter.emit("value", e, t, i, o);
                }),
                (e.prototype.onSubscription = function (e, t) {
                    this.emitter.emit("subscribe", e, t);
                }),
                (e.prototype.onUnsubscription = function (e, t, r) {
                    this.emitter.emit("unsubscribe", e, t, r);
                }),
                (e.prototype.onSubscriptionError = function (e) {
                    this.emitter.error(e), this.registry.remove(this);
                }),
                e
            );
        })(),
        WN = new Fp.SelectorSet([]);
    FN.create = function (e, t, r, n) {
        return (
            void 0 === n && (n = WN),
            new YN(
                e,
                n,
                t,
                r,
                function (e, t) {
                    return new MN.ValueStreamImpl(e, t);
                },
                function (e, r, n) {
                    return t instanceof HN.TimeSeriesEventDataType
                        ? new DN.ValueStreamTimeseriesAdapter(e, r, n)
                        : n.type === ku.TopicTypeEnum.TIME_SERIES
                        ? new DN.ValueStreamTimeseriesToPrimitiveAdapter(e, r, n)
                        : new DN.ValueStreamAdapter(e, r, n);
                }
            ).subscription
        );
    };
    var QN = {},
        zN =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(QN, "__esModule", { value: !0 }), (QN.TopicsImpl = void 0);
    var KN = i({}),
        JN = yu.create("Session"),
        $N = (function (e) {
            function t(t, r) {
                var n = e.call(this, r) || this;
                return (n.internal = t), (n.UNSUBSCRIBE = t.getServiceLocator().obtain(gN.UNSUBSCRIBE)), (n.SUBSCRIBE = t.getServiceLocator().obtain(gN.SUBSCRIBE)), (n.streamRegistry = t.getStreamRegistry()), n;
            }
            return (
                zN(t, e),
                (t.prototype.unsubscribe = function (e) {
                    for (var t = this, r = [], n = 1; n < arguments.length; n++) r[n - 1] = arguments[n];
                    var o = arguments,
                        i = this.internal.getContext().parseSelector;
                    return new Promise(function (r, n) {
                        try {
                            var s = o.length > 1 ? i(Array.prototype.slice.call(o)) : i(e);
                            if (t.internal.checkConnected(n)) {
                                JN.debug("Unsubscribing", e),
                                    t.UNSUBSCRIBE.send(s, function (t) {
                                        t ? (JN.debug("Unsubscribe failed", e), n(t)) : (JN.debug("Unsubscribe complete", e), r());
                                    });
                            }
                        } catch (e) {
                            n(e);
                        }
                    });
                }),
                (t.prototype.fetchRequest = function () {
                    return new ON.FetchRequestImpl(this.internal);
                }),
                (t.prototype.select = function (e) {
                    for (var t = this, r = [], n = 1; n < arguments.length; n++) r[n - 1] = arguments[n];
                    var o = arguments,
                        i = this.internal.getContext().parseSelector;
                    return new Promise(function (r, n) {
                        JN.debug("Subscribing", e);
                        try {
                            var s = o.length > 1 ? i(Array.prototype.slice.call(o)) : i(e);
                            t.internal.checkConnected(n) &&
                                t.SUBSCRIBE.send(s, function (e) {
                                    e ? n(e) : r();
                                });
                        } catch (e) {
                            n(e);
                        }
                    });
                }),
                (t.prototype.addStream = function (e, t) {
                    if (2 !== arguments.length) throw new Error("Both topic selector and value type are needed");
                    if (!t || KN.DataTypes.get(t)) throw new Error("Data type required");
                    var r = this.internal.getContext().parseSelector(e);
                    return FN.create(this.streamRegistry, t, !1, r);
                }),
                (t.prototype.addFallbackStream = function (e) {
                    if (!e || KN.DataTypes.get(e)) throw new Error("Data type required");
                    return FN.create(this.streamRegistry, e, !0);
                }),
                t
            );
        })(wf.StreamImpl);
    QN.TopicsImpl = $N;
    var XN = {},
        ZN =
            (this && this.__extends) ||
            (function () {
                var e = function (t, r) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                        })(t, r);
                };
                return function (t, r) {
                    if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
                    function n() {
                        this.constructor = t;
                    }
                    e(t, r), (t.prototype = null === r ? Object.create(r) : ((n.prototype = r.prototype), new n()));
                };
            })();
    Object.defineProperty(XN, "__esModule", { value: !0 }), (XN.SessionImpl = void 0);
    var eA = t({}),
        tA = (function (e) {
            function t(t, r, n) {
                var o = this,
                    i = gf.Emitter.create();
                o = e.call(this, n, i) || this;
                var s = i.emitter(o);
                return (
                    n.on({
                        reconnect: function () {
                            s.emit("reconnect");
                        },
                        disconnect: function (e) {
                            s.emit("disconnect", e);
                        },
                        error: function (e) {
                            s.emit("error", e);
                        },
                        close: function (e) {
                            s.emit("close", e);
                        },
                    }),
                    (o.sessionId = t),
                    (o.sessionID = t.toString()),
                    void 0 !== $R.TopicControlImpl && (o.topicsFeature = new $R.TopicControlImpl(n)),
                    void 0 !== cE.ClientControlImpl && (o.clientsFeature = new cE.ClientControlImpl(n)),
                    void 0 !== eA.GatewayControlImpl && (o.gatewaysFeature = new eA.GatewayControlImpl(n)),
                    void 0 !== Qm.MessagesImpl && (o.messagesFeature = new Qm.MessagesImpl(n)),
                    void 0 !== mb.TopicNotificationsImpl && (o.notificationsFeature = new mb.TopicNotificationsImpl(n)),
                    void 0 !== mg.RemoteServersImpl && (o.remoteServersFeature = new mg.RemoteServersImpl(n)),
                    void 0 !== pI.SecurityImpl && (o.securityFeature = new pI.SecurityImpl(n)),
                    void 0 !== RI.SessionTreesImpl && (o.sessionTreesFeature = new RI.SessionTreesImpl(n)),
                    void 0 !== CR.TimeSeriesImpl && (o.timeseriesFeature = new CR.TimeSeriesImpl(n)),
                    void 0 !== bP.TopicUpdateImpl && (o.topicUpdateFeature = new bP.TopicUpdateImpl(n)),
                    void 0 !== ZP.TopicViewsImpl && (o.topicViewsFeature = new ZP.TopicViewsImpl(n)),
                    void 0 !== cm.LogRetrieval && (o.logRetrievalFeature = new cm.LogRetrieval(n)),
                    void 0 !== HT.MetricsImpl && (o.metricsFeature = new HT.MetricsImpl(n)),
                    void 0 !== Mg.LicenceUpdater && (o.licenceUpdaterFeature = new Mg.LicenceUpdater(n)),
                    void 0 !== KT.PingImpl && (o.pingFeature = new KT.PingImpl(n)),
                    (o.options = void 0 !== r ? r.with({ credentials: void 0 }) : {}),
                    o
                );
            }
            return (
                ZN(t, e),
                Object.defineProperty(t.prototype, "topics", {
                    get: function () {
                        if (void 0 === this.topicsFeature) {
                            if (void 0 === $R.TopicControlImpl) throw new Error("Topic Control feature has not been loaded");
                            this.topicsFeature = new $R.TopicControlImpl(this.internal);
                        }
                        return this.topicsFeature;
                    },
                    enumerable: !1,
                    configurable: !0,
                }),
                Object.defineProperty(t.prototype, "clients", {
                    get: function () {
                        if (void 0 === this.clientsFeature) {
                            if (void 0 === cE.ClientControlImpl) throw new Error("Client Control feature has not been loaded");
                            this.clientsFeature = new cE.ClientControlImpl(this.internal);
                        }
                        return this.clientsFeature;
                    },
                    enumerable: !1,
                    configurable: !0,
                }),
                Object.defineProperty(t.prototype, "messages", {
                    get: function () {
                        if (void 0 === this.messagesFeature) {
                            if (void 0 === Qm.MessagesImpl) throw new Error("Messages feature has not been loaded");
                            this.messagesFeature = new Qm.MessagesImpl(this.internal);
                        }
                        return this.messagesFeature;
                    },
                    enumerable: !1,
                    configurable: !0,
                }),
                Object.defineProperty(t.prototype, "notifications", {
                    get: function () {
                        if (void 0 === this.notificationsFeature) {
                            if (void 0 === mb.TopicNotificationsImpl) throw new Error("Topic Notifications feature has not been loaded");
                            this.notificationsFeature = new mb.TopicNotificationsImpl(this.internal);
                        }
                        return this.notificationsFeature;
                    },
                    enumerable: !1,
                    configurable: !0,
                }),
                Object.defineProperty(t.prototype, "security", {
                    get: function () {
                        if (void 0 === this.securityFeature) {
                            if (void 0 === pI.SecurityImpl) throw new Error("Security feature has not been loaded");
                            this.securityFeature = new pI.SecurityImpl(this.internal);
                        }
                        return this.securityFeature;
                    },
                    enumerable: !1,
                    configurable: !0,
                }),
                Object.defineProperty(t.prototype, "sessionTrees", {
                    get: function () {
                        if (void 0 === this.sessionTreesFeature) {
                            if (void 0 === RI.SessionTreesImpl) throw new Error("Session Trees feature has not been loaded");
                            this.sessionTreesFeature = new RI.SessionTreesImpl(this.internal);
                        }
                        return this.sessionTreesFeature;
                    },
                    enumerable: !1,
                    configurable: !0,
                }),
                Object.defineProperty(t.prototype, "timeseries", {
                    get: function () {
                        if (void 0 === this.timeseriesFeature) {
                            if (void 0 === CR.TimeSeriesImpl) throw new Error("Timeseries feature has not been loaded");
                            this.timeseriesFeature = new CR.TimeSeriesImpl(this.internal);
                        }
                        return this.timeseriesFeature;
                    },
                    enumerable: !1,
                    configurable: !0,
                }),
                Object.defineProperty(t.prototype, "topicUpdate", {
                    get: function () {
                        if (void 0 === this.topicUpdateFeature) {
                            if (void 0 === bP.TopicUpdateImpl) throw new Error("Topic Update feature has not been loaded");
                            this.topicUpdateFeature = new bP.TopicUpdateImpl(this.internal);
                        }
                        return this.topicUpdateFeature;
                    },
                    enumerable: !1,
                    configurable: !0,
                }),
                Object.defineProperty(t.prototype, "topicViews", {
                    get: function () {
                        if (void 0 === this.topicViewsFeature) {
                            if (void 0 === ZP.TopicViewsImpl) throw new Error("Topic Views feature has not been loaded");
                            this.topicViewsFeature = new ZP.TopicViewsImpl(this.internal);
                        }
                        return this.topicViewsFeature;
                    },
                    enumerable: !1,
                    configurable: !0,
                }),
                Object.defineProperty(t.prototype, "remoteServers", {
                    get: function () {
                        if (void 0 === this.remoteServersFeature) {
                            if (void 0 === mg.RemoteServersImpl) throw new Error("Remote Servers feature has not been loaded");
                            this.remoteServersFeature = new mg.RemoteServersImpl(this.internal);
                        }
                        return this.remoteServersFeature;
                    },
                    enumerable: !1,
                    configurable: !0,
                }),
                Object.defineProperty(t.prototype, "logRetrieval", {
                    get: function () {
                        if (void 0 === this.logRetrievalFeature) {
                            if (void 0 === cm.LogRetrieval) throw new Error("Log Retrieval feature has not been loaded");
                            this.logRetrievalFeature = new cm.LogRetrieval(this.internal);
                        }
                        return this.logRetrievalFeature;
                    },
                    enumerable: !1,
                    configurable: !0,
                }),
                Object.defineProperty(t.prototype, "metrics", {
                    get: function () {
                        if (void 0 === this.metricsFeature) {
                            if (void 0 === HT.MetricsImpl) throw new Error("Metrics feature has not been loaded");
                            this.metricsFeature = new HT.MetricsImpl(this.internal);
                        }
                        return this.metricsFeature;
                    },
                    enumerable: !1,
                    configurable: !0,
                }),
                Object.defineProperty(t.prototype, "licenceUpdater", {
                    get: function () {
                        if (void 0 === this.licenceUpdaterFeature) {
                            if (void 0 === Mg.LicenceUpdater) throw new Error("Licence Updater feature has not been loaded");
                            this.licenceUpdaterFeature = new Mg.LicenceUpdater(this.internal);
                        }
                        return this.licenceUpdaterFeature;
                    },
                    enumerable: !1,
                    configurable: !0,
                }),
                Object.defineProperty(t.prototype, "gateways", {
                    get: function () {
                        if (void 0 === this.gatewaysFeature) {
                            if (void 0 === eA.GatewayControlImpl) throw new Error("Gateway Control feature has not been loaded");
                            this.gatewaysFeature = new eA.GatewayControlImpl(this.internal);
                        }
                        return this.gatewaysFeature;
                    },
                    enumerable: !1,
                    configurable: !0,
                }),
                Object.defineProperty(t.prototype, "ping", {
                    get: function () {
                        if (void 0 === this.pingFeature) {
                            if (void 0 === KT.PingImpl) throw new Error("Ping feature has not been loaded");
                            this.pingFeature = new KT.PingImpl(this.internal);
                        }
                        return this.pingFeature;
                    },
                    enumerable: !1,
                    configurable: !0,
                }),
                (t.prototype.updateFeatures = function () {
                    this.internal.updateFeatures();
                }),
                (t.prototype.close = function () {
                    return this.internal.close(), this;
                }),
                (t.prototype.closeSession = function () {
                    var e = this;
                    return void 0 !== this.closeReason
                        ? Promise.resolve(this.closeReason)
                        : new Promise(function (t, r) {
                              e.on("close", function (r) {
                                  (e.closeReason = r), t(r);
                              }),
                                  e.close();
                          });
                }),
                (t.prototype.isClosed = function () {
                    var e = this.internal.getState();
                    return "closing" === e || "closed" === e;
                }),
                (t.prototype.isConnected = function () {
                    return this.internal.isConnected();
                }),
                (t.prototype.toString = function () {
                    return "Session<" + this.sessionId + " " + this.internal.getState() + ">";
                }),
                (t.prototype.getPrincipal = function () {
                    return this.options.principal || "";
                }),
                (t.prototype.lock = function (e, t) {
                    return void 0 === t && (t = Cf.SessionLockScope.UNLOCK_ON_SESSION_LOSS), this.internal.lock(e, t);
                }),
                (t.prototype.pingServer = function () {
                    return this.ping.pingServer();
                }),
                (t.prototype.getServerMaximumMessageSize = function () {
                    return this.internal.getServerMaximumMessageSize();
                }),
                (t.create = function (e, r) {
                    var n;
                    return (
                        void 0 !== r && (n = "string" == typeof r ? new _y.OptionsImpl({ host: r }) : new _y.OptionsImpl(r)),
                        new Promise(function (r, o) {
                            var i = e(n);
                            function s(e, o) {
                                i.off("connect", s), i.off("close", a), i.off("error", a), r(new t(e, o || n, i));
                            }
                            function a(e) {
                                i.off("connect", s), i.off("close", a), i.off("error", a), o(e);
                            }
                            i.on("connect", s), i.on("close", a), i.on("error", a), i.connect();
                        })
                    );
                }),
                t
            );
        })(QN.TopicsImpl);
    XN.SessionImpl = tA;
    var rA = {};
    Object.defineProperty(rA, "__esModule", { value: !0 }), (rA.updateConstraintFactory = void 0);
    var nA = i({}),
        oA = (function () {
            function e() {}
            return (
                (e.prototype.locked = function (e) {
                    return new Rb.Locked(e);
                }),
                (e.prototype.value = function (e, t) {
                    $c.requireNonNull(e, "value");
                    var r = void 0 !== t ? t : nA.DataTypes.getByValue(e);
                    if (void 0 === r) throw new Error("Datatype invalid or could not be inferred");
                    return new Rb.BinaryValue(r.toBytes(e));
                }),
                (e.prototype.noValue = function () {
                    return new Rb.NoValue();
                }),
                (e.prototype.noTopic = function () {
                    return new Rb.NoTopic();
                }),
                (e.prototype.jsonValue = function () {
                    return new Rb.PartialJSONImpl();
                }),
                e
            );
        })(),
        iA = Object.freeze(new oA());
    rA.updateConstraintFactory = iA;
    var sA = {},
        aA =
            (this && this.__read) ||
            function (e, t) {
                var r = "function" == typeof Symbol && e[Symbol.iterator];
                if (!r) return e;
                var n,
                    o,
                    i = r.call(e),
                    s = [];
                try {
                    for (; (void 0 === t || t-- > 0) && !(n = i.next()).done; ) s.push(n.value);
                } catch (e) {
                    o = { error: e };
                } finally {
                    try {
                        n && !n.done && (r = i.return) && r.call(i);
                    } finally {
                        if (o) throw o.error;
                    }
                }
                return s;
            },
        uA =
            (this && this.__spreadArray) ||
            function (e, t) {
                for (var r = 0, n = t.length, o = e.length; r < n; r++, o++) e[o] = t[r];
                return e;
            };
    Object.defineProperty(sA, "__esModule", { value: !0 }), (sA.TopicSelectors = void 0);
    var cA = (function () {
        function e() {
            (this.Prefix = qp.Prefix), (this.Type = qp.Type);
        }
        return (
            (e.prototype.parse = function (e) {
                for (var t = [], r = 1; r < arguments.length; r++) t[r - 1] = arguments[r];
                return vf.parseSelector.apply(void 0, uA([e], aA(t)));
            }),
            e
        );
    })();
    sA.TopicSelectors = cA;
    var lA = {};
    Object.defineProperty(lA, "__esModule", { value: !0 }),
        (lA.LogLevel = void 0),
        (function (e) {
            (e.trace = "trace"), (e.debug = "debug"), (e.info = "info"), (e.warn = "warn"), (e.error = "error"), (e.silent = "silent");
        })(lA.LogLevel || (lA.LogLevel = {}));
    var pA = {};
    return (
        function (e) {
            (function () {
                "use strict";
                Object.defineProperty(pA, "__esModule", { value: !0 }),
                    (pA.buffer = pA.TopicPermission = pA.StatusLevel = pA.LogLevel = pA.TopicCreationResult = pA.Type = pA.Prefix = pA.TopicNotificationType = pA.SessionLockScope = pA.ValidationType = pA.PathPermission = pA.GlobalPermission = pA.RemoteServerType = pA.ConnectionState = pA.ConnectionOption = pA.SessionEventType = pA.CloseReasonEnum = pA.locks = pA.clients = pA.errors = pA.topicUpdate = pA.topics = pA.datatypes = pA.newRemoteServerBuilder = pA.selectors = pA.newTopicMetricCollectorBuilder = pA.newSessionMetricCollectorBuilder = pA.newBranchMappingTableBuilder = pA.updateConstraints = pA.rolesToString = pA.stringToRoles = pA.escape = pA.connectShared = pA.connect = pA.log = pA.build = pA.version = void 0);
                var r = i({});
                yu.setLevel("warn"),
                    (pA.version = "6.9.0"),
                    (pA.build = "ab21e2b2"),
                    (pA.log = function (e) {
                        yu.setLevel(e);
                    }),
                    (pA.connect = function (e, t, r) {
                        return XN.SessionImpl.create(Vy.create(t, r), e);
                    }),
                    (pA.connectShared = function (e, t) {
                        return XN.SessionImpl.create(Vy.createShared(e, t), void 0);
                    }),
                    (pA.escape = function (e) {
                        return jv.escape(e);
                    }),
                    (pA.stringToRoles = function (e) {
                        return jv.stringToRoles(e);
                    }),
                    (pA.rolesToString = function (e) {
                        return jv.rolesToString(e);
                    }),
                    (pA.updateConstraints = function () {
                        return rA.updateConstraintFactory;
                    }),
                    (pA.newBranchMappingTableBuilder = function () {
                        return jv.newBranchMappingTableBuilder();
                    }),
                    (pA.newSessionMetricCollectorBuilder = function () {
                        return jv.newSessionMetricCollectorBuilder();
                    }),
                    (pA.newTopicMetricCollectorBuilder = function () {
                        return jv.newTopicMetricCollectorBuilder();
                    }),
                    (pA.selectors = new sA.TopicSelectors()),
                    (pA.newRemoteServerBuilder = function (e) {
                        return jv.newRemoteServerBuilder(pA.selectors, e);
                    }),
                    (pA.datatypes = r.DataTypes),
                    (pA.topics = Hu.topicsNamespace),
                    (pA.topicUpdate = $b.TopicUpdateNamespace),
                    (pA.errors = bu.ErrorReason),
                    (pA.clients = Y_.ClientControlOptions),
                    (pA.locks = Cf.SessionLockOptions),
                    Object.defineProperty(pA, "CloseReasonEnum", {
                        enumerable: !0,
                        get: function () {
                            return rd.CloseReasonEnum;
                        },
                    }),
                    Object.defineProperty(pA, "SessionEventType", {
                        enumerable: !0,
                        get: function () {
                            return uE.SessionEventType;
                        },
                    }),
                    Object.defineProperty(pA, "ConnectionOption", {
                        enumerable: !0,
                        get: function () {
                            return Hy.ConnectionOption;
                        },
                    }),
                    Object.defineProperty(pA, "ConnectionState", {
                        enumerable: !0,
                        get: function () {
                            return Hy.ConnectionState;
                        },
                    }),
                    Object.defineProperty(pA, "RemoteServerType", {
                        enumerable: !0,
                        get: function () {
                            return Hy.RemoteServerType;
                        },
                    }),
                    Object.defineProperty(pA, "GlobalPermission", {
                        enumerable: !0,
                        get: function () {
                            return $g.GlobalPermission;
                        },
                    }),
                    Object.defineProperty(pA, "PathPermission", {
                        enumerable: !0,
                        get: function () {
                            return $g.PathPermission;
                        },
                    }),
                    Object.defineProperty(pA, "ValidationType", {
                        enumerable: !0,
                        get: function () {
                            return $g.ValidationType;
                        },
                    }),
                    Object.defineProperty(pA, "SessionLockScope", {
                        enumerable: !0,
                        get: function () {
                            return Cf.SessionLockScope;
                        },
                    }),
                    Object.defineProperty(pA, "TopicNotificationType", {
                        enumerable: !0,
                        get: function () {
                            return nb.TopicNotificationType;
                        },
                    }),
                    Object.defineProperty(pA, "Prefix", {
                        enumerable: !0,
                        get: function () {
                            return qp.Prefix;
                        },
                    }),
                    Object.defineProperty(pA, "Type", {
                        enumerable: !0,
                        get: function () {
                            return qp.Type;
                        },
                    }),
                    Object.defineProperty(pA, "TopicCreationResult", {
                        enumerable: !0,
                        get: function () {
                            return $b.TopicCreationResult;
                        },
                    }),
                    Object.defineProperty(pA, "LogLevel", {
                        enumerable: !0,
                        get: function () {
                            return lA.LogLevel;
                        },
                    });
                var n = t({});
                Object.defineProperty(pA, "StatusLevel", {
                    enumerable: !0,
                    get: function () {
                        return n.StatusLevel;
                    },
                }),
                    (pA.TopicPermission = $g.PathPermission),
                    (pA.buffer = e);
            }.call(this));
        }.call(this, u({}).Buffer),
        pA
    );
});
